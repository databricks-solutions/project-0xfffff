var e,t,n,r,s,a,i,o,l,c,u,d,h,p,f,m,g,x,v,y,b,w,j,N,k,S,_,C,E,T,P,R,I,D,M,A,O,L,F,z,W,U,$,q,B,V,H,Q,K,G,Y,J,X,Z,ee,te,ne,re,se,ae,ie,oe,le,ce,ue,de,he,pe,fe,me,ge,xe,ve,ye,be,we,je,Ne,ke,Se,_e,Ce,Ee=Object.defineProperty,Te=e=>{throw TypeError(e)},Pe=(e,t,n)=>((e,t,n)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),Re=(e,t,n)=>t.has(e)||Te("Cannot "+n),Ie=(e,t,n)=>(Re(e,t,"read from private field"),n?n.call(e):t.get(e)),De=(e,t,n)=>t.has(e)?Te("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Me=(e,t,n,r)=>(Re(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ae=(e,t,n)=>(Re(e,t,"access private method"),n),Oe=(e,t,n,r)=>({set _(r){Me(e,t,r,n)},get _(){return Ie(e,t,r)}});function Le(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Fe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ze(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var We={exports:{}},Ue={},$e={exports:{}},qe={},Be=Symbol.for("react.element"),Ve=Symbol.for("react.portal"),He=Symbol.for("react.fragment"),Qe=Symbol.for("react.strict_mode"),Ke=Symbol.for("react.profiler"),Ge=Symbol.for("react.provider"),Ye=Symbol.for("react.context"),Je=Symbol.for("react.forward_ref"),Xe=Symbol.for("react.suspense"),Ze=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),tt=Symbol.iterator;var nt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rt=Object.assign,st={};function at(e,t,n){this.props=e,this.context=t,this.refs=st,this.updater=n||nt}function it(){}function ot(e,t,n){this.props=e,this.context=t,this.refs=st,this.updater=n||nt}at.prototype.isReactComponent={},at.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},at.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},it.prototype=at.prototype;var lt=ot.prototype=new it;lt.constructor=ot,rt(lt,at.prototype),lt.isPureReactComponent=!0;var ct=Array.isArray,ut=Object.prototype.hasOwnProperty,dt={current:null},ht={key:!0,ref:!0,__self:!0,__source:!0};function pt(e,t,n){var r,s={},a=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)ut.call(t,r)&&!ht.hasOwnProperty(r)&&(s[r]=t[r]);var o=arguments.length-2;if(1===o)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===s[r]&&(s[r]=o[r]);return{$$typeof:Be,type:e,key:a,ref:i,props:s,_owner:dt.current}}function ft(e){return"object"==typeof e&&null!==e&&e.$$typeof===Be}var mt=/\/+/g;function gt(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function xt(e,t,n,r,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var i=!1;if(null===e)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Be:case Ve:i=!0}}if(i)return s=s(i=e),e=""===r?"."+gt(i,0):r,ct(s)?(n="",null!=e&&(n=e.replace(mt,"$&/")+"/"),xt(s,t,n,"",function(e){return e})):null!=s&&(ft(s)&&(s=function(e,t){return{$$typeof:Be,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(mt,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=""===r?".":r+":",ct(e))for(var o=0;o<e.length;o++){var l=r+gt(a=e[o],o);i+=xt(a,t,n,l,s)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=tt&&e[tt]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(a=e.next()).done;)i+=xt(a=a.value,t,n,l=r+gt(a,o++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function vt(e,t,n){if(null==e)return e;var r=[],s=0;return xt(e,r,"","",function(e){return t.call(n,e,s++)}),r}function yt(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var bt={current:null},wt={transition:null},jt={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:wt,ReactCurrentOwner:dt};function Nt(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:vt,forEach:function(e,t,n){vt(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return vt(e,function(){t++}),t},toArray:function(e){return vt(e,function(e){return e})||[]},only:function(e){if(!ft(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},qe.Component=at,qe.Fragment=He,qe.Profiler=Ke,qe.PureComponent=ot,qe.StrictMode=Qe,qe.Suspense=Xe,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jt,qe.act=Nt,qe.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=rt({},e.props),s=e.key,a=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,i=dt.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)ut.call(t,l)&&!ht.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Be,type:e.type,key:s,ref:a,props:r,_owner:i}},qe.createContext=function(e){return(e={$$typeof:Ye,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Ge,_context:e},e.Consumer=e},qe.createElement=pt,qe.createFactory=function(e){var t=pt.bind(null,e);return t.type=e,t},qe.createRef=function(){return{current:null}},qe.forwardRef=function(e){return{$$typeof:Je,render:e}},qe.isValidElement=ft,qe.lazy=function(e){return{$$typeof:et,_payload:{_status:-1,_result:e},_init:yt}},qe.memo=function(e,t){return{$$typeof:Ze,type:e,compare:void 0===t?null:t}},qe.startTransition=function(e){var t=wt.transition;wt.transition={};try{e()}finally{wt.transition=t}},qe.unstable_act=Nt,qe.useCallback=function(e,t){return bt.current.useCallback(e,t)},qe.useContext=function(e){return bt.current.useContext(e)},qe.useDebugValue=function(){},qe.useDeferredValue=function(e){return bt.current.useDeferredValue(e)},qe.useEffect=function(e,t){return bt.current.useEffect(e,t)},qe.useId=function(){return bt.current.useId()},qe.useImperativeHandle=function(e,t,n){return bt.current.useImperativeHandle(e,t,n)},qe.useInsertionEffect=function(e,t){return bt.current.useInsertionEffect(e,t)},qe.useLayoutEffect=function(e,t){return bt.current.useLayoutEffect(e,t)},qe.useMemo=function(e,t){return bt.current.useMemo(e,t)},qe.useReducer=function(e,t,n){return bt.current.useReducer(e,t,n)},qe.useRef=function(e){return bt.current.useRef(e)},qe.useState=function(e){return bt.current.useState(e)},qe.useSyncExternalStore=function(e,t,n){return bt.current.useSyncExternalStore(e,t,n)},qe.useTransition=function(){return bt.current.useTransition()},qe.version="18.3.1",$e.exports=qe;var kt=$e.exports;const St=ze(kt),_t=Le({__proto__:null,default:St},[kt]);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Ct=kt,Et=Symbol.for("react.element"),Tt=Symbol.for("react.fragment"),Pt=Object.prototype.hasOwnProperty,Rt=Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,It={key:!0,ref:!0,__self:!0,__source:!0};function Dt(e,t,n){var r,s={},a=null,i=null;for(r in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(i=t.ref),t)Pt.call(t,r)&&!It.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:Et,type:e,key:a,ref:i,props:s,_owner:Rt.current}}Ue.Fragment=Tt,Ue.jsx=Dt,Ue.jsxs=Dt,We.exports=Ue;var Mt=We.exports,At={},Ot={exports:{}},Lt={},Ft={exports:{}},zt={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function b(e){if(m=!1,y(e),!f)if(null!==n(l))f=!0,I(w);else{var t=n(c);null!==t&&D(b,t.startTime-e)}}function w(t,s){f=!1,m&&(m=!1,x(S),S=-1),p=!0;var a=h;try{for(y(s),d=n(l);null!==d&&(!(d.expirationTime>s)||t&&!E());){var i=d.callback;if("function"==typeof i){d.callback=null,h=d.priorityLevel;var o=i(d.expirationTime<=s);s=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),y(s)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&D(b,g.startTime-s),u=!1}return u}finally{d=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,k=null,S=-1,_=5,C=-1;function E(){return!(e.unstable_now()-C<_)}function T(){if(null!==k){var t=e.unstable_now();C=t;var n=!0;try{n=k(!0,t)}finally{n?j():(N=!1,k=null)}}else N=!1}if("function"==typeof v)j=function(){v(T)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=T,j=function(){R.postMessage(null)}}else j=function(){g(T,0)};function I(e){k=e,N||(N=!0,j())}function D(t,n){S=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,I(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,a){var i=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?i+a:i:a=i,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:s,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(m?(x(S),S=-1):m=!0,D(b,a-i))):(r.sortIndex=o,t(l,r),f||p||(f=!0,I(w))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(zt),Ft.exports=zt;var Wt=Ft.exports,Ut=kt,$t=Wt;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function qt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bt=new Set,Vt={};function Ht(e,t){Qt(e,t),Qt(e+"Capture",t)}function Qt(e,t){for(Vt[e]=t,e=0;e<t.length;e++)Bt.add(t[e])}var Kt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Gt=Object.prototype.hasOwnProperty,Yt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jt={},Xt={};function Zt(e,t,n,r,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){en[e]=new Zt(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];en[t]=new Zt(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){en[e]=new Zt(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){en[e]=new Zt(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){en[e]=new Zt(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){en[e]=new Zt(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){en[e]=new Zt(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){en[e]=new Zt(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){en[e]=new Zt(e,5,!1,e.toLowerCase(),null,!1,!1)});var tn=/[\-:]([a-z])/g;function nn(e){return e[1].toUpperCase()}function rn(e,t,n,r){var s=en.hasOwnProperty(t)?en[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!Gt.call(Xt,e)||!Gt.call(Jt,e)&&(Yt.test(e)?Xt[e]=!0:(Jt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tn,nn);en[t]=new Zt(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tn,nn);en[t]=new Zt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tn,nn);en[t]=new Zt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){en[e]=new Zt(e,1,!1,e.toLowerCase(),null,!1,!1)}),en.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){en[e]=new Zt(e,1,!1,e.toLowerCase(),null,!0,!0)});var sn=Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,an=Symbol.for("react.element"),on=Symbol.for("react.portal"),ln=Symbol.for("react.fragment"),cn=Symbol.for("react.strict_mode"),un=Symbol.for("react.profiler"),dn=Symbol.for("react.provider"),hn=Symbol.for("react.context"),pn=Symbol.for("react.forward_ref"),fn=Symbol.for("react.suspense"),mn=Symbol.for("react.suspense_list"),gn=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),vn=Symbol.for("react.offscreen"),yn=Symbol.iterator;function bn(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=yn&&e[yn]||e["@@iterator"])?e:null}var wn,jn=Object.assign;function Nn(e){if(void 0===wn)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wn=t&&t[1]||""}return"\n"+wn+e}var kn=!1;function Sn(e,t){if(!e||kn)return"";kn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var s=c.stack.split("\n"),a=r.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{kn=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Nn(e):""}function _n(e){switch(e.tag){case 5:return Nn(e.type);case 16:return Nn("Lazy");case 13:return Nn("Suspense");case 19:return Nn("SuspenseList");case 0:case 2:case 15:return e=Sn(e.type,!1);case 11:return e=Sn(e.type.render,!1);case 1:return e=Sn(e.type,!0);default:return""}}function Cn(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ln:return"Fragment";case on:return"Portal";case un:return"Profiler";case cn:return"StrictMode";case fn:return"Suspense";case mn:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case hn:return(e.displayName||"Context")+".Consumer";case dn:return(e._context.displayName||"Context")+".Provider";case pn:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case gn:return null!==(t=e.displayName||null)?t:Cn(e.type)||"Memo";case xn:t=e._payload,e=e._init;try{return Cn(e(t))}catch(n){}}return null}function En(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cn(t);case 8:return t===cn?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Tn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Pn(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Rn(e){e._valueTracker||(e._valueTracker=function(e){var t=Pn(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function In(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Pn(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Dn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Mn(e,t){var n=t.checked;return jn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function An(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Tn(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function On(e,t){null!=(t=t.checked)&&rn(e,"checked",t,!1)}function Ln(e,t){On(e,t);var n=Tn(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?zn(e,t.type,n):t.hasOwnProperty("defaultValue")&&zn(e,t.type,Tn(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Fn(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function zn(e,t,n){"number"===t&&Dn(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wn=Array.isArray;function Un(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Tn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function $n(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(qt(91));return jn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qn(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(qt(92));if(Wn(n)){if(1<n.length)throw Error(qt(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Tn(n)}}function Bn(e,t){var n=Tn(t.value),r=Tn(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Vn(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function Hn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qn(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Hn(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Kn,Gn,Yn=(Gn=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Kn=Kn||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return Gn(e,t)})}:Gn);function Jn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zn=["Webkit","ms","Moz","O"];function er(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Xn.hasOwnProperty(e)&&Xn[e]?(""+t).trim():t+"px"}function tr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=er(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(Xn).forEach(function(e){Zn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xn[t]=Xn[e]})});var nr=jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rr(e,t){if(t){if(nr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(qt(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(qt(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(qt(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(qt(62))}}function sr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function ir(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var or=null,lr=null,cr=null;function ur(e){if(e=ro(e)){if("function"!=typeof or)throw Error(qt(280));var t=e.stateNode;t&&(t=ao(t),or(e.stateNode,e.type,t))}}function dr(e){lr?cr?cr.push(e):cr=[e]:lr=e}function hr(){if(lr){var e=lr,t=cr;if(cr=lr=null,ur(e),t)for(e=0;e<t.length;e++)ur(t[e])}}function pr(e,t){return e(t)}function fr(){}var mr=!1;function gr(e,t,n){if(mr)return e(t,n);mr=!0;try{return pr(e,t,n)}finally{mr=!1,(null!==lr||null!==cr)&&(fr(),hr())}}function xr(e,t){var n=e.stateNode;if(null===n)return null;var r=ao(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(qt(231,t,typeof n));return n}var vr=!1;if(Kt)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){vr=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch(Gn){vr=!1}function br(e,t,n,r,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var wr=!1,jr=null,Nr=!1,kr=null,Sr={onError:function(e){wr=!0,jr=e}};function _r(e,t,n,r,s,a,i,o,l){wr=!1,jr=null,br.apply(Sr,arguments)}function Cr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Er(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Tr(e){if(Cr(e)!==e)throw Error(qt(188))}function Pr(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Cr(e)))throw Error(qt(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Tr(s),e;if(a===r)return Tr(s),t;a=a.sibling}throw Error(qt(188))}if(n.return!==r.return)n=s,r=a;else{for(var i=!1,o=s.child;o;){if(o===n){i=!0,n=s,r=a;break}if(o===r){i=!0,r=s,n=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===n){i=!0,n=a,r=s;break}if(o===r){i=!0,r=a,n=s;break}o=o.sibling}if(!i)throw Error(qt(189))}}if(n.alternate!==r)throw Error(qt(190))}if(3!==n.tag)throw Error(qt(188));return n.stateNode.current===n?e:t}(e))?Rr(e):null}function Rr(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Rr(e);if(null!==t)return t;e=e.sibling}return null}var Ir=$t.unstable_scheduleCallback,Dr=$t.unstable_cancelCallback,Mr=$t.unstable_shouldYield,Ar=$t.unstable_requestPaint,Or=$t.unstable_now,Lr=$t.unstable_getCurrentPriorityLevel,Fr=$t.unstable_ImmediatePriority,zr=$t.unstable_UserBlockingPriority,Wr=$t.unstable_NormalPriority,Ur=$t.unstable_LowPriority,$r=$t.unstable_IdlePriority,qr=null,Br=null;var Vr=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(Hr(e)/Qr|0)|0},Hr=Math.log,Qr=Math.LN2;var Kr=64,Gr=4194304;function Yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Jr(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?r=Yr(o):0!==(a&=i)&&(r=Yr(a))}else 0!==(i=n&~s)?r=Yr(i):0!==a&&(r=Yr(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||16===s&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-Vr(t)),r|=e[n],t&=~s;return r}function Xr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Zr(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function es(){var e=Kr;return!(4194240&(Kr<<=1))&&(Kr=64),e}function ts(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ns(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-Vr(t)]=n}function rs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Vr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ss=0;function as(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var is,os,ls,cs,us,ds=!1,hs=[],ps=null,fs=null,ms=null,gs=new Map,xs=new Map,vs=[],ys="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bs(e,t){switch(e){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":gs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(t.pointerId)}}function ws(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=ro(t))&&os(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function js(e){var t=no(e.target);if(null!==t){var n=Cr(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Er(n)))return e.blockedOn=t,void us(e.priority,function(){ls(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ns(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ms(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ro(n))&&os(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ar=r,n.target.dispatchEvent(r),ar=null,t.shift()}return!0}function ks(e,t,n){Ns(e)&&n.delete(t)}function Ss(){ds=!1,null!==ps&&Ns(ps)&&(ps=null),null!==fs&&Ns(fs)&&(fs=null),null!==ms&&Ns(ms)&&(ms=null),gs.forEach(ks),xs.forEach(ks)}function _s(e,t){e.blockedOn===t&&(e.blockedOn=null,ds||(ds=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,Ss)))}function Cs(e){function t(t){return _s(t,e)}if(0<hs.length){_s(hs[0],e);for(var n=1;n<hs.length;n++){var r=hs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ps&&_s(ps,e),null!==fs&&_s(fs,e),null!==ms&&_s(ms,e),gs.forEach(t),xs.forEach(t),n=0;n<vs.length;n++)(r=vs[n]).blockedOn===e&&(r.blockedOn=null);for(;0<vs.length&&null===(n=vs[0]).blockedOn;)js(n),null===n.blockedOn&&vs.shift()}var Es=sn.ReactCurrentBatchConfig,Ts=!0;function Ps(e,t,n,r){var s=ss,a=Es.transition;Es.transition=null;try{ss=1,Is(e,t,n,r)}finally{ss=s,Es.transition=a}}function Rs(e,t,n,r){var s=ss,a=Es.transition;Es.transition=null;try{ss=4,Is(e,t,n,r)}finally{ss=s,Es.transition=a}}function Is(e,t,n,r){if(Ts){var s=Ms(e,t,n,r);if(null===s)Ei(e,t,r,Ds,n),bs(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return ps=ws(ps,e,t,n,r,s),!0;case"dragenter":return fs=ws(fs,e,t,n,r,s),!0;case"mouseover":return ms=ws(ms,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return gs.set(a,ws(gs.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,xs.set(a,ws(xs.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(bs(e,r),4&t&&-1<ys.indexOf(e)){for(;null!==s;){var a=ro(s);if(null!==a&&is(a),null===(a=Ms(e,t,n,r))&&Ei(e,t,r,Ds,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else Ei(e,t,r,null,n)}}var Ds=null;function Ms(e,t,n,r){if(Ds=null,null!==(e=no(e=ir(r))))if(null===(t=Cr(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Er(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ds=e,null}function As(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lr()){case Fr:return 1;case zr:return 4;case Wr:case Ur:return 16;case $r:return 536870912;default:return 16}default:return 16}}var Os=null,Ls=null,Fs=null;function zs(){if(Fs)return Fs;var e,t,n=Ls,r=n.length,s="value"in Os?Os.value:Os.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return Fs=s.slice(e,1<t?1-t:void 0)}function Ws(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Us(){return!0}function $s(){return!1}function qs(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Us:$s,this.isPropagationStopped=$s,this}return jn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),t}var Bs,Vs,Hs,Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=qs(Qs),Gs=jn({},Qs,{view:0,detail:0}),Ys=qs(Gs),Js=jn({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hs&&(Hs&&"mousemove"===e.type?(Bs=e.screenX-Hs.screenX,Vs=e.screenY-Hs.screenY):Vs=Bs=0,Hs=e),Bs)},movementY:function(e){return"movementY"in e?e.movementY:Vs}}),Xs=qs(Js),Zs=qs(jn({},Js,{dataTransfer:0})),ea=qs(jn({},Gs,{relatedTarget:0})),ta=qs(jn({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0})),na=jn({},Qs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ra=qs(na),sa=qs(jn({},Qs,{data:0})),aa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ia={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function la(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=oa[e])&&!!t[e]}function ca(){return la}var ua=jn({},Gs,{key:function(e){if(e.key){var t=aa[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ws(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ia[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(e){return"keypress"===e.type?Ws(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ws(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),da=qs(ua),ha=qs(jn({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),pa=qs(jn({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca})),fa=qs(jn({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0})),ma=jn({},Js,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ga=qs(ma),xa=[9,13,27,32],va=Kt&&"CompositionEvent"in window,ya=null;Kt&&"documentMode"in document&&(ya=document.documentMode);var ba=Kt&&"TextEvent"in window&&!ya,wa=Kt&&(!va||ya&&8<ya&&11>=ya),ja=String.fromCharCode(32),Na=!1;function ka(e,t){switch(e){case"keyup":return-1!==xa.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sa(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var _a=!1;var Ca={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ea(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ca[e.type]:"textarea"===t}function Ta(e,t,n,r){dr(r),0<(t=Pi(t,"onChange")).length&&(n=new Ks("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pa=null,Ra=null;function Ia(e){ji(e,0)}function Da(e){if(In(so(e)))return e}function Ma(e,t){if("change"===e)return t}var Aa=!1;if(Kt){var Oa;if(Kt){var La="oninput"in document;if(!La){var Fa=document.createElement("div");Fa.setAttribute("oninput","return;"),La="function"==typeof Fa.oninput}Oa=La}else Oa=!1;Aa=Oa&&(!document.documentMode||9<document.documentMode)}function za(){Pa&&(Pa.detachEvent("onpropertychange",Wa),Ra=Pa=null)}function Wa(e){if("value"===e.propertyName&&Da(Ra)){var t=[];Ta(t,Ra,e,ir(e)),gr(Ia,t)}}function Ua(e,t,n){"focusin"===e?(za(),Ra=n,(Pa=t).attachEvent("onpropertychange",Wa)):"focusout"===e&&za()}function $a(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Da(Ra)}function qa(e,t){if("click"===e)return Da(t)}function Ba(e,t){if("input"===e||"change"===e)return Da(t)}var Va="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Ha(e,t){if(Va(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gt.call(t,s)||!Va(e[s],t[s]))return!1}return!0}function Qa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ka(e,t){var n,r=Qa(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qa(r)}}function Ga(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Ga(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ya(){for(var e=window,t=Dn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Dn((e=t.contentWindow).document)}return t}function Ja(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Xa(e){var t=Ya(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ga(n.ownerDocument.documentElement,n)){if(null!==r&&Ja(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=void 0===r.end?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=Ka(n,a);var i=Ka(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Za=Kt&&"documentMode"in document&&11>=document.documentMode,ei=null,ti=null,ni=null,ri=!1;function si(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ri||null==ei||ei!==Dn(r)||("selectionStart"in(r=ei)&&Ja(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ni&&Ha(ni,r)||(ni=r,0<(r=Pi(ti,"onSelect")).length&&(t=new Ks("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ei)))}function ai(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ii={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionend:ai("Transition","TransitionEnd")},oi={},li={};function ci(e){if(oi[e])return oi[e];if(!ii[e])return e;var t,n=ii[e];for(t in n)if(n.hasOwnProperty(t)&&t in li)return oi[e]=n[t];return e}Kt&&(li=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);var ui=ci("animationend"),di=ci("animationiteration"),hi=ci("animationstart"),pi=ci("transitionend"),fi=new Map,mi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(e,t){fi.set(e,t),Ht(t,[e])}for(var xi=0;xi<mi.length;xi++){var vi=mi[xi];gi(vi.toLowerCase(),"on"+(vi[0].toUpperCase()+vi.slice(1)))}gi(ui,"onAnimationEnd"),gi(di,"onAnimationIteration"),gi(hi,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(pi,"onTransitionEnd"),Qt("onMouseEnter",["mouseout","mouseover"]),Qt("onMouseLeave",["mouseout","mouseover"]),Qt("onPointerEnter",["pointerout","pointerover"]),Qt("onPointerLeave",["pointerout","pointerover"]),Ht("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ht("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ht("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ht("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ht("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ht("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bi=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function wi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,i,o,l){if(_r.apply(this,arguments),wr){if(!wr)throw Error(qt(198));var c=jr;wr=!1,jr=null,Nr||(Nr=!0,kr=c)}}(r,t,void 0,e),e.currentTarget=null}function ji(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;wi(s,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;wi(s,o,c),a=l}}}if(Nr)throw e=kr,Nr=!1,kr=null,e}function Ni(e,t){var n=t[Zi];void 0===n&&(n=t[Zi]=new Set);var r=e+"__bubble";n.has(r)||(Ci(t,e,2,!1),n.add(r))}function ki(e,t,n){var r=0;t&&(r|=4),Ci(n,e,r,t)}var Si="_reactListening"+Math.random().toString(36).slice(2);function _i(e){if(!e[Si]){e[Si]=!0,Bt.forEach(function(t){"selectionchange"!==t&&(bi.has(t)||ki(t,!1,e),ki(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Si]||(t[Si]=!0,ki("selectionchange",!1,t))}}function Ci(e,t,n,r){switch(As(t)){case 1:var s=Ps;break;case 4:s=Rs;break;default:s=Is}n=s.bind(null,t,n,e),s=void 0,!vr||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ei(e,t,n,r,s){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=no(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}gr(function(){var r=a,s=ir(n),i=[];e:{var o=fi.get(e);if(void 0!==o){var l=Ks,c=e;switch(e){case"keypress":if(0===Ws(n))break e;case"keydown":case"keyup":l=da;break;case"focusin":c="focus",l=ea;break;case"focusout":c="blur",l=ea;break;case"beforeblur":case"afterblur":l=ea;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Xs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Zs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=pa;break;case ui:case di:case hi:l=ta;break;case pi:l=fa;break;case"scroll":l=Ys;break;case"wheel":l=ga;break;case"copy":case"cut":case"paste":l=ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=ha}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=xr(f,h))&&u.push(Ti(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ar||!(c=n.relatedTarget||n.fromElement)||!no(c)&&!c[Xi])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?no(c):null)&&(c!==(d=Cr(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=Xs,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=ha,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:so(l),p=null==c?o:so(c),(o=new u(m,f+"leave",l,n,s)).target=d,o.relatedTarget=p,m=null,no(s)===r&&((u=new u(h,f+"enter",c,n,s)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Ri(p))f++;for(p=0,m=h;m;m=Ri(m))p++;for(;0<f-p;)u=Ri(u),f--;for(;0<p-f;)h=Ri(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Ri(u),h=Ri(h)}u=null}else u=null;null!==l&&Ii(i,o,l,u,!1),null!==c&&null!==d&&Ii(i,d,c,u,!0)}if("select"===(l=(o=r?so(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Ma;else if(Ea(o))if(Aa)g=Ba;else{g=$a;var x=Ua}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=qa);switch(g&&(g=g(e,r))?Ta(i,g,n,s):(x&&x(e,o,r),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&zn(o,"number",o.value)),x=r?so(r):window,e){case"focusin":(Ea(x)||"true"===x.contentEditable)&&(ei=x,ti=r,ni=null);break;case"focusout":ni=ti=ei=null;break;case"mousedown":ri=!0;break;case"contextmenu":case"mouseup":case"dragend":ri=!1,si(i,n,s);break;case"selectionchange":if(Za)break;case"keydown":case"keyup":si(i,n,s)}var v;if(va)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else _a?ka(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(wa&&"ko"!==n.locale&&(_a||"onCompositionStart"!==y?"onCompositionEnd"===y&&_a&&(v=zs()):(Ls="value"in(Os=s)?Os.value:Os.textContent,_a=!0)),0<(x=Pi(r,y)).length&&(y=new sa(y,e,null,n,s),i.push({event:y,listeners:x}),v?y.data=v:null!==(v=Sa(n))&&(y.data=v))),(v=ba?function(e,t){switch(e){case"compositionend":return Sa(t);case"keypress":return 32!==t.which?null:(Na=!0,ja);case"textInput":return(e=t.data)===ja&&Na?null:e;default:return null}}(e,n):function(e,t){if(_a)return"compositionend"===e||!va&&ka(e,t)?(e=zs(),Fs=Ls=Os=null,_a=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wa&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Pi(r,"onBeforeInput")).length&&(s=new sa("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=v))}ji(i,t)})}function Ti(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pi(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=xr(e,n))&&r.unshift(Ti(e,a,s)),null!=(a=xr(e,t))&&r.push(Ti(e,a,s))),e=e.return}return r}function Ri(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ii(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=xr(n,a))&&i.unshift(Ti(n,l,o)):s||null!=(l=xr(n,a))&&i.push(Ti(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Di=/\r\n?/g,Mi=/\u0000|\uFFFD/g;function Ai(e){return("string"==typeof e?e:""+e).replace(Di,"\n").replace(Mi,"")}function Oi(e,t,n){if(t=Ai(t),Ai(e)!==t&&n)throw Error(qt(425))}function Li(){}var Fi=null,zi=null;function Wi(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ui="function"==typeof setTimeout?setTimeout:void 0,$i="function"==typeof clearTimeout?clearTimeout:void 0,qi="function"==typeof Promise?Promise:void 0,Bi="function"==typeof queueMicrotask?queueMicrotask:void 0!==qi?function(e){return qi.resolve(null).then(e).catch(Vi)}:Ui;function Vi(e){setTimeout(function(){throw e})}function Hi(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Cs(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Cs(t)}function Qi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Ki(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),Yi="__reactFiber$"+Gi,Ji="__reactProps$"+Gi,Xi="__reactContainer$"+Gi,Zi="__reactEvents$"+Gi,eo="__reactListeners$"+Gi,to="__reactHandles$"+Gi;function no(e){var t=e[Yi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xi]||n[Yi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ki(e);null!==e;){if(n=e[Yi])return n;e=Ki(e)}return t}n=(e=n).parentNode}return null}function ro(e){return!(e=e[Yi]||e[Xi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function so(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(qt(33))}function ao(e){return e[Ji]||null}var io=[],oo=-1;function lo(e){return{current:e}}function co(e){0>oo||(e.current=io[oo],io[oo]=null,oo--)}function uo(e,t){oo++,io[oo]=e.current,e.current=t}var ho={},po=lo(ho),fo=lo(!1),mo=ho;function go(e,t){var n=e.type.contextTypes;if(!n)return ho;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in n)a[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function xo(e){return null!=(e=e.childContextTypes)}function vo(){co(fo),co(po)}function yo(e,t,n){if(po.current!==ho)throw Error(qt(168));uo(po,t),uo(fo,n)}function bo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(qt(108,En(e)||"Unknown",s));return jn({},n,r)}function wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ho,mo=po.current,uo(po,e),uo(fo,fo.current),!0}function jo(e,t,n){var r=e.stateNode;if(!r)throw Error(qt(169));n?(e=bo(e,t,mo),r.__reactInternalMemoizedMergedChildContext=e,co(fo),co(po),uo(po,e)):co(fo),uo(fo,n)}var No=null,ko=!1,So=!1;function _o(e){null===No?No=[e]:No.push(e)}function Co(){if(!So&&null!==No){So=!0;var e=0,t=ss;try{var n=No;for(ss=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}No=null,ko=!1}catch(s){throw null!==No&&(No=No.slice(e+1)),Ir(Fr,Co),s}finally{ss=t,So=!1}}return null}var Eo=[],To=0,Po=null,Ro=0,Io=[],Do=0,Mo=null,Ao=1,Oo="";function Lo(e,t){Eo[To++]=Ro,Eo[To++]=Po,Po=e,Ro=t}function Fo(e,t,n){Io[Do++]=Ao,Io[Do++]=Oo,Io[Do++]=Mo,Mo=e;var r=Ao;e=Oo;var s=32-Vr(r)-1;r&=~(1<<s),n+=1;var a=32-Vr(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Ao=1<<32-Vr(t)+s|n<<s|r,Oo=a+e}else Ao=1<<a|n<<s|r,Oo=e}function zo(e){null!==e.return&&(Lo(e,1),Fo(e,1,0))}function Wo(e){for(;e===Po;)Po=Eo[--To],Eo[To]=null,Ro=Eo[--To],Eo[To]=null;for(;e===Mo;)Mo=Io[--Do],Io[Do]=null,Oo=Io[--Do],Io[Do]=null,Ao=Io[--Do],Io[Do]=null}var Uo=null,$o=null,qo=!1,Bo=null;function Vo(e,t){var n=mh(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ho(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Uo=e,$o=Qi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Uo=e,$o=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Mo?{id:Ao,overflow:Oo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=mh(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Uo=e,$o=null,!0);default:return!1}}function Qo(e){return!(!(1&e.mode)||128&e.flags)}function Ko(e){if(qo){var t=$o;if(t){var n=t;if(!Ho(e,t)){if(Qo(e))throw Error(qt(418));t=Qi(n.nextSibling);var r=Uo;t&&Ho(e,t)?Vo(r,n):(e.flags=-4097&e.flags|2,qo=!1,Uo=e)}}else{if(Qo(e))throw Error(qt(418));e.flags=-4097&e.flags|2,qo=!1,Uo=e}}}function Go(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Uo=e}function Yo(e){if(e!==Uo)return!1;if(!qo)return Go(e),qo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Wi(e.type,e.memoizedProps)),t&&(t=$o)){if(Qo(e))throw Jo(),Error(qt(418));for(;t;)Vo(e,t),t=Qi(t.nextSibling)}if(Go(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(qt(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){$o=Qi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}$o=null}}else $o=Uo?Qi(e.stateNode.nextSibling):null;return!0}function Jo(){for(var e=$o;e;)e=Qi(e.nextSibling)}function Xo(){$o=Uo=null,qo=!1}function Zo(e){null===Bo?Bo=[e]:Bo.push(e)}var el=sn.ReactCurrentBatchConfig;function tl(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(qt(309));var r=n.stateNode}if(!r)throw Error(qt(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(qt(284));if(!n._owner)throw Error(qt(290,e))}return e}function nl(e,t){throw e=Object.prototype.toString.call(t),Error(qt(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rl(e){return(0,e._init)(e._payload)}function sl(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=xh(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=wh(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===ln?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===xn&&rl(a)===t.type)?((r=s(t,n.props)).ref=tl(e,t,n),r.return=e,r):((r=vh(n.type,n.key,n.props,null,e.mode,r)).ref=tl(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jh(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=yh(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=wh(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case an:return(n=vh(t.type,t.key,t.props,null,e.mode,n)).ref=tl(e,null,t),n.return=e,n;case on:return(t=jh(t,e.mode,n)).return=e,t;case xn:return d(e,(0,t._init)(t._payload),n)}if(Wn(t)||bn(t))return(t=yh(t,e.mode,n,null)).return=e,t;nl(e,t)}return null}function h(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==s?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case an:return n.key===s?l(e,t,n,r):null;case on:return n.key===s?c(e,t,n,r):null;case xn:return h(e,t,(s=n._init)(n._payload),r)}if(Wn(n)||bn(n))return null!==s?null:u(e,t,n,r,null);nl(e,n)}return null}function p(e,t,n,r,s){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case an:return l(t,e=e.get(null===r.key?n:r.key)||null,r,s);case on:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case xn:return p(e,t,n,(0,r._init)(r._payload),s)}if(Wn(r)||bn(r))return u(t,e=e.get(n)||null,r,s,null);nl(t,r)}return null}return function o(l,c,u,f){if("object"==typeof u&&null!==u&&u.type===ln&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case an:e:{for(var m=u.key,g=c;null!==g;){if(g.key===m){if((m=u.type)===ln){if(7===g.tag){n(l,g.sibling),(c=s(g,u.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===xn&&rl(m)===g.type){n(l,g.sibling),(c=s(g,u.props)).ref=tl(l,g,u),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}u.type===ln?((c=yh(u.props.children,l.mode,f,u.key)).return=l,l=c):((f=vh(u.type,u.key,u.props,null,l.mode,f)).ref=tl(l,c,u),f.return=l,l=f)}return i(l);case on:e:{for(g=u.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=s(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=jh(u,l.mode,f)).return=l,l=c}return i(l);case xn:return o(l,c,(g=u._init)(u._payload),f)}if(Wn(u))return function(s,i,o,l){for(var c=null,u=null,f=i,m=i=0,g=null;null!==f&&m<o.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var x=h(s,f,o[m],l);if(null===x){null===f&&(f=g);break}e&&f&&null===x.alternate&&t(s,f),i=a(x,i,m),null===u?c=x:u.sibling=x,u=x,f=g}if(m===o.length)return n(s,f),qo&&Lo(s,m),c;if(null===f){for(;m<o.length;m++)null!==(f=d(s,o[m],l))&&(i=a(f,i,m),null===u?c=f:u.sibling=f,u=f);return qo&&Lo(s,m),c}for(f=r(s,f);m<o.length;m++)null!==(g=p(f,s,m,o[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach(function(e){return t(s,e)}),qo&&Lo(s,m),c}(l,c,u,f);if(bn(u))return function(s,i,o,l){var c=bn(o);if("function"!=typeof c)throw Error(qt(150));if(null==(o=c.call(o)))throw Error(qt(151));for(var u=c=null,f=i,m=i=0,g=null,x=o.next();null!==f&&!x.done;m++,x=o.next()){f.index>m?(g=f,f=null):g=f.sibling;var v=h(s,f,x.value,l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(s,f),i=a(v,i,m),null===u?c=v:u.sibling=v,u=v,f=g}if(x.done)return n(s,f),qo&&Lo(s,m),c;if(null===f){for(;!x.done;m++,x=o.next())null!==(x=d(s,x.value,l))&&(i=a(x,i,m),null===u?c=x:u.sibling=x,u=x);return qo&&Lo(s,m),c}for(f=r(s,f);!x.done;m++,x=o.next())null!==(x=p(f,s,m,x.value,l))&&(e&&null!==x.alternate&&f.delete(null===x.key?m:x.key),i=a(x,i,m),null===u?c=x:u.sibling=x,u=x);return e&&f.forEach(function(e){return t(s,e)}),qo&&Lo(s,m),c}(l,c,u,f);nl(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=s(c,u)).return=l,l=c):(n(l,c),(c=wh(u,l.mode,f)).return=l,l=c),i(l)):n(l,c)}}var al=sl(!0),il=sl(!1),ol=lo(null),ll=null,cl=null,ul=null;function dl(){ul=cl=ll=null}function hl(e){var t=ol.current;co(ol),e._currentValue=t}function pl(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fl(e,t){ll=e,ul=cl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ru=!0),e.firstContext=null)}function ml(e){var t=e._currentValue;if(ul!==e)if(e={context:e,memoizedValue:t,next:null},null===cl){if(null===ll)throw Error(qt(308));cl=e,ll.dependencies={lanes:0,firstContext:e}}else cl=cl.next=e;return t}var gl=null;function xl(e){null===gl?gl=[e]:gl.push(e)}function vl(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,xl(t)):(n.next=s.next,s.next=n),t.interleaved=n,yl(e,r)}function yl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var bl=!1;function wl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Nl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kl(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&hd){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,yl(e,n)}return null===(s=r.interleaved)?(t.next=t,xl(r)):(t.next=s.next,s.next=t),r.interleaved=t,yl(e,n)}function Sl(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,rs(e,n)}}function _l(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Cl(e,t,n,r){var s=e.updateQueue;bl=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=s.baseState;for(i=0,u=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=m.payload)?f.call(p,d,h):f))break e;d=jn({},d,h);break e;case 2:bl=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);bd|=i,e.lanes=i,e.memoizedState=d}}function El(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!=typeof s)throw Error(qt(191,s));s.call(r)}}}var Tl={},Pl=lo(Tl),Rl=lo(Tl),Il=lo(Tl);function Dl(e){if(e===Tl)throw Error(qt(174));return e}function Ml(e,t){switch(uo(Il,t),uo(Rl,e),uo(Pl,Tl),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qn(null,"");break;default:t=Qn(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}co(Pl),uo(Pl,t)}function Al(){co(Pl),co(Rl),co(Il)}function Ol(e){Dl(Il.current);var t=Dl(Pl.current),n=Qn(t,e.type);t!==n&&(uo(Rl,e),uo(Pl,n))}function Ll(e){Rl.current===e&&(co(Pl),co(Rl))}var Fl=lo(0);function zl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wl=[];function Ul(){for(var e=0;e<Wl.length;e++)Wl[e]._workInProgressVersionPrimary=null;Wl.length=0}var $l=sn.ReactCurrentDispatcher,ql=sn.ReactCurrentBatchConfig,Bl=0,Vl=null,Hl=null,Ql=null,Kl=!1,Gl=!1,Yl=0,Jl=0;function Xl(){throw Error(qt(321))}function Zl(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Va(e[n],t[n]))return!1;return!0}function ec(e,t,n,r,s,a){if(Bl=a,Vl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$l.current=null===e||null===e.memoizedState?Lc:Fc,e=n(r,s),Gl){a=0;do{if(Gl=!1,Yl=0,25<=a)throw Error(qt(301));a+=1,Ql=Hl=null,t.updateQueue=null,$l.current=zc,e=n(r,s)}while(Gl)}if($l.current=Oc,t=null!==Hl&&null!==Hl.next,Bl=0,Ql=Hl=Vl=null,Kl=!1,t)throw Error(qt(300));return e}function tc(){var e=0!==Yl;return Yl=0,e}function nc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ql?Vl.memoizedState=Ql=e:Ql=Ql.next=e,Ql}function rc(){if(null===Hl){var e=Vl.alternate;e=null!==e?e.memoizedState:null}else e=Hl.next;var t=null===Ql?Vl.memoizedState:Ql.next;if(null!==t)Ql=t,Hl=e;else{if(null===e)throw Error(qt(310));e={memoizedState:(Hl=e).memoizedState,baseState:Hl.baseState,baseQueue:Hl.baseQueue,queue:Hl.queue,next:null},null===Ql?Vl.memoizedState=Ql=e:Ql=Ql.next=e}return Ql}function sc(e,t){return"function"==typeof t?t(e):t}function ac(e){var t=rc(),n=t.queue;if(null===n)throw Error(qt(311));n.lastRenderedReducer=e;var r=Hl,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var i=s.next;s.next=a.next,a.next=i}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var o=i=null,l=null,c=a;do{var u=c.lane;if((Bl&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,i=r):l=l.next=d,Vl.lanes|=u,bd|=u}c=c.next}while(null!==c&&c!==a);null===l?i=r:l.next=o,Va(r,t.memoizedState)||(ru=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,Vl.lanes|=a,bd|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ic(e){var t=rc(),n=t.queue;if(null===n)throw Error(qt(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var i=s=s.next;do{a=e(a,i.action),i=i.next}while(i!==s);Va(a,t.memoizedState)||(ru=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function oc(){}function lc(e,t){var n=Vl,r=rc(),s=t(),a=!Va(r.memoizedState,s);if(a&&(r.memoizedState=s,ru=!0),r=r.queue,bc(dc.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Ql&&1&Ql.memoizedState.tag){if(n.flags|=2048,mc(9,uc.bind(null,n,r,s,t),void 0,null),null===pd)throw Error(qt(349));30&Bl||cc(n,t,s)}return s}function cc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Vl.updateQueue)?(t={lastEffect:null,stores:null},Vl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function uc(e,t,n,r){t.value=n,t.getSnapshot=r,hc(t)&&pc(e)}function dc(e,t,n){return n(function(){hc(t)&&pc(e)})}function hc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Va(e,n)}catch(r){return!0}}function pc(e){var t=yl(e,1);null!==t&&Wd(t,e,1,-1)}function fc(e){var t=nc();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:e},t.queue=e,e=e.dispatch=Ic.bind(null,Vl,e),[t.memoizedState,e]}function mc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Vl.updateQueue)?(t={lastEffect:null,stores:null},Vl.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function gc(){return rc().memoizedState}function xc(e,t,n,r){var s=nc();Vl.flags|=e,s.memoizedState=mc(1|t,n,void 0,void 0===r?null:r)}function vc(e,t,n,r){var s=rc();r=void 0===r?null:r;var a=void 0;if(null!==Hl){var i=Hl.memoizedState;if(a=i.destroy,null!==r&&Zl(r,i.deps))return void(s.memoizedState=mc(t,n,a,r))}Vl.flags|=e,s.memoizedState=mc(1|t,n,a,r)}function yc(e,t){return xc(8390656,8,e,t)}function bc(e,t){return vc(2048,8,e,t)}function wc(e,t){return vc(4,2,e,t)}function jc(e,t){return vc(4,4,e,t)}function Nc(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function kc(e,t,n){return n=null!=n?n.concat([e]):null,vc(4,4,Nc.bind(null,t,e),n)}function Sc(){}function _c(e,t){var n=rc();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Cc(e,t){var n=rc();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ec(e,t,n){return 21&Bl?(Va(n,t)||(n=es(),Vl.lanes|=n,bd|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ru=!0),e.memoizedState=n)}function Tc(e,t){var n=ss;ss=0!==n&&4>n?n:4,e(!0);var r=ql.transition;ql.transition={};try{e(!1),t()}finally{ss=n,ql.transition=r}}function Pc(){return rc().memoizedState}function Rc(e,t,n){var r=zd(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dc(e))Mc(t,n);else if(null!==(n=vl(e,t,n,r))){Wd(n,e,r,Fd()),Ac(n,t,r)}}function Ic(e,t,n){var r=zd(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dc(e))Mc(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,Va(o,i)){var l=t.interleaved;return null===l?(s.next=s,xl(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=vl(e,t,s,r))&&(Wd(n,e,r,s=Fd()),Ac(n,t,r))}}function Dc(e){var t=e.alternate;return e===Vl||null!==t&&t===Vl}function Mc(e,t){Gl=Kl=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ac(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,rs(e,n)}}var Oc={readContext:ml,useCallback:Xl,useContext:Xl,useEffect:Xl,useImperativeHandle:Xl,useInsertionEffect:Xl,useLayoutEffect:Xl,useMemo:Xl,useReducer:Xl,useRef:Xl,useState:Xl,useDebugValue:Xl,useDeferredValue:Xl,useTransition:Xl,useMutableSource:Xl,useSyncExternalStore:Xl,useId:Xl,unstable_isNewReconciler:!1},Lc={readContext:ml,useCallback:function(e,t){return nc().memoizedState=[e,void 0===t?null:t],e},useContext:ml,useEffect:yc,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,xc(4194308,4,Nc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xc(4194308,4,e,t)},useInsertionEffect:function(e,t){return xc(4,2,e,t)},useMemo:function(e,t){var n=nc();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=nc();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Rc.bind(null,Vl,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},nc().memoizedState=e},useState:fc,useDebugValue:Sc,useDeferredValue:function(e){return nc().memoizedState=e},useTransition:function(){var e=fc(!1),t=e[0];return e=Tc.bind(null,e[1]),nc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Vl,s=nc();if(qo){if(void 0===n)throw Error(qt(407));n=n()}else{if(n=t(),null===pd)throw Error(qt(349));30&Bl||cc(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,yc(dc.bind(null,r,a,e),[e]),r.flags|=2048,mc(9,uc.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=nc(),t=pd.identifierPrefix;if(qo){var n=Oo;t=":"+t+"R"+(n=(Ao&~(1<<32-Vr(Ao)-1)).toString(32)+n),0<(n=Yl++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Jl++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Fc={readContext:ml,useCallback:_c,useContext:ml,useEffect:bc,useImperativeHandle:kc,useInsertionEffect:wc,useLayoutEffect:jc,useMemo:Cc,useReducer:ac,useRef:gc,useState:function(){return ac(sc)},useDebugValue:Sc,useDeferredValue:function(e){return Ec(rc(),Hl.memoizedState,e)},useTransition:function(){return[ac(sc)[0],rc().memoizedState]},useMutableSource:oc,useSyncExternalStore:lc,useId:Pc,unstable_isNewReconciler:!1},zc={readContext:ml,useCallback:_c,useContext:ml,useEffect:bc,useImperativeHandle:kc,useInsertionEffect:wc,useLayoutEffect:jc,useMemo:Cc,useReducer:ic,useRef:gc,useState:function(){return ic(sc)},useDebugValue:Sc,useDeferredValue:function(e){var t=rc();return null===Hl?t.memoizedState=e:Ec(t,Hl.memoizedState,e)},useTransition:function(){return[ic(sc)[0],rc().memoizedState]},useMutableSource:oc,useSyncExternalStore:lc,useId:Pc,unstable_isNewReconciler:!1};function Wc(e,t){if(e&&e.defaultProps){for(var n in t=jn({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Uc(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:jn({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var $c={isMounted:function(e){return!!(e=e._reactInternals)&&Cr(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Fd(),s=zd(e),a=Nl(r,s);a.payload=t,null!=n&&(a.callback=n),null!==(t=kl(e,a,s))&&(Wd(t,e,s,r),Sl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Fd(),s=zd(e),a=Nl(r,s);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=kl(e,a,s))&&(Wd(t,e,s,r),Sl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fd(),r=zd(e),s=Nl(n,r);s.tag=2,null!=t&&(s.callback=t),null!==(t=kl(e,s,r))&&(Wd(t,e,r,n),Sl(t,e,r))}};function qc(e,t,n,r,s,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!Ha(n,r)||!Ha(s,a))}function Bc(e,t,n){var r=!1,s=ho,a=t.contextType;return"object"==typeof a&&null!==a?a=ml(a):(s=xo(t)?mo:po.current,a=(r=null!=(r=t.contextTypes))?go(e,s):ho),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=$c,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Vc(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$c.enqueueReplaceState(t,t.state,null)}function Hc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},wl(e);var a=t.contextType;"object"==typeof a&&null!==a?s.context=ml(a):(a=xo(t)?mo:po.current,s.context=go(e,a)),s.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Uc(e,t,a,n),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&$c.enqueueReplaceState(s,s.state,null),Cl(e,n,s,r),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}function Qc(e,t){try{var n="",r=t;do{n+=_n(r),r=r.return}while(r);var s=n}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function Kc(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function Gc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Yc="function"==typeof WeakMap?WeakMap:Map;function Jc(e,t,n){(n=Nl(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ed||(Ed=!0,Td=r),Gc(0,t)},n}function Xc(e,t,n){(n=Nl(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Gc(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){Gc(0,t),"function"!=typeof r&&(null===Pd?Pd=new Set([this]):Pd.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Zc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Yc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=ch.bind(null,e,t,n),t.then(e,e))}function eu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function tu(e,t,n,r,s){return 1&e.mode?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Nl(-1,1)).tag=2,kl(n,t,1))),n.lanes|=1),e)}var nu=sn.ReactCurrentOwner,ru=!1;function su(e,t,n,r){t.child=null===e?il(t,null,n,r):al(t,e.child,n,r)}function au(e,t,n,r,s){n=n.render;var a=t.ref;return fl(t,s),r=ec(e,t,n,r,a,s),n=tc(),null===e||ru?(qo&&n&&zo(t),t.flags|=1,su(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Eu(e,t,s))}function iu(e,t,n,r,s){if(null===e){var a=n.type;return"function"!=typeof a||gh(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=vh(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ou(e,t,a,r,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:Ha)(i,r)&&e.ref===t.ref)return Eu(e,t,s)}return t.flags|=1,(e=xh(a,r)).ref=t.ref,e.return=t,t.child=e}function ou(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(Ha(a,r)&&e.ref===t.ref){if(ru=!1,t.pendingProps=r=a,0===(e.lanes&s))return t.lanes=e.lanes,Eu(e,t,s);131072&e.flags&&(ru=!0)}}return uu(e,t,n,r,s)}function lu(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,uo(xd,gd),gd|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,uo(xd,gd),gd|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},uo(xd,gd),gd|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,uo(xd,gd),gd|=r;return su(e,t,s,n),t.child}function cu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function uu(e,t,n,r,s){var a=xo(n)?mo:po.current;return a=go(t,a),fl(t,s),n=ec(e,t,n,r,a,s),r=tc(),null===e||ru?(qo&&r&&zo(t),t.flags|=1,su(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Eu(e,t,s))}function du(e,t,n,r,s){if(xo(n)){var a=!0;wo(t)}else a=!1;if(fl(t,s),null===t.stateNode)Cu(e,t),Bc(t,n,r),Hc(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=ml(c):c=go(t,c=xo(n)?mo:po.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==r||l!==c)&&Vc(t,i,r,c),bl=!1;var h=t.memoizedState;i.state=h,Cl(t,r,i,s),l=t.memoizedState,o!==r||h!==l||fo.current||bl?("function"==typeof u&&(Uc(t,n,u,r),l=t.memoizedState),(o=bl||qc(t,n,o,r,h,l,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,jl(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Wc(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"==typeof(l=n.contextType)&&null!==l?l=ml(l):l=go(t,l=xo(n)?mo:po.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==d||h!==l)&&Vc(t,i,r,l),bl=!1,h=t.memoizedState,i.state=h,Cl(t,r,i,s);var f=t.memoizedState;o!==d||h!==f||fo.current||bl?("function"==typeof p&&(Uc(t,n,p,r),f=t.memoizedState),(c=bl||qc(t,n,c,r,h,f,l)||!1)?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=c):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return hu(e,t,n,r,a,s)}function hu(e,t,n,r,s,a){cu(e,t);var i=!!(128&t.flags);if(!r&&!i)return s&&jo(t,n,!1),Eu(e,t,a);r=t.stateNode,nu.current=t;var o=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=al(t,e.child,null,a),t.child=al(t,null,o,a)):su(e,t,o,a),t.memoizedState=r.state,s&&jo(t,n,!0),t.child}function pu(e){var t=e.stateNode;t.pendingContext?yo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yo(0,t.context,!1),Ml(e,t.containerInfo)}function fu(e,t,n,r,s){return Xo(),Zo(s),t.flags|=256,su(e,t,n,r),t.child}var mu,gu,xu,vu,yu={dehydrated:null,treeContext:null,retryLane:0};function bu(e){return{baseLanes:e,cachePool:null,transitions:null}}function wu(e,t,n){var r,s=t.pendingProps,a=Fl.current,i=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&a)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),uo(Fl,1&a),null===e)return Ko(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},1&s||null===i?i=bh(o,s,0,null):(i.childLanes=0,i.pendingProps=o),e=yh(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=bu(n),t.memoizedState=yu,e):ju(t,o));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,i){if(n)return 256&t.flags?(t.flags&=-257,Nu(e,t,i,r=Kc(Error(qt(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=bh({mode:"visible",children:r.children},s,0,null),(a=yh(a,s,i,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,1&t.mode&&al(t,e.child,null,i),t.child.memoizedState=bu(i),t.memoizedState=yu,a);if(!(1&t.mode))return Nu(e,t,i,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var o=r.dgst;return r=o,Nu(e,t,i,r=Kc(a=Error(qt(419)),r,void 0))}if(o=0!==(i&e.childLanes),ru||o){if(null!==(r=pd)){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|i))?0:s)&&s!==a.retryLane&&(a.retryLane=s,yl(e,s),Wd(r,e,s,-1))}return Zd(),Nu(e,t,i,r=Kc(Error(qt(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=dh.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,$o=Qi(s.nextSibling),Uo=t,qo=!0,Bo=null,null!==e&&(Io[Do++]=Ao,Io[Do++]=Oo,Io[Do++]=Mo,Ao=e.id,Oo=e.overflow,Mo=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,o,s,r,a,n);if(i){i=s.fallback,o=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:s.children};return 1&o||t.child===a?(s=xh(a,l)).subtreeFlags=14680064&a.subtreeFlags:((s=t.child).childLanes=0,s.pendingProps=l,t.deletions=null),null!==r?i=xh(r,i):(i=yh(i,o,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=null===(o=e.child.memoizedState)?bu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=yu,s}return e=(i=e.child).sibling,s=xh(i,{mode:"visible",children:s.children}),!(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function ju(e,t){return(t=bh({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Nu(e,t,n,r){return null!==r&&Zo(r),al(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ku(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),pl(e.return,t,n)}function Su(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function _u(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(su(e,t,r.children,n),2&(r=Fl.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ku(e,n,t);else if(19===e.tag)ku(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(uo(Fl,r),1&t.mode)switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===zl(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Su(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===zl(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Su(t,!0,n,null,a);break;case"together":Su(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Cu(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Eu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),bd|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(qt(153));if(null!==t.child){for(n=xh(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xh(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Tu(e,t){if(!qo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ru(e,t,n){var r=t.pendingProps;switch(Wo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pu(t),null;case 1:case 17:return xo(t.type)&&vo(),Pu(t),null;case 3:return r=t.stateNode,Al(),co(fo),co(po),Ul(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Yo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Bo&&(Bd(Bo),Bo=null))),gu(e,t),Pu(t),null;case 5:Ll(t);var s=Dl(Il.current);if(n=t.type,null!==e&&null!=t.stateNode)xu(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(qt(166));return Pu(t),null}if(e=Dl(Pl.current),Yo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Yi]=t,r[Ji]=a,e=!!(1&t.mode),n){case"dialog":Ni("cancel",r),Ni("close",r);break;case"iframe":case"object":case"embed":Ni("load",r);break;case"video":case"audio":for(s=0;s<yi.length;s++)Ni(yi[s],r);break;case"source":Ni("error",r);break;case"img":case"image":case"link":Ni("error",r),Ni("load",r);break;case"details":Ni("toggle",r);break;case"input":An(r,a),Ni("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ni("invalid",r);break;case"textarea":qn(r,a),Ni("invalid",r)}for(var i in rr(n,a),s=null,a)if(a.hasOwnProperty(i)){var o=a[i];"children"===i?"string"==typeof o?r.textContent!==o&&(!0!==a.suppressHydrationWarning&&Oi(r.textContent,o,e),s=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==a.suppressHydrationWarning&&Oi(r.textContent,o,e),s=["children",""+o]):Vt.hasOwnProperty(i)&&null!=o&&"onScroll"===i&&Ni("scroll",r)}switch(n){case"input":Rn(r),Fn(r,a,!0);break;case"textarea":Rn(r),Vn(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Li)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{i=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=Hn(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),"select"===n&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Yi]=t,e[Ji]=r,mu(e,t,!1,!1),t.stateNode=e;e:{switch(i=sr(n,r),n){case"dialog":Ni("cancel",e),Ni("close",e),s=r;break;case"iframe":case"object":case"embed":Ni("load",e),s=r;break;case"video":case"audio":for(s=0;s<yi.length;s++)Ni(yi[s],e);s=r;break;case"source":Ni("error",e),s=r;break;case"img":case"image":case"link":Ni("error",e),Ni("load",e),s=r;break;case"details":Ni("toggle",e),s=r;break;case"input":An(e,r),s=Mn(e,r),Ni("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=jn({},r,{value:void 0}),Ni("invalid",e);break;case"textarea":qn(e,r),s=$n(e,r),Ni("invalid",e)}for(a in rr(n,s),o=s)if(o.hasOwnProperty(a)){var l=o[a];"style"===a?tr(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&Yn(e,l):"children"===a?"string"==typeof l?("textarea"!==n||""!==l)&&Jn(e,l):"number"==typeof l&&Jn(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Vt.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Ni("scroll",e):null!=l&&rn(e,a,l,i))}switch(n){case"input":Rn(e),Fn(e,r,!1);break;case"textarea":Rn(e),Vn(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Tn(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?Un(e,!!r.multiple,a,!1):null!=r.defaultValue&&Un(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Li)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Pu(t),null;case 6:if(e&&null!=t.stateNode)vu(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(qt(166));if(n=Dl(Il.current),Dl(Pl.current),Yo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Yi]=t,(a=r.nodeValue!==n)&&null!==(e=Uo))switch(e.tag){case 3:Oi(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Oi(r.nodeValue,n,!!(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Yi]=t,t.stateNode=r}return Pu(t),null;case 13:if(co(Fl),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(qo&&null!==$o&&1&t.mode&&!(128&t.flags))Jo(),Xo(),t.flags|=98560,a=!1;else if(a=Yo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(qt(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(qt(317));a[Yi]=t}else Xo(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Pu(t),a=!1}else null!==Bo&&(Bd(Bo),Bo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Fl.current?0===vd&&(vd=3):Zd())),null!==t.updateQueue&&(t.flags|=4),Pu(t),null);case 4:return Al(),gu(e,t),null===e&&_i(t.stateNode.containerInfo),Pu(t),null;case 10:return hl(t.type._context),Pu(t),null;case 19:if(co(Fl),null===(a=t.memoizedState))return Pu(t),null;if(r=!!(128&t.flags),null===(i=a.rendering))if(r)Tu(a,!1);else{if(0!==vd||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=zl(e))){for(t.flags|=128,Tu(a,!1),null!==(r=i.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(i=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return uo(Fl,1&Fl.current|2),t.child}e=e.sibling}null!==a.tail&&Or()>_d&&(t.flags|=128,r=!0,Tu(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=zl(i))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Tu(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!qo)return Pu(t),null}else 2*Or()-a.renderingStartTime>_d&&1073741824!==n&&(t.flags|=128,r=!0,Tu(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(n=a.last)?n.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Or(),t.sibling=null,n=Fl.current,uo(Fl,r?1&n|2:1&n),t):(Pu(t),null);case 22:case 23:return Gd(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&gd)&&(Pu(t),6&t.subtreeFlags&&(t.flags|=8192)):Pu(t),null;case 24:case 25:return null}throw Error(qt(156,t.tag))}function Iu(e,t){switch(Wo(t),t.tag){case 1:return xo(t.type)&&vo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Al(),co(fo),co(po),Ul(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ll(t),null;case 13:if(co(Fl),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(qt(340));Xo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return co(Fl),null;case 4:return Al(),null;case 10:return hl(t.type._context),null;case 22:case 23:return Gd(),null;default:return null}}mu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},gu=function(){},xu=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Dl(Pl.current);var a,i=null;switch(n){case"input":s=Mn(e,s),r=Mn(e,r),i=[];break;case"select":s=jn({},s,{value:void 0}),r=jn({},r,{value:void 0}),i=[];break;case"textarea":s=$n(e,s),r=$n(e,r),i=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=Li)}for(c in rr(n,r),n=null,s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(Vt.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=s?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(i=i||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(i=i||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(Vt.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ni("scroll",e),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},vu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Du=!1,Mu=!1,Au="function"==typeof WeakSet?WeakSet:Set,Ou=null;function Lu(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){lh(e,t,r)}else n.current=null}function Fu(e,t,n){try{n()}catch(r){lh(e,t,r)}}var zu=!1;function Wu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&Fu(t,n,a)}s=s.next}while(s!==r)}}function Uu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $u(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function qu(e){var t=e.alternate;null!==t&&(e.alternate=null,qu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Yi],delete t[Ji],delete t[Zi],delete t[eo],delete t[to])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bu(e){return 5===e.tag||3===e.tag||4===e.tag}function Vu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Bu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Hu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Li));else if(4!==r&&null!==(e=e.child))for(Hu(e,t,n),e=e.sibling;null!==e;)Hu(e,t,n),e=e.sibling}function Qu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Qu(e,t,n),e=e.sibling;null!==e;)Qu(e,t,n),e=e.sibling}var Ku=null,Gu=!1;function Yu(e,t,n){for(n=n.child;null!==n;)Ju(e,t,n),n=n.sibling}function Ju(e,t,n){if(Br&&"function"==typeof Br.onCommitFiberUnmount)try{Br.onCommitFiberUnmount(qr,n)}catch(o){}switch(n.tag){case 5:Mu||Lu(n,t);case 6:var r=Ku,s=Gu;Ku=null,Yu(e,t,n),Gu=s,null!==(Ku=r)&&(Gu?(e=Ku,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Ku.removeChild(n.stateNode));break;case 18:null!==Ku&&(Gu?(e=Ku,n=n.stateNode,8===e.nodeType?Hi(e.parentNode,n):1===e.nodeType&&Hi(e,n),Cs(e)):Hi(Ku,n.stateNode));break;case 4:r=Ku,s=Gu,Ku=n.stateNode.containerInfo,Gu=!0,Yu(e,t,n),Ku=r,Gu=s;break;case 0:case 11:case 14:case 15:if(!Mu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(2&a||4&a)&&Fu(n,t,i),s=s.next}while(s!==r)}Yu(e,t,n);break;case 1:if(!Mu&&(Lu(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){lh(n,t,o)}Yu(e,t,n);break;case 21:Yu(e,t,n);break;case 22:1&n.mode?(Mu=(r=Mu)||null!==n.memoizedState,Yu(e,t,n),Mu=r):Yu(e,t,n);break;default:Yu(e,t,n)}}function Xu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Au),t.forEach(function(t){var r=hh.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function Zu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:Ku=o.stateNode,Gu=!1;break e;case 3:case 4:Ku=o.stateNode.containerInfo,Gu=!0;break e}o=o.return}if(null===Ku)throw Error(qt(160));Ju(a,i,s),Ku=null,Gu=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(c){lh(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ed(t,e),t=t.sibling}function ed(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zu(t,e),td(e),4&r){try{Wu(3,e,e.return),Uu(3,e)}catch(m){lh(e,e.return,m)}try{Wu(5,e,e.return)}catch(m){lh(e,e.return,m)}}break;case 1:Zu(t,e),td(e),512&r&&null!==n&&Lu(n,n.return);break;case 5:if(Zu(t,e),td(e),512&r&&null!==n&&Lu(n,n.return),32&e.flags){var s=e.stateNode;try{Jn(s,"")}catch(m){lh(e,e.return,m)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,i=null!==n?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===a.type&&null!=a.name&&On(s,a),sr(o,i);var c=sr(o,a);for(i=0;i<l.length;i+=2){var u=l[i],d=l[i+1];"style"===u?tr(s,d):"dangerouslySetInnerHTML"===u?Yn(s,d):"children"===u?Jn(s,d):rn(s,u,d,c)}switch(o){case"input":Ln(s,a);break;case"textarea":Bn(s,a);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?Un(s,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?Un(s,!!a.multiple,a.defaultValue,!0):Un(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ji]=a}catch(m){lh(e,e.return,m)}}break;case 6:if(Zu(t,e),td(e),4&r){if(null===e.stateNode)throw Error(qt(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(m){lh(e,e.return,m)}}break;case 3:if(Zu(t,e),td(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Cs(t.containerInfo)}catch(m){lh(e,e.return,m)}break;case 4:default:Zu(t,e),td(e);break;case 13:Zu(t,e),td(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Sd=Or())),4&r&&Xu(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Mu=(c=Mu)||u,Zu(t,e),Mu=c):Zu(t,e),td(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Ou=e,u=e.child;null!==u;){for(d=Ou=u;null!==Ou;){switch(p=(h=Ou).child,h.tag){case 0:case 11:case 14:case 15:Wu(4,h,h.return);break;case 1:Lu(h,h.return);var f=h.stateNode;if("function"==typeof f.componentWillUnmount){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){lh(r,n,m)}}break;case 5:Lu(h,h.return);break;case 22:if(null!==h.memoizedState){ad(d);continue}}null!==p?(p.return=h,Ou=p):ad(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{s=d.stateNode,c?"function"==typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(o=d.stateNode,i=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=er("display",i))}catch(m){lh(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){lh(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Zu(t,e),td(e),4&r&&Xu(e);case 21:}}function td(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Bu(n)){var r=n;break e}n=n.return}throw Error(qt(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(Jn(s,""),r.flags&=-33),Qu(e,Vu(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;Hu(e,Vu(e),a);break;default:throw Error(qt(161))}}catch(i){lh(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function nd(e,t,n){Ou=e,rd(e)}function rd(e,t,n){for(var r=!!(1&e.mode);null!==Ou;){var s=Ou,a=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Du;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Mu;o=Du;var c=Mu;if(Du=i,(Mu=l)&&!c)for(Ou=s;null!==Ou;)l=(i=Ou).child,22===i.tag&&null!==i.memoizedState?id(s):null!==l?(l.return=i,Ou=l):id(s);for(;null!==a;)Ou=a,rd(a),a=a.sibling;Ou=s,Du=o,Mu=c}sd(e)}else 8772&s.subtreeFlags&&null!==a?(a.return=s,Ou=a):sd(e)}}function sd(e){for(;null!==Ou;){var t=Ou;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Mu||Uu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Mu)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Wc(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&El(t,a,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}El(t,i,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Cs(d)}}}break;default:throw Error(qt(163))}Mu||512&t.flags&&$u(t)}catch(h){lh(t,t.return,h)}}if(t===e){Ou=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ou=n;break}Ou=t.return}}function ad(e){for(;null!==Ou;){var t=Ou;if(t===e){Ou=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ou=n;break}Ou=t.return}}function id(e){for(;null!==Ou;){var t=Ou;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Uu(4,t)}catch(l){lh(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){lh(t,s,l)}}var a=t.return;try{$u(t)}catch(l){lh(t,a,l)}break;case 5:var i=t.return;try{$u(t)}catch(l){lh(t,i,l)}}}catch(l){lh(t,t.return,l)}if(t===e){Ou=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Ou=o;break}Ou=t.return}}var od,ld=Math.ceil,cd=sn.ReactCurrentDispatcher,ud=sn.ReactCurrentOwner,dd=sn.ReactCurrentBatchConfig,hd=0,pd=null,fd=null,md=0,gd=0,xd=lo(0),vd=0,yd=null,bd=0,wd=0,jd=0,Nd=null,kd=null,Sd=0,_d=1/0,Cd=null,Ed=!1,Td=null,Pd=null,Rd=!1,Id=null,Dd=0,Md=0,Ad=null,Od=-1,Ld=0;function Fd(){return 6&hd?Or():-1!==Od?Od:Od=Or()}function zd(e){return 1&e.mode?2&hd&&0!==md?md&-md:null!==el.transition?(0===Ld&&(Ld=es()),Ld):0!==(e=ss)?e:e=void 0===(e=window.event)?16:As(e.type):1}function Wd(e,t,n,r){if(50<Md)throw Md=0,Ad=null,Error(qt(185));ns(e,n,r),2&hd&&e===pd||(e===pd&&(!(2&hd)&&(wd|=n),4===vd&&Vd(e,md)),Ud(e,r),1===n&&0===hd&&!(1&t.mode)&&(_d=Or()+500,ko&&Co()))}function Ud(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Vr(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=Xr(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=Jr(e,e===pd?md:0);if(0===r)null!==n&&Dr(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Dr(n),1===t)0===e.tag?function(e){ko=!0,_o(e)}(Hd.bind(null,e)):_o(Hd.bind(null,e)),Bi(function(){!(6&hd)&&Co()}),n=null;else{switch(as(r)){case 1:n=Fr;break;case 4:n=zr;break;case 16:default:n=Wr;break;case 536870912:n=$r}n=ph(n,$d.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $d(e,t){if(Od=-1,Ld=0,6&hd)throw Error(qt(327));var n=e.callbackNode;if(ih()&&e.callbackNode!==n)return null;var r=Jr(e,e===pd?md:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=eh(e,r);else{t=r;var s=hd;hd|=2;var a=Xd();for(pd===e&&md===t||(Cd=null,_d=Or()+500,Yd(e,t));;)try{nh();break}catch(o){Jd(e,o)}dl(),cd.current=a,hd=s,null!==fd?t=0:(pd=null,md=0,t=vd)}if(0!==t){if(2===t&&(0!==(s=Zr(e))&&(r=s,t=qd(e,s))),1===t)throw n=yd,Yd(e,0),Vd(e,r),Ud(e,Or()),n;if(6===t)Vd(e,r);else{if(s=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Va(a(),s))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=eh(e,r),2===t&&(a=Zr(e),0!==a&&(r=a,t=qd(e,a))),1!==t)))throw n=yd,Yd(e,0),Vd(e,r),Ud(e,Or()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(qt(345));case 2:case 5:ah(e,kd,Cd);break;case 3:if(Vd(e,r),(130023424&r)===r&&10<(t=Sd+500-Or())){if(0!==Jr(e,0))break;if(((s=e.suspendedLanes)&r)!==r){Fd(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ui(ah.bind(null,e,kd,Cd),t);break}ah(e,kd,Cd);break;case 4:if(Vd(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Vr(r);a=1<<i,(i=t[i])>s&&(s=i),r&=~a}if(r=s,10<(r=(120>(r=Or()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ld(r/1960))-r)){e.timeoutHandle=Ui(ah.bind(null,e,kd,Cd),r);break}ah(e,kd,Cd);break;default:throw Error(qt(329))}}}return Ud(e,Or()),e.callbackNode===n?$d.bind(null,e):null}function qd(e,t){var n=Nd;return e.current.memoizedState.isDehydrated&&(Yd(e,t).flags|=256),2!==(e=eh(e,t))&&(t=kd,kd=n,null!==t&&Bd(t)),e}function Bd(e){null===kd?kd=e:kd.push.apply(kd,e)}function Vd(e,t){for(t&=~jd,t&=~wd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vr(t),r=1<<n;e[n]=-1,t&=~r}}function Hd(e){if(6&hd)throw Error(qt(327));ih();var t=Jr(e,0);if(!(1&t))return Ud(e,Or()),null;var n=eh(e,t);if(0!==e.tag&&2===n){var r=Zr(e);0!==r&&(t=r,n=qd(e,r))}if(1===n)throw n=yd,Yd(e,0),Vd(e,t),Ud(e,Or()),n;if(6===n)throw Error(qt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ah(e,kd,Cd),Ud(e,Or()),null}function Qd(e,t){var n=hd;hd|=1;try{return e(t)}finally{0===(hd=n)&&(_d=Or()+500,ko&&Co())}}function Kd(e){null!==Id&&0===Id.tag&&!(6&hd)&&ih();var t=hd;hd|=1;var n=dd.transition,r=ss;try{if(dd.transition=null,ss=1,e)return e()}finally{ss=r,dd.transition=n,!(6&(hd=t))&&Co()}}function Gd(){gd=xd.current,co(xd)}function Yd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,$i(n)),null!==fd)for(n=fd.return;null!==n;){var r=n;switch(Wo(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&vo();break;case 3:Al(),co(fo),co(po),Ul();break;case 5:Ll(r);break;case 4:Al();break;case 13:case 19:co(Fl);break;case 10:hl(r.type._context);break;case 22:case 23:Gd()}n=n.return}if(pd=e,fd=e=xh(e.current,null),md=gd=t,vd=0,yd=null,jd=wd=bd=0,kd=Nd=null,null!==gl){for(t=0;t<gl.length;t++)if(null!==(r=(n=gl[t]).interleaved)){n.interleaved=null;var s=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=s,r.next=i}n.pending=r}gl=null}return e}function Jd(e,t){for(;;){var n=fd;try{if(dl(),$l.current=Oc,Kl){for(var r=Vl.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}Kl=!1}if(Bl=0,Ql=Hl=Vl=null,Gl=!1,Yl=0,ud.current=null,null===n||null===n.return){vd=1,yd=t,fd=null;break}e:{var a=e,i=n.return,o=n,l=t;if(t=md,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=o,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=eu(i);if(null!==p){p.flags&=-257,tu(p,i,o,0,t),1&p.mode&&Zc(a,c,t),l=c;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(!(1&t)){Zc(a,c,t),Zd();break e}l=Error(qt(426))}else if(qo&&1&o.mode){var g=eu(i);if(null!==g){!(65536&g.flags)&&(g.flags|=256),tu(g,i,o,0,t),Zo(Qc(l,o));break e}}a=l=Qc(l,o),4!==vd&&(vd=2),null===Nd?Nd=[a]:Nd.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,_l(a,Jc(0,l,t));break e;case 1:o=l;var x=a.type,v=a.stateNode;if(!(128&a.flags||"function"!=typeof x.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Pd&&Pd.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t,_l(a,Xc(a,o,t));break e}}a=a.return}while(null!==a)}sh(n)}catch(y){t=y,fd===n&&null!==n&&(fd=n=n.return);continue}break}}function Xd(){var e=cd.current;return cd.current=Oc,null===e?Oc:e}function Zd(){0!==vd&&3!==vd&&2!==vd||(vd=4),null===pd||!(268435455&bd)&&!(268435455&wd)||Vd(pd,md)}function eh(e,t){var n=hd;hd|=2;var r=Xd();for(pd===e&&md===t||(Cd=null,Yd(e,t));;)try{th();break}catch(s){Jd(e,s)}if(dl(),hd=n,cd.current=r,null!==fd)throw Error(qt(261));return pd=null,md=0,vd}function th(){for(;null!==fd;)rh(fd)}function nh(){for(;null!==fd&&!Mr();)rh(fd)}function rh(e){var t=od(e.alternate,e,gd);e.memoizedProps=e.pendingProps,null===t?sh(e):fd=t,ud.current=null}function sh(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Iu(n,t)))return n.flags&=32767,void(fd=n);if(null===e)return vd=6,void(fd=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Ru(n,t,gd)))return void(fd=n);if(null!==(t=t.sibling))return void(fd=t);fd=t=e}while(null!==t);0===vd&&(vd=5)}function ah(e,t,n){var r=ss,s=dd.transition;try{dd.transition=null,ss=1,function(e,t,n,r){do{ih()}while(null!==Id);if(6&hd)throw Error(qt(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qt(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Vr(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}(e,a),e===pd&&(fd=pd=null,md=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Rd||(Rd=!0,ph(Wr,function(){return ih(),null})),a=!!(15990&n.flags),!!(15990&n.subtreeFlags)||a){a=dd.transition,dd.transition=null;var i=ss;ss=1;var o=hd;hd|=4,ud.current=null,function(e,t){if(Fi=Ts,Ja(e=Ya())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var i=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==s&&3!==d.nodeType||(o=i+s),d!==a||0!==r&&3!==d.nodeType||(l=i+r),3===d.nodeType&&(i+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===s&&(o=i),h===a&&++u===r&&(l=i),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(zi={focusedElem:e,selectionRange:n},Ts=!1,Ou=t;null!==Ou;)if(e=(t=Ou).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ou=e;else for(;null!==Ou;){t=Ou;try{var f=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?m:Wc(t.type,m),g);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(qt(163))}}catch(b){lh(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Ou=e;break}Ou=t.return}f=zu,zu=!1}(e,n),ed(n,e),Xa(zi),Ts=!!Fi,zi=Fi=null,e.current=n,nd(n),Ar(),hd=o,ss=i,dd.transition=a}else e.current=n;if(Rd&&(Rd=!1,Id=e,Dd=s),a=e.pendingLanes,0===a&&(Pd=null),function(e){if(Br&&"function"==typeof Br.onCommitFiberRoot)try{Br.onCommitFiberRoot(qr,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),Ud(e,Or()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ed)throw Ed=!1,e=Td,Td=null,e;!!(1&Dd)&&0!==e.tag&&ih(),a=e.pendingLanes,1&a?e===Ad?Md++:(Md=0,Ad=e):Md=0,Co()}(e,t,n,r)}finally{dd.transition=s,ss=r}return null}function ih(){if(null!==Id){var e=as(Dd),t=dd.transition,n=ss;try{if(dd.transition=null,ss=16>e?16:e,null===Id)var r=!1;else{if(e=Id,Id=null,Dd=0,6&hd)throw Error(qt(331));var s=hd;for(hd|=4,Ou=e.current;null!==Ou;){var a=Ou,i=a.child;if(16&Ou.flags){var o=a.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Ou=c;null!==Ou;){var u=Ou;switch(u.tag){case 0:case 11:case 15:Wu(8,u,a)}var d=u.child;if(null!==d)d.return=u,Ou=d;else for(;null!==Ou;){var h=(u=Ou).sibling,p=u.return;if(qu(u),u===c){Ou=null;break}if(null!==h){h.return=p,Ou=h;break}Ou=p}}}var f=a.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Ou=a}}if(2064&a.subtreeFlags&&null!==i)i.return=a,Ou=i;else e:for(;null!==Ou;){if(2048&(a=Ou).flags)switch(a.tag){case 0:case 11:case 15:Wu(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,Ou=x;break e}Ou=a.return}}var v=e.current;for(Ou=v;null!==Ou;){var y=(i=Ou).child;if(2064&i.subtreeFlags&&null!==y)y.return=i,Ou=y;else e:for(i=v;null!==Ou;){if(2048&(o=Ou).flags)try{switch(o.tag){case 0:case 11:case 15:Uu(9,o)}}catch(w){lh(o,o.return,w)}if(o===i){Ou=null;break e}var b=o.sibling;if(null!==b){b.return=o.return,Ou=b;break e}Ou=o.return}}if(hd=s,Co(),Br&&"function"==typeof Br.onPostCommitFiberRoot)try{Br.onPostCommitFiberRoot(qr,e)}catch(w){}r=!0}return r}finally{ss=n,dd.transition=t}}return!1}function oh(e,t,n){e=kl(e,t=Jc(0,t=Qc(n,t),1),1),t=Fd(),null!==e&&(ns(e,1,t),Ud(e,t))}function lh(e,t,n){if(3===e.tag)oh(e,e,n);else for(;null!==t;){if(3===t.tag){oh(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Pd||!Pd.has(r))){t=kl(t,e=Xc(t,e=Qc(n,e),1),1),e=Fd(),null!==t&&(ns(t,1,e),Ud(t,e));break}}t=t.return}}function ch(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Fd(),e.pingedLanes|=e.suspendedLanes&n,pd===e&&(md&n)===n&&(4===vd||3===vd&&(130023424&md)===md&&500>Or()-Sd?Yd(e,0):jd|=n),Ud(e,t)}function uh(e,t){0===t&&(1&e.mode?(t=Gr,!(130023424&(Gr<<=1))&&(Gr=4194304)):t=1);var n=Fd();null!==(e=yl(e,t))&&(ns(e,t,n),Ud(e,n))}function dh(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),uh(e,n)}function hh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(qt(314))}null!==r&&r.delete(t),uh(e,n)}function ph(e,t){return Ir(e,t)}function fh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mh(e,t,n,r){return new fh(e,t,n,r)}function gh(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xh(e,t){var n=e.alternate;return null===n?((n=mh(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function vh(e,t,n,r,s,a){var i=2;if(r=e,"function"==typeof e)gh(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case ln:return yh(n.children,s,a,t);case cn:i=8,s|=8;break;case un:return(e=mh(12,n,t,2|s)).elementType=un,e.lanes=a,e;case fn:return(e=mh(13,n,t,s)).elementType=fn,e.lanes=a,e;case mn:return(e=mh(19,n,t,s)).elementType=mn,e.lanes=a,e;case vn:return bh(n,s,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case dn:i=10;break e;case hn:i=9;break e;case pn:i=11;break e;case gn:i=14;break e;case xn:i=16,r=null;break e}throw Error(qt(130,null==e?e:typeof e,""))}return(t=mh(i,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function yh(e,t,n,r){return(e=mh(7,e,r,t)).lanes=n,e}function bh(e,t,n,r){return(e=mh(22,e,r,t)).elementType=vn,e.lanes=n,e.stateNode={isHidden:!1},e}function wh(e,t,n){return(e=mh(6,e,null,t)).lanes=n,e}function jh(e,t,n){return(t=mh(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nh(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ts(0),this.expirationTimes=ts(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kh(e,t,n,r,s,a,i,o,l){return e=new Nh(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=mh(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wl(a),e}function Sh(e){if(!e)return ho;e:{if(Cr(e=e._reactInternals)!==e||1!==e.tag)throw Error(qt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(qt(171))}if(1===e.tag){var n=e.type;if(xo(n))return bo(e,n,t)}return t}function _h(e,t,n,r,s,a,i,o,l){return(e=kh(n,r,!0,e,0,a,0,o,l)).context=Sh(null),n=e.current,(a=Nl(r=Fd(),s=zd(n))).callback=null!=t?t:null,kl(n,a,s),e.current.lanes=s,ns(e,s,r),Ud(e,r),e}function Ch(e,t,n,r){var s=t.current,a=Fd(),i=zd(s);return n=Sh(n),null===t.context?t.context=n:t.pendingContext=n,(t=Nl(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=kl(s,t,i))&&(Wd(e,s,i,a),Sl(e,s,i)),i}function Eh(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Th(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ph(e,t){Th(e,t),(e=e.alternate)&&Th(e,t)}od=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||fo.current)ru=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return ru=!1,function(e,t,n){switch(t.tag){case 3:pu(t),Xo();break;case 5:Ol(t);break;case 1:xo(t.type)&&wo(t);break;case 4:Ml(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;uo(ol,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(uo(Fl,1&Fl.current),t.flags|=128,null):0!==(n&t.child.childLanes)?wu(e,t,n):(uo(Fl,1&Fl.current),null!==(e=Eu(e,t,n))?e.sibling:null);uo(Fl,1&Fl.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return _u(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),uo(Fl,Fl.current),r)break;return null;case 22:case 23:return t.lanes=0,lu(e,t,n)}return Eu(e,t,n)}(e,t,n);ru=!!(131072&e.flags)}else ru=!1,qo&&1048576&t.flags&&Fo(t,Ro,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cu(e,t),e=t.pendingProps;var s=go(t,po.current);fl(t,n),s=ec(null,t,r,e,s,n);var a=tc();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xo(r)?(a=!0,wo(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,wl(t),s.updater=$c,t.stateNode=s,s._reactInternals=t,Hc(t,r,e,n),t=hu(null,t,r,!0,a,n)):(t.tag=0,qo&&a&&zo(t),su(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cu(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"==typeof e)return gh(e)?1:0;if(null!=e){if((e=e.$$typeof)===pn)return 11;if(e===gn)return 14}return 2}(r),e=Wc(r,e),s){case 0:t=uu(null,t,r,e,n);break e;case 1:t=du(null,t,r,e,n);break e;case 11:t=au(null,t,r,e,n);break e;case 14:t=iu(null,t,r,Wc(r.type,e),n);break e}throw Error(qt(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,uu(e,t,r,s=t.elementType===r?s:Wc(r,s),n);case 1:return r=t.type,s=t.pendingProps,du(e,t,r,s=t.elementType===r?s:Wc(r,s),n);case 3:e:{if(pu(t),null===e)throw Error(qt(387));r=t.pendingProps,s=(a=t.memoizedState).element,jl(e,t),Cl(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=fu(e,t,r,n,s=Qc(Error(qt(423)),t));break e}if(r!==s){t=fu(e,t,r,n,s=Qc(Error(qt(424)),t));break e}for($o=Qi(t.stateNode.containerInfo.firstChild),Uo=t,qo=!0,Bo=null,n=il(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Xo(),r===s){t=Eu(e,t,n);break e}su(e,t,r,n)}t=t.child}return t;case 5:return Ol(t),null===e&&Ko(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,i=s.children,Wi(r,s)?i=null:null!==a&&Wi(r,a)&&(t.flags|=32),cu(e,t),su(e,t,i,n),t.child;case 6:return null===e&&Ko(t),null;case 13:return wu(e,t,n);case 4:return Ml(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=al(t,null,r,n):su(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,au(e,t,r,s=t.elementType===r?s:Wc(r,s),n);case 7:return su(e,t,t.pendingProps,n),t.child;case 8:case 12:return su(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,uo(ol,r._currentValue),r._currentValue=i,null!==a)if(Va(a.value,i)){if(a.children===s.children&&!fo.current){t=Eu(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var o=a.dependencies;if(null!==o){i=a.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Nl(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),pl(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===a.tag)i=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(i=a.return))throw Error(qt(341));i.lanes|=n,null!==(o=i.alternate)&&(o.lanes|=n),pl(i,n,t),i=a.sibling}else i=a.child;if(null!==i)i.return=a;else for(i=a;null!==i;){if(i===t){i=null;break}if(null!==(a=i.sibling)){a.return=i.return,i=a;break}i=i.return}a=i}su(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,fl(t,n),r=r(s=ml(s)),t.flags|=1,su(e,t,r,n),t.child;case 14:return s=Wc(r=t.type,t.pendingProps),iu(e,t,r,s=Wc(r.type,s),n);case 15:return ou(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wc(r,s),Cu(e,t),t.tag=1,xo(r)?(e=!0,wo(t)):e=!1,fl(t,n),Bc(t,r,s),Hc(t,r,s,n),hu(null,t,r,!0,e,n);case 19:return _u(e,t,n);case 22:return lu(e,t,n)}throw Error(qt(156,t.tag))};var Rh="function"==typeof reportError?reportError:function(e){console.error(e)};function Ih(e){this._internalRoot=e}function Dh(e){this._internalRoot=e}function Mh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ah(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Oh(){}function Lh(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if("function"==typeof s){var o=s;s=function(){var e=Eh(i);o.call(e)}}Ch(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"==typeof r){var a=r;r=function(){var e=Eh(i);a.call(e)}}var i=_h(t,r,e,0,null,!1,0,"",Oh);return e._reactRootContainer=i,e[Xi]=i.current,_i(8===e.nodeType?e.parentNode:e),Kd(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"==typeof r){var o=r;r=function(){var e=Eh(l);o.call(e)}}var l=kh(e,0,!1,null,0,!1,0,"",Oh);return e._reactRootContainer=l,e[Xi]=l.current,_i(8===e.nodeType?e.parentNode:e),Kd(function(){Ch(t,l,n,r)}),l}(n,t,e,s,r);return Eh(i)}Dh.prototype.render=Ih.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(qt(409));Ch(e,t,null,null)},Dh.prototype.unmount=Ih.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Kd(function(){Ch(null,e,null,null)}),t[Xi]=null}},Dh.prototype.unstable_scheduleHydration=function(e){if(e){var t=cs();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vs.length&&0!==t&&t<vs[n].priority;n++);vs.splice(n,0,e),0===n&&js(e)}},is=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yr(t.pendingLanes);0!==n&&(rs(t,1|n),Ud(t,Or()),!(6&hd)&&(_d=Or()+500,Co()))}break;case 13:Kd(function(){var t=yl(e,1);if(null!==t){var n=Fd();Wd(t,e,1,n)}}),Ph(e,1)}},os=function(e){if(13===e.tag){var t=yl(e,134217728);if(null!==t)Wd(t,e,134217728,Fd());Ph(e,134217728)}},ls=function(e){if(13===e.tag){var t=zd(e),n=yl(e,t);if(null!==n)Wd(n,e,t,Fd());Ph(e,t)}},cs=function(){return ss},us=function(e,t){var n=ss;try{return ss=e,t()}finally{ss=n}},or=function(e,t,n){switch(t){case"input":if(Ln(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ao(r);if(!s)throw Error(qt(90));In(r),Ln(r,s)}}}break;case"textarea":Bn(e,n);break;case"select":null!=(t=n.value)&&Un(e,!!n.multiple,t,!1)}},pr=Qd,fr=Kd;var Fh={usingClientEntryPoint:!1,Events:[ro,so,ao,dr,hr,Qd]},zh={findFiberByHostInstance:no,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wh={bundleType:zh.bundleType,version:zh.version,rendererPackageName:zh.rendererPackageName,rendererConfig:zh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Pr(e))?null:e.stateNode},findFiberByHostInstance:zh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{qr=Uh.inject(Wh),Br=Uh}catch(Gn){}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fh,Lt.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Mh(t))throw Error(qt(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:on,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},Lt.createRoot=function(e,t){if(!Mh(e))throw Error(qt(299));var n=!1,r="",s=Rh;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=kh(e,1,!1,null,0,n,0,r,s),e[Xi]=t.current,_i(8===e.nodeType?e.parentNode:e),new Ih(t)},Lt.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(qt(188));throw e=Object.keys(e).join(","),Error(qt(268,e))}return e=null===(e=Pr(t))?null:e.stateNode},Lt.flushSync=function(e){return Kd(e)},Lt.hydrate=function(e,t,n){if(!Ah(t))throw Error(qt(200));return Lh(null,e,t,!0,n)},Lt.hydrateRoot=function(e,t,n){if(!Mh(e))throw Error(qt(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",i=Rh;if(null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=_h(t,null,e,1,null!=n?n:null,s,0,a,i),e[Xi]=t.current,_i(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Dh(t)},Lt.render=function(e,t,n){if(!Ah(t))throw Error(qt(200));return Lh(null,e,t,!1,n)},Lt.unmountComponentAtNode=function(e){if(!Ah(e))throw Error(qt(40));return!!e._reactRootContainer&&(Kd(function(){Lh(null,null,e,!1,function(){e._reactRootContainer=null,e[Xi]=null})}),!0)},Lt.unstable_batchedUpdates=Qd,Lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ah(n))throw Error(qt(200));if(null==e||void 0===e._reactInternals)throw Error(qt(38));return Lh(e,t,n,!1,r)},Lt.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Ot.exports=Lt;var $h=Ot.exports;const qh=ze($h);var Bh=$h;At.createRoot=Bh.createRoot,At.hydrateRoot=Bh.hydrateRoot;var Vh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Hh="undefined"==typeof window||"Deno"in globalThis;function Qh(){}function Kh(e){return"number"==typeof e&&e>=0&&e!==1/0}function Gh(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Yh(e,t){return"function"==typeof e?e(t):e}function Jh(e,t){return"function"==typeof e?e(t):e}function Xh(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:o}=e;if(i)if(r){if(t.queryHash!==ep(i,t.options))return!1}else if(!np(t.queryKey,i))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!s||s===t.state.fetchStatus)&&!(a&&!a(t)))}function Zh(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(tp(t.options.mutationKey)!==tp(a))return!1}else if(!np(t.options.mutationKey,a))return!1}return(!r||t.state.status===r)&&!(s&&!s(t))}function ep(e,t){return((null==t?void 0:t.queryKeyHashFn)||tp)(e)}function tp(e){return JSON.stringify(e,(e,t)=>ip(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function np(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(n=>np(e[n],t[n])))}function rp(e,t){if(e===t)return e;const n=ap(e)&&ap(t);if(n||ip(e)&&ip(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),i=a.length,o=n?[]:{},l=new Set(r);let c=0;for(let u=0;u<i;u++){const r=n?u:a[u];(!n&&l.has(r)||n)&&void 0===e[r]&&void 0===t[r]?(o[r]=void 0,c++):(o[r]=rp(e[r],t[r]),o[r]===e[r]&&void 0!==e[r]&&c++)}return s===i&&c===s?e:o}return t}function sp(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function ap(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ip(e){if(!op(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!op(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function op(e){return"[object Object]"===Object.prototype.toString.call(e)}function lp(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?rp(e,t):t}function cp(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function up(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var dp=Symbol();function hp(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==dp?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function pp(e,t){return"function"==typeof e?e(...t):!!e}var fp=new(r=class extends Vh{constructor(){super(),De(this,e),De(this,t),De(this,n),Me(this,n,e=>{if(!Hh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Ie(this,t)||this.setEventListener(Ie(this,n))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Ie(this,t))||e.call(this),Me(this,t,void 0))}setEventListener(e){var r;Me(this,n,e),null==(r=Ie(this,t))||r.call(this),Me(this,t,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(t){Ie(this,e)!==t&&(Me(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var t;return"boolean"==typeof Ie(this,e)?Ie(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,n=new WeakMap,r),mp=new(o=class extends Vh{constructor(){super(),De(this,s,!0),De(this,a),De(this,i),Me(this,i,e=>{if(!Hh&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){Ie(this,a)||this.setEventListener(Ie(this,i))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Ie(this,a))||e.call(this),Me(this,a,void 0))}setEventListener(e){var t;Me(this,i,e),null==(t=Ie(this,a))||t.call(this),Me(this,a,e(this.setOnline.bind(this)))}setOnline(e){Ie(this,s)!==e&&(Me(this,s,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return Ie(this,s)}},s=new WeakMap,a=new WeakMap,i=new WeakMap,o);function gp(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}function xp(e){return Math.min(1e3*2**e,3e4)}function vp(e){return"online"!==(e??"online")||mp.isOnline()}var yp=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function bp(e){return e instanceof yp}function wp(e){let t,n=!1,r=0,s=!1;const a=gp(),i=()=>fp.isFocused()&&("always"===e.networkMode||mp.isOnline())&&e.canRun(),o=()=>vp(e.networkMode)&&e.canRun(),l=n=>{var r;s||(s=!0,null==(r=e.onSuccess)||r.call(e,n),null==t||t(),a.resolve(n))},c=n=>{var r;s||(s=!0,null==(r=e.onError)||r.call(e,n),null==t||t(),a.reject(n))},u=()=>new Promise(n=>{var r;t=e=>{(s||i())&&n(e)},null==(r=e.onPause)||r.call(e)}).then(()=>{var n;t=void 0,s||null==(n=e.onContinue)||n.call(e)}),d=()=>{if(s)return;let t;const a=0===r?e.initialPromise:void 0;try{t=a??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var a;if(s)return;const o=e.retry??(Hh?0:3),l=e.retryDelay??xp,h="function"==typeof l?l(r,t):l,p=!0===o||"number"==typeof o&&r<o||"function"==typeof o&&o(r,t);var f;!n&&p?(r++,null==(a=e.onFail)||a.call(e,r,t),(f=h,new Promise(e=>{setTimeout(e,f)})).then(()=>i()?void 0:u()).then(()=>{n?c(t):d()})):c(t)})};return{promise:a,cancel:t=>{var n;s||(c(new yp(t)),null==(n=e.abort)||n.call(e))},continue:()=>(null==t||t(),a),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?d():u().then(d),a)}}var jp=e=>setTimeout(e,0);var Np=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},s=jp;const a=r=>{t?e.push(r):s(()=>{n(r)})};return{batch:a=>{let i;t++;try{i=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&s(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return i},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{s=e}}}(),kp=(c=class{constructor(){De(this,l)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Kh(this.gcTime)&&Me(this,l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Hh?1/0:3e5))}clearGcTimeout(){Ie(this,l)&&(clearTimeout(Ie(this,l)),Me(this,l,void 0))}},l=new WeakMap,c),Sp=(y=class extends kp{constructor(e){super(),De(this,x),De(this,u),De(this,d),De(this,h),De(this,p),De(this,f),De(this,m),De(this,g),Me(this,g,!1),Me(this,m,e.defaultOptions),this.setOptions(e.options),this.observers=[],Me(this,p,e.client),Me(this,h,Ie(this,p).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Me(this,u,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??Ie(this,u),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=Ie(this,f))?void 0:e.promise}setOptions(e){this.options={...Ie(this,m),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||Ie(this,h).remove(this)}setData(e,t){const n=lp(this.state.data,e,this.options);return Ae(this,x,v).call(this,{data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){Ae(this,x,v).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,n;const r=null==(t=Ie(this,f))?void 0:t.promise;return null==(n=Ie(this,f))||n.cancel(e),r?r.then(Qh).catch(Qh):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ie(this,u))}isActive(){return this.observers.some(e=>!1!==Jh(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===Yh(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!Gh(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=Ie(this,f))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=Ie(this,f))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Ie(this,h).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Ie(this,f)&&(Ie(this,g)?Ie(this,f).cancel({revert:!0}):Ie(this,f).cancelRetry()),this.scheduleGc()),Ie(this,h).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ae(this,x,v).call(this,{type:"invalidate"})}fetch(e,t){var n,r,s;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(Ie(this,f))return Ie(this,f).continueRetry(),Ie(this,f).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(Me(this,g,!0),a.signal)})},o=()=>{const e=hp(this.options,t),n=(()=>{const e={client:Ie(this,p),queryKey:this.queryKey,meta:this.meta};return i(e),e})();return Me(this,g,!1),this.options.persister?this.options.persister(e,n,this):e(n)},l=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:Ie(this,p),state:this.state,fetchFn:o};return i(e),e})();null==(n=this.options.behavior)||n.onFetch(l,this),Me(this,d,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(r=l.fetchOptions)?void 0:r.meta)||Ae(this,x,v).call(this,{type:"fetch",meta:null==(s=l.fetchOptions)?void 0:s.meta});const c=e=>{var t,n,r,s;bp(e)&&e.silent||Ae(this,x,v).call(this,{type:"error",error:e}),bp(e)||(null==(n=(t=Ie(this,h).config).onError)||n.call(t,e,this),null==(s=(r=Ie(this,h).config).onSettled)||s.call(r,this.state.data,e,this)),this.scheduleGc()};return Me(this,f,wp({initialPromise:null==t?void 0:t.initialPromise,fn:l.fetchFn,abort:a.abort.bind(a),onSuccess:e=>{var t,n,r,s;if(void 0!==e){try{this.setData(e)}catch(a){return void c(a)}null==(n=(t=Ie(this,h).config).onSuccess)||n.call(t,e,this),null==(s=(r=Ie(this,h).config).onSettled)||s.call(r,e,this.state.error,this),this.scheduleGc()}else c(new Error(`${this.queryHash} data is undefined`))},onError:c,onFail:(e,t)=>{Ae(this,x,v).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Ae(this,x,v).call(this,{type:"pause"})},onContinue:()=>{Ae(this,x,v).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Ie(this,f).start()}},u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,x=new WeakSet,v=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,..._p(t.data,this.options),fetchMeta:e.meta??null};case"success":return Me(this,d,void 0),{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return bp(n)&&n.revert&&Ie(this,d)?{...Ie(this,d),fetchStatus:"idle"}:{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),Np.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),Ie(this,h).notify({query:this,type:"updated",action:e})})},y);function _p(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vp(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var Cp=(w=class extends Vh{constructor(e={}){super(),De(this,b),this.config=e,Me(this,b,new Map)}build(e,t,n){const r=t.queryKey,s=t.queryHash??ep(r,t);let a=this.get(s);return a||(a=new Sp({client:e,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){Ie(this,b).has(e.queryHash)||(Ie(this,b).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Ie(this,b).get(e.queryHash);t&&(e.destroy(),t===e&&Ie(this,b).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Np.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Ie(this,b).get(e)}getAll(){return[...Ie(this,b).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>Xh(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>Xh(e,t)):t}notify(e){Np.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Np.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Np.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},b=new WeakMap,w),Ep=(C=class extends kp{constructor(e){super(),De(this,S),De(this,j),De(this,N),De(this,k),this.mutationId=e.mutationId,Me(this,N,e.mutationCache),Me(this,j,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Ie(this,j).includes(e)||(Ie(this,j).push(e),this.clearGcTimeout(),Ie(this,N).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Me(this,j,Ie(this,j).filter(t=>t!==e)),this.scheduleGc(),Ie(this,N).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Ie(this,j).length||("pending"===this.state.status?this.scheduleGc():Ie(this,N).remove(this))}continue(){var e;return(null==(e=Ie(this,k))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,n,r,s,a,i,o,l,c,u,d,h,p,f,m,g,x,v,y,b;const w=()=>{Ae(this,S,_).call(this,{type:"continue"})};Me(this,k,wp({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{Ae(this,S,_).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Ae(this,S,_).call(this,{type:"pause"})},onContinue:w,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ie(this,N).canRun(this)}));const j="pending"===this.state.status,C=!Ie(this,k).canStart();try{if(j)w();else{Ae(this,S,_).call(this,{type:"pending",variables:e,isPaused:C}),await(null==(n=(t=Ie(this,N).config).onMutate)?void 0:n.call(t,e,this));const a=await(null==(s=(r=this.options).onMutate)?void 0:s.call(r,e));a!==this.state.context&&Ae(this,S,_).call(this,{type:"pending",context:a,variables:e,isPaused:C})}const p=await Ie(this,k).start();return await(null==(i=(a=Ie(this,N).config).onSuccess)?void 0:i.call(a,p,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,p,e,this.state.context)),await(null==(u=(c=Ie(this,N).config).onSettled)?void 0:u.call(c,p,null,this.state.variables,this.state.context,this)),await(null==(h=(d=this.options).onSettled)?void 0:h.call(d,p,null,e,this.state.context)),Ae(this,S,_).call(this,{type:"success",data:p}),p}catch(E){try{throw await(null==(f=(p=Ie(this,N).config).onError)?void 0:f.call(p,E,e,this.state.context,this)),await(null==(g=(m=this.options).onError)?void 0:g.call(m,E,e,this.state.context)),await(null==(v=(x=Ie(this,N).config).onSettled)?void 0:v.call(x,void 0,E,this.state.variables,this.state.context,this)),await(null==(b=(y=this.options).onSettled)?void 0:b.call(y,void 0,E,e,this.state.context)),E}finally{Ae(this,S,_).call(this,{type:"error",error:E})}}finally{Ie(this,N).runNext(this)}}},j=new WeakMap,N=new WeakMap,k=new WeakMap,S=new WeakSet,_=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),Np.batch(()=>{Ie(this,j).forEach(t=>{t.onMutationUpdate(e)}),Ie(this,N).notify({mutation:this,type:"updated",action:e})})},C);var Tp=(R=class extends Vh{constructor(e={}){super(),De(this,E),De(this,T),De(this,P),this.config=e,Me(this,E,new Set),Me(this,T,new Map),Me(this,P,0)}build(e,t,n){const r=new Ep({mutationCache:this,mutationId:++Oe(this,P)._,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){Ie(this,E).add(e);const t=Pp(e);if("string"==typeof t){const n=Ie(this,T).get(t);n?n.push(e):Ie(this,T).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Ie(this,E).delete(e)){const t=Pp(e);if("string"==typeof t){const n=Ie(this,T).get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&Ie(this,T).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Pp(e);if("string"==typeof t){const n=Ie(this,T).get(t),r=null==n?void 0:n.find(e=>"pending"===e.state.status);return!r||r===e}return!0}runNext(e){var t;const n=Pp(e);if("string"==typeof n){const r=null==(t=Ie(this,T).get(n))?void 0:t.find(t=>t!==e&&t.state.isPaused);return(null==r?void 0:r.continue())??Promise.resolve()}return Promise.resolve()}clear(){Np.batch(()=>{Ie(this,E).forEach(e=>{this.notify({type:"removed",mutation:e})}),Ie(this,E).clear(),Ie(this,T).clear()})}getAll(){return Array.from(Ie(this,E))}find(e){const t={exact:!0,...e};return this.getAll().find(e=>Zh(t,e))}findAll(e={}){return this.getAll().filter(t=>Zh(e,t))}notify(e){Np.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Np.batch(()=>Promise.all(e.map(e=>e.continue().catch(Qh))))}},E=new WeakMap,T=new WeakMap,P=new WeakMap,R);function Pp(e){var t;return null==(t=e.options.scope)?void 0:t.id}function Rp(e){return{onFetch:(t,n)=>{var r,s,a,i,o;const l=t.options,c=null==(a=null==(s=null==(r=t.fetchOptions)?void 0:r.meta)?void 0:s.fetchMore)?void 0:a.direction,u=(null==(i=t.state.data)?void 0:i.pages)||[],d=(null==(o=t.state.data)?void 0:o.pageParams)||[];let h={pages:[],pageParams:[]},p=0;const f=async()=>{let n=!1;const r=hp(t.options,t.fetchOptions),s=async(e,s,a)=>{if(n)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);const i=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:s,direction:a?"backward":"forward",meta:t.options.meta};var r;return r=e,Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)}),e})(),o=await r(i),{maxPages:l}=t.options,c=a?up:cp;return{pages:c(e.pages,o,l),pageParams:c(e.pageParams,s,l)}};if(c&&u.length){const e="backward"===c,t={pages:u,pageParams:d},n=(e?Dp:Ip)(l,t);h=await s(t,n,e)}else{const t=e??u.length;do{const e=0===p?d[0]??l.initialPageParam:Ip(l,h);if(p>0&&null==e)break;h=await s(h,e),p++}while(p<t)}return h};t.options.persister?t.fetchFn=()=>{var e,r;return null==(r=(e=t.options).persister)?void 0:r.call(e,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=f}}}function Ip(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Dp(e,{pages:t,pageParams:n}){var r;return t.length>0?null==(r=e.getPreviousPageParam)?void 0:r.call(e,t[0],t,n[0],n):void 0}var Mp=(W=class{constructor(e={}){De(this,I),De(this,D),De(this,M),De(this,A),De(this,O),De(this,L),De(this,F),De(this,z),Me(this,I,e.queryCache||new Cp),Me(this,D,e.mutationCache||new Tp),Me(this,M,e.defaultOptions||{}),Me(this,A,new Map),Me(this,O,new Map),Me(this,L,0)}mount(){Oe(this,L)._++,1===Ie(this,L)&&(Me(this,F,fp.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ie(this,I).onFocus())})),Me(this,z,mp.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ie(this,I).onOnline())})))}unmount(){var e,t;Oe(this,L)._--,0===Ie(this,L)&&(null==(e=Ie(this,F))||e.call(this),Me(this,F,void 0),null==(t=Ie(this,z))||t.call(this),Me(this,z,void 0))}isFetching(e){return Ie(this,I).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ie(this,D).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=Ie(this,I).get(n.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Ie(this,I).build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Yh(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Ie(this,I).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=Ie(this,I).get(r.queryHash),a=function(e,t){return"function"==typeof e?e(t):e}(t,null==s?void 0:s.state.data);if(void 0!==a)return Ie(this,I).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return Np.batch(()=>Ie(this,I).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=Ie(this,I).get(n.queryHash))?void 0:t.state}removeQueries(e){const t=Ie(this,I);Np.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=Ie(this,I);return Np.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Np.batch(()=>Ie(this,I).findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(Qh).catch(Qh)}invalidateQueries(e,t={}){return Np.batch(()=>(Ie(this,I).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Np.batch(()=>Ie(this,I).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(Qh)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(r).then(Qh)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=Ie(this,I).build(this,t);return n.isStaleByTime(Yh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Qh).catch(Qh)}fetchInfiniteQuery(e){return e.behavior=Rp(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Qh).catch(Qh)}ensureInfiniteQueryData(e){return e.behavior=Rp(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return mp.isOnline()?Ie(this,D).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ie(this,I)}getMutationCache(){return Ie(this,D)}getDefaultOptions(){return Ie(this,M)}setDefaultOptions(e){Me(this,M,e)}setQueryDefaults(e,t){Ie(this,A).set(tp(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ie(this,A).values()],n={};return t.forEach(t=>{np(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){Ie(this,O).set(tp(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ie(this,O).values()],n={};return t.forEach(t=>{np(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ie(this,M).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ep(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===dp&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...Ie(this,M).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ie(this,I).clear(),Ie(this,D).clear()}},I=new WeakMap,D=new WeakMap,M=new WeakMap,A=new WeakMap,O=new WeakMap,L=new WeakMap,F=new WeakMap,z=new WeakMap,W),Ap=(he=class extends Vh{constructor(e,t){super(),De(this,ne),De(this,U),De(this,$),De(this,q),De(this,B),De(this,V),De(this,H),De(this,Q),De(this,K),De(this,G),De(this,Y),De(this,J),De(this,X),De(this,Z),De(this,ee),De(this,te,new Set),this.options=t,Me(this,U,e),Me(this,K,null),Me(this,Q,gp()),this.options.experimental_prefetchInRender||Ie(this,Q).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(Ie(this,$).addObserver(this),Op(Ie(this,$),this.options)?Ae(this,ne,re).call(this):this.updateResult(),Ae(this,ne,oe).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Lp(Ie(this,$),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Lp(Ie(this,$),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ae(this,ne,le).call(this),Ae(this,ne,ce).call(this),Ie(this,$).removeObserver(this)}setOptions(e){const t=this.options,n=Ie(this,$);if(this.options=Ie(this,U).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof Jh(this.options.enabled,Ie(this,$)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ae(this,ne,ue).call(this),Ie(this,$).setOptions(this.options),t._defaulted&&!sp(this.options,t)&&Ie(this,U).getQueryCache().notify({type:"observerOptionsUpdated",query:Ie(this,$),observer:this});const r=this.hasListeners();r&&Fp(Ie(this,$),n,this.options,t)&&Ae(this,ne,re).call(this),this.updateResult(),!r||Ie(this,$)===n&&Jh(this.options.enabled,Ie(this,$))===Jh(t.enabled,Ie(this,$))&&Yh(this.options.staleTime,Ie(this,$))===Yh(t.staleTime,Ie(this,$))||Ae(this,ne,se).call(this);const s=Ae(this,ne,ae).call(this);!r||Ie(this,$)===n&&Jh(this.options.enabled,Ie(this,$))===Jh(t.enabled,Ie(this,$))&&s===Ie(this,ee)||Ae(this,ne,ie).call(this,s)}getOptimisticResult(e){const t=Ie(this,U).getQueryCache().build(Ie(this,U),e),n=this.createResult(t,e);return function(e,t){if(!sp(e.getCurrentResult(),t))return!0;return!1}(this,n)&&(Me(this,B,n),Me(this,H,this.options),Me(this,V,Ie(this,$).state)),n}getCurrentResult(){return Ie(this,B)}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),null==t||t(n),Reflect.get(e,n))})}trackProp(e){Ie(this,te).add(e)}getCurrentQuery(){return Ie(this,$)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Ie(this,U).defaultQueryOptions(e),n=Ie(this,U).getQueryCache().build(Ie(this,U),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return Ae(this,ne,re).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Ie(this,B)))}createResult(e,t){var n;const r=Ie(this,$),s=this.options,a=Ie(this,B),i=Ie(this,V),o=Ie(this,H),l=e!==r?e.state:Ie(this,q),{state:c}=e;let u,d={...c},h=!1;if(t._optimisticResults){const n=this.hasListeners(),a=!n&&Op(e,t),i=n&&Fp(e,r,t,s);(a||i)&&(d={...d,..._p(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:f,status:m}=d;u=d.data;let g=!1;if(void 0!==t.placeholderData&&void 0===u&&"pending"===m){let e;(null==a?void 0:a.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData)?(e=a.data,g=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(n=Ie(this,J))?void 0:n.state.data,Ie(this,J)):t.placeholderData,void 0!==e&&(m="success",u=lp(null==a?void 0:a.data,e,t),h=!0)}if(t.select&&void 0!==u&&!g)if(a&&u===(null==i?void 0:i.data)&&t.select===Ie(this,G))u=Ie(this,Y);else try{Me(this,G,t.select),u=t.select(u),u=lp(null==a?void 0:a.data,u,t),Me(this,Y,u),Me(this,K,null)}catch(N){Me(this,K,N)}Ie(this,K)&&(p=Ie(this,K),u=Ie(this,Y),f=Date.now(),m="error");const x="fetching"===d.fetchStatus,v="pending"===m,y="error"===m,b=v&&x,w=void 0!==u,j={status:m,fetchStatus:d.fetchStatus,isPending:v,isSuccess:"success"===m,isError:y,isInitialLoading:b,isLoading:b,data:u,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:f,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:x,isRefetching:x&&!v,isLoadingError:y&&!w,isPaused:"paused"===d.fetchStatus,isPlaceholderData:h,isRefetchError:y&&w,isStale:zp(e,t),refetch:this.refetch,promise:Ie(this,Q)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===j.status?e.reject(j.error):void 0!==j.data&&e.resolve(j.data)},n=()=>{const e=Me(this,Q,j.promise=gp());t(e)},s=Ie(this,Q);switch(s.status){case"pending":e.queryHash===r.queryHash&&t(s);break;case"fulfilled":"error"!==j.status&&j.data===s.value||n();break;case"rejected":"error"===j.status&&j.error===s.reason||n()}}return j}updateResult(){const e=Ie(this,B),t=this.createResult(Ie(this,$),this.options);if(Me(this,V,Ie(this,$).state),Me(this,H,this.options),void 0!==Ie(this,V).data&&Me(this,J,Ie(this,$)),sp(t,e))return;Me(this,B,t);Ae(this,ne,de).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!Ie(this,te).size)return!0;const r=new Set(n??Ie(this,te));return this.options.throwOnError&&r.add("error"),Object.keys(Ie(this,B)).some(t=>{const n=t;return Ie(this,B)[n]!==e[n]&&r.has(n)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ae(this,ne,oe).call(this)}},U=new WeakMap,$=new WeakMap,q=new WeakMap,B=new WeakMap,V=new WeakMap,H=new WeakMap,Q=new WeakMap,K=new WeakMap,G=new WeakMap,Y=new WeakMap,J=new WeakMap,X=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakSet,re=function(e){Ae(this,ne,ue).call(this);let t=Ie(this,$).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(Qh)),t},se=function(){Ae(this,ne,le).call(this);const e=Yh(this.options.staleTime,Ie(this,$));if(Hh||Ie(this,B).isStale||!Kh(e))return;const t=Gh(Ie(this,B).dataUpdatedAt,e);Me(this,X,setTimeout(()=>{Ie(this,B).isStale||this.updateResult()},t+1))},ae=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(Ie(this,$)):this.options.refetchInterval)??!1},ie=function(e){Ae(this,ne,ce).call(this),Me(this,ee,e),!Hh&&!1!==Jh(this.options.enabled,Ie(this,$))&&Kh(Ie(this,ee))&&0!==Ie(this,ee)&&Me(this,Z,setInterval(()=>{(this.options.refetchIntervalInBackground||fp.isFocused())&&Ae(this,ne,re).call(this)},Ie(this,ee)))},oe=function(){Ae(this,ne,se).call(this),Ae(this,ne,ie).call(this,Ae(this,ne,ae).call(this))},le=function(){Ie(this,X)&&(clearTimeout(Ie(this,X)),Me(this,X,void 0))},ce=function(){Ie(this,Z)&&(clearInterval(Ie(this,Z)),Me(this,Z,void 0))},ue=function(){const e=Ie(this,U).getQueryCache().build(Ie(this,U),this.options);if(e===Ie(this,$))return;const t=Ie(this,$);Me(this,$,e),Me(this,q,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},de=function(e){Np.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(Ie(this,B))}),Ie(this,U).getQueryCache().notify({query:Ie(this,$),type:"observerResultsUpdated"})})},he);function Op(e,t){return function(e,t){return!1!==Jh(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Lp(e,t,t.refetchOnMount)}function Lp(e,t,n){if(!1!==Jh(t.enabled,e)&&"static"!==Yh(t.staleTime,e)){const r="function"==typeof n?n(e):n;return"always"===r||!1!==r&&zp(e,t)}return!1}function Fp(e,t,n,r){return(e!==t||!1===Jh(r.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&zp(e,n)}function zp(e,t){return!1!==Jh(t.enabled,e)&&e.isStaleByTime(Yh(t.staleTime,e))}var Wp=(be=class extends Vh{constructor(e,t){super(),De(this,xe),De(this,pe),De(this,fe),De(this,me),De(this,ge),Me(this,pe,e),this.setOptions(t),this.bindMethods(),Ae(this,xe,ve).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const n=this.options;this.options=Ie(this,pe).defaultMutationOptions(e),sp(this.options,n)||Ie(this,pe).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ie(this,me),observer:this}),(null==n?void 0:n.mutationKey)&&this.options.mutationKey&&tp(n.mutationKey)!==tp(this.options.mutationKey)?this.reset():"pending"===(null==(t=Ie(this,me))?void 0:t.state.status)&&Ie(this,me).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=Ie(this,me))||e.removeObserver(this)}onMutationUpdate(e){Ae(this,xe,ve).call(this),Ae(this,xe,ye).call(this,e)}getCurrentResult(){return Ie(this,fe)}reset(){var e;null==(e=Ie(this,me))||e.removeObserver(this),Me(this,me,void 0),Ae(this,xe,ve).call(this),Ae(this,xe,ye).call(this)}mutate(e,t){var n;return Me(this,ge,t),null==(n=Ie(this,me))||n.removeObserver(this),Me(this,me,Ie(this,pe).getMutationCache().build(Ie(this,pe),this.options)),Ie(this,me).addObserver(this),Ie(this,me).execute(e)}},pe=new WeakMap,fe=new WeakMap,me=new WeakMap,ge=new WeakMap,xe=new WeakSet,ve=function(){var e;const t=(null==(e=Ie(this,me))?void 0:e.state)??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};Me(this,fe,{...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset})},ye=function(e){Np.batch(()=>{var t,n,r,s,a,i,o,l;if(Ie(this,ge)&&this.hasListeners()){const c=Ie(this,fe).variables,u=Ie(this,fe).context;"success"===(null==e?void 0:e.type)?(null==(n=(t=Ie(this,ge)).onSuccess)||n.call(t,e.data,c,u),null==(s=(r=Ie(this,ge)).onSettled)||s.call(r,e.data,null,c,u)):"error"===(null==e?void 0:e.type)&&(null==(i=(a=Ie(this,ge)).onError)||i.call(a,e.error,c,u),null==(l=(o=Ie(this,ge)).onSettled)||l.call(o,void 0,e.error,c,u))}this.listeners.forEach(e=>{e(Ie(this,fe))})})},be),Up=kt.createContext(void 0),$p=e=>{const t=kt.useContext(Up);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},qp=({client:e,children:t})=>(kt.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Mt.jsx(Up.Provider,{value:e,children:t})),Bp=kt.createContext(!1);Bp.Provider;var Vp=kt.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),Hp=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Qp(e,t,n){var r,s,a,i,o;const l=kt.useContext(Bp),c=kt.useContext(Vp),u=$p(),d=u.defaultQueryOptions(e);null==(s=null==(r=u.getDefaultOptions().queries)?void 0:r._experimental_beforeQuery)||s.call(r,d),d._optimisticResults=l?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=e=>"static"===e?e:Math.max(e??1e3,1e3),n=e.staleTime;e.staleTime="function"==typeof n?(...e)=>t(n(...e)):t(n),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}})(d),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(d,c),(e=>{kt.useEffect(()=>{e.clearReset()},[e])})(c);const h=!u.getQueryCache().get(d.queryHash),[p]=kt.useState(()=>new t(u,d)),f=p.getOptimisticResult(d),m=!l&&!1!==e.subscribed;if(kt.useSyncExternalStore(kt.useCallback(e=>{const t=m?p.subscribe(Np.batchCalls(e)):Qh;return p.updateResult(),t},[p,m]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),kt.useEffect(()=>{p.setOptions(d)},[d,p]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(d,f))throw Hp(d,p,c);if((({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&void 0===e.data||pp(n,[e.error,r])))({result:f,errorResetBoundary:c,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw f.error;if(null==(i=null==(a=u.getDefaultOptions().queries)?void 0:a._experimental_afterQuery)||i.call(a,d,f),d.experimental_prefetchInRender&&!Hh&&((e,t)=>e.isLoading&&e.isFetching&&!t)(f,l)){const e=h?Hp(d,p,c):null==(o=u.getQueryCache().get(d.queryHash))?void 0:o.promise;null==e||e.catch(Qh).finally(()=>{p.updateResult()})}return d.notifyOnChangeProps?f:p.trackResult(f)}function Kp(e,t){return Qp(e,Ap)}function Gp(e,t){const n=$p(),[r]=kt.useState(()=>new Wp(n,e));kt.useEffect(()=>{r.setOptions(e)},[r,e]);const s=kt.useSyncExternalStore(kt.useCallback(e=>r.subscribe(Np.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=kt.useCallback((e,t)=>{r.mutate(e,t).catch(Qh)},[r]);if(s.error&&pp(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}
/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Yp="popstate";function Jp(e={}){return function(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",l=null,c=u();null==c&&(c=0,i.replaceState({...i.state,idx:c},""));function u(){return(i.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o="PUSH";let n=tf(m.location,e,t);c=u()+1;let r=ef(n,c),d=m.createHref(n);try{i.pushState(r,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(d)}a&&l&&l({action:o,location:m.location,delta:1})}function p(e,t){o="REPLACE";let n=tf(m.location,e,t);c=u();let r=ef(n,c),s=m.createHref(n);i.replaceState(r,"",s),a&&l&&l({action:o,location:m.location,delta:0})}function f(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href);Xp(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:nf(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r);return new URL(r,n)}(e)}let m={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Yp,d),l=e,()=>{s.removeEventListener(Yp,d),l=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>i.go(e)};return m}(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return tf("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:nf(t)},0,e)}function Xp(e,t){if(!1===e||null==e)throw new Error(t)}function Zp(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function ef(e,t){return{usr:e.state,key:e.key,idx:t}}function tf(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?rf(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function nf({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function rf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function sf(e,t,n="/"){return function(e,t,n,r){let s="string"==typeof t?rf(t):t,a=yf(s.pathname||"/",n);if(null==a)return null;let i=af(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=vf(a);o=gf(i[l],e,r)}return o}(e,t,n,!1)}function af(e,t=[],n=[],r="",s=!1){let a=(e,a,i=s,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;Xp(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=Nf([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(Xp(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),af(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:mf(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&(null==(n=e.path)?void 0:n.includes("?")))for(let r of of(e.path))a(e,t,!0,r);else a(e,t)}),t}function of(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=of(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var lf=/^:[\w-]+$/,cf=3,uf=2,df=1,hf=10,pf=-2,ff=e=>"*"===e;function mf(e,t){let n=e.split("/"),r=n.length;return n.some(ff)&&(r+=pf),t&&(r+=uf),n.filter(e=>!ff(e)).reduce((e,t)=>e+(lf.test(t)?cf:""===t?df:hf),r)}function gf(e,t,n=!1){let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=xf({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=xf({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),i.push({params:s,pathname:Nf([a,u.pathname]),pathnameBase:kf(Nf([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=Nf([a,u.pathnameBase]))}return i}function xf(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){Zp("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const s=o[r];return e[t]=n&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function vf(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return Zp(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function yf(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function bf(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wf(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function jf(e,t,n,r=!1){let s;"string"==typeof e?s=rf(e):(s={...e},Xp(!s.pathname||!s.pathname.includes("?"),bf("?","pathname","search",s)),Xp(!s.pathname||!s.pathname.includes("#"),bf("#","pathname","hash",s)),Xp(!s.search||!s.search.includes("#"),bf("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:n,search:r="",hash:s=""}="string"==typeof e?rf(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:Sf(r),hash:_f(s)}}(s,a),c=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Nf=e=>e.join("/").replace(/\/\/+/g,"/"),kf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Sf=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",_f=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Cf=["POST","PUT","PATCH","DELETE"];new Set(Cf);var Ef=["GET",...Cf];new Set(Ef);var Tf=kt.createContext(null);Tf.displayName="DataRouter";var Pf=kt.createContext(null);Pf.displayName="DataRouterState",kt.createContext(!1);var Rf=kt.createContext({isTransitioning:!1});Rf.displayName="ViewTransition",kt.createContext(new Map).displayName="Fetchers",kt.createContext(null).displayName="Await";var If=kt.createContext(null);If.displayName="Navigation";var Df=kt.createContext(null);Df.displayName="Location";var Mf=kt.createContext({outlet:null,matches:[],isDataRoute:!1});Mf.displayName="Route";var Af=kt.createContext(null);function Of(){return null!=kt.useContext(Df)}function Lf(){return Xp(Of(),"useLocation() may be used only in the context of a <Router> component."),kt.useContext(Df).location}Af.displayName="RouteError";var Ff="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zf(e){kt.useContext(If).static||kt.useLayoutEffect(e)}function Wf(){let{isDataRoute:e}=kt.useContext(Mf);return e?function(){let{router:e}=function(e){let t=kt.useContext(Tf);return Xp(t,Qf(e)),t}("useNavigate"),t=Kf("useNavigate"),n=kt.useRef(!1);zf(()=>{n.current=!0});let r=kt.useCallback(async(r,s={})=>{Zp(n.current,Ff),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...s}))},[e,t]);return r}():function(){Xp(Of(),"useNavigate() may be used only in the context of a <Router> component.");let e=kt.useContext(Tf),{basename:t,navigator:n}=kt.useContext(If),{matches:r}=kt.useContext(Mf),{pathname:s}=Lf(),a=JSON.stringify(wf(r)),i=kt.useRef(!1);zf(()=>{i.current=!0});let o=kt.useCallback((r,o={})=>{if(Zp(i.current,Ff),!i.current)return;if("number"==typeof r)return void n.go(r);let l=jf(r,JSON.parse(a),s,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Nf([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,a,s,e]);return o}()}function Uf(e,{relative:t}={}){let{matches:n}=kt.useContext(Mf),{pathname:r}=Lf(),s=JSON.stringify(wf(n));return kt.useMemo(()=>jf(e,JSON.parse(s),r,"path"===t),[e,s,r,t])}function $f(e,t,n,r){var s;Xp(Of(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=kt.useContext(If),{matches:i}=kt.useContext(Mf),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let e=d&&d.path||"";Yf(c,!d||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let h,p=Lf();if(t){let e="string"==typeof t?rf(t):t;Xp("/"===u||(null==(s=e.pathname)?void 0:s.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),h=e}else h=p;let f=h.pathname||"/",m=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=sf(e,{pathname:m});Zp(d||null!=g,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Zp(null==g||void 0!==g[g.length-1].route.element||void 0!==g[g.length-1].route.Component||void 0!==g[g.length-1].route.lazy,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=function(e,t=[],n=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,s=null==n?void 0:n.errors;if(null!=s){let e=r.findIndex(e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id]));Xp(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let a=!1,i=-1;if(n)for(let o=0;o<r.length;o++){let e=r[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(i=o),e.route.id){let{loaderData:t,errors:s}=n,o=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!s||void 0===s[e.route.id]);if(e.route.lazy||o){a=!0,r=i>=0?r.slice(0,i+1):[r[0]];break}}}return r.reduceRight((e,o,l)=>{let c,u=!1,d=null,h=null;n&&(c=s&&o.route.id?s[o.route.id]:void 0,d=o.route.errorElement||Bf,a&&(i<0&&0===l?(Yf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,h=null):i===l&&(u=!0,h=o.route.hydrateFallbackElement||null)));let p=t.concat(r.slice(0,l+1)),f=()=>{let t;return t=c?d:u?h:o.route.Component?kt.createElement(o.route.Component,null):o.route.element?o.route.element:e,kt.createElement(Hf,{match:o,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(o.route.ErrorBoundary||o.route.errorElement||0===l)?kt.createElement(Vf,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Nf([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Nf([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,n,r);return t&&x?kt.createElement(Df.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},x):x}function qf(){let e=function(){var e;let t=kt.useContext(Af),n=function(e){let t=kt.useContext(Pf);return Xp(t,Qf(e)),t}("useRouteError"),r=Kf("useRouteError");if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=kt.createElement(kt.Fragment,null,kt.createElement("p",null," Hey developer "),kt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",kt.createElement("code",{style:a},"ErrorBoundary")," or"," ",kt.createElement("code",{style:a},"errorElement")," prop on your route.")),kt.createElement(kt.Fragment,null,kt.createElement("h2",null,"Unexpected Application Error!"),kt.createElement("h3",{style:{fontStyle:"italic"}},t),n?kt.createElement("pre",{style:s},n):null,i)}kt.createContext(null);var Bf=kt.createElement(qf,null),Vf=class extends kt.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?kt.createElement(Mf.Provider,{value:this.props.routeContext},kt.createElement(Af.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hf({routeContext:e,match:t,children:n}){let r=kt.useContext(Tf);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),kt.createElement(Mf.Provider,{value:e},n)}function Qf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kf(e){let t=function(e){let t=kt.useContext(Mf);return Xp(t,Qf(e)),t}(e),n=t.matches[t.matches.length-1];return Xp(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var Gf={};function Yf(e,t,n){t||Gf[e]||(Gf[e]=!0,Zp(!1,n))}function Jf(e){Xp(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Xf({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:a=!1}){Xp(!Of(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),o=kt.useMemo(()=>({basename:i,navigator:s,static:a,future:{}}),[i,s,a]);"string"==typeof n&&(n=rf(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,p=kt.useMemo(()=>{let e=yf(l,i);return null==e?null:{location:{pathname:e,search:c,hash:u,state:d,key:h},navigationType:r}},[i,l,c,u,d,h,r]);return Zp(null!=p,`<Router basename="${i}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==p?null:kt.createElement(If.Provider,{value:o},kt.createElement(Df.Provider,{children:t,value:p}))}function Zf({children:e,location:t}){return $f(em(e),t)}function em(e,t=[]){let n=[];return kt.Children.forEach(e,(e,r)=>{if(!kt.isValidElement(e))return;let s=[...t,r];if(e.type===kt.Fragment)return void n.push.apply(n,em(e.props.children,s));Xp(e.type===Jf,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xp(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=em(e.props.children,s)),n.push(a)}),n}kt.memo(function({routes:e,future:t,state:n}){return $f(e,void 0,n,t)});var tm="get",nm="application/x-www-form-urlencoded";function rm(e){return null!=e&&"string"==typeof e.tagName}var sm=null;var am=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function im(e){return null==e||am.has(e)?e:(Zp(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nm}"`),null)}function om(e,t){let n,r,s,a,i;if(rm(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?yf(i,t):null,n=e.getAttribute("method")||tm,s=im(e.getAttribute("enctype"))||nm,a=new FormData(e)}else if(function(e){return rm(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return rm(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?yf(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||tm,s=im(e.getAttribute("formenctype"))||im(i.getAttribute("enctype"))||nm,a=new FormData(i,e),!function(){if(null===sm)try{new FormData(document.createElement("form"),0),sm=!1}catch(e){sm=!0}return sm}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,r)}}else{if(rm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tm,r=null,s=nm,i=e}var o;return a&&"text/plain"===s&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}function lm(e,t){if(!1===e||null==e)throw new Error(t)}function cm(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function um(e,t,n){return function(e,t){let n=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e},[])}((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(cm).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function dm(e,t,n,r,s,a){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null==(r=n[t].route.path)?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{var l;let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(i(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null==(l=n[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function hm(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1),[...new Set(r)];var r}function pm(){let e=kt.useContext(Tf);return lm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fm=kt.createContext(void 0);function mm(){let e=kt.useContext(fm);return lm(e,"You must render this element inside a <HydratedRouter> element"),e}function gm(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function xm({page:e,...t}){let{router:n}=pm(),r=kt.useMemo(()=>sf(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?kt.createElement(vm,{page:e,matches:r,...t}):null}function vm({page:e,matches:t,...n}){let r=Lf(),{manifest:s,routeModules:a}=mm(),{basename:i}=pm(),{loaderData:o,matches:l}=function(){let e=kt.useContext(Pf);return lm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=kt.useMemo(()=>dm(e,t,l,s,r,"data"),[e,t,l,s,r]),u=kt.useMemo(()=>dm(e,t,l,s,r,"assets"),[e,t,l,s,r]),d=kt.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach(e=>{var t;let r=s.routes[e.route.id];r&&r.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in o&&(null==(t=a[e.route.id])?void 0:t.shouldRevalidate)||r.hasClientLoader?l=!0:n.add(e.route.id))}),0===n.size)return[];let u=function(e,t,n){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===yf(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}(e,i,"data");return l&&n.size>0&&u.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[i,o,r,s,c,t,e,a]),h=kt.useMemo(()=>hm(u,s),[u,s]),p=function(e){let{manifest:t,routeModules:n}=mm(),[r,s]=kt.useState([]);return kt.useEffect(()=>{let r=!1;return um(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),r}(u);return kt.createElement(kt.Fragment,null,d.map(e=>kt.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),h.map(e=>kt.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),p.map(({key:e,link:t})=>kt.createElement("link",{key:e,nonce:n.nonce,...t})))}function ym(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}fm.displayName="FrameworkContext";var bm="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{bm&&(window.__reactRouterVersion="7.8.1")}catch(vW){}function wm({basename:e,children:t,window:n}){let r=kt.useRef();null==r.current&&(r.current=Jp({window:n,v5Compat:!0}));let s=r.current,[a,i]=kt.useState({action:s.action,location:s.location}),o=kt.useCallback(e=>{kt.startTransition(()=>i(e))},[i]);return kt.useLayoutEffect(()=>s.listen(o),[s,o]),kt.createElement(Xf,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var jm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nm=kt.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:s,replace:a,state:i,target:o,to:l,preventScrollReset:c,viewTransition:u,...d},h){let p,{basename:f}=kt.useContext(If),m="string"==typeof l&&jm.test(l),g=!1;if("string"==typeof l&&m&&(p=l,bm))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),n=yf(t.pathname,f);t.origin===e.origin&&null!=n?l=n+t.search+t.hash:g=!0}catch(vW){Zp(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=function(e,{relative:t}={}){Xp(Of(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=kt.useContext(If),{hash:s,pathname:a,search:i}=Uf(e,{relative:t}),o=a;return"/"!==n&&(o="/"===a?n:Nf([n,a])),r.createHref({pathname:o,search:i,hash:s})}(l,{relative:r}),[v,y,b]=function(e,t){let n=kt.useContext(fm),[r,s]=kt.useState(!1),[a,i]=kt.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=kt.useRef(null);kt.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),kt.useEffect(()=>{if(r){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{s(!0)},f=()=>{s(!1),i(!1)};return n?"intent"!==e?[a,h,{}]:[a,h,{onFocus:gm(o,p),onBlur:gm(l,f),onMouseEnter:gm(c,p),onMouseLeave:gm(u,f),onTouchStart:gm(d,p)}]:[!1,h,{}]}(n,d),w=function(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:i}={}){let o=Wf(),l=Lf(),c=Uf(e,{relative:a});return kt.useCallback(u=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(u,t)){u.preventDefault();let t=void 0!==n?n:nf(l)===nf(c);o(e,{replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:i})}},[l,o,c,n,r,t,e,s,a,i])}(l,{replace:a,state:i,target:o,preventScrollReset:c,relative:r,viewTransition:u});let j=kt.createElement("a",{...d,...b,href:p||x,onClick:g||s?e:function(t){e&&e(t),t.defaultPrevented||w(t)},ref:ym(h,y),target:o,"data-discover":m||"render"!==t?void 0:"true"});return v&&!m?kt.createElement(kt.Fragment,null,j,kt.createElement(xm,{page:x})):j});Nm.displayName="Link",kt.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:s,to:a,viewTransition:i,children:o,...l},c){let u=Uf(a,{relative:l.relative}),d=Lf(),h=kt.useContext(Pf),{navigator:p,basename:f}=kt.useContext(If),m=null!=h&&function(e,{relative:t}={}){let n=kt.useContext(Rf);Xp(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Sm("useViewTransitionState"),s=Uf(e,{relative:t});if(!n.isTransitioning)return!1;let a=yf(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=yf(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=xf(s.pathname,i)||null!=xf(s.pathname,a)}(u)&&!0===i,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,x=d.pathname,v=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(x=x.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&f&&(v=yf(v,f)||v);const y="/"!==g&&g.endsWith("/")?g.length-1:g.length;let b,w=x===g||!r&&x.startsWith(g)&&"/"===x.charAt(y),j=null!=v&&(v===g||!r&&v.startsWith(g)&&"/"===v.charAt(g.length)),N={isActive:w,isPending:j,isTransitioning:m},k=w?e:void 0;b="function"==typeof n?n(N):[n,w?"active":null,j?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let S="function"==typeof s?s(N):s;return kt.createElement(Nm,{...l,"aria-current":k,className:b,ref:c,style:S,to:a,viewTransition:i},"function"==typeof o?o(N):o)}).displayName="NavLink";var km=kt.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:a,method:i=tm,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},p)=>{let f=function(){let{router:e}=Sm("useSubmit"),{basename:t}=kt.useContext(If),n=Kf("useRouteId");return kt.useCallback(async(r,s={})=>{let{action:a,method:i,encType:o,formData:l,body:c}=om(r,t);if(!1===s.navigate){let t=s.fetcherKey||Cm();await e.fetch(t,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}(),m=function(e,{relative:t}={}){let{basename:n}=kt.useContext(If),r=kt.useContext(Mf);Xp(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Uf(e||".",{relative:t})},i=Lf();if(null==e){a.search=i.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?`?${n}`:""}}e&&"."!==e||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:Nf([n,a.pathname]));return nf(a)}(o,{relative:c}),g="get"===i.toLowerCase()?"get":"post",x="string"==typeof o&&jm.test(o);return kt.createElement("form",{ref:p,method:g,action:m,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=(null==r?void 0:r.getAttribute("formmethod"))||i;f(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:s,state:a,relative:c,preventScrollReset:u,viewTransition:d})},...h,"data-discover":x||"render"!==e?void 0:"true"})});function Sm(e){let t=kt.useContext(Tf);return Xp(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}km.displayName="Form";var _m=0,Cm=()=>`__${String(++_m)}__`;class Em extends Error{constructor(e,t,n){super(n),Pe(this,"url"),Pe(this,"status"),Pe(this,"statusText"),Pe(this,"body"),Pe(this,"request"),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}}class Tm extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}class Pm{constructor(e){De(this,we),De(this,je),De(this,Ne),De(this,ke),De(this,Se),De(this,_e),De(this,Ce),Me(this,we,!1),Me(this,je,!1),Me(this,Ne,!1),Me(this,ke,[]),Me(this,Se,new Promise((t,n)=>{Me(this,_e,t),Me(this,Ce,n);const r=e=>{Ie(this,we)||Ie(this,je)||Ie(this,Ne)||Ie(this,ke).push(e)};return Object.defineProperty(r,"isResolved",{get:()=>Ie(this,we)}),Object.defineProperty(r,"isRejected",{get:()=>Ie(this,je)}),Object.defineProperty(r,"isCancelled",{get:()=>Ie(this,Ne)}),e(e=>{Ie(this,we)||Ie(this,je)||Ie(this,Ne)||(Me(this,we,!0),Ie(this,_e)&&Ie(this,_e).call(this,e))},e=>{Ie(this,we)||Ie(this,je)||Ie(this,Ne)||(Me(this,je,!0),Ie(this,Ce)&&Ie(this,Ce).call(this,e))},r)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,t){return Ie(this,Se).then(e,t)}catch(e){return Ie(this,Se).catch(e)}finally(e){return Ie(this,Se).finally(e)}cancel(){if(!(Ie(this,we)||Ie(this,je)||Ie(this,Ne))){if(Me(this,Ne,!0),Ie(this,ke).length)try{for(const e of Ie(this,ke))e()}catch(e){return}Ie(this,ke).length=0,Ie(this,Ce)&&Ie(this,Ce).call(this,new Tm("Request aborted"))}}get isCancelled(){return Ie(this,Ne)}}we=new WeakMap,je=new WeakMap,Ne=new WeakMap,ke=new WeakMap,Se=new WeakMap,_e=new WeakMap,Ce=new WeakMap;const Rm={BASE:"",VERSION:"0.1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},Im=e=>null!=e,Dm=e=>"string"==typeof e,Mm=e=>Dm(e)&&""!==e,Am=e=>"object"==typeof e&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.arrayBuffer&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),Om=e=>e instanceof FormData,Lm=e=>{const t=[],n=(e,r)=>{Im(r)&&(Array.isArray(r)?r.forEach(t=>{n(e,t)}):"object"==typeof r?Object.entries(r).forEach(([t,r])=>{n(`${e}[${t}]`,r)}):((e,n)=>{t.push(`${encodeURIComponent(e)}=${encodeURIComponent(String(n))}`)})(e,r))};return Object.entries(e).forEach(([e,t])=>{n(e,t)}),t.length>0?`?${t.join("&")}`:""},Fm=async(e,t)=>t,zm=async(e,t)=>{const[n,r,s,a]=await Promise.all([Fm(0,e.TOKEN),Fm(0,e.USERNAME),Fm(0,e.PASSWORD),Fm(0,e.HEADERS)]),i=Object.entries({Accept:"application/json",...a,...t.headers}).filter(([e,t])=>Im(t)).reduce((e,[t,n])=>({...e,[t]:String(n)}),{});if(Mm(n)&&(i.Authorization=`Bearer ${n}`),Mm(r)&&Mm(s)){const e=(e=>{try{return btoa(e)}catch(t){return Buffer.from(e).toString("base64")}})(`${r}:${s}`);i.Authorization=`Basic ${e}`}return void 0!==t.body&&(t.mediaType?i["Content-Type"]=t.mediaType:Am(t.body)?i["Content-Type"]=t.body.type||"application/octet-stream":Dm(t.body)?i["Content-Type"]="text/plain":Om(t.body)||(i["Content-Type"]="application/json")),new Headers(i)},Wm=(e,t)=>new Pm(async(n,r,s)=>{try{const r=((e,t)=>{const n=encodeURI,r=t.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(e,r)=>{var s;return(null==(s=t.path)?void 0:s.hasOwnProperty(r))?n(String(t.path[r])):e}),s=`${e.BASE}${r}`;return t.query?`${s}${Lm(t.query)}`:s})(e,t),a=(e=>{if(e.formData){const t=new FormData,n=(e,n)=>{Dm(n)||Am(n)?t.append(e,n):t.append(e,JSON.stringify(n))};return Object.entries(e.formData).filter(([e,t])=>Im(t)).forEach(([e,t])=>{Array.isArray(t)?t.forEach(t=>n(e,t)):n(e,t)}),t}})(t),i=(e=>{var t;if(void 0!==e.body)return(null==(t=e.mediaType)?void 0:t.includes("/json"))?JSON.stringify(e.body):Dm(e.body)||Am(e.body)||Om(e.body)?e.body:JSON.stringify(e.body)})(t),o=await zm(e,t);if(!s.isCancelled){const e=await(async(e,t,n,r,s,a,i)=>{const o=new AbortController,l={headers:a,body:r??s,method:t.method,signal:o.signal};return i(()=>o.abort()),await fetch(n,l)})(0,t,r,i,a,o,s),l=await(async e=>{if(204!==e.status)try{const t=e.headers.get("Content-Type");if(t)return["application/json","application/problem+json"].some(e=>t.toLowerCase().startsWith(e))?await e.json():await e.text()}catch(t){}})(e),c=((e,t)=>{if(t){const n=e.headers.get(t);if(Dm(n))return n}})(e,t.responseHeader),u={url:r,ok:e.ok,status:e.status,statusText:e.statusText,body:c??l};((e,t)=>{const n={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[t.status];if(n)throw new Em(e,t,n);if(!t.ok){const n=t.status??"unknown",r=t.statusText??"unknown",s=(()=>{try{return JSON.stringify(t.body,null,2)}catch(vW){return}})();throw new Em(e,t,`Generic Error: status: ${n}; status text: ${r}; body: ${s}`)}})(t,u),n(u.body)}}catch(a){r(a)}});class Um{static loginUsersAuthLoginPost(e){return Wm(Rm,{method:"POST",url:"/users/auth/login",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static createUserUsersPost(e){return Wm(Rm,{method:"POST",url:"/users/",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listUsersUsersGet(e,t){return Wm(Rm,{method:"GET",url:"/users/",query:{workshop_id:e,role:t},errors:{422:"Validation Error"}})}static listFacilitatorConfigsUsersAdminFacilitatorsGet(){return Wm(Rm,{method:"GET",url:"/users/admin/facilitators/"})}static createFacilitatorConfigUsersAdminFacilitatorsPost(e){return Wm(Rm,{method:"POST",url:"/users/admin/facilitators/",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static createInvitationUsersInvitationsPost(e){return Wm(Rm,{method:"POST",url:"/users/invitations/",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listInvitationsUsersInvitationsGet(e,t){return Wm(Rm,{method:"GET",url:"/users/invitations/",query:{workshop_id:e,status:t},errors:{422:"Validation Error"}})}static addUserToWorkshopUsersWorkshopsWorkshopIdUsersPost(e,t){return Wm(Rm,{method:"POST",url:"/users/workshops/{workshop_id}/users/",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static listWorkshopUsersUsersWorkshopsWorkshopIdUsersGet(e){return Wm(Rm,{method:"GET",url:"/users/workshops/{workshop_id}/users/",path:{workshop_id:e},errors:{422:"Validation Error"}})}static getUserUsersUserIdGet(e){return Wm(Rm,{method:"GET",url:"/users/{user_id}",path:{user_id:e},errors:{422:"Validation Error"}})}static deleteUserUsersUserIdDelete(e){return Wm(Rm,{method:"DELETE",url:"/users/{user_id}",path:{user_id:e},errors:{422:"Validation Error"}})}static getUserPermissionsUsersUserIdPermissionsGet(e){return Wm(Rm,{method:"GET",url:"/users/{user_id}/permissions",path:{user_id:e},errors:{422:"Validation Error"}})}static updateUserStatusUsersUserIdStatusPut(e,t){return Wm(Rm,{method:"PUT",url:"/users/{user_id}/status",path:{user_id:e},query:{status:t},errors:{422:"Validation Error"}})}static updateLastActiveUsersUserIdLastActivePut(e){return Wm(Rm,{method:"PUT",url:"/users/{user_id}/last-active",path:{user_id:e},errors:{422:"Validation Error"}})}static getWorkshopParticipantsUsersWorkshopsWorkshopIdParticipantsGet(e){return Wm(Rm,{method:"GET",url:"/users/workshops/{workshop_id}/participants",path:{workshop_id:e},errors:{422:"Validation Error"}})}static assignTracesToUserUsersWorkshopsWorkshopIdParticipantsUserIdAssignTracesPost(e,t,n){return Wm(Rm,{method:"POST",url:"/users/workshops/{workshop_id}/participants/{user_id}/assign-traces",path:{workshop_id:e,user_id:t},body:n,mediaType:"application/json",errors:{422:"Validation Error"}})}static getAssignedTracesUsersWorkshopsWorkshopIdParticipantsUserIdAssignedTracesGet(e,t){return Wm(Rm,{method:"GET",url:"/users/workshops/{workshop_id}/participants/{user_id}/assigned-traces",path:{workshop_id:e,user_id:t},errors:{422:"Validation Error"}})}static removeUserFromWorkshopUsersWorkshopsWorkshopIdUsersUserIdDelete(e,t){return Wm(Rm,{method:"DELETE",url:"/users/workshops/{workshop_id}/users/{user_id}",path:{workshop_id:e,user_id:t},errors:{422:"Validation Error"}})}static autoAssignAnnotationsUsersWorkshopsWorkshopIdAutoAssignAnnotationsPost(e){return Wm(Rm,{method:"POST",url:"/users/workshops/{workshop_id}/auto-assign-annotations",path:{workshop_id:e},errors:{422:"Validation Error"}})}}class $m{static createWorkshopWorkshopsPost(e){return Wm(Rm,{method:"POST",url:"/workshops/",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getWorkshopWorkshopsWorkshopIdGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}",path:{workshop_id:e},errors:{422:"Validation Error"}})}static uploadTracesWorkshopsWorkshopIdTracesPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/traces",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getTracesWorkshopsWorkshopIdTracesGet(e,t){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/traces",path:{workshop_id:e},query:{user_id:t},errors:{422:"Validation Error"}})}static getAllTracesWorkshopsWorkshopIdAllTracesGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/all-traces",path:{workshop_id:e},errors:{422:"Validation Error"}})}static getOriginalTracesWorkshopsWorkshopIdOriginalTracesGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/original-traces",path:{workshop_id:e},errors:{422:"Validation Error"}})}static submitFindingWorkshopsWorkshopIdFindingsPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/findings",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getFindingsWorkshopsWorkshopIdFindingsGet(e,t){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/findings",path:{workshop_id:e},query:{user_id:t},errors:{422:"Validation Error"}})}static clearFindingsWorkshopsWorkshopIdFindingsDelete(e){return Wm(Rm,{method:"DELETE",url:"/workshops/{workshop_id}/findings",path:{workshop_id:e},errors:{422:"Validation Error"}})}static getFindingsWithUserDetailsWorkshopsWorkshopIdFindingsWithUsersGet(e,t){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/findings-with-users",path:{workshop_id:e},query:{user_id:t},errors:{422:"Validation Error"}})}static createRubricWorkshopsWorkshopIdRubricPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/rubric",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static updateRubricWorkshopsWorkshopIdRubricPut(e,t){return Wm(Rm,{method:"PUT",url:"/workshops/{workshop_id}/rubric",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getRubricWorkshopsWorkshopIdRubricGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/rubric",path:{workshop_id:e},errors:{422:"Validation Error"}})}static clearRubricWorkshopsWorkshopIdRubricDelete(e){return Wm(Rm,{method:"DELETE",url:"/workshops/{workshop_id}/rubric",path:{workshop_id:e},errors:{422:"Validation Error"}})}static updateRubricQuestionWorkshopsWorkshopIdRubricQuestionsQuestionIdPut(e,t,n){return Wm(Rm,{method:"PUT",url:"/workshops/{workshop_id}/rubric/questions/{question_id}",path:{workshop_id:e,question_id:t},body:n,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteRubricQuestionWorkshopsWorkshopIdRubricQuestionsQuestionIdDelete(e,t){return Wm(Rm,{method:"DELETE",url:"/workshops/{workshop_id}/rubric/questions/{question_id}",path:{workshop_id:e,question_id:t},errors:{422:"Validation Error"}})}static submitAnnotationWorkshopsWorkshopIdAnnotationsPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/annotations",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getAnnotationsWorkshopsWorkshopIdAnnotationsGet(e,t){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/annotations",path:{workshop_id:e},query:{user_id:t},errors:{422:"Validation Error"}})}static clearAnnotationsWorkshopsWorkshopIdAnnotationsDelete(e){return Wm(Rm,{method:"DELETE",url:"/workshops/{workshop_id}/annotations",path:{workshop_id:e},errors:{422:"Validation Error"}})}static getAnnotationsWithUserDetailsWorkshopsWorkshopIdAnnotationsWithUsersGet(e,t){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/annotations-with-users",path:{workshop_id:e},query:{user_id:t},errors:{422:"Validation Error"}})}static getIrrWorkshopsWorkshopIdIrrGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/irr",path:{workshop_id:e},errors:{422:"Validation Error"}})}static beginDiscoveryPhaseWorkshopsWorkshopIdBeginDiscoveryPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/begin-discovery",path:{workshop_id:e},query:{trace_limit:t},errors:{422:"Validation Error"}})}static addTracesWorkshopsWorkshopIdAddTracesPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/add-traces",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static addDiscoveryTracesWorkshopsWorkshopIdAddDiscoveryTracesPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/add-discovery-traces",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static addAnnotationTracesWorkshopsWorkshopIdAddAnnotationTracesPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/add-annotation-traces",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static reorderAnnotationTracesWorkshopsWorkshopIdReorderAnnotationTracesPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/reorder-annotation-traces",path:{workshop_id:e},errors:{422:"Validation Error"}})}static beginAnnotationPhaseWorkshopsWorkshopIdBeginAnnotationPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/begin-annotation",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static advanceToDiscoveryWorkshopsWorkshopIdAdvanceToDiscoveryPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/advance-to-discovery",path:{workshop_id:e},errors:{422:"Validation Error"}})}static advanceToRubricWorkshopsWorkshopIdAdvanceToRubricPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/advance-to-rubric",path:{workshop_id:e},errors:{422:"Validation Error"}})}static advanceToAnnotationWorkshopsWorkshopIdAdvanceToAnnotationPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/advance-to-annotation",path:{workshop_id:e},errors:{422:"Validation Error"}})}static advanceToResultsWorkshopsWorkshopIdAdvanceToResultsPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/advance-to-results",path:{workshop_id:e},errors:{422:"Validation Error"}})}static advanceWorkshopPhaseWorkshopsWorkshopIdAdvancePhasePost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/advance-phase",path:{workshop_id:e},query:{target_phase:t},errors:{422:"Validation Error"}})}static getWorkshopParticipantsWorkshopsWorkshopIdParticipantsGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/participants",path:{workshop_id:e},errors:{422:"Validation Error"}})}static generateDiscoveryTestDataWorkshopsWorkshopIdGenerateDiscoveryDataPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/generate-discovery-data",path:{workshop_id:e},errors:{422:"Validation Error"}})}static generateRubricTestDataWorkshopsWorkshopIdGenerateRubricDataPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/generate-rubric-data",path:{workshop_id:e},errors:{422:"Validation Error"}})}static generateAnnotationTestDataWorkshopsWorkshopIdGenerateAnnotationDataPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/generate-annotation-data",path:{workshop_id:e},errors:{422:"Validation Error"}})}static generateTestDataWorkshopsWorkshopIdGenerateTestDataPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/generate-test-data",path:{workshop_id:e},errors:{422:"Validation Error"}})}static advanceToJudgeTuningWorkshopsWorkshopIdAdvanceToJudgeTuningPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/advance-to-judge-tuning",path:{workshop_id:e},errors:{422:"Validation Error"}})}static advanceToUnityVolumeWorkshopsWorkshopIdAdvanceToUnityVolumePost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/advance-to-unity-volume",path:{workshop_id:e},errors:{422:"Validation Error"}})}static uploadWorkshopToVolumeWorkshopsWorkshopIdUploadToVolumePost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/upload-to-volume",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static downloadWorkshopDatabaseWorkshopsWorkshopIdDownloadDatabaseGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/download-database",path:{workshop_id:e},errors:{422:"Validation Error"}})}static completePhaseWorkshopsWorkshopIdCompletePhasePhasePost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/complete-phase/{phase}",path:{workshop_id:e,phase:t},errors:{422:"Validation Error"}})}static resumePhaseWorkshopsWorkshopIdResumePhasePhasePost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/resume-phase/{phase}",path:{workshop_id:e,phase:t},errors:{422:"Validation Error"}})}static createJudgePromptWorkshopsWorkshopIdJudgePromptsPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/judge-prompts",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getJudgePromptsWorkshopsWorkshopIdJudgePromptsGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/judge-prompts",path:{workshop_id:e},errors:{422:"Validation Error"}})}static updateJudgePromptMetricsWorkshopsWorkshopIdJudgePromptsPromptIdMetricsPut(e,t,n){return Wm(Rm,{method:"PUT",url:"/workshops/{workshop_id}/judge-prompts/{prompt_id}/metrics",path:{workshop_id:e,prompt_id:t},body:n,mediaType:"application/json",errors:{422:"Validation Error"}})}static evaluateJudgePromptWorkshopsWorkshopIdEvaluateJudgePost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/evaluate-judge",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static evaluateJudgePromptDirectWorkshopsWorkshopIdEvaluateJudgeDirectPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/evaluate-judge-direct",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getJudgeEvaluationsWorkshopsWorkshopIdJudgeEvaluationsPromptIdGet(e,t){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/judge-evaluations/{prompt_id}",path:{workshop_id:e,prompt_id:t},errors:{422:"Validation Error"}})}static saveJudgeEvaluationsWorkshopsWorkshopIdJudgeEvaluationsPromptIdPost(e,t,n){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/judge-evaluations/{prompt_id}",path:{workshop_id:e,prompt_id:t},body:n,mediaType:"application/json",errors:{422:"Validation Error"}})}static exportJudgeWorkshopsWorkshopIdExportJudgePost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/export-judge",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static configureMlflowIntakeWorkshopsWorkshopIdMlflowConfigPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/mlflow-config",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getMlflowConfigWorkshopsWorkshopIdMlflowConfigGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/mlflow-config",path:{workshop_id:e},errors:{422:"Validation Error"}})}static getMlflowIntakeStatusWorkshopsWorkshopIdMlflowStatusGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/mlflow-status",path:{workshop_id:e},errors:{422:"Validation Error"}})}static testMlflowConnectionWorkshopsWorkshopIdMlflowTestConnectionPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/mlflow-test-connection",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static ingestMlflowTracesWorkshopsWorkshopIdMlflowIngestPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/mlflow-ingest",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getMlflowTracesWorkshopsWorkshopIdMlflowTracesGet(e,t){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/mlflow-traces",path:{workshop_id:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static markUserDiscoveryCompleteWorkshopsWorkshopIdUsersUserIdCompleteDiscoveryPost(e,t){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/users/{user_id}/complete-discovery",path:{workshop_id:e,user_id:t},errors:{422:"Validation Error"}})}static getDiscoveryCompletionStatusWorkshopsWorkshopIdDiscoveryCompletionStatusGet(e){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/discovery-completion-status",path:{workshop_id:e},errors:{422:"Validation Error"}})}static isUserDiscoveryCompleteWorkshopsWorkshopIdUsersUserIdDiscoveryCompleteGet(e,t){return Wm(Rm,{method:"GET",url:"/workshops/{workshop_id}/users/{user_id}/discovery-complete",path:{workshop_id:e,user_id:t},errors:{422:"Validation Error"}})}static migrateAnnotationsToMultiMetricWorkshopsWorkshopIdMigrateAnnotationsPost(e){return Wm(Rm,{method:"POST",url:"/workshops/{workshop_id}/migrate-annotations",path:{workshop_id:e},errors:{422:"Validation Error"}})}}const qm=kt.createContext(void 0),Bm=()=>{const e=kt.useContext(qm);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e},Vm=({children:e})=>{const t=$p(),[n,r]=kt.useState(null),[s,a]=kt.useState(null),[i,o]=kt.useState(!0),[l,c]=kt.useState(null);kt.useEffect(()=>{(async()=>{var e;const t=localStorage.getItem("workshop_user");if(t)try{const i=JSON.parse(t);try{const e=await Um.getUserUsersUserIdGet(i.id);if(r(e),e.workshop_id){localStorage.getItem("workshop_id")||localStorage.setItem("workshop_id",e.workshop_id)}await u(e.id)}catch(n){if(404===n.status||(null==(e=n.message)?void 0:e.includes("404")))localStorage.removeItem("workshop_user"),r(null),a(null);else{r(i);try{await u(i.id)}catch(s){console.error("Failed to load permissions on cached user:",s),a({can_annotate:!0,can_view_rubric:!0,can_create_rubric:!1,can_manage_workshop:!1,can_assign_annotations:!1})}}}}catch(vW){console.error("Error initializing user:",vW),localStorage.removeItem("workshop_user"),r(null),a(null)}o(!1)})()},[]),kt.useEffect(()=>{n?localStorage.setItem("workshop_user",JSON.stringify(n)):localStorage.removeItem("workshop_user")},[n]);const u=async e=>{var t,n,s;try{const t=await Um.getUserPermissionsUsersUserIdPermissionsGet(e);a(t),c(null)}catch(i){console.error("Error loading permissions:",i);404===i.status||(null==(t=i.message)?void 0:t.includes("404"))||(null==(s=null==(n=i.body)?void 0:n.detail)?void 0:s.includes("not found"))?(localStorage.removeItem("workshop_user"),r(null),a(null),c("Your session has expired. Please log in again.")):(console.warn("Failed to load permissions, using defaults"),a({can_annotate:!0,can_view_rubric:!0,can_create_rubric:!1,can_manage_workshop:!1,can_assign_annotations:!1}),c(null))}},d=async e=>{if(r(e),e)try{if(await u(e.id),t.invalidateQueries(),e.workshop_id){localStorage.getItem("workshop_id")!==e.workshop_id&&localStorage.setItem("workshop_id",e.workshop_id)}}catch(n){console.error("Error setting user with permissions:",n)}else a(null),c(null)};return Mt.jsx(qm.Provider,{value:{user:n,permissions:s,setUser:d,login:async(e,t)=>{try{c(null),o(!0);const n=await fetch("/users/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!n.ok){const e=await n.json();throw new Error(e.detail||"Login failed")}const r=await n.json();await d(r.user),c(null)}catch(n){throw c(n.message||"Login failed"),new Error(n.message||"Login failed")}finally{o(!1)}},logout:()=>{r(null),a(null),localStorage.removeItem("workshop_user")},updateLastActive:async()=>{if(n)try{await Um.updateLastActiveUsersUsersUserIdLastActivePut(n.id)}catch(e){}},isLoading:i,error:l},children:e})},Hm=()=>{const{user:e,permissions:t}=Bm();return{isFacilitator:"facilitator"===(null==e?void 0:e.role),isSME:"sme"===(null==e?void 0:e.role),isParticipant:"participant"===(null==e?void 0:e.role),canViewDiscovery:(null==t?void 0:t.can_view_discovery)??!1,canCreateFindings:(null==t?void 0:t.can_create_findings)??!1,canViewAllFindings:(null==t?void 0:t.can_view_all_findings)??!1,canCreateRubric:(null==t?void 0:t.can_create_rubric)??!1,canViewRubric:(null==t?void 0:t.can_view_rubric)??!1,canAnnotate:(null==t?void 0:t.can_annotate)??!1,canViewAllAnnotations:(null==t?void 0:t.can_view_all_annotations)??!1,canViewResults:(null==t?void 0:t.can_view_results)??!1,canManageWorkshop:(null==t?void 0:t.can_manage_workshop)??!1,canAssignAnnotations:(null==t?void 0:t.can_assign_annotations)??!1}},Qm=kt.createContext(void 0),Km=()=>{const e=window.location.pathname,t=window.location.search;let n=e.match(/\/workshop\/([a-f0-9-]{36})/);if(n){const e=n[1],t=localStorage.getItem("workshop_id");return t&&t!==e&&localStorage.removeItem("workshop_id"),e}const r=new URLSearchParams(t).get("workshop");if(r&&r.match(/^[a-f0-9-]{36}$/)){const e=localStorage.getItem("workshop_id");return e&&e!==r&&localStorage.removeItem("workshop_id"),r}const s=localStorage.getItem("workshop_id");return s&&s.match(/^[a-f0-9-]{36}$/)?"569c0be9-3782-4587-a595-98033265c7dc"===s?(localStorage.removeItem("workshop_id"),null):s:null};function Gm({children:e,restoredWorkshopId:t}){const n=$p(),{user:r}=Bm(),[s,a]=kt.useState(()=>{const e=Km();return e&&n.clear(),e}),[i,o]=kt.useState(null),[l,c]=kt.useState("filled"),u=e=>{e!==s&&(n.invalidateQueries(),n.clear(),a(e),o(null),e?localStorage.setItem("workshop_id",e):localStorage.removeItem("workshop_id"))};return St.useEffect(()=>{(null==r?void 0:r.workshop_id)&&r.workshop_id!==s&&u(r.workshop_id)},[r,s]),St.useEffect(()=>{t&&!s&&u(t)},[t,s]),St.useEffect(()=>{const e=()=>{const e=Km();e&&e!==s&&(n.clear(),n.removeQueries(),u(e))};return window.addEventListener("popstate",e),e(),()=>{window.removeEventListener("popstate",e)}},[s,n]),Mt.jsx(Qm.Provider,{value:{workshopId:s,workshop:i,setWorkshopId:u,setWorkshop:o,workflowMode:l,setWorkflowMode:c,clearInvalidWorkshopId:()=>{localStorage.removeItem("workshop_id"),n.invalidateQueries(),n.clear(),a(null),o(null)}},children:e})}function Ym(){const e=kt.useContext(Qm);if(void 0===e)throw new Error("useWorkshopContext must be used within a WorkshopProvider");return e}const Jm=e=>["workshop",e],Xm=(e,t)=>["findings",e,t],Zm=e=>["rubric",e],eg=(e,t)=>["annotations",e,t],tg=e=>["irr",e],ng=e=>["mlflowConfig",e];function rg(e){return Kp({queryKey:Jm(e),queryFn:()=>$m.getWorkshopWorkshopsWorkshopIdGet(e),enabled:!!e,staleTime:1e4,refetchInterval:1e4,refetchOnMount:!0,refetchIntervalInBackground:!1,refetchOnWindowFocus:!0,retry:(e,t)=>(!t||"object"!=typeof t||!("status"in t)||404!==t.status)&&e<3,retryDelay:1e3})}function sg(){const e=$p();return Gp({mutationFn:e=>$m.createWorkshopWorkshopsPost(e),onSuccess:t=>{e.setQueryData(Jm(t.id),t)}})}function ag(e,t){return Kp({queryKey:["traces",e,t],queryFn:async()=>{if(!t)throw new Error("user_id is required for fetching traces");const n=`/workshops/${e}/traces?user_id=${encodeURIComponent(t)}`,r=await fetch(n);if(!r.ok){const e=await r.json().catch(()=>({detail:"Failed to fetch traces"}));throw new Error(e.detail||"Failed to fetch traces")}return r.json()},enabled:!!e&&!!t,staleTime:3e4,gcTime:3e5,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnMount:!0,refetchInterval:!1})}function ig(e){return Kp({queryKey:["all-traces",e],queryFn:async()=>{const t=await fetch(`/workshops/${e}/all-traces`);if(!t.ok)throw new Error("Failed to fetch all traces");return t.json()},enabled:!!e,staleTime:3e4,gcTime:6e5,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnMount:!1})}function og(e,t){return Kp({queryKey:Xm(e,null==t?void 0:t.id),queryFn:()=>$m.getFindingsWorkshopsWorkshopIdFindingsGet(e,null==t?void 0:t.id),enabled:!!e&&!!(null==t?void 0:t.id),staleTime:3e4,refetchInterval:!1,refetchOnWindowFocus:!1})}function lg(e){const{isFacilitator:t}=Hm();return Kp({queryKey:[...Xm(e,"all_findings"),"with_user_details"],queryFn:()=>$m.getFindingsWithUserDetailsWorkshopsWorkshopIdFindingsWithUsersGet(e,void 0),enabled:!!e&&t})}function cg(e){return Kp({queryKey:Zm(e),queryFn:async()=>{try{return await $m.getRubricWorkshopsWorkshopIdRubricGet(e)}catch(t){if(404===t.status)return null;throw t}},enabled:!!e})}function ug(e){const{isFacilitator:t}=Hm();return Kp({queryKey:eg(e,"all_annotations"),queryFn:()=>$m.getAnnotationsWorkshopsWorkshopIdAnnotationsGet(e,void 0),enabled:!!e&&t})}function dg(e){const{isFacilitator:t}=Hm();return Kp({queryKey:[...eg(e,"all_annotations"),"with_user_details"],queryFn:async()=>{const t=await fetch(`/workshops/${e}/annotations-with-users`);if(!t.ok)throw new Error("Failed to fetch annotations with user details");return t.json()},enabled:!!e&&t})}function hg(e){return Kp({queryKey:eg(e),queryFn:()=>$m.getAnnotationsWorkshopsWorkshopIdAnnotationsGet(e),enabled:!!e})}function pg(e){return Kp({queryKey:ng(e),queryFn:async()=>{try{return await $m.getMlflowConfigWorkshopsWorkshopIdMlflowConfigGet(e)}catch(t){if(404===t.status)return null;throw t}},enabled:!!e})}const fg=kt.createContext(void 0);function mg({children:e}){const{workshopId:t}=Ym(),{user:n}=Bm(),[r,s]=kt.useState("intake"),[a,i]=kt.useState([]),{data:o}=rg(t||""),{data:l}=Kp({queryKey:["workshop-participants",t],queryFn:async()=>{if(!t)return[];const e=await fetch(`/workshops/${t}/participants`);if(e.ok){return await e.json()}return[]},enabled:!!t}),{data:c}=ig(t||""),{data:u}=function(e,t){return Kp({queryKey:Xm(e,t),queryFn:()=>$m.getFindingsWorkshopsWorkshopIdFindingsGet(e,t),enabled:!!e})}(t||""),{data:d}=cg(t||""),{data:h}=hg(t||"");kt.useEffect(()=>{(null==o?void 0:o.current_phase)&&s(o.current_phase)},[null==o?void 0:o.current_phase]),kt.useEffect(()=>{(null==o?void 0:o.completed_phases)&&i(o.completed_phases)},[null==o?void 0:o.completed_phases]),kt.useEffect(()=>{if(!c||!t||!o)return;const e=[...o.completed_phases||[]];d&&Array.isArray(d)&&d.length>0&&(null==o?void 0:o.current_phase)&&["annotation","results","judge_tuning","unity_volume"].includes(o.current_phase)&&e.push("rubric"),(h&&h.length>=2||"judge_tuning"===(null==o?void 0:o.current_phase)||"unity_volume"===(null==o?void 0:o.current_phase))&&e.push("results"),"judge_tuning"!==(null==o?void 0:o.current_phase)&&"unity_volume"!==(null==o?void 0:o.current_phase)||e.push("judge_tuning"),"unity_volume"===(null==o?void 0:o.current_phase)&&e.push("unity_volume");const n=["discovery","annotation"],r=(null==o?void 0:o.completed_phases)||[],s=[...r,...e.filter(e=>!n.includes(e)&&!r.includes(e))],l=new Set(a),u=new Set(s);l.size===u.size&&[...l].every(e=>u.has(e))||i(s)},[c,u,d,h,l,t,n,null==o?void 0:o.current_phase]);const p=e=>a.includes(e);return Mt.jsx(fg.Provider,{value:{currentPhase:r,completedPhases:a,setCurrentPhase:s,markPhaseComplete:e=>{i(t=>t.includes(e)?t:[...t,e])},isPhaseComplete:p,isPhaseEnabled:e=>{const t=["discovery","rubric","annotation","results","judge_tuning","unity_volume"],n=t.indexOf(e);if(0===n)return!0;const r=t[n-1];return p(r)},getPhaseProgress:()=>{const e=Math.min(a.length,6);return{completed:e,total:6,percentage:Math.round(e/6*100)}}},children:e})}function gg(){const e=kt.useContext(fg);if(void 0===e)throw new Error("useWorkflowContext must be used within a WorkflowProvider");return e}function xg(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=xg(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function vg(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=xg(e))&&(r&&(r+=" "),r+=t);return r}const yg=e=>{const t=Ng(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),bg(n,t)||jg(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&r[e]?[...s,...r[e]]:s}}},bg=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?bg(e.slice(1),s):void 0;if(a)return a;if(0===t.validators.length)return;const i=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(i)))?void 0:n.classGroupId},wg=/^\[(.+)\]$/,jg=e=>{if(wg.test(e)){const t=wg.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Ng=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Cg(Object.entries(e.classGroups),n).forEach(([e,n])=>{kg(n,r,e,t)}),r},kg=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Sg(t,e)).classGroupId=n)}if("function"==typeof e)return _g(e)?void kg(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,s])=>{kg(s,Sg(t,e),n,r)})})},Sg=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},_g=e=>e.isThemeGetter,Cg=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,Eg=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},Tg=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,s=t[0],a=t.length,i=e=>{const n=[];let i,o=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===o){if(c===s&&(r||e.slice(d,d+a)===t)){n.push(e.slice(l,d)),l=d+a;continue}if("/"===c){i=d;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return n?e=>n({className:e,parseClassName:i}):i},Pg=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},Rg=/\s+/;function Ig(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Dg(e))&&(r&&(r+=" "),r+=t);return r}const Dg=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Dg(e[r]))&&(n&&(n+=" "),n+=t);return n};function Mg(e,...t){let n,r,s,a=function(o){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Eg(e.cacheSize),parseClassName:Tg(e),...yg(e)}))(l),r=n.cache.get,s=n.cache.set,a=i,i(o)};function i(e){const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(Rg);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=n(e);let h=Boolean(d),p=r(h?u.substring(0,d):u);if(!p){if(!h){o=e+(o.length>0?" "+o:o);continue}if(p=r(u),!p){o=e+(o.length>0?" "+o:o);continue}h=!1}const f=Pg(t).join(":"),m=c?f+"!":f,g=m+p;if(a.includes(g))continue;a.push(g);const x=s(p,h);for(let n=0;n<x.length;++n){const e=x[n];a.push(m+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return s(e,a),a}return function(){return a(Ig.apply(null,arguments))}}const Ag=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Og=/^\[(?:([a-z-]+):)?(.+)\]$/i,Lg=/^\d+\/\d+$/,Fg=new Set(["px","full","screen"]),zg=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wg=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ug=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$g=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qg=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bg=e=>Hg(e)||Fg.has(e)||Lg.test(e),Vg=e=>ax(e,"length",ix),Hg=e=>Boolean(e)&&!Number.isNaN(Number(e)),Qg=e=>ax(e,"number",Hg),Kg=e=>Boolean(e)&&Number.isInteger(Number(e)),Gg=e=>e.endsWith("%")&&Hg(e.slice(0,-1)),Yg=e=>Og.test(e),Jg=e=>zg.test(e),Xg=new Set(["length","size","percentage"]),Zg=e=>ax(e,Xg,ox),ex=e=>ax(e,"position",ox),tx=new Set(["image","url"]),nx=e=>ax(e,tx,cx),rx=e=>ax(e,"",lx),sx=()=>!0,ax=(e,t,n)=>{const r=Og.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},ix=e=>Wg.test(e)&&!Ug.test(e),ox=()=>!1,lx=e=>$g.test(e),cx=e=>qg.test(e),ux=Mg(()=>{const e=Ag("colors"),t=Ag("spacing"),n=Ag("blur"),r=Ag("brightness"),s=Ag("borderColor"),a=Ag("borderRadius"),i=Ag("borderSpacing"),o=Ag("borderWidth"),l=Ag("contrast"),c=Ag("grayscale"),u=Ag("hueRotate"),d=Ag("invert"),h=Ag("gap"),p=Ag("gradientColorStops"),f=Ag("gradientColorStopPositions"),m=Ag("inset"),g=Ag("margin"),x=Ag("opacity"),v=Ag("padding"),y=Ag("saturate"),b=Ag("scale"),w=Ag("sepia"),j=Ag("skew"),N=Ag("space"),k=Ag("translate"),S=()=>["auto",Yg,t],_=()=>[Yg,t],C=()=>["",Bg,Vg],E=()=>["auto",Hg,Yg],T=()=>["","0",Yg],P=()=>[Hg,Yg];return{cacheSize:500,separator:":",theme:{colors:[sx],spacing:[Bg,Vg],blur:["none","",Jg,Yg],brightness:P(),borderColor:[e],borderRadius:["none","","full",Jg,Yg],borderSpacing:_(),borderWidth:C(),contrast:P(),grayscale:T(),hueRotate:P(),invert:T(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[Gg,Vg],inset:S(),margin:S(),opacity:P(),padding:_(),saturate:P(),scale:P(),sepia:T(),skew:P(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",Yg]}],container:["container"],columns:[{columns:[Jg]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Yg]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kg,Yg]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Yg]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",Kg,Yg]}],"grid-cols":[{"grid-cols":[sx]}],"col-start-end":[{col:["auto",{span:["full",Kg,Yg]},Yg]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[sx]}],"row-start-end":[{row:["auto",{span:[Kg,Yg]},Yg]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Yg]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Yg]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Yg,t]}],"min-w":[{"min-w":[Yg,t,"min","max","fit"]}],"max-w":[{"max-w":[Yg,t,"none","full","min","max","fit","prose",{screen:[Jg]},Jg]}],h:[{h:[Yg,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Yg,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Yg,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Yg,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Jg,Vg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qg]}],"font-family":[{font:[sx]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Yg]}],"line-clamp":[{"line-clamp":["none",Hg,Qg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Bg,Yg]}],"list-image":[{"list-image":["none",Yg]}],"list-style-type":[{list:["none","disc","decimal",Yg]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Bg,Vg]}],"underline-offset":[{"underline-offset":["auto",Bg,Yg]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Yg]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Yg]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ex]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zg]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},nx]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Bg,Yg]}],"outline-w":[{outline:[Bg,Vg]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Bg,Vg]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Jg,rx]}],"shadow-color":[{shadow:[sx]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Jg,Yg]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Yg]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",Yg]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",Yg]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Kg,Yg]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Yg]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Yg]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Yg]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Bg,Vg,Qg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function dx(...e){return ux(vg(e))}const hx=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("div",{ref:n,className:dx("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));hx.displayName="Card";const px=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("div",{ref:n,className:dx("flex flex-col space-y-1.5 p-6",e),...t}));px.displayName="CardHeader";const fx=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("h3",{ref:n,className:dx("text-2xl font-semibold leading-none tracking-tight",e),...t}));fx.displayName="CardTitle";const mx=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("p",{ref:n,className:dx("text-sm text-muted-foreground",e),...t}));mx.displayName="CardDescription";const gx=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("div",{ref:n,className:dx("p-6 pt-0",e),...t}));gx.displayName="CardContent";kt.forwardRef(({className:e,...t},n)=>Mt.jsx("div",{ref:n,className:dx("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const xx=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},vx=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),yx=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var bx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=kt.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>kt.createElement("svg",{ref:l,...bx,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:vx("lucide",s),...!a&&!yx(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>kt.createElement(e,t)),...Array.isArray(a)?a:[a]])),jx=(e,t)=>{const n=kt.forwardRef(({className:n,...r},s)=>{return kt.createElement(wx,{ref:s,iconNode:t,className:vx(`lucide-${a=xx(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var a});return n.displayName=xx(e),n},Nx=jx("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),kx=jx("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Sx=jx("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),_x=jx("binary",[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2",key:"p02svl"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2",key:"xm4xkj"}],["path",{d:"M6 20h4",key:"1i6q5t"}],["path",{d:"M14 10h4",key:"ru81e7"}],["path",{d:"M6 14h2v6",key:"16z9wg"}],["path",{d:"M14 4h2v6",key:"1idq9u"}]]),Cx=jx("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Ex=jx("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Tx=jx("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Px=jx("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),Rx=jx("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ix=jx("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Dx=jx("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Mx=jx("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ax=jx("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ox=jx("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),Lx=jx("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),Fx=jx("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),zx=jx("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Wx=jx("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ux=jx("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),$x=jx("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),qx=jx("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Bx=jx("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Vx=jx("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Hx=jx("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Qx=jx("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Kx=jx("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Gx=jx("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Yx=jx("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Jx=jx("focus",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),Xx=jx("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Zx=jx("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),ev=jx("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),tv=jx("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),nv=jx("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),rv=jx("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),sv=jx("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),av=jx("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),iv=jx("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),ov=jx("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),lv=jx("message-square-text",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]]),cv=jx("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),uv=jx("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),dv=jx("notebook-pen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]),hv=jx("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),pv=jx("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),fv=jx("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),mv=jx("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),gv=jx("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),xv=jx("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),vv=jx("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),yv=jx("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),bv=jx("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),wv=jx("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),jv=jx("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Nv=jx("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),kv=jx("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),Sv=jx("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),_v=jx("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),Cv=jx("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ev=jx("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Tv=jx("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Pv=jx("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Rv=jx("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Iv=jx("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Dv=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Mv=vg,Av=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return Mv(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(e=>{const t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;const i=Dv(t)||Dv(r);return s[e][i]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...o}[t]):{...a,...o}[t]===n})?[...e,n,r]:e},[]);return Mv(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)},Ov=Av("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Lv({className:e,variant:t,...n}){return Mt.jsx("div",{className:dx(Ov({variant:t}),e),...n})}const Fv=({showDescription:e=!0,showPhase:t=!0,showParticipantCount:n=!0,variant:r="default"})=>{var s,a;const{workshopId:i}=Ym(),{currentPhase:o}=gg(),{data:l}=rg(i);if(!l)return Mt.jsx("div",{className:"border-b bg-background p-6",children:Mt.jsxs("div",{className:"animate-pulse",children:[Mt.jsx("div",{className:"h-6 bg-muted rounded w-1/3 mb-2"}),Mt.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})});return Mt.jsx("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-6 py-4",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{className:"flex-1",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("h1",{className:"text-lg font-semibold text-foreground",children:l.name}),t&&Mt.jsx(Lv,{variant:"outline",className:`${(e=>{switch(e){case"intake":return"bg-blue-100 text-blue-700 border-blue-200";case"discovery":return"bg-green-100 text-green-700 border-green-200";case"rubric":return"bg-purple-100 text-purple-700 border-purple-200";case"annotation":return"bg-orange-100 text-orange-700 border-orange-200";case"results":return"bg-red-100 text-red-700 border-red-200";case"judge_tuning":return"bg-indigo-100 text-indigo-700 border-indigo-200";case"unity_volume":return"bg-teal-100 text-teal-700 border-teal-200";default:return"bg-muted text-muted-foreground border-border"}})(o)} border font-medium`,children:(e=>{switch(e){case"intake":return"Intake";case"discovery":return"Discovery";case"rubric":return"Rubric Creation";case"annotation":return"Annotation";case"results":return"Results";case"judge_tuning":return"Judge Tuning";case"unity_volume":return"Data Management";default:return e}})(o)})]}),e&&l.description&&Mt.jsx("p",{className:"text-sm text-muted-foreground mt-1 max-w-2xl",children:l.description}),"detailed"===r&&Mt.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-2",children:[Mt.jsxs("span",{children:["ID: ",l.id.slice(0,8),"..."]}),Mt.jsxs("span",{children:["Created: ",new Date(l.created_at).toLocaleDateString()]}),n&&Mt.jsxs("span",{children:["Participants: ",(null==(s=l.users)?void 0:s.length)||0]})]})]}),"default"===r&&n&&Mt.jsxs("div",{className:"text-right",children:[Mt.jsx("div",{className:"text-xs text-muted-foreground",children:"Participants"}),Mt.jsx("div",{className:"text-2xl font-bold text-foreground",children:(null==(a=l.users)?void 0:a.length)||0})]})]})})};function zv(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Wv(...e){return t=>{let n=!1;const r=e.map(e=>{const r=zv(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():zv(e[t],null)}}}}function Uv(...e){return kt.useCallback(Wv(...e),e)}function $v(e){const t=Bv(e),n=kt.forwardRef((e,n)=>{const{children:r,...s}=e,a=kt.Children.toArray(r),i=a.find(Qv);if(i){const e=i.props.children,r=a.map(t=>t===i?kt.Children.count(e)>1?kt.Children.only(null):kt.isValidElement(e)?e.props.children:null:t);return Mt.jsx(t,{...s,ref:n,children:kt.isValidElement(e)?kt.cloneElement(e,void 0,r):null})}return Mt.jsx(t,{...s,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}var qv=$v("Slot");function Bv(e){const t=kt.forwardRef((e,t)=>{const{children:n,...r}=e;if(kt.isValidElement(n)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;if(s)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...e)=>{const t=a(...e);return s(...e),t}:s&&(n[r]=s):"style"===r?n[r]={...s,...a}:"className"===r&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==kt.Fragment&&(s.ref=t?Wv(t,e):e),kt.cloneElement(n,s)}return kt.Children.count(n)>1?kt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Vv=Symbol("radix.slottable");function Hv(e){const t=({children:e})=>Mt.jsx(Mt.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=Vv,t}function Qv(e){return kt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Vv}const Kv=Av("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Gv=kt.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const i=r?qv:"button";return Mt.jsx(i,{className:dx(Kv({variant:t,size:n,className:e})),ref:a,...s})});function Yv(){}function Jv(){}Gv.displayName="Button";const Xv=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Zv=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ey={};function ty(e,t){return(ey.jsx?Zv:Xv).test(e)}const ny=/[ \t\n\f\r]/g;function ry(e){return""===e.replace(ny,"")}class sy{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function ay(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new sy(n,r,t)}function iy(e){return e.toLowerCase()}sy.prototype.normal={},sy.prototype.property={},sy.prototype.space=void 0;class oy{constructor(e,t){this.attribute=t,this.property=e}}oy.prototype.attribute="",oy.prototype.booleanish=!1,oy.prototype.boolean=!1,oy.prototype.commaOrSpaceSeparated=!1,oy.prototype.commaSeparated=!1,oy.prototype.defined=!1,oy.prototype.mustUseProperty=!1,oy.prototype.number=!1,oy.prototype.overloadedBoolean=!1,oy.prototype.property="",oy.prototype.spaceSeparated=!1,oy.prototype.space=void 0;let ly=0;const cy=gy(),uy=gy(),dy=gy(),hy=gy(),py=gy(),fy=gy(),my=gy();function gy(){return 2**++ly}const xy=Object.freeze(Object.defineProperty({__proto__:null,boolean:cy,booleanish:uy,commaOrSpaceSeparated:my,commaSeparated:fy,number:hy,overloadedBoolean:dy,spaceSeparated:py},Symbol.toStringTag,{value:"Module"})),vy=Object.keys(xy);class yy extends oy{constructor(e,t,n,r){let s=-1;if(super(e,t),by(this,"space",r),"number"==typeof n)for(;++s<vy.length;){const e=vy[s];by(this,vy[s],(n&xy[e])===xy[e])}}}function by(e,t,n){n&&(e[t]=n)}function wy(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new yy(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[iy(r)]=r,n[iy(a.attribute)]=r}return new sy(t,n,e.space)}yy.prototype.defined=!0;const jy=wy({properties:{ariaActiveDescendant:null,ariaAtomic:uy,ariaAutoComplete:null,ariaBusy:uy,ariaChecked:uy,ariaColCount:hy,ariaColIndex:hy,ariaColSpan:hy,ariaControls:py,ariaCurrent:null,ariaDescribedBy:py,ariaDetails:null,ariaDisabled:uy,ariaDropEffect:py,ariaErrorMessage:null,ariaExpanded:uy,ariaFlowTo:py,ariaGrabbed:uy,ariaHasPopup:null,ariaHidden:uy,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:py,ariaLevel:hy,ariaLive:null,ariaModal:uy,ariaMultiLine:uy,ariaMultiSelectable:uy,ariaOrientation:null,ariaOwns:py,ariaPlaceholder:null,ariaPosInSet:hy,ariaPressed:uy,ariaReadOnly:uy,ariaRelevant:null,ariaRequired:uy,ariaRoleDescription:py,ariaRowCount:hy,ariaRowIndex:hy,ariaRowSpan:hy,ariaSelected:uy,ariaSetSize:hy,ariaSort:null,ariaValueMax:hy,ariaValueMin:hy,ariaValueNow:hy,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function Ny(e,t){return t in e?e[t]:t}function ky(e,t){return Ny(e,t.toLowerCase())}const Sy=wy({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:fy,acceptCharset:py,accessKey:py,action:null,allow:null,allowFullScreen:cy,allowPaymentRequest:cy,allowUserMedia:cy,alt:null,as:null,async:cy,autoCapitalize:null,autoComplete:py,autoFocus:cy,autoPlay:cy,blocking:py,capture:null,charSet:null,checked:cy,cite:null,className:py,cols:hy,colSpan:null,content:null,contentEditable:uy,controls:cy,controlsList:py,coords:hy|fy,crossOrigin:null,data:null,dateTime:null,decoding:null,default:cy,defer:cy,dir:null,dirName:null,disabled:cy,download:dy,draggable:uy,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:cy,formTarget:null,headers:py,height:hy,hidden:dy,high:hy,href:null,hrefLang:null,htmlFor:py,httpEquiv:py,id:null,imageSizes:null,imageSrcSet:null,inert:cy,inputMode:null,integrity:null,is:null,isMap:cy,itemId:null,itemProp:py,itemRef:py,itemScope:cy,itemType:py,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:cy,low:hy,manifest:null,max:null,maxLength:hy,media:null,method:null,min:null,minLength:hy,multiple:cy,muted:cy,name:null,nonce:null,noModule:cy,noValidate:cy,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:cy,optimum:hy,pattern:null,ping:py,placeholder:null,playsInline:cy,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:cy,referrerPolicy:null,rel:py,required:cy,reversed:cy,rows:hy,rowSpan:hy,sandbox:py,scope:null,scoped:cy,seamless:cy,selected:cy,shadowRootClonable:cy,shadowRootDelegatesFocus:cy,shadowRootMode:null,shape:null,size:hy,sizes:null,slot:null,span:hy,spellCheck:uy,src:null,srcDoc:null,srcLang:null,srcSet:null,start:hy,step:null,style:null,tabIndex:hy,target:null,title:null,translate:null,type:null,typeMustMatch:cy,useMap:null,value:uy,width:hy,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:py,axis:null,background:null,bgColor:null,border:hy,borderColor:null,bottomMargin:hy,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:cy,declare:cy,event:null,face:null,frame:null,frameBorder:null,hSpace:hy,leftMargin:hy,link:null,longDesc:null,lowSrc:null,marginHeight:hy,marginWidth:hy,noResize:cy,noHref:cy,noShade:cy,noWrap:cy,object:null,profile:null,prompt:null,rev:null,rightMargin:hy,rules:null,scheme:null,scrolling:uy,standby:null,summary:null,text:null,topMargin:hy,valueType:null,version:null,vAlign:null,vLink:null,vSpace:hy,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:cy,disableRemotePlayback:cy,prefix:null,property:null,results:hy,security:null,unselectable:null},space:"html",transform:ky}),_y=wy({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:my,accentHeight:hy,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:hy,amplitude:hy,arabicForm:null,ascent:hy,attributeName:null,attributeType:null,azimuth:hy,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:hy,by:null,calcMode:null,capHeight:hy,className:py,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:hy,diffuseConstant:hy,direction:null,display:null,dur:null,divisor:hy,dominantBaseline:null,download:cy,dx:null,dy:null,edgeMode:null,editable:null,elevation:hy,enableBackground:null,end:null,event:null,exponent:hy,externalResourcesRequired:null,fill:null,fillOpacity:hy,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:fy,g2:fy,glyphName:fy,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:hy,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:hy,horizOriginX:hy,horizOriginY:hy,id:null,ideographic:hy,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:hy,k:hy,k1:hy,k2:hy,k3:hy,k4:hy,kernelMatrix:my,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:hy,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:hy,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:hy,overlineThickness:hy,paintOrder:null,panose1:null,path:null,pathLength:hy,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:py,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:hy,pointsAtY:hy,pointsAtZ:hy,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:my,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:my,rev:my,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:my,requiredFeatures:my,requiredFonts:my,requiredFormats:my,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:hy,specularExponent:hy,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:hy,strikethroughThickness:hy,string:null,stroke:null,strokeDashArray:my,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:hy,strokeOpacity:hy,strokeWidth:null,style:null,surfaceScale:hy,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:my,tabIndex:hy,tableValues:null,target:null,targetX:hy,targetY:hy,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:my,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:hy,underlineThickness:hy,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:hy,values:null,vAlphabetic:hy,vMathematical:hy,vectorEffect:null,vHanging:hy,vIdeographic:hy,version:null,vertAdvY:hy,vertOriginX:hy,vertOriginY:hy,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:hy,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ny}),Cy=wy({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),Ey=wy({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ky}),Ty=wy({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),Py={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Ry=/[A-Z]/g,Iy=/-[a-z]/g,Dy=/^data[-\w.:]+$/i;function My(e){return"-"+e.toLowerCase()}function Ay(e){return e.charAt(1).toUpperCase()}const Oy=ay([jy,Sy,Cy,Ey,Ty],"html"),Ly=ay([jy,_y,Cy,Ey,Ty],"svg");var Fy={},zy=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Wy=/\n/g,Uy=/^\s*/,$y=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,qy=/^:\s*/,By=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Vy=/^[;\s]*/,Hy=/^\s+|\s+$/g,Qy="";function Ky(e){return e?e.replace(Hy,Qy):Qy}var Gy=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var r=(0,Yy.default)(e),s="function"==typeof t;return r.forEach(function(e){if("declaration"===e.type){var r=e.property,a=e.value;s?t(r,a,e):a&&((n=n||{})[r]=a)}}),n};var Yy=Gy(function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(e){var t=e.match(Wy);t&&(n+=t.length);var s=e.lastIndexOf("\n");r=~s?e.length-s:r+e.length}function a(){var e={line:n,column:r};return function(t){return t.position=new i(e),c(),t}}function i(e){this.start=e,this.end={line:n,column:r},this.source=t.source}function o(s){var a=new Error(t.source+":"+n+":"+r+": "+s);if(a.reason=s,a.filename=t.source,a.line=n,a.column=r,a.source=e,!t.silent)throw a}function l(t){var n=t.exec(e);if(n){var r=n[0];return s(r),e=e.slice(r.length),n}}function c(){l(Uy)}function u(e){var t;for(e=e||[];t=d();)!1!==t&&e.push(t);return e}function d(){var t=a();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;Qy!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,Qy===e.charAt(n-1))return o("End of comment missing");var i=e.slice(2,n-2);return r+=2,s(i),e=e.slice(n),r+=2,t({type:"comment",comment:i})}}function h(){var e=a(),t=l($y);if(t){if(d(),!l(qy))return o("property missing ':'");var n=l(By),r=e({type:"declaration",property:Ky(t[0].replace(zy,Qy)),value:n?Ky(n[0].replace(zy,Qy)):Qy});return l(Vy),r}}return i.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=h();)!1!==e&&(t.push(e),u(t));return t}()});var Jy={};Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.camelCase=void 0;var Xy=/^--[a-zA-Z0-9_-]+$/,Zy=/-([a-z])/g,eb=/^[^-]+$/,tb=/^-(webkit|moz|ms|o|khtml)-/,nb=/^-(ms)-/,rb=function(e,t){return t.toUpperCase()},sb=function(e,t){return"".concat(t,"-")};Jy.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||eb.test(e)||Xy.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(nb,sb):e.replace(tb,sb)).replace(Zy,rb))};var ab=(Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(Fy),ib=Jy;function ob(e,t){var n={};return e&&"string"==typeof e?((0,ab.default)(e,function(e,r){e&&r&&(n[(0,ib.camelCase)(e,t)]=r)}),n):n}ob.default=ob;const lb=ze(ob),cb=db("end"),ub=db("start");function db(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function hb(e){return e&&"object"==typeof e?"position"in e||"type"in e?fb(e.position):"start"in e||"end"in e?fb(e):"line"in e||"column"in e?pb(e):"":""}function pb(e){return mb(e&&e.line)+":"+mb(e&&e.column)}function fb(e){return pb(e&&e.start)+"-"+pb(e&&e.end)}function mb(e){return e&&"number"==typeof e?e:1}class gb extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",s={},a=!1;if(t&&(s="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!s.cause&&e&&(a=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?s.ruleId=n:(s.source=n.slice(0,e),s.ruleId=n.slice(e+1))}if(!s.place&&s.ancestors&&s.ancestors){const e=s.ancestors[s.ancestors.length-1];e&&(s.place=e.position)}const i=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=i?i.line:void 0,this.name=hb(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&"string"==typeof s.cause.stack?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}gb.prototype.file="",gb.prototype.name="",gb.prototype.reason="",gb.prototype.message="",gb.prototype.stack="",gb.prototype.column=void 0,gb.prototype.line=void 0,gb.prototype.ancestors=void 0,gb.prototype.cause=void 0,gb.prototype.fatal=void 0,gb.prototype.place=void 0,gb.prototype.ruleId=void 0,gb.prototype.source=void 0;const xb={}.hasOwnProperty,vb=new Map,yb=/[A-Z]/g,bb=new Set(["table","tbody","thead","tfoot","tr"]),wb=new Set(["td","th"]),jb="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Nb(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,s,a){const i=Array.isArray(s.children),o=ub(n);return t(r,s,a,i,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,s,a){const i=Array.isArray(s.children)?n:t;return a?i(r,s,a):i(r,s)}}(0,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Ly:Oy,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},a=kb(s,e,void 0);return a&&"string"!=typeof a?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function kb(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(s=Ly,e.schema=s);e.ancestors.push(t);const a=Tb(e,t.tagName,!1),i=function(e,t){const n={};let r,s;for(s in t.properties)if("children"!==s&&xb.call(t.properties,s)){const a=Eb(e,s,t.properties[s]);if(a){const[s,i]=a;e.tableCellAlignToStyle&&"align"===s&&"string"==typeof i&&wb.has(t.tagName)?r=i:n[s]=i}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let o=Cb(e,t);bb.has(t.tagName)&&(o=o.filter(function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&ry(t.value):ry(t));var t}));return Sb(e,i,a,t),_b(i,o),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Pb(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.name&&"html"===r.space&&(s=Ly,e.schema=s);e.ancestors.push(t);const a=null===t.name?e.Fragment:Tb(e,t.name,!0),i=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];Yv(t.type);const s=t.expression;Yv(s.type);const a=s.properties[0];Yv(a.type),Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Pb(e,t.position);else{const s=r.name;let a;if(r.value&&"object"==typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];Yv(t.type),a=e.evaluater.evaluateExpression(t.expression)}else Pb(e,t.position);else a=null===r.value||r.value;n[s]=a}return n}(e,t),o=Cb(e,t);return Sb(e,i,a,t),_b(i,o),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Pb(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return _b(r,Cb(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function Sb(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function _b(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Cb(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:vb;for(;++r<t.children.length;){const a=t.children[r];let i;if(e.passKeys){const e="element"===a.type?a.tagName:"mdxJsxFlowElement"===a.type||"mdxJsxTextElement"===a.type?a.name:void 0;if(e){const t=s.get(e)||0;i=e+"-"+t,s.set(e,t+1)}}const o=kb(e,a,i);void 0!==o&&n.push(o)}return n}function Eb(e,t,n){const r=function(e,t){const n=iy(t);let r=t,s=oy;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Dy.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Iy,Ay);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Iy.test(e)){let n=e.replace(Ry,My);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}s=yy}return new s(r,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"==typeof n?n:function(e,t){try{return lb(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,r=new gb("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=jb+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)xb.call(e,n)&&(t[Rb(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?Py[r.property]||r.property:r.attribute,n]}}function Tb(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,s=-1;for(;++s<e.length;){const t=ty(e[s])?{type:"Identifier",name:e[s]}:{type:"Literal",value:e[s]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(s&&"Literal"===t.type),optional:!1}:t}r=n}else r=ty(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return xb.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);Pb(e)}function Pb(e,t){const n=new gb("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=jb+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Rb(e){let t=e.replace(yb,Ib);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function Ib(e){return"-"+e.toLowerCase()}const Db={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Mb={};function Ab(e,t){return Ob(e,"boolean"!=typeof Mb.includeImageAlt||Mb.includeImageAlt,"boolean"!=typeof Mb.includeHtml||Mb.includeHtml)}function Ob(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Lb(e.children,t,n)}return Array.isArray(e)?Lb(e,t,n):""}function Lb(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Ob(e[s],t,n);return r.join("")}const Fb=document.createElement("i");function zb(e){const t="&"+e+";";Fb.innerHTML=t;const n=Fb.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function Wb(e,t,n,r){const s=e.length;let a,i=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function Ub(e,t){return e.length>0?(Wb(e,e.length,0,t),e):t}const $b={}.hasOwnProperty;function qb(e){const t={};let n=-1;for(;++n<e.length;)Bb(t,e[n]);return t}function Bb(e,t){let n;for(n in t){const r=($b.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){$b.call(r,a)||(r[a]=[]);const e=s[a];Vb(r[a],Array.isArray(e)?e:e?[e]:[])}}}function Vb(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);Wb(e,0,0,r)}function Hb(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"":String.fromCodePoint(n)}function Qb(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Kb=iw(/[A-Za-z]/),Gb=iw(/[\dA-Za-z]/),Yb=iw(/[#-'*+\--9=?A-Z^-~]/);function Jb(e){return null!==e&&(e<32||127===e)}const Xb=iw(/\d/),Zb=iw(/[\dA-Fa-f]/),ew=iw(/[!-/:-@[-`{-~]/);function tw(e){return null!==e&&e<-2}function nw(e){return null!==e&&(e<0||32===e)}function rw(e){return-2===e||-1===e||32===e}const sw=iw(new RegExp("\\p{P}|\\p{S}","u")),aw=iw(/\s/);function iw(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function ow(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let i="";if(37===a&&Gb(e.charCodeAt(n+1))&&Gb(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(i=String.fromCharCode(a));else if(a>55295&&a<57344){const t=e.charCodeAt(n+1);a<56320&&t>56319&&t<57344?(i=String.fromCharCode(a,t),s=1):i=""}else i=String.fromCharCode(a);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+s+1,i=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function lw(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return function(r){if(rw(r))return e.enter(n),i(r);return t(r)};function i(r){return rw(r)&&a++<s?(e.consume(r),i):(e.exit(n),t(r))}}const cw={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),lw(e,t,"linePrefix")},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,s(t)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):tw(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),s)}}};const uw={tokenize:function(e){const t=this,n=[];let r,s,a,i=0;return o;function o(r){if(i<n.length){const s=n[i];return t.containerState=s[1],e.attempt(s[0].continuation,l,c)(r)}return c(r)}function l(e){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&v();const n=t.events.length;let s,a=n;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){s=t.events[a][1].end;break}x(i);let o=n;for(;o<t.events.length;)t.events[o][1].end={...s},o++;return Wb(t.events,a+1,0,t.events.slice(n)),t.events.length=o,c(e)}return o(e)}function c(s){if(i===n.length){if(!r)return h(s);if(r.currentConstruct&&r.currentConstruct.concrete)return f(s);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(dw,u,d)(s)}function u(e){return r&&v(),x(i),h(e)}function d(e){return t.parser.lazy[t.now().line]=i!==n.length,a=t.now().offset,f(e)}function h(n){return t.containerState={},e.attempt(dw,p,f)(n)}function p(e){return i++,n.push([t.currentConstruct,t.containerState]),h(e)}function f(n){return null===n?(r&&v(),x(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),x(0),void e.consume(n)):tw(n)?(e.consume(n),g(e.exit("chunkFlow")),i=0,t.interrupt=void 0,o):(e.consume(n),m)}function g(e,n){const o=t.sliceStream(e);if(n&&o.push(null),e.previous=s,s&&(s.next=e),s=e,r.defineSkip(e.start),r.write(o),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<a&&(!r.events[e][1].end||r.events[e][1].end.offset>a))return;const n=t.events.length;let s,o,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(s){o=t.events[l][1].end;break}s=!0}for(x(i),e=n;e<t.events.length;)t.events[e][1].end={...o},e++;Wb(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function x(r){let s=n.length;for(;s-- >r;){const r=n[s];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function v(){r.write([null]),s=void 0,r=void 0,t.containerState._closeFlow=void 0}}},dw={tokenize:function(e,t,n){return lw(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function hw(e){return null===e||nw(e)||aw(e)?1:sw(e)?2:void 0}function pw(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const fw={name:"attention",resolveAll:function(e,t){let n,r,s,a,i,o,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d={...e[n][1].end},h={...e[u][1].start};mw(d,-o),mw(h,o),a={type:o>1?"strongSequence":"emphasisSequence",start:d,end:{...e[n][1].end}},i={type:o>1?"strongSequence":"emphasisSequence",start:{...e[u][1].start},end:h},s={type:o>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[u][1].start}},r={type:o>1?"strong":"emphasis",start:{...a.start},end:{...i.end}},e[n][1].end={...a.start},e[u][1].start={...i.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=Ub(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=Ub(l,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",s,t]]),l=Ub(l,pw(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=Ub(l,[["exit",s,t],["enter",i,t],["exit",i,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=Ub(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,Wb(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=hw(r);let a;return function(t){return a=t,e.enter("attentionSequence"),i(t)};function i(o){if(o===a)return e.consume(o),i;const l=e.exit("attentionSequence"),c=hw(o),u=!c||2===c&&s||n.includes(o),d=!s||2===s&&c||n.includes(r);return l._open=Boolean(42===a?u:u&&(s||!d)),l._close=Boolean(42===a?d:d&&(c||!u)),t(o)}}};function mw(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const gw={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s};function s(t){return Kb(t)?(e.consume(t),a):64===t?n(t):l(t)}function a(e){return 43===e||45===e||46===e||Gb(e)?(r=1,i(e)):l(e)}function i(t){return 58===t?(e.consume(t),r=0,o):(43===t||45===t||46===t||Gb(t))&&r++<32?(e.consume(t),i):(r=0,l(t))}function o(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Jb(r)?n(r):(e.consume(r),o)}function l(t){return 64===t?(e.consume(t),c):Yb(t)?(e.consume(t),l):n(t)}function c(e){return Gb(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||Gb(t))&&r++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const xw={partial:!0,tokenize:function(e,t,n){return function(t){return rw(t)?lw(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||tw(e)?t(e):n(e)}}};const vw={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(rw(t))return lw(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return s(t)};function s(r){return e.attempt(vw,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),s}return n(t)};function s(n){return rw(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};const yw={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return ew(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const bw={name:"characterReference",tokenize:function(e,t,n){const r=this;let s,a,i=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,a=Gb,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=Zb,c):(e.enter("characterReferenceValue"),s=7,a=Xb,c(t))}function c(o){if(59===o&&i){const s=e.exit("characterReferenceValue");return a!==Gb||zb(r.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return a(o)&&i++<s?(e.consume(o),c):n(o)}}};const ww={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},jw={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,s={partial:!0,tokenize:function(e,t,n){let s=0;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),rw(t)?lw(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===a?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===a?(s++,e.consume(t),u):s>=o?(e.exit("codeFencedFenceSequence"),rw(t)?lw(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||tw(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let a,i=0,o=0;return function(t){return function(t){const n=r.events[r.events.length-1];return i=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,a=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===a?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),rw(t)?lw(e,c,"whitespace")(t):c(t))}function c(n){return null===n||tw(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(ww,p,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||tw(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):rw(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),lw(e,d,"whitespace")(t)):96===t&&t===a?n(t):(e.consume(t),u)}function d(t){return null===t||tw(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||tw(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===a?n(t):(e.consume(t),h)}function p(t){return e.attempt(s,v,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return i>0&&rw(t)?lw(e,g,"linePrefix",i+1)(t):g(t)}function g(t){return null===t||tw(t)?e.check(ww,p,v)(t):(e.enter("codeFlowValue"),x(t))}function x(t){return null===t||tw(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),x)}function v(n){return e.exit("codeFenced"),t(n)}}};const Nw={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),lw(e,s,"linePrefix",5)(t)};function s(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?a(e):n(e)}function a(t){return null===t?o(t):tw(t)?e.attempt(kw,a,o)(t):(e.enter("codeFlowValue"),i(t))}function i(t){return null===t||tw(t)?(e.exit("codeFlowValue"),a(t)):(e.consume(t),i)}function o(n){return e.exit("codeIndented"),t(n)}}},kw={partial:!0,tokenize:function(e,t,n){const r=this;return s;function s(t){return r.parser.lazy[r.now().line]?n(t):tw(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):lw(e,a,"linePrefix",5)(t)}function a(e){const a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):tw(e)?s(e):n(e)}}};const Sw={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,s=3;if(!("lineEnding"!==e[s][1].type&&"space"!==e[s][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=s;++t<r;)if("codeTextData"===e[t][1].type){e[s][1].type="codeTextPadding",e[r][1].type="codeTextPadding",s+=2,r-=2;break}t=s-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,s,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),i(t)};function i(t){return 96===t?(e.consume(t),a++,i):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(s=e.enter("codeTextSequence"),r=0,c(t)):tw(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||tw(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(s.type="codeTextData",l(n))}}};class _w{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&Cw(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Cw(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Cw(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Cw(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Cw(this.left,t.reverse())}}}function Cw(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Ew(e){const t={};let n,r,s,a,i,o,l,c=-1;const u=new _w(e);for(;++c<u.length;){for(;c in t;)c=t[c];if(n=u.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(o=n[1]._tokenizer.events,s=0,s<o.length&&"lineEndingBlank"===o[s][1].type&&(s+=2),s<o.length&&"content"===o[s][1].type))for(;++s<o.length&&"content"!==o[s][1].type;)"chunkText"===o[s][1].type&&(o[s][1]._isInFirstContentOfListItem=!0,s++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Tw(u,c)),c=t[c],l=!0);else if(n[1]._container){for(s=c,r=void 0;s--;)if(a=u.get(s),"lineEnding"===a[1].type||"lineEndingBlank"===a[1].type)"enter"===a[0]&&(r&&(u.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=s);else if("linePrefix"!==a[1].type&&"listItemIndent"!==a[1].type)break;r&&(n[1].end={...u.get(r)[1].start},i=u.slice(r,c),i.unshift(n),u.splice(r,c-r+1,i))}}return Wb(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function Tw(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const o=i.events,l=[],c={};let u,d,h=-1,p=n,f=0,m=0;const g=[m];for(;p;){for(;e.get(++s)[1]!==p;);a.push(s),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&i.defineSkip(p.start),p._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(u),p._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<o.length;)"exit"===o[h][0]&&"enter"===o[h-1][0]&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(m=h+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(i.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),h=g.length;h--;){const t=o.slice(g[h],g[h+1]),n=a.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[f+l[h][0]]=f+l[h][1],f+=l[h][1]-l[h][0]-1;return c}const Pw={resolve:function(e){return Ew(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?s(t):tw(t)?e.check(Rw,a,s)(t):(e.consume(t),r)}function s(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},Rw={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),lw(e,s,"linePrefix")};function s(s){if(null===s||tw(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}};function Iw(e,t,n,r,s,a,i,o,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(s),e.enter(a),e.consume(t),e.exit(a),d;if(null===t||32===t||41===t||Jb(t))return n(t);return e.enter(r),e.enter(i),e.enter(o),e.enter("chunkString",{contentType:"string"}),f(t)};function d(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(o),d(t)):null===t||60===t||tw(t)?n(t):(e.consume(t),92===t?p:h)}function p(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function f(s){return u||null!==s&&41!==s&&!nw(s)?u<c&&40===s?(e.consume(s),u++,f):41===s?(e.consume(s),u--,f):null===s||32===s||40===s||Jb(s)?n(s):(e.consume(s),92===s?m:f):(e.exit("chunkString"),e.exit(o),e.exit(i),e.exit(r),t(s))}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function Dw(e,t,n,r,s,a){const i=this;let o,l=0;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),e.enter(a),c};function c(d){return l>999||null===d||91===d||93===d&&!o||94===d&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(d):93===d?(e.exit(a),e.enter(s),e.consume(d),e.exit(s),e.exit(r),t):tw(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||tw(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!rw(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function Mw(e,t,n,r,s,a){let i;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(s),e.consume(t),e.exit(s),i=40===t?41:t,o;return n(t)};function o(n){return n===i?(e.enter(s),e.consume(n),e.exit(s),e.exit(r),t):(e.enter(a),l(n))}function l(t){return t===i?(e.exit(a),o(i)):null===t?n(t):tw(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),lw(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===i||null===t||tw(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===i||92===t?(e.consume(t),c):c(t)}}function Aw(e,t){let n;return function r(s){if(tw(s))return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r;if(rw(s))return lw(e,r,n?"linePrefix":"lineSuffix")(s);return t(s)}}const Ow={name:"definition",tokenize:function(e,t,n){const r=this;let s;return function(t){return e.enter("definition"),function(t){return Dw.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function a(t){return s=Qb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i):n(t)}function i(t){return nw(t)?Aw(e,o)(t):o(t)}function o(t){return Iw(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(Lw,c,c)(t)}function c(t){return rw(t)?lw(e,u,"whitespace")(t):u(t)}function u(a){return null===a||tw(a)?(e.exit("definition"),r.parser.defined.push(s),t(a)):n(a)}}},Lw={partial:!0,tokenize:function(e,t,n){return function(t){return nw(t)?Aw(e,r)(t):n(t)};function r(t){return Mw(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function s(t){return rw(t)?lw(e,a,"whitespace")(t):a(t)}function a(e){return null===e||tw(e)?t(e):n(e)}}};const Fw={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return tw(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const zw={name:"headingAtx",resolve:function(e,t){let n,r,s=e.length-2,a=3;"whitespace"===e[a][1].type&&(a+=2);s-2>a&&"whitespace"===e[s][1].type&&(s-=2);"atxHeadingSequence"===e[s][1].type&&(a===s-1||s-4>a&&"whitespace"===e[s-2][1].type)&&(s-=a+1===s?2:4);s>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[s][1].end},r={type:"chunkText",start:e[a][1].start,end:e[s][1].end,contentType:"text"},Wb(e,a,s-a+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),s(t)}(t)};function s(t){return 35===t&&r++<6?(e.consume(t),s):null===t||nw(t)?(e.exit("atxHeadingSequence"),a(t)):n(t)}function a(n){return 35===n?(e.enter("atxHeadingSequence"),i(n)):null===n||tw(n)?(e.exit("atxHeading"),t(n)):rw(n)?lw(e,a,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function i(t){return 35===t?(e.consume(t),i):(e.exit("atxHeadingSequence"),a(t))}function o(t){return null===t||35===t||nw(t)?(e.exit("atxHeadingText"),a(t)):(e.consume(t),o)}}};const Ww=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Uw=["pre","script","style","textarea"],$w={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let s,a,i,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),u):47===o?(e.consume(o),a=!0,p):63===o?(e.consume(o),s=3,r.interrupt?t:M):Kb(o)?(e.consume(o),i=String.fromCharCode(o),f):n(o)}function u(a){return 45===a?(e.consume(a),s=2,d):91===a?(e.consume(a),s=5,o=0,h):Kb(a)?(e.consume(a),s=4,r.interrupt?t:M):n(a)}function d(s){return 45===s?(e.consume(s),r.interrupt?t:M):n(s)}function h(s){const a="CDATA[";return s===a.charCodeAt(o++)?(e.consume(s),6===o?r.interrupt?t:_:h):n(s)}function p(t){return Kb(t)?(e.consume(t),i=String.fromCharCode(t),f):n(t)}function f(o){if(null===o||47===o||62===o||nw(o)){const l=47===o,c=i.toLowerCase();return l||a||!Uw.includes(c)?Ww.includes(i.toLowerCase())?(s=6,l?(e.consume(o),m):r.interrupt?t(o):_(o)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(o):a?g(o):x(o)):(s=1,r.interrupt?t(o):_(o))}return 45===o||Gb(o)?(e.consume(o),i+=String.fromCharCode(o),f):n(o)}function m(s){return 62===s?(e.consume(s),r.interrupt?t:_):n(s)}function g(t){return rw(t)?(e.consume(t),g):k(t)}function x(t){return 47===t?(e.consume(t),k):58===t||95===t||Kb(t)?(e.consume(t),v):rw(t)?(e.consume(t),x):k(t)}function v(t){return 45===t||46===t||58===t||95===t||Gb(t)?(e.consume(t),v):y(t)}function y(t){return 61===t?(e.consume(t),b):rw(t)?(e.consume(t),y):x(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,w):rw(t)?(e.consume(t),b):j(t)}function w(t){return t===l?(e.consume(t),l=null,N):null===t||tw(t)?n(t):(e.consume(t),w)}function j(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||nw(t)?y(t):(e.consume(t),j)}function N(e){return 47===e||62===e||rw(e)?x(e):n(e)}function k(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||tw(t)?_(t):rw(t)?(e.consume(t),S):n(t)}function _(t){return 45===t&&2===s?(e.consume(t),P):60===t&&1===s?(e.consume(t),R):62===t&&4===s?(e.consume(t),A):63===t&&3===s?(e.consume(t),M):93===t&&5===s?(e.consume(t),D):!tw(t)||6!==s&&7!==s?null===t||tw(t)?(e.exit("htmlFlowData"),C(t)):(e.consume(t),_):(e.exit("htmlFlowData"),e.check(qw,O,C)(t))}function C(t){return e.check(Bw,E,O)(t)}function E(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),T}function T(t){return null===t||tw(t)?C(t):(e.enter("htmlFlowData"),_(t))}function P(t){return 45===t?(e.consume(t),M):_(t)}function R(t){return 47===t?(e.consume(t),i="",I):_(t)}function I(t){if(62===t){const n=i.toLowerCase();return Uw.includes(n)?(e.consume(t),A):_(t)}return Kb(t)&&i.length<8?(e.consume(t),i+=String.fromCharCode(t),I):_(t)}function D(t){return 93===t?(e.consume(t),M):_(t)}function M(t){return 62===t?(e.consume(t),A):45===t&&2===s?(e.consume(t),M):_(t)}function A(t){return null===t||tw(t)?(e.exit("htmlFlowData"),O(t)):(e.consume(t),A)}function O(n){return e.exit("htmlFlow"),t(n)}}},qw={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(xw,t,n)}}},Bw={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(tw(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s;return n(t)};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const Vw={name:"htmlText",tokenize:function(e,t,n){const r=this;let s,a,i;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),v):Kb(t)?(e.consume(t),N):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),a=0,p):Kb(t)?(e.consume(t),x):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):tw(t)?(i=u,I(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?R(e):45===e?d(e):u(e)}function p(t){const r="CDATA[";return t===r.charCodeAt(a++)?(e.consume(t),6===a?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),m):tw(t)?(i=f,I(t)):(e.consume(t),f)}function m(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?R(t):93===t?(e.consume(t),g):f(t)}function x(t){return null===t||62===t?R(t):tw(t)?(i=x,I(t)):(e.consume(t),x)}function v(t){return null===t?n(t):63===t?(e.consume(t),y):tw(t)?(i=v,I(t)):(e.consume(t),v)}function y(e){return 62===e?R(e):v(e)}function b(t){return Kb(t)?(e.consume(t),w):n(t)}function w(t){return 45===t||Gb(t)?(e.consume(t),w):j(t)}function j(t){return tw(t)?(i=j,I(t)):rw(t)?(e.consume(t),j):R(t)}function N(t){return 45===t||Gb(t)?(e.consume(t),N):47===t||62===t||nw(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),R):58===t||95===t||Kb(t)?(e.consume(t),S):tw(t)?(i=k,I(t)):rw(t)?(e.consume(t),k):R(t)}function S(t){return 45===t||46===t||58===t||95===t||Gb(t)?(e.consume(t),S):_(t)}function _(t){return 61===t?(e.consume(t),C):tw(t)?(i=_,I(t)):rw(t)?(e.consume(t),_):k(t)}function C(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,E):tw(t)?(i=C,I(t)):rw(t)?(e.consume(t),C):(e.consume(t),T)}function E(t){return t===s?(e.consume(t),s=void 0,P):null===t?n(t):tw(t)?(i=E,I(t)):(e.consume(t),E)}function T(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||nw(t)?k(t):(e.consume(t),T)}function P(e){return 47===e||62===e||nw(e)?k(e):n(e)}function R(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function I(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),D}function D(t){return rw(t)?lw(e,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):M(t)}function M(t){return e.enter("htmlTextData"),i(t)}}};const Hw={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&Wb(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,s,a,i=e.length,o=0;for(;i--;)if(n=e[i][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[i][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(s){if("enter"===e[i][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=i,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(s=i);const l={type:"labelLink"===e[r][1].type?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[r][1].start},end:{...e[s][1].end}},u={type:"labelText",start:{...e[r+o+2][1].end},end:{...e[s-2][1].start}};return a=[["enter",l,t],["enter",c,t]],a=Ub(a,e.slice(r+1,r+o+3)),a=Ub(a,[["enter",u,t]]),a=Ub(a,pw(t.parser.constructs.insideSpan.null,e.slice(r+o+4,s-3),t)),a=Ub(a,[["exit",u,t],e[s-2],e[s-1],["exit",c,t]]),a=Ub(a,e.slice(s+1)),a=Ub(a,[["exit",l,t]]),Wb(e,r,e.length,a),e},tokenize:function(e,t,n){const r=this;let s,a,i=r.events.length;for(;i--;)if(("labelImage"===r.events[i][1].type||"labelLink"===r.events[i][1].type)&&!r.events[i][1]._balanced){s=r.events[i][1];break}return function(t){if(!s)return n(t);if(s._inactive)return u(t);return a=r.parser.defined.includes(Qb(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(Qw,c,a?c:u)(t):91===t?e.attempt(Kw,c,a?l:u)(t):a?c(t):u(t)}function l(t){return e.attempt(Gw,c,u)(t)}function c(e){return t(e)}function u(e){return s._balanced=!0,n(e)}}},Qw={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return nw(t)?Aw(e,s)(t):s(t)}function s(t){return 41===t?c(t):Iw(e,a,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return nw(t)?Aw(e,o)(t):c(t)}function i(e){return n(e)}function o(t){return 34===t||39===t||40===t?Mw(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return nw(t)?Aw(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Kw={tokenize:function(e,t,n){const r=this;return function(t){return Dw.call(r,e,s,a,"reference","referenceMarker","referenceString")(t)};function s(e){return r.parser.defined.includes(Qb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function a(e){return n(e)}}},Gw={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const Yw={name:"labelStartImage",resolveAll:Hw.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),s};function s(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Jw={name:"labelStartLink",resolveAll:Hw.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),s};function s(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Xw={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),lw(e,t,"linePrefix")}}};const Zw={name:"thematicBreak",tokenize:function(e,t,n){let r,s=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,a(e)}(t)};function a(a){return a===r?(e.enter("thematicBreakSequence"),i(a)):s>=3&&(null===a||tw(a))?(e.exit("thematicBreak"),t(a)):n(a)}function i(t){return t===r?(e.consume(t),s++,i):(e.exit("thematicBreakSequence"),rw(t)?lw(e,a,"whitespace")(t):a(t))}}};const ej={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(xw,function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,lw(e,t,"listItemIndent",r.containerState.size+1)(n)},function(n){if(r.containerState.furtherBlankLines||!rw(n))return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(n);return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(nj,t,s)(n)});function s(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,lw(e,e.attempt(ej,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,i=0;return function(t){const s=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===s?!r.containerState.marker||t===r.containerState.marker:Xb(t)){if(r.containerState.type||(r.containerState.type=s,e.enter(s,{_container:!0})),"listUnordered"===s)return e.enter("listItemPrefix"),42===t||45===t?e.check(Zw,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return Xb(t)&&++i<10?(e.consume(t),o):(!r.interrupt||i<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(xw,r.interrupt?n:c,e.attempt(tj,d,u))}function c(e){return r.containerState.initialBlankLine=!0,a++,d(e)}function u(t){return rw(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},tj={partial:!0,tokenize:function(e,t,n){const r=this;return lw(e,function(e){const s=r.events[r.events.length-1];return!rw(e)&&s&&"listItemPrefixWhitespace"===s[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},nj={partial:!0,tokenize:function(e,t,n){const r=this;return lw(e,function(e){const s=r.events[r.events.length-1];return s&&"listItemIndent"===s[1].type&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)}};const rj={name:"setextUnderline",resolveTo:function(e,t){let n,r,s,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),s||"definition"!==e[a][1].type||(s=a);const i={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};e[r][1].type="setextHeadingText",s?(e.splice(r,0,["enter",i,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end={...e[s][1].end}):e[n][1]=i;return e.push(["exit",i,t]),e},tokenize:function(e,t,n){const r=this;let s;return function(t){let i,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){i="paragraph"===r.events[o][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||i))return e.enter("setextHeadingLine"),s=t,function(t){return e.enter("setextHeadingLineSequence"),a(t)}(t);return n(t)};function a(t){return t===s?(e.consume(t),a):(e.exit("setextHeadingLineSequence"),rw(t)?lw(e,i,"lineSuffix")(t):i(t))}function i(r){return null===r||tw(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const sj={tokenize:function(e){const t=this,n=e.attempt(xw,function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,lw(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Pw,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const aj={resolveAll:cj()},ij=lj("string"),oj=lj("text");function lj(e){return{resolveAll:cj("text"===e?uj:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],s=t.attempt(r,a,i);return a;function a(e){return l(e)?s(e):i(e)}function i(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),s(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=r[e];let s=-1;if(t)for(;++s<t.length;){const e=t[s];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function cj(e){return function(t,n){let r,s=-1;for(;++s<=t.length;)void 0===r?t[s]&&"data"===t[s][1].type&&(r=s,s++):t[s]&&"data"===t[s][1].type||(s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),s=r+2),r=void 0);return e?e(t,n):t}}function uj(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],s=t.sliceStream(r);let a,i=s.length,o=-1,l=0;for(;i--;){const e=s[i];if("string"==typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)a=!0,l++;else if(-1!==e){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const s={type:n===e.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:r.start._bufferIndex+o,_index:r.start._index+i,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...s.start},r.start.offset===r.end.offset?Object.assign(r,s):(e.splice(n,0,["enter",s,t],["exit",s,t]),n+=2)}n++}return e}const dj={42:ej,43:ej,45:ej,48:ej,49:ej,50:ej,51:ej,52:ej,53:ej,54:ej,55:ej,56:ej,57:ej,62:vw},hj={91:Ow},pj={[-2]:Nw,[-1]:Nw,32:Nw},fj={35:zw,42:Zw,45:[rj,Zw],60:$w,61:rj,95:Zw,96:jw,126:jw},mj={38:bw,92:yw},gj={[-5]:Xw,[-4]:Xw,[-3]:Xw,33:Yw,38:bw,42:fw,60:[gw,Vw],91:Jw,92:[Fw,yw],93:Hw,95:fw,96:Sw},xj={null:[fw,aj]},vj=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:hj,disable:{null:[]},document:dj,flow:fj,flowInitial:pj,insideSpan:xj,string:mj,text:gj},Symbol.toStringTag,{value:"Module"}));function yj(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let i=[],o=[];const l={attempt:g(function(e,t){x(e,t.from)}),check:g(m),consume:function(e){tw(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,v()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=h(),c.events.push(["enter",n,c]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=h(),c.events.push(["exit",t,c]),t},interrupt:g(m,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){s[e.line]=e.column,v()},events:[],now:h,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let i;if("string"==typeof a)i=a;else switch(a){case-5:i="\r";break;case-4:i="\n";break;case-3:i="\r\n";break;case-2:i=t?" ":"\t";break;case-1:if(!t&&s)continue;i=" ";break;default:i=String.fromCharCode(a)}s=-2===a,r.push(i)}return r.join("")}(d(e),t)},sliceStream:d,write:function(e){if(i=Ub(i,e),p(),null!==i[i.length-1])return[];return x(t,0),c.events=pw(a,c.events,c),c.events}};let u=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function d(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let i;if(n===s)i=[e[n].slice(r,a)];else{if(i=e.slice(n,s),r>-1){const e=i[0];"string"==typeof e?i[0]=e.slice(r):i.shift()}a>0&&i.push(e[s].slice(0,a))}return i}(i,e)}function h(){const{_bufferIndex:e,_index:t,line:n,column:s,offset:a}=r;return{_bufferIndex:e,_index:t,line:n,column:s,offset:a}}function p(){let e;for(;r._index<i.length;){const t=i[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)f(t.charCodeAt(r._bufferIndex));else f(t)}}function f(e){u=u(e)}function m(e,t){t.restore()}function g(e,t){return function(n,s,a){let i,u,d,p;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return i=e,u=0,0===e.length?a:m(e[u])}function m(e){return function(n){p=function(){const e=h(),t=c.previous,n=c.currentConstruct,s=c.events.length,a=Array.from(o);return{from:s,restore:i};function i(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=s,o=a,v()}}(),d=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return x();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,x)(n)}}function g(t){return e(d,p),s}function x(e){return p.restore(),++u<i.length?m(i[u]):a}}}function x(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&Wb(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function v(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}const bj=/[\0\t\n\r]/g;const wj=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function jj(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Hb(n.slice(t?2:1),t?16:10)}return zb(n)||e}const Nj={}.hasOwnProperty;function kj(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(te),autolinkProtocol:S,autolinkEmail:S,atxHeading:a(J),blockQuote:a(H),characterEscape:S,characterReference:S,codeFenced:a(Q),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:a(Q,i),codeText:a(K,i),codeTextData:S,data:S,codeFlowValue:S,definition:a(G),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:a(Y),hardBreakEscape:a(X),hardBreakTrailing:a(X),htmlFlow:a(Z,i),htmlFlowData:S,htmlText:a(Z,i),htmlTextData:S,image:a(ee),label:i,link:a(te),listItem:a(re),listItemValue:h,listOrdered:a(ne,d),listUnordered:a(ne),paragraph:a(se),reference:z,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:a(J),strong:a(ae),thematicBreak:a(oe)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:V,autolinkProtocol:B,blockQuote:l(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:$,characterReference:q,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:f,codeFlowValue:_,codeIndented:l(x),codeText:l(R),codeTextData:_,data:_,definition:l(),definitionDestinationString:b,definitionLabelString:v,definitionTitleString:y,emphasis:l(),hardBreakEscape:l(E),hardBreakTrailing:l(E),htmlFlow:l(T),htmlFlowData:_,htmlText:l(P),htmlTextData:_,image:l(D),label:A,labelText:M,lineEnding:C,link:l(I),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:W,resourceDestinationString:O,resourceTitleString:L,resource:F,setextHeading:l(k),setextHeadingLineSequence:N,setextHeadingText:j,strong:l(),thematicBreak:l()}};_j(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const a={stack:[r],tokenStack:[],config:t,enter:o,exit:c,buffer:i,resume:u,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=s(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];Nj.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},a),e[d][1])}if(a.tokenStack.length>0){const e=a.tokenStack[a.tokenStack.length-1];(e[1]||Ej).call(a,void 0,e[0])}for(r.position={start:Sj(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:Sj(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function s(e,t,n){let r,s,a,i,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,i=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||i||l||a||(a=o),i=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:i=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let i=o;for(s=void 0;i--;){const t=e[i];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;s&&(e[s][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",s=i}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}a&&(!s||a<s)&&(r._spread=!0),r.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||o,0,["exit",r,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const s={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=s,e.splice(o,0,["enter",s,t[2]]),o++,n++,a=void 0,i=!0}}}return e[t][1]._spread=c,n}function a(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:Sj(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+hb({start:e.start,end:e.end})+"): its not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||Ej).call(this,e,r[0])}n.position.end=Sj(e.end)}function u(){return Ab(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function v(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Qb(this.sliceSerialize(e)).toLowerCase()}function y(){const e=this.resume();this.stack[this.stack.length-1].title=e}function b(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function N(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ie(),n.position={start:Sj(e.start),end:void 0},t.push(n)),this.stack.push(n)}function _(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=Sj(e.end)}function C(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=Sj(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),_.call(this,e))}function E(){this.data.atHardBreak=!0}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.resume();this.stack[this.stack.length-1].value=e}function R(){const e=this.resume();this.stack[this.stack.length-1].value=e}function I(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function D(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function M(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(wj,jj)}(t),n.identifier=Qb(t).toLowerCase()}function A(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function O(){const e=this.resume();this.stack[this.stack.length-1].url=e}function L(){const e=this.resume();this.stack[this.stack.length-1].title=e}function F(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function W(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Qb(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function U(e){this.data.characterReferenceType=e.type}function $(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=Hb(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=zb(t)}this.stack[this.stack.length-1].value+=r}function q(e){this.stack.pop().position.end=Sj(e.end)}function B(e){_.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function V(e){_.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function H(){return{type:"blockquote",children:[]}}function Q(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function G(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Y(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:0,children:[]}}function X(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function se(){return{type:"paragraph",children:[]}}function ae(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(n)(function(e){for(;!Ew(e););return e}(function(e){const t={constructs:qb([vj,...(e||{}).extensions||[]]),content:n(cw),defined:[],document:n(uw),flow:n(sj),lazy:{},string:n(ij),text:n(oj)};return t;function n(e){return function(n){return yj(t,e,n)}}}(n).document().write(function(){let e,t=1,n="",r=!0;return function(s,a,i){const o=[];let l,c,u,d,h;for(s=n+("string"==typeof s?s.toString():new TextDecoder(a||void 0).decode(s)),u=0,n="",r&&(65279===s.charCodeAt(0)&&u++,r=void 0);u<s.length;){if(bj.lastIndex=u,l=bj.exec(s),d=l&&void 0!==l.index?l.index:s.length,h=s.charCodeAt(d),!l){n=s.slice(u);break}if(10===h&&u===d&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),u<d&&(o.push(s.slice(u,d)),t+=d-u),h){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return i&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,t,!0))))}function Sj(e){return{line:e.line,column:e.column,offset:e.offset}}function _j(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?_j(e,r):Cj(e,r)}}function Cj(e,t){let n;for(n in t)if(Nj.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Ej(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+hb({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+hb({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+hb({start:t.start,end:t.end})+") is still open")}function Tj(e){const t=this;t.parser=function(n){return kj(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Pj(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&"text"===a.type?a.value="["+a.value:s.unshift({type:"text",value:"["});const i=s[s.length-1];return i&&"text"===i.type?i.value+=r:s.push({type:"text",value:r}),s}function Rj(e){const t=e.spread;return null==t?e.children.length>1:t}function Ij(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(Dj(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(Dj(t.slice(s),s>0,!1)),a.join("")}function Dj(e,t,n){let r=0,s=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(s-1);for(;9===t||32===t;)s--,t=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}const Mj={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=ow(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let i,o=e.footnoteCounts.get(r);void 0===o?(o=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=a+1,o+=1,e.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Pj(e,t);const s={src:ow(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)},image:function(e,t){const n={src:ow(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Pj(e,t);const s={href:ow(r.url||"")};null!==r.title&&void 0!==r.title&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},link:function(e,t){const n={href:ow(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),s=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Rj(n[r])}return t}(n):Rj(t),a={},i=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const e=r[o];(s||0!==o||"element"!==e.type||"p"!==e.tagName)&&i.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||s?i.push(e):i.push(...e.children)}const l=r[r.length-1];l&&(s||"element"!==l.type||"p"!==l.tagName)&&i.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:a,children:i};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let s=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++s<r.length;){const e=r[s];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),s.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=ub(t.children[1]),i=cb(t.children[t.children.length-1]);a&&i&&(r.position={start:a,end:i}),s.push(r)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,s=0===(r?r.indexOf(t):1)?"th":"td",a=n&&"table"===n.type?n.align:void 0,i=a?a.length:t.children.length;let o=-1;const l=[];for(;++o<i;){const n=t.children[o],r={},i=a?a[o]:void 0;i&&(r.align=i);let c={type:"element",tagName:s,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:Ij(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Aj,yaml:Aj,definition:Aj,footnoteDefinition:Aj};function Aj(){}const Oj="object"==typeof self?self:globalThis,Lj=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=s=>{if(e.has(s))return e.get(s);const[a,i]=t[s];switch(a){case 0:case-1:return n(i,s);case 1:{const e=n([],s);for(const t of i)e.push(r(t));return e}case 2:{const e=n({},s);for(const[t,n]of i)e[r(t)]=r(n);return e}case 3:return n(new Date(i),s);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),s)}case 5:{const e=n(new Map,s);for(const[t,n]of i)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,s);for(const t of i)e.add(r(t));return e}case 7:{const{name:e,message:t}=i;return n(new Oj[e](t),s)}case 8:return n(BigInt(i),s);case"BigInt":return n(Object(BigInt(i)),s);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:e}=new Uint8Array(i);return n(new DataView(e),i)}}return n(new Oj[a](i),s)};return r})(new Map,e)(0),Fj="",{toString:zj}={},{keys:Wj}=Object,Uj=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=zj.call(e).slice(8,-1);switch(n){case"Array":return[1,Fj];case"Object":return[2,Fj];case"Date":return[3,Fj];case"RegExp":return[4,Fj];case"Map":return[5,Fj];case"Set":return[6,Fj];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},$j=([e,t])=>0===e&&("function"===t||"symbol"===t),qj=(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const s=(e,t)=>{const s=r.push(e)-1;return n.set(t,s),s},a=r=>{if(n.has(r))return n.get(r);let[i,o]=Uj(r);switch(i){case 0:{let t=r;switch(o){case"bigint":i=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return s([-1],r)}return s([i,t],r)}case 1:{if(o){let e=r;return"DataView"===o?e=new Uint8Array(r.buffer):"ArrayBuffer"===o&&(e=new Uint8Array(r)),s([o,[...e]],r)}const e=[],t=s([i,e],r);for(const n of r)e.push(a(n));return t}case 2:{if(o)switch(o){case"BigInt":return s([o,r.toString()],r);case"Boolean":case"Number":case"String":return s([o,r.valueOf()],r)}if(t&&"toJSON"in r)return a(r.toJSON());const n=[],l=s([i,n],r);for(const t of Wj(r))!e&&$j(Uj(r[t]))||n.push([a(t),a(r[t])]);return l}case 3:return s([i,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return s([i,{source:e,flags:t}],r)}case 5:{const t=[],n=s([i,t],r);for(const[s,i]of r)(e||!$j(Uj(s))&&!$j(Uj(i)))&&t.push([a(s),a(i)]);return n}case 6:{const t=[],n=s([i,t],r);for(const s of r)!e&&$j(Uj(s))||t.push(a(s));return n}}const{message:l}=r;return s([i,{name:o,message:l}],r)};return a})(!(t||n),!!t,new Map,r)(e),r},Bj="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Lj(qj(e,t)):structuredClone(e):(e,t)=>Lj(qj(e,t));function Vj(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Hj(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const Qj=function(e){if(null==e)return Gj;if("function"==typeof e)return Kj(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Qj(e[n]);return Kj(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return Kj(n);function n(n){const r=n;let s;for(s in e)if(r[s]!==t[s])return!1;return!0}}(e);if("string"==typeof e)return function(e){return Kj(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Kj(e){return function(t,n,r){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function Gj(){return!0}const Yj=[],Jj=!0,Xj=!1;function Zj(e,t,n,r){let s;"function"==typeof t&&"function"!=typeof n?(r=n,n=t):s=t;const a=Qj(s),i=r?-1:1;!function e(s,o,l){const c=s&&"object"==typeof s?s:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+s.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,d,h=Yj;if((!t||a(s,o,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[Jj,e];return null==e?Yj:[e]}(n(s,l)),h[0]===Xj))return h;if("children"in s&&s.children){const t=s;if(t.children&&"skip"!==h[0])for(u=(r?t.children.length:-1)+i,d=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,d)(),c[0]===Xj)return c;u="number"==typeof c[1]?c[1]:u+i}}return h}}(e,void 0,[])()}function eN(e,t,n,r){let s,a,i;"function"==typeof t&&"function"!=typeof n?(a=void 0,i=t,s=n):(a=t,i=n,s=r),Zj(e,a,function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return i(e,r,n)},s)}const tN={}.hasOwnProperty,nN={};function rN(e,t){e.position&&(t.position=function(e){const t=ub(e),n=cb(e);if(t&&n)return{start:t,end:n}}(e))}function sN(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,s=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&s&&Object.assign(n.properties,Bj(s)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function aN(e,t){const n=t.data||{},r=!("value"in t)||tN.call(n,"hProperties")||tN.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function iN(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function oN(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function lN(e,t){const n=function(e,t){const n=t||nN,r=new Map,s=new Map,a=new Map,i={...Mj,...n.handlers},o={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const s=o.one(n[r],e);if(s){if(r&&"break"===n[r-1].type&&(Array.isArray(s)||"text"!==s.type||(s.value=oN(s.value)),!Array.isArray(s)&&"element"===s.type)){const e=s.children[0];e&&"text"===e.type&&(e.value=oN(e.value))}Array.isArray(s)?t.push(...s):t.push(s)}}}return t},applyData:sN,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:i,one:function(e,t){const n=e.type,r=o.handlers[n];if(tN.call(o.handlers,n)&&r)return r(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=Bj(n);return r.children=o.all(e),r}return Bj(e)}return(o.options.unknownHandler||aN)(o,e,t)},options:n,patch:rN,wrap:iN};return eN(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:s,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),o}(e,t),r=n.one(e,void 0),s=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Vj,r=e.options.footnoteBackLabel||Hj,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const s=e.footnoteById.get(e.footnoteOrder[l]);if(!s)continue;const a=e.all(s),i=String(s.identifier).toUpperCase(),c=ow(i.toLowerCase());let u=0;const d=[],h=e.footnoteCounts.get(i);for(;void 0!==h&&++u<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,u);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=a[a.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...d)}else a.push(...d);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(a,!0)};e.patch(s,f),o.push(f)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Bj(i),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:"\n"},s),a}function cN(e,t){return e&&"run"in e?async function(n,r){const s=lN(n,{file:r,...t});await e.run(s,r)}:function(n,r){return lN(n,{file:r,...e||t})}}function uN(e){if(e)throw e}var dN=Object.prototype.hasOwnProperty,hN=Object.prototype.toString,pN=Object.defineProperty,fN=Object.getOwnPropertyDescriptor,mN=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===hN.call(e)},gN=function(e){if(!e||"[object Object]"!==hN.call(e))return!1;var t,n=dN.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&dN.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||dN.call(e,t)},xN=function(e,t){pN&&"__proto__"===t.name?pN(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},vN=function(e,t){if("__proto__"===t){if(!dN.call(e,t))return;if(fN)return fN(e,t).value}return e[t]},yN=function e(){var t,n,r,s,a,i,o=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[1]||{},l=2),(null==o||"object"!=typeof o&&"function"!=typeof o)&&(o={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)r=vN(o,n),o!==(s=vN(t,n))&&(u&&s&&(gN(s)||(a=mN(s)))?(a?(a=!1,i=r&&mN(r)?r:[]):i=r&&gN(r)?r:{},xN(o,{name:n,newValue:e(u,i,s)})):void 0!==s&&xN(o,{name:n,newValue:s}));return o};const bN=ze(yN);function wN(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function jN(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function s(a,...i){const o=e[++n];let l=-1;if(a)r(a);else{for(;++l<t.length;)null!==i[l]&&void 0!==i[l]||(i[l]=t[l]);t=i,o?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let o;r&&t.push(s);try{o=e.apply(this,t)}catch(a){if(r&&n)throw a;return s(a)}r||(o&&o.then&&"function"==typeof o.then?o.then(i,s):o instanceof Error?s(o):i(o))}function s(e,...r){n||(n=!0,t(e,...r))}function i(e){s(null,e)}}(o,s)(...i):r(null,...i)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const NN={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');kN(e);let n,r=0,s=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else s<0&&(n=!0,s=a+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let i=-1,o=t.length-1;for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else i<0&&(n=!0,i=a+1),o>-1&&(e.codePointAt(a)===t.codePointAt(o--)?o<0&&(s=a):(o=-1,s=i));r===s?s=i:s<0&&(s=e.length);return e.slice(r,s)},dirname:function(e){if(kN(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){kN(e);let t,n=e.length,r=-1,s=0,a=-1,i=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)r<0&&(t=!0,r=n+1),46===o?a<0?a=n:1!==i&&(i=1):a>-1&&(i=-1);else if(t){s=n+1;break}}if(a<0||r<0||0===i||1===i&&a===r-1&&a===s+1)return"";return e.slice(a,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)kN(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){kN(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,s="",a=0,i=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(i===l-1||1===o);else if(i!==l-1&&2===o){if(s.length<2||2!==a||46!==s.codePointAt(s.length-1)||46!==s.codePointAt(s.length-2))if(s.length>2){if(r=s.lastIndexOf("/"),r!==s.length-1){r<0?(s="",a=0):(s=s.slice(0,r),a=s.length-1-s.lastIndexOf("/")),i=l,o=0;continue}}else if(s.length>0){s="",a=0,i=l,o=0;continue}t&&(s=s.length>0?s+"/..":"..",a=2)}else s.length>0?s+="/"+e.slice(i+1,l):s=e.slice(i+1,l),a=l-i-1;i=l,o=0}else 46===n&&o>-1?o++:o=-1}return s}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function kN(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const SN={cwd:function(){return"/"}};function _N(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function CN(e){if("string"==typeof e)e=new URL(e);else if(!_N(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const EN=["history","path","basename","stem","extname","dirname"];class TN{constructor(e){let t;t=e?_N(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":SN.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<EN.length;){const e=EN[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)EN.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?NN.basename(this.path):void 0}set basename(e){RN(e,"basename"),PN(e,"basename"),this.path=NN.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?NN.dirname(this.path):void 0}set dirname(e){IN(this.basename,"dirname"),this.path=NN.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?NN.extname(this.path):void 0}set extname(e){if(PN(e,"extname"),IN(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=NN.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){_N(e)&&(e=CN(e)),RN(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?NN.basename(this.path,this.extname):void 0}set stem(e){RN(e,"stem"),PN(e,"stem"),this.path=NN.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new gb(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function PN(e,t){if(e&&e.includes(NN.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+NN.sep+"`")}function RN(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function IN(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const DN=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},MN={}.hasOwnProperty;class AN extends DN{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=jN()}copy(){const e=new AN;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(bN(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(zN("data",this.frozen),this.namespace[e]=t,this):MN.call(this.namespace,e)&&this.namespace[e]||void 0:e?(zN("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=$N(e),n=this.parser||this.Parser;return LN("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),LN("process",this.parser||this.Parser),FN("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,s){const a=$N(e),i=n.parse(a);function o(e,n){e||!n?s(e):r?r(n):t(void 0,n)}n.run(i,a,function(e,t,r){if(e||!t||!r)return o(e);const s=t,a=n.stringify(s,r);var i;"string"==typeof(i=a)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(i)?r.value=a:r.result=a,o(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),LN("processSync",this.parser||this.Parser),FN("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,uN(e),t=r}),UN("processSync","process",n),t}run(e,t,n){WN(e),this.freeze();const r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?s(void 0,n):new Promise(s);function s(s,a){const i=$N(t);r.run(e,i,function(t,r,i){const o=r||e;t?a(t):s?s(o):n(void 0,o,i)})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){uN(e),n=t,r=!0}),UN("runSync","run",r),n}stringify(e,t){this.freeze();const n=$N(t),r=this.compiler||this.Compiler;return FN("stringify",r),WN(e),r(e,n)}use(e,...t){const n=this.attachers,r=this.namespace;if(zN("use",this.frozen),null==e);else if("function"==typeof e)o(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?i(e):a(e)}return this;function s(e){if("function"==typeof e)o(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;o(t,n)}else a(e)}}function a(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(e.plugins),e.settings&&(r.settings=bN(!0,r.settings,e.settings))}function i(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function o(e,t){let r=-1,s=-1;for(;++r<n.length;)if(n[r][0]===e){s=r;break}if(-1===s)n.push([e,...t]);else if(t.length>0){let[r,...a]=t;const i=n[s][1];wN(i)&&wN(r)&&(r=bN(!0,i,r)),n[s]=[e,r,...a]}}}}const ON=(new AN).freeze();function LN(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function FN(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function zN(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function WN(e){if(!wN(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function UN(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function $N(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new TN(e)}const qN=[],BN={allowDangerousHtml:!0},VN=/^(https?|ircs?|mailto|xmpp)$/i,HN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function QN(e){const t=function(e){const t=e.rehypePlugins||qN,n=e.remarkPlugins||qN,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...BN}:BN,s=ON().use(Tj).use(n).use(cN,r).use(t);return s}(e),n=function(e){const t=e.children||"",n=new TN;"string"==typeof t&&(n.value=t);return n}(e);return function(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,i=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||KN;for(const u of HN)Object.hasOwn(t,u.from)&&Jv((u.from,u.to&&u.to,u.id));return eN(e,c),Nb(e,{Fragment:Mt.Fragment,components:s,ignoreInvalidStyle:!0,jsx:Mt.jsx,jsxs:Mt.jsxs,passKeys:!0,passNode:!0});function c(e,t,s){if("raw"===e.type&&s&&"number"==typeof t)return i?s.children.splice(t,1):s.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in Db)if(Object.hasOwn(Db,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=Db[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let i=n?!n.includes(e.tagName):!!a&&a.includes(e.tagName);if(!i&&r&&"number"==typeof t&&(i=!r(e,t,s)),i&&s&&"number"==typeof t)return o&&e.children?s.children.splice(t,1,...e.children):s.children.splice(t,1),t}}}(t.runSync(t.parse(n),n),e)}function KN(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return-1===t||-1!==s&&t>s||-1!==n&&t>n||-1!==r&&t>r||VN.test(e.slice(0,t))?e:""}function GN(e,t){const n=String(e);if("string"!=typeof t)throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;-1!==s;)r++,s=n.indexOf(t,s+t.length);return r}function YN(e,t,n){const r=Qj((n||{}).ignore||[]),s=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const e=n[r];t.push([JN(e[0]),XN(e[1])])}return t}(t);let a=-1;for(;++a<s.length;)Zj(e,"text",i);function i(e,t){let n,i=-1;for(;++i<t.length;){const e=t[i],s=n?n.children:void 0;if(r(e,s?s.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],r=s[a][0],i=s[a][1];let o=0;const l=n.children.indexOf(e);let c=!1,u=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){const n=d.index,s={index:d.index,input:d.input,stack:[...t,e]};let a=i(...d,s);if("string"==typeof a&&(a=a.length>0?{type:"text",value:a}:void 0),!1===a?r.lastIndex=n+1:(o!==n&&u.push({type:"text",value:e.value.slice(o,n)}),Array.isArray(a)?u.push(...a):a&&u.push(a),o=n+d[0].length,c=!0),!r.global)break;d=r.exec(e.value)}c?(o<e.value.length&&u.push({type:"text",value:e.value.slice(o)}),n.children.splice(l,1,...u)):u=[e];return l+u.length}(e,t)}}function JN(e){return"string"==typeof e?new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function XN(e){return"function"==typeof e?e:function(){return e}}const ZN="phrasing",ek=["autolink","link","image","label"];function tk(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function nk(e){this.config.enter.autolinkProtocol.call(this,e)}function rk(e){this.config.exit.autolinkProtocol.call(this,e)}function sk(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function ak(e){this.config.exit.autolinkEmail.call(this,e)}function ik(e){this.exit(e)}function ok(e){YN(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,lk],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),ck]],{ignore:["link","linkReference"]})}function lk(e,t,n,r,s){let a="";if(!uk(s))return!1;if(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const i=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=GN(e,"(");let a=GN(e,")");for(;-1!==r&&s>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}(n+r);if(!i[0])return!1;const o={type:"link",title:null,url:a+t+i[0],children:[{type:"text",value:t+i[0]}]};return i[1]?[o,{type:"text",value:i[1]}]:o}function ck(e,t,n,r){return!(!uk(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function uk(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||aw(n)||sw(n))&&(!t||47!==n)}function dk(){this.buffer()}function hk(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function pk(){this.buffer()}function fk(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function mk(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Qb(this.sliceSerialize(e)).toLowerCase(),n.label=t}function gk(e){this.exit(e)}function xk(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Qb(this.sliceSerialize(e)).toLowerCase(),n.label=t}function vk(e){this.exit(e)}function yk(e,t,n,r){const s=n.createTracker(r);let a=s.move("[^");const i=n.enter("footnoteReference"),o=n.enter("reference");return a+=s.move(n.safe(n.associationId(e),{after:"]",before:a})),o(),i(),a+=s.move("]"),a}function bk(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,r,s){const a=r.createTracker(s);let i=a.move("[^");const o=r.enter("footnoteDefinition"),l=r.enter("label");i+=a.move(r.safe(r.associationId(e),{before:i,after:"]"})),l(),i+=a.move("]:"),e.children&&e.children.length>0&&(a.shift(4),i+=a.move((t?"\n":" ")+r.indentLines(r.containerFlow(e,a.current()),t?jk:wk)));return o(),i},footnoteReference:yk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function wk(e,t,n){return 0===t?e:jk(e,t,n)}function jk(e,t,n){return(n?"":"    ")+e}yk.peek=function(){return"["};const Nk=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function kk(e){this.enter({type:"delete",children:[]},e)}function Sk(e){this.exit(e)}function _k(e,t,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let i=s.move("~~");return i+=n.containerPhrasing(e,{...s.current(),before:i,after:"~"}),i+=s.move("~~"),a(),i}function Ck(e){return e.length}function Ek(e){return null==e?"":String(e)}function Tk(e){const t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function Pk(e,t,n){return">"+(n?"":" ")+e}function Rk(e,t){return Ik(e,t.inConstruct,!0)&&!Ik(e,t.notInConstruct,!1)}function Ik(e,t,n){if("string"==typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Dk(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if("\n"===n.unsafe[s].character&&Rk(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return"\\\n"}function Mk(e,t,n){return(n?"":"    ")+e}function Ak(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Ok(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Lk(e,t,n){const r=hw(e),s=hw(t);return void 0===r?void 0===s?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===s?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===r?void 0===s?{inside:!1,outside:!1}:1===s?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===s?{inside:!1,outside:!1}:1===s?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function Fk(e,t,n,r){const s=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),a=n.enter("emphasis"),i=n.createTracker(r),o=i.move(s);let l=i.move(n.containerPhrasing(e,{after:s,before:o,...i.current()}));const c=l.charCodeAt(0),u=Lk(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=Ok(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=Lk(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+Ok(d));const p=i.move(s);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+l+p}function zk(e){return e.value||""}function Wk(e,t,n,r){const s=Ak(n),a='"'===s?"Quote":"Apostrophe",i=n.enter("image");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),o(),e.title&&(o=n.enter(`title${a}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),o()),c+=l.move(")"),i(),c}function Uk(e,t,n,r){const s=e.referenceType,a=n.enter("imageReference");let i=n.enter("label");const o=n.createTracker(r);let l=o.move("![");const c=n.safe(e.alt,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return i(),n.stack=u,a(),"full"!==s&&c&&c===d?"shortcut"===s?l=l.slice(0,-1):l+=o.move("]"):l+=o.move(d+"]"),l}function $k(e,t,n){let r=e.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const e=n.unsafe[a],t=n.compilePattern(e);let s;if(e.atBreak)for(;s=t.exec(r);){let e=s.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(s.index+1)}}return s+r+s}function qk(e,t){const n=Ab(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function Bk(e,t,n,r){const s=Ak(n),a='"'===s?"Quote":"Apostrophe",i=n.createTracker(r);let o,l;if(qk(e,n)){const t=n.stack;n.stack=[],o=n.enter("autolink");let r=i.move("<");return r+=i.move(n.containerPhrasing(e,{before:r,after:">",...i.current()})),r+=i.move(">"),o(),n.stack=t,r}o=n.enter("link"),l=n.enter("label");let c=i.move("[");return c+=i.move(n.containerPhrasing(e,{before:c,after:"](",...i.current()})),c+=i.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=i.move("<"),c+=i.move(n.safe(e.url,{before:c,after:">",...i.current()})),c+=i.move(">")):(l=n.enter("destinationRaw"),c+=i.move(n.safe(e.url,{before:c,after:e.title?" ":")",...i.current()}))),l(),e.title&&(l=n.enter(`title${a}`),c+=i.move(" "+s),c+=i.move(n.safe(e.title,{before:c,after:s,...i.current()})),c+=i.move(s),l()),c+=i.move(")"),o(),c}function Vk(e,t,n,r){const s=e.referenceType,a=n.enter("linkReference");let i=n.enter("label");const o=n.createTracker(r);let l=o.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return i(),n.stack=u,a(),"full"!==s&&c&&c===d?"shortcut"===s?l=l.slice(0,-1):l+=o.move("]"):l+=o.move(d+"]"),l}function Hk(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Qk(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}_k.peek=function(){return"~"},Fk.peek=function(e,t,n){return n.options.emphasis||"*"},zk.peek=function(){return"<"},Wk.peek=function(){return"!"},Uk.peek=function(){return"!"},$k.peek=function(){return"`"},Bk.peek=function(e,t,n){return qk(e,n)?"<":"["},Vk.peek=function(){return"["};const Kk=Qj(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Gk(e,t,n,r){const s=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),a=n.enter("strong"),i=n.createTracker(r),o=i.move(s+s);let l=i.move(n.containerPhrasing(e,{after:s,before:o,...i.current()}));const c=l.charCodeAt(0),u=Lk(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=Ok(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=Lk(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+Ok(d));const p=i.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+l+p}Gk.peek=function(e,t,n){return n.options.strong||"*"};const Yk={blockquote:function(e,t,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const i=n.indentLines(n.containerFlow(e,a.current()),Pk);return s(),i},break:Dk,code:function(e,t,n,r){const s=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),a=e.value||"",i="`"===s?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(a,Mk);return e(),t}const o=n.createTracker(r),l=s.repeat(Math.max(function(e,t){const n=String(e);let r=n.indexOf(t),s=r,a=0,i=0;if("string"!=typeof t)throw new TypeError("Expected substring");for(;-1!==r;)r===s?++a>i&&(i=a):a=1,s=r+t.length,r=n.indexOf(t,s);return i}(a,s)+1,3)),c=n.enter("codeFenced");let u=o.move(l);if(e.lang){const t=n.enter(`codeFencedLang${i}`);u+=o.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...o.current()})),t()}if(e.lang&&e.meta){const t=n.enter(`codeFencedMeta${i}`);u+=o.move(" "),u+=o.move(n.safe(e.meta,{before:u,after:"\n",encode:["`"],...o.current()})),t()}return u+=o.move("\n"),a&&(u+=o.move(a+"\n")),u+=o.move(l),c(),u},definition:function(e,t,n,r){const s=Ak(n),a='"'===s?"Quote":"Apostrophe",i=n.enter("definition");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":"\n",...l.current()}))),o(),e.title&&(o=n.enter(`title${a}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),o()),i(),c},emphasis:Fk,hardBreak:Dk,heading:function(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(function(e,t){let n=!1;return eN(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,Xj}),Boolean((!e.depth||e.depth<3)&&Ab(e)&&(t.options.setext||n))}(e,n)){const t=n.enter("headingSetext"),r=n.enter("phrasing"),i=n.containerPhrasing(e,{...a.current(),before:"\n",after:"\n"});return r(),t(),i+"\n"+(1===s?"=":"-").repeat(i.length-(Math.max(i.lastIndexOf("\r"),i.lastIndexOf("\n"))+1))}const i="#".repeat(s),o=n.enter("headingAtx"),l=n.enter("phrasing");a.move(i+" ");let c=n.containerPhrasing(e,{before:"# ",after:"\n",...a.current()});return/^[\t ]/.test(c)&&(c=Ok(c.charCodeAt(0))+c.slice(1)),c=c?i+" "+c:i,n.options.closeAtx&&(c+=" "+i),l(),o(),c},html:zk,image:Wk,imageReference:Uk,inlineCode:$k,link:Bk,linkReference:Vk,list:function(e,t,n,r){const s=n.enter("list"),a=n.bulletCurrent;let i=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):Hk(n);const o=e.ordered?"."===i?")":".":function(e){const t=Hk(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let l=!(!t||!n.bulletLastUsed)&&i===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==i&&"-"!==i||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),Qk(n)===i&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){l=!0;break}}}}l&&(i=o),n.bulletCurrent=i;const c=n.containerFlow(e,r);return n.bulletLastUsed=i,n.bulletCurrent=a,s(),c},listItem:function(e,t,n,r){const s=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let a=n.bulletCurrent||Hk(n);t&&"list"===t.type&&t.ordered&&(a=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+a);let i=a.length+1;("tab"===s||"mixed"===s&&(t&&"list"===t.type&&t.spread||e.spread))&&(i=4*Math.ceil(i/4));const o=n.createTracker(r);o.move(a+" ".repeat(i-a.length)),o.shift(i);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,o.current()),function(e,t,n){if(t)return(n?"":" ".repeat(i))+e;return(n?a:a+" ".repeat(i-a.length))+e});return l(),c},paragraph:function(e,t,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),i=n.containerPhrasing(e,r);return a(),s(),i},root:function(e,t,n,r){return(e.children.some(function(e){return Kk(e)})?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:Gk,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){const r=(Qk(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}};function Jk(e){const t=e._align;this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function Xk(e){this.exit(e),this.data.inTable=void 0}function Zk(e){this.enter({type:"tableRow",children:[]},e)}function eS(e){this.exit(e)}function tS(e){this.enter({type:"tableCell",children:[]},e)}function nS(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,rS));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function rS(e,t){return"|"===t?t:e}function sS(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=Yk.inlineCode(e,t,n);n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r},table:function(e,t,n,r){return o(function(e,t,n){const r=e.children;let s=-1;const a=[],i=t.enter("table");for(;++s<r.length;)a[s]=l(r[s],t,n);return i(),a}(e,n,r),e.align)},tableCell:i,tableRow:function(e,t,n,r){const s=o([l(e,n,r)]);return s.slice(0,s.indexOf("\n"))}}};function i(e,t,n,r){const s=n.enter("tableCell"),i=n.enter("phrasing"),o=n.containerPhrasing(e,{...r,before:a,after:a});return i(),s(),o}function o(e,t){return function(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||Ck,a=[],i=[],o=[],l=[];let c=0,u=-1;for(;++u<e.length;){const t=[],r=[];let a=-1;for(e[u].length>c&&(c=e[u].length);++a<e[u].length;){const i=Ek(e[u][a]);if(!1!==n.alignDelimiters){const e=s(i);r[a]=e,(void 0===l[a]||e>l[a])&&(l[a]=e)}t.push(i)}i[u]=t,o[u]=r}let d=-1;if("object"==typeof r&&"length"in r)for(;++d<c;)a[d]=Tk(r[d]);else{const e=Tk(r);for(;++d<c;)a[d]=e}d=-1;const h=[],p=[];for(;++d<c;){const e=a[d];let t="",r="";99===e?(t=":",r=":"):108===e?t=":":114===e&&(r=":");let s=!1===n.alignDelimiters?1:Math.max(1,l[d]-t.length-r.length);const i=t+"-".repeat(s)+r;!1!==n.alignDelimiters&&(s=t.length+s+r.length,s>l[d]&&(l[d]=s),p[d]=s),h[d]=i}i.splice(1,0,h),o.splice(1,0,p),u=-1;const f=[];for(;++u<i.length;){const e=i[u],t=o[u];d=-1;const r=[];for(;++d<c;){const s=e[d]||"";let i="",o="";if(!1!==n.alignDelimiters){const e=l[d]-(t[d]||0),n=a[d];114===n?i=" ".repeat(e):99===n?e%2?(i=" ".repeat(e/2+.5),o=" ".repeat(e/2-.5)):(i=" ".repeat(e/2),o=i):o=" ".repeat(e)}!1===n.delimiterStart||d||r.push("|"),!1===n.padding||!1===n.alignDelimiters&&""===s||!1===n.delimiterStart&&!d||r.push(" "),!1!==n.alignDelimiters&&r.push(i),r.push(s),!1!==n.alignDelimiters&&r.push(o),!1!==n.padding&&r.push(" "),!1===n.delimiterEnd&&d===c-1||r.push("|")}f.push(!1===n.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return f.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:s})}function l(e,t,n){const r=e.children;let s=-1;const a=[],o=t.enter("tableRow");for(;++s<r.length;)a[s]=i(r[s],0,t,n);return o(),a}}function aS(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function iS(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const r=t.children;let s,a=-1;for(;++a<r.length;){const e=r[a];if("paragraph"===e.type){s=e;break}}s===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function oS(e,t,n,r){const s=e.children[0],a="boolean"==typeof e.checked&&s&&"paragraph"===s.type,i="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);a&&o.move(i);let l=Yk.listItem(e,t,n,{...r,...o.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+i})),l}const lS={tokenize:function(e,t,n){let r=0;return function t(a){if((87===a||119===a)&&r<3)return r++,e.consume(a),t;if(46===a&&3===r)return e.consume(a),s;return n(a)};function s(e){return null===e?n(e):t(e)}},partial:!0},cS={tokenize:function(e,t,n){let r,s,a;return i;function i(t){return 46===t||95===t?e.check(dS,l,o)(t):null===t||nw(t)||aw(t)||45!==t&&sw(t)?l(t):(a=!0,e.consume(t),i)}function o(t){return 95===t?r=!0:(s=r,r=void 0),e.consume(t),i}function l(e){return s||r||!a?n(e):t(e)}},partial:!0},uS={tokenize:function(e,t){let n=0,r=0;return s;function s(i){return 40===i?(n++,e.consume(i),s):41===i&&r<n?a(i):33===i||34===i||38===i||39===i||41===i||42===i||44===i||46===i||58===i||59===i||60===i||63===i||93===i||95===i||126===i?e.check(dS,t,a)(i):null===i||nw(i)||aw(i)?t(i):(e.consume(i),s)}function a(t){return 41===t&&r++,e.consume(t),s}},partial:!0},dS={tokenize:function(e,t,n){return r;function r(i){return 33===i||34===i||39===i||41===i||42===i||44===i||46===i||58===i||59===i||63===i||95===i||126===i?(e.consume(i),r):38===i?(e.consume(i),a):93===i?(e.consume(i),s):60===i||null===i||nw(i)||aw(i)?t(i):n(i)}function s(e){return null===e||40===e||91===e||nw(e)||aw(e)?t(e):r(e)}function a(e){return Kb(e)?i(e):n(e)}function i(t){return 59===t?(e.consume(t),r):Kb(t)?(e.consume(t),i):n(t)}},partial:!0},hS={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return Gb(e)?n(e):t(e)}},partial:!0},pS={name:"wwwAutolink",tokenize:function(e,t,n){const r=this;return function(t){if(87!==t&&119!==t||!vS.call(r,r.previous)||jS(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(lS,e.attempt(cS,e.attempt(uS,s),n),n)(t)};function s(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:vS},fS={name:"protocolAutolink",tokenize:function(e,t,n){const r=this;let s="",a=!1;return function(t){if((72===t||104===t)&&yS.call(r,r.previous)&&!jS(r.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(t),e.consume(t),i;return n(t)};function i(t){if(Kb(t)&&s.length<5)return s+=String.fromCodePoint(t),e.consume(t),i;if(58===t){const n=s.toLowerCase();if("http"===n||"https"===n)return e.consume(t),o}return n(t)}function o(t){return 47===t?(e.consume(t),a?l:(a=!0,o)):n(t)}function l(t){return null===t||Jb(t)||nw(t)||aw(t)||sw(t)?n(t):e.attempt(cS,e.attempt(uS,c),n)(t)}function c(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:yS},mS={name:"emailAutolink",tokenize:function(e,t,n){const r=this;let s,a;return function(t){if(!wS(t)||!bS.call(r,r.previous)||jS(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),i(t)};function i(t){return wS(t)?(e.consume(t),i):64===t?(e.consume(t),o):n(t)}function o(t){return 46===t?e.check(hS,c,l)(t):45===t||95===t||Gb(t)?(a=!0,e.consume(t),o):c(t)}function l(t){return e.consume(t),s=!0,o}function c(i){return a&&s&&Kb(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(i)):n(i)}},previous:bS},gS={};let xS=48;for(;xS<123;)gS[xS]=mS,xS++,58===xS?xS=65:91===xS&&(xS=97);function vS(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||nw(e)}function yS(e){return!Kb(e)}function bS(e){return!(47===e||wS(e))}function wS(e){return 43===e||45===e||46===e||95===e||Gb(e)}function jS(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}gS[43]=mS,gS[45]=mS,gS[46]=mS,gS[95]=mS,gS[72]=[mS,fS],gS[104]=[mS,fS],gS[87]=[mS,pS],gS[119]=[mS,pS];const NS={tokenize:function(e,t,n){const r=this;return lw(e,function(e){const s=r.events[r.events.length-1];return s&&"gfmFootnoteDefinitionIndent"===s[1].type&&4===s[2].sliceSerialize(s[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function kS(e,t,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;s--;){const e=r.events[s][1];if("labelImage"===e.type){i=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(s){if(!i||!i._balanced)return n(s);const o=Qb(r.sliceSerialize({start:i.end,end:r.now()}));if(94!==o.codePointAt(0)||!a.includes(o.slice(1)))return n(s);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),t(s)}}function SS(e,t){let n=e.length;for(;n--;)if("labelImage"===e[n][1].type&&"enter"===e[n][0]){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function _S(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,i=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),o};function o(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(o){if(i>999||93===o&&!a||null===o||91===o||nw(o))return n(o);if(93===o){e.exit("chunkString");const a=e.exit("gfmFootnoteCallString");return s.includes(Qb(r.sliceSerialize(a)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(o)}return nw(o)||(a=!0),i++,e.consume(o),92===o?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),i++,l):l(t)}}function CS(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,i,o=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(t)}function c(t){if(o>999||93===t&&!i||null===t||91===t||nw(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return a=Qb(r.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return nw(t)||(i=!0),o++,e.consume(t),92===t?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),o++,c):c(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s.includes(a)||s.push(a),lw(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function ES(e,t,n){return e.check(xw,t,e.attempt(NS,t,n))}function TS(e){e.exit("gfmFootnoteDefinition")}function PS(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,r){const s=this.previous,a=this.events;let i=0;return function(t){if(126===s&&"characterEscape"!==a[a.length-1][1].type)return r(t);return e.enter("strikethroughSequenceTemporary"),o(t)};function o(a){const l=hw(s);if(126===a)return i>1?r(a):(e.consume(a),i++,o);if(i<2&&!t)return r(a);const c=e.exit("strikethroughSequenceTemporary"),u=hw(a);return c._open=!u||2===u&&Boolean(l),c._close=!l||2===l&&Boolean(u),n(a)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";const s={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},a={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i=[["enter",s,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",a,t]],o=t.parser.constructs.insideSpan.null;o&&Wb(i,i.length,0,pw(o,e.slice(r+1,n),t)),Wb(i,i.length,0,[["exit",a,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",s,t]]),Wb(e,r-1,n-r+3,i),n=r+i.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class RS{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let s=0;if(0===n&&0===r.length)return;for(;s<e.map.length;){if(e.map[s][0]===t)return e.map[s][1]+=n,void e.map[s][2].push(...r);s+=1}e.map.push([t,n,r])}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(const t of r)e.push(t);r=n.pop()}this.map.length=0}}function IS(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if("enter"===s[0])"tableContent"===s[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===s[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===s[1].type)break}else"enter"===s[0]&&"tableDelimiterRow"===s[1].type&&(n=!0);t+=1}return r}function DS(e,t,n){const r=this;let s,a=0,i=0;return function(e){let t=r.events.length-1;for(;t>-1;){const e=r.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const s=t>-1?r.events[t][1].type:null,a="tableHead"===s||"tableRow"===s?b:o;if(a===b&&r.parser.lazy[r.now().line])return n(e);return a(e)};function o(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return s=!0,i+=1,l(e)}(t)}function l(t){return null===t?n(t):tw(t)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):rw(t)?lw(e,l,"whitespace")(t):(i+=1,s&&(s=!1,a+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),s=!0,l):(e.enter("data"),c(t)))}function c(t){return null===t||124===t||nw(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return 92===t||124===t?(e.consume(t),c):c(t)}function d(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter("tableDelimiterRow"),s=!1,rw(t)?lw(e,h,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?f(t):124===t?(s=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):y(t)}function p(t){return rw(t)?lw(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(i+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(i+=1,m(t)):null===t||tw(t)?v(t):y(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):y(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(t))}function x(t){return rw(t)?lw(e,v,"whitespace")(t):v(t)}function v(n){return 124===n?h(n):(null===n||tw(n))&&s&&a===i?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):y(n)}function y(e){return n(e)}function b(t){return e.enter("tableRow"),w(t)}function w(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),w):null===n||tw(n)?(e.exit("tableRow"),t(n)):rw(n)?lw(e,w,"whitespace")(n):(e.enter("data"),j(n))}function j(t){return null===t||124===t||nw(t)?(e.exit("data"),w(t)):(e.consume(t),92===t?N:j)}function N(t){return 92===t||124===t?(e.consume(t),j):j(t)}}function MS(e,t){let n,r,s,a=-1,i=!0,o=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,d=0;const h=new RS;for(;++a<e.length;){const p=e[a],f=p[1];"enter"===p[0]?"tableHead"===f.type?(u=!1,0!==d&&(OS(h,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(a,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(i=!0,s=void 0,l=[0,0,0,0],c=[0,a+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(a,0,[["enter",r,t]])),o="tableDelimiterRow"===f.type?2:r?3:1):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type?"tableCellDivider"===f.type&&(i?i=!1:(0!==l[1]&&(c[0]=c[1],s=AS(h,t,l,o,void 0,s)),l=c,c=[l[1],a,0,0])):(i=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],s=AS(h,t,l,o,void 0,s),l=[0,0,0,0]),c[2]=a)):"tableHead"===f.type?(u=!0,d=a):"tableRow"===f.type||"tableDelimiterRow"===f.type?(d=a,0!==l[1]?(c[0]=c[1],s=AS(h,t,l,o,a,s)):0!==c[1]&&(s=AS(h,t,c,o,a,s)),o=0):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type||(c[3]=a)}for(0!==d&&OS(h,t,d,n,r),h.consume(t.events),a=-1;++a<t.events.length;){const e=t.events[a];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=IS(t.events,a))}return e}function AS(e,t,n,r,s,a){const i=1===r?"tableHeader":2===r?"tableDelimiter":"tableData";0!==n[0]&&(a.end=Object.assign({},LS(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const o=LS(t.events,n[1]);if(a={type:i,start:Object.assign({},o),end:Object.assign({},o)},e.add(n[1],0,[["enter",a,t]]),0!==n[2]){const s=LS(t.events,n[2]),a=LS(t.events,n[3]),i={type:"tableContent",start:Object.assign({},s),end:Object.assign({},a)};if(e.add(n[2],0,[["enter",i,t]]),2!==r){const r=t.events[n[2]],s=t.events[n[3]];if(r[1].end=Object.assign({},s[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",i,t]])}return void 0!==s&&(a.end=Object.assign({},LS(t.events,s)),e.add(s,0,[["exit",a,t]]),a=void 0),a}function OS(e,t,n,r,s){const a=[],i=LS(t.events,n);s&&(s.end=Object.assign({},i),a.push(["exit",s,t])),r.end=Object.assign({},i),a.push(["exit",r,t]),e.add(n+1,0,a)}function LS(e,t){const n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}const FS={name:"tasklistCheck",tokenize:function(e,t,n){const r=this;return function(t){if(null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),s};function s(t){return nw(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):n(t)}function a(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),i):n(t)}function i(r){return tw(r)?t(r):rw(r)?e.check({tokenize:zS},t,n)(r):n(r)}}};function zS(e,t,n){return lw(e,function(e){return null===e?n(e):t(e)},"whitespace")}const WS={};function US(e){const t=e||WS,n=this.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),a=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(function(e){return qb([{text:gS},{document:{91:{name:"gfmFootnoteDefinition",tokenize:CS,continuation:{tokenize:ES},exit:TS}},text:{91:{name:"gfmFootnoteCall",tokenize:_S},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:kS,resolveTo:SS}}},PS(e),{flow:{null:{name:"table",tokenize:DS,resolveAll:MS}}},{text:{91:FS}}])}(t)),s.push([{transforms:[ok],enter:{literalAutolink:tk,literalAutolinkEmail:nk,literalAutolinkHttp:nk,literalAutolinkWww:nk},exit:{literalAutolink:ik,literalAutolinkEmail:ak,literalAutolinkHttp:rk,literalAutolinkWww:sk}},{enter:{gfmFootnoteCallString:dk,gfmFootnoteCall:hk,gfmFootnoteDefinitionLabelString:pk,gfmFootnoteDefinition:fk},exit:{gfmFootnoteCallString:mk,gfmFootnoteCall:gk,gfmFootnoteDefinitionLabelString:xk,gfmFootnoteDefinition:vk}},{canContainEols:["delete"],enter:{strikethrough:kk},exit:{strikethrough:Sk}},{enter:{table:Jk,tableData:tS,tableHeader:tS,tableRow:Zk},exit:{codeText:nS,table:Xk,tableData:eS,tableHeader:eS,tableRow:eS}},{exit:{taskListCheckValueChecked:aS,taskListCheckValueUnchecked:aS,paragraph:iS}}]),a.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ZN,notInConstruct:ek},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ZN,notInConstruct:ek},{character:":",before:"[ps]",after:"\\/",inConstruct:ZN,notInConstruct:ek}]},bk(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Nk}],handlers:{delete:_k}},sS(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:oS}}]}}(t))}const $S=Array(12).fill(0),qS=({visible:e,className:t})=>St.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},St.createElement("div",{className:"sonner-spinner"},$S.map((e,t)=>St.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),BS=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),VS=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),HS=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),QS=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),KS=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},St.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),St.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let GS=1;const YS=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...r}=e,s="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:GS++,a=this.toasts.find(e=>e.id===s),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(t=>t.id===s?(this.publish({...t,...e,id:s,title:n}),{...t,...e,id:s,dismissible:i,title:n}):t):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let s,a=void 0!==n;const i=r.then(async e=>{s=["resolve",e];if(St.isValidElement(e))a=!1,this.create({id:n,type:"default",message:e});else if(JS(e)&&!e.ok){a=!1;const r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,s="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,i="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}else if(e instanceof Error){a=!1;const r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}else if(void 0!==t.success){a=!1;const r="function"==typeof t.success?await t.success(e):t.success,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"success",description:s,...i})}}).catch(async e=>{if(s=["reject",e],void 0!==t.error){a=!1;const r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!St.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}}).finally(()=>{a&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),o=()=>new Promise((e,t)=>i.then(()=>"reject"===s[0]?t(s[1]):e(s[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||GS++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},JS=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,XS=(e,t)=>{const n=(null==t?void 0:t.id)||GS++;return YS.addToast({title:e,...t,id:n}),n},ZS=Object.assign(XS,{success:YS.success,info:YS.info,warning:YS.warning,error:YS.error,custom:YS.custom,message:YS.message,promise:YS.promise,dismiss:YS.dismiss,loading:YS.loading},{getHistory:()=>YS.toasts,getToasts:()=>YS.getActiveToasts()});function e_(e){return void 0!==e.label}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const t_=3,n_=14;function r_(...e){return e.filter(Boolean).join(" ")}const s_=e=>{var t,n,r,s,a,i,o,l,c;const{invert:u,toast:d,unstyled:h,interacting:p,setHeights:f,visibleToasts:m,heights:g,index:x,toasts:v,expanded:y,removeToast:b,defaultRichColors:w,closeButton:j,style:N,cancelButtonStyle:k,actionButtonStyle:S,className:_="",descriptionClassName:C="",duration:E,position:T,gap:P,expandByDefault:R,classNames:I,icons:D,closeButtonAriaLabel:M="Close toast"}=e,[A,O]=St.useState(null),[L,F]=St.useState(null),[z,W]=St.useState(!1),[U,$]=St.useState(!1),[q,B]=St.useState(!1),[V,H]=St.useState(!1),[Q,K]=St.useState(!1),[G,Y]=St.useState(0),[J,X]=St.useState(0),Z=St.useRef(d.duration||E||4e3),ee=St.useRef(null),te=St.useRef(null),ne=0===x,re=x+1<=m,se=d.type,ae=!1!==d.dismissible,ie=d.className||"",oe=d.descriptionClassName||"",le=St.useMemo(()=>g.findIndex(e=>e.toastId===d.id)||0,[g,d.id]),ce=St.useMemo(()=>{var e;return null!=(e=d.closeButton)?e:j},[d.closeButton,j]),ue=St.useMemo(()=>d.duration||E||4e3,[d.duration,E]),de=St.useRef(0),he=St.useRef(0),pe=St.useRef(0),fe=St.useRef(null),[me,ge]=T.split("-"),xe=St.useMemo(()=>g.reduce((e,t,n)=>n>=le?e:e+t.height,0),[g,le]),ve=(()=>{const[e,t]=St.useState(document.hidden);return St.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),ye=d.invert||u,be="loading"===se;he.current=St.useMemo(()=>le*P+xe,[le,xe]),St.useEffect(()=>{Z.current=ue},[ue]),St.useEffect(()=>{W(!0)},[]),St.useEffect(()=>{const e=te.current;if(e){const t=e.getBoundingClientRect().height;return X(t),f(e=>[{toastId:d.id,height:t,position:d.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==d.id))}},[f,d.id]),St.useLayoutEffect(()=>{if(!z)return;const e=te.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,X(n),f(e=>e.find(e=>e.toastId===d.id)?e.map(e=>e.toastId===d.id?{...e,height:n}:e):[{toastId:d.id,height:n,position:d.position},...e])},[z,d.title,d.description,f,d.id,d.jsx,d.action,d.cancel]);const we=St.useCallback(()=>{$(!0),Y(he.current),f(e=>e.filter(e=>e.toastId!==d.id)),setTimeout(()=>{b(d)},200)},[d,b,f,he]);St.useEffect(()=>{if(d.promise&&"loading"===se||d.duration===1/0||"loading"===d.type)return;let e;return y||p||ve?(()=>{if(pe.current<de.current){const e=(new Date).getTime()-de.current;Z.current=Z.current-e}pe.current=(new Date).getTime()})():Z.current!==1/0&&(de.current=(new Date).getTime(),e=setTimeout(()=>{null==d.onAutoClose||d.onAutoClose.call(d,d),we()},Z.current)),()=>clearTimeout(e)},[y,p,d,se,ve,we]),St.useEffect(()=>{d.delete&&(we(),null==d.onDismiss||d.onDismiss.call(d,d))},[we,d.delete]);const je=d.icon||(null==D?void 0:D[se])||(e=>{switch(e){case"success":return BS;case"info":return HS;case"warning":return VS;case"error":return QS;default:return null}})(se);var Ne,ke,Se,_e;return St.createElement("li",{tabIndex:0,ref:te,className:r_(_,ie,null==I?void 0:I.toast,null==d||null==(t=d.classNames)?void 0:t.toast,null==I?void 0:I.default,null==I?void 0:I[se],null==d||null==(n=d.classNames)?void 0:n[se]),"data-sonner-toast":"","data-rich-colors":null!=(Ne=d.richColors)?Ne:w,"data-styled":!Boolean(d.jsx||d.unstyled||h),"data-mounted":z,"data-promise":Boolean(d.promise),"data-swiped":Q,"data-removed":U,"data-visible":re,"data-y-position":me,"data-x-position":ge,"data-index":x,"data-front":ne,"data-swiping":q,"data-dismissible":ae,"data-type":se,"data-invert":ye,"data-swipe-out":V,"data-swipe-direction":L,"data-expanded":Boolean(y||R&&z),"data-testid":d.testId,style:{"--index":x,"--toasts-before":x,"--z-index":v.length-x,"--offset":`${U?G:he.current}px`,"--initial-height":R?"auto":`${J}px`,...N,...d.style},onDragEnd:()=>{B(!1),O(null),fe.current=null},onPointerDown:e=>{2!==e.button&&!be&&ae&&(ee.current=new Date,Y(he.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(B(!0),fe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(V||!ae)return;fe.current=null;const r=Number((null==(e=te.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),s=Number((null==(t=te.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),a=(new Date).getTime()-(null==(n=ee.current)?void 0:n.getTime()),i="x"===A?r:s,o=Math.abs(i)/a;if(Math.abs(i)>=45||o>.11)return Y(he.current),null==d.onDismiss||d.onDismiss.call(d,d),F("x"===A?r>0?"right":"left":s>0?"down":"up"),we(),void H(!0);var l,c;null==(l=te.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=te.current)||c.style.setProperty("--swipe-amount-y","0px"),K(!1),B(!1),O(null)},onPointerMove:t=>{var n,r,s;if(!fe.current||!ae)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const a=t.clientY-fe.current.y,i=t.clientX-fe.current.x;var o;const l=null!=(o=e.swipeDirections)?o:function(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(T);!A&&(Math.abs(i)>1||Math.abs(a)>1)&&O(Math.abs(i)>Math.abs(a)?"x":"y");let c={x:0,y:0};const u=e=>1/(1.5+Math.abs(e)/20);if("y"===A){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&a<0||l.includes("bottom")&&a>0)c.y=a;else{const e=a*u(a);c.y=Math.abs(e)<Math.abs(a)?e:a}}else if("x"===A&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&i<0||l.includes("right")&&i>0)c.x=i;else{const e=i*u(i);c.x=Math.abs(e)<Math.abs(i)?e:i}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&K(!0),null==(r=te.current)||r.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(s=te.current)||s.style.setProperty("--swipe-amount-y",`${c.y}px`)}},ce&&!d.jsx&&"loading"!==se?St.createElement("button",{"aria-label":M,"data-disabled":be,"data-close-button":!0,onClick:be||!ae?()=>{}:()=>{we(),null==d.onDismiss||d.onDismiss.call(d,d)},className:r_(null==I?void 0:I.closeButton,null==d||null==(r=d.classNames)?void 0:r.closeButton)},null!=(ke=null==D?void 0:D.close)?ke:KS):null,(se||d.icon||d.promise)&&null!==d.icon&&(null!==(null==D?void 0:D[se])||d.icon)?St.createElement("div",{"data-icon":"",className:r_(null==I?void 0:I.icon,null==d||null==(s=d.classNames)?void 0:s.icon)},d.promise||"loading"===d.type&&!d.icon?d.icon||((null==D?void 0:D.loading)?St.createElement("div",{className:r_(null==I?void 0:I.loader,null==d||null==(_e=d.classNames)?void 0:_e.loader,"sonner-loader"),"data-visible":"loading"===se},D.loading):St.createElement(qS,{className:r_(null==I?void 0:I.loader,null==d||null==(Se=d.classNames)?void 0:Se.loader),visible:"loading"===se})):null,"loading"!==d.type?je:null):null,St.createElement("div",{"data-content":"",className:r_(null==I?void 0:I.content,null==d||null==(a=d.classNames)?void 0:a.content)},St.createElement("div",{"data-title":"",className:r_(null==I?void 0:I.title,null==d||null==(i=d.classNames)?void 0:i.title)},d.jsx?d.jsx:"function"==typeof d.title?d.title():d.title),d.description?St.createElement("div",{"data-description":"",className:r_(C,oe,null==I?void 0:I.description,null==d||null==(o=d.classNames)?void 0:o.description)},"function"==typeof d.description?d.description():d.description):null),St.isValidElement(d.cancel)?d.cancel:d.cancel&&e_(d.cancel)?St.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||k,onClick:e=>{e_(d.cancel)&&ae&&(null==d.cancel.onClick||d.cancel.onClick.call(d.cancel,e),we())},className:r_(null==I?void 0:I.cancelButton,null==d||null==(l=d.classNames)?void 0:l.cancelButton)},d.cancel.label):null,St.isValidElement(d.action)?d.action:d.action&&e_(d.action)?St.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||S,onClick:e=>{e_(d.action)&&(null==d.action.onClick||d.action.onClick.call(d.action,e),e.defaultPrevented||we())},className:r_(null==I?void 0:I.actionButton,null==d||null==(c=d.classNames)?void 0:c.actionButton)},d.action.label):null)};function a_(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function i_(e,t){const n={};return[e,t].forEach((e,t)=>{const r=1===t,s=r?"--mobile-offset":"--offset",a=r?"16px":"24px";function i(e){["top","right","bottom","left"].forEach(t=>{n[`${s}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n[`${s}-${t}`]=a:n[`${s}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):i(a)}),n}const o_=St.forwardRef(function(e,t){const{id:n,invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:p,style:f,visibleToasts:m=t_,toastOptions:g,dir:x=a_(),gap:v=n_,icons:y,containerAriaLabel:b="Notifications"}=e,[w,j]=St.useState([]),N=St.useMemo(()=>n?w.filter(e=>e.toasterId===n):w.filter(e=>!e.toasterId),[w,n]),k=St.useMemo(()=>Array.from(new Set([s].concat(N.filter(e=>e.position).map(e=>e.position)))),[N,s]),[S,_]=St.useState([]),[C,E]=St.useState(!1),[T,P]=St.useState(!1),[R,I]=St.useState("system"!==d?d:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=St.useRef(null),M=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=St.useRef(null),O=St.useRef(!1),L=St.useCallback(e=>{j(t=>{var n;return(null==(n=t.find(t=>t.id===e.id))?void 0:n.delete)||YS.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return St.useEffect(()=>YS.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{j(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))}):setTimeout(()=>{qh.flushSync(()=>{j(t=>{const n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]})})})}),[w]),St.useEffect(()=>{if("system"!==d)return void I(d);if("system"===d&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{I(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{I(e?"dark":"light")}catch(vW){console.error(vW)}})}},[d]),St.useEffect(()=>{w.length<=1&&E(!1)},[w]),St.useEffect(()=>{const e=e=>{var t;var n;a.every(t=>e[t]||e.code===t)&&(E(!0),null==(n=D.current)||n.focus());"Escape"!==e.code||document.activeElement!==D.current&&!(null==(t=D.current)?void 0:t.contains(document.activeElement))||E(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),St.useEffect(()=>{if(D.current)return()=>{A.current&&(A.current.focus({preventScroll:!0}),A.current=null,O.current=!1)}},[D.current]),St.createElement("section",{ref:t,"aria-label":`${b} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((t,n)=>{var s;const[a,d]=t.split("-");return N.length?St.createElement("ol",{key:t,dir:"auto"===x?a_():x,tabIndex:-1,ref:D,className:l,"data-sonner-toaster":!0,"data-sonner-theme":R,"data-y-position":a,"data-x-position":d,style:{"--front-toast-height":`${(null==(s=S[0])?void 0:s.height)||0}px`,"--width":"356px","--gap":`${v}px`,...f,...i_(c,u)},onBlur:e=>{O.current&&!e.currentTarget.contains(e.relatedTarget)&&(O.current=!1,A.current&&(A.current.focus({preventScroll:!0}),A.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||O.current||(O.current=!0,A.current=e.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{T||E(!1)},onDragEnd:()=>E(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||P(!0)},onPointerUp:()=>P(!1)},N.filter(e=>!e.position&&0===n||e.position===t).map((n,s)=>{var a,l;return St.createElement(s_,{key:n.id,icons:y,index:s,toast:n,defaultRichColors:h,duration:null!=(a=null==g?void 0:g.duration)?a:p,className:null==g?void 0:g.className,descriptionClassName:null==g?void 0:g.descriptionClassName,invert:r,visibleToasts:m,closeButton:null!=(l=null==g?void 0:g.closeButton)?l:o,interacting:T,position:t,style:null==g?void 0:g.style,unstyled:null==g?void 0:g.unstyled,classNames:null==g?void 0:g.classNames,cancelButtonStyle:null==g?void 0:g.cancelButtonStyle,actionButtonStyle:null==g?void 0:g.actionButtonStyle,closeButtonAriaLabel:null==g?void 0:g.closeButtonAriaLabel,removeToast:L,toasts:N.filter(e=>e.position==n.position),heights:S.filter(e=>e.position==n.position),setHeights:_,expandByDefault:i,gap:v,expanded:C,swipeDirections:e.swipeDirections})})):null}))}),l_=({trace:e})=>{var t,n;const[r,s]=kt.useState(!1),[a,i]=kt.useState(!1),o=function(){const e=$p();return()=>{e.invalidateQueries({queryKey:["traces"]}),e.invalidateQueries({queryKey:["all-traces"]})}}(),{workshopId:l}=Ym(),{data:c}=pg(l);return Mt.jsxs(hx,{className:"w-full max-w-4xl mx-auto",children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center justify-between",children:[Mt.jsxs("div",{className:"flex items-center gap-2 text-lg",children:[Mt.jsx(ov,{className:"h-5 w-5"}),"Trace ",e.mlflow_trace_id||e.id]}),Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Gv,{variant:"ghost",size:"sm",onClick:()=>{o(),ZS.success("Refreshing trace data...")},className:"flex items-center gap-2",title:"Refresh trace data",children:Mt.jsx(gv,{className:"h-4 w-4"})}),e.mlflow_trace_id&&Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:()=>{if(e.mlflow_url)return void window.open(e.mlflow_url,"_blank");const t=e.mlflow_host||(null==c?void 0:c.databricks_host),n=e.mlflow_experiment_id||(null==c?void 0:c.experiment_id),r=e.mlflow_trace_id;if(r&&t&&n){const e=`${(e=>{if(!e)return;return`https://${e.replace(/^https?:\/\//,"")}`})(t)}/ml/experiments/${n}/traces?selectedEvaluationId=${r}`;return void window.open(e,"_blank")}r?ZS.warning("MLflow URL not available. Configure MLflow in Intake or re-ingest traces."):ZS.warning("MLflow trace information not available for this trace.")},className:"flex items-center gap-2",children:[Mt.jsx(Hx,{className:"h-4 w-4"}),"View in MLflow",Mt.jsx(Kx,{className:"h-3 w-3"})]})]})]})}),Mt.jsxs(gx,{className:"space-y-6",children:[(null==(t=e.context)?void 0:t.conversation_history)&&Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs(Gv,{variant:"ghost",onClick:()=>i(!a),className:"flex items-center gap-2 p-0 h-auto text-purple-600 hover:text-purple-800",children:[Mt.jsx(nv,{className:"h-4 w-4"}),Mt.jsx("span",{className:"font-medium",children:"Conversation History"}),a?Mt.jsx(Ax,{className:"h-4 w-4"}):Mt.jsx(Ix,{className:"h-4 w-4"})]}),a&&Mt.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-4 rounded-r-lg",children:Mt.jsx("div",{className:"space-y-3",children:e.context.conversation_history.map((e,t)=>Mt.jsxs("div",{className:"flex items-start gap-2",children:["user"===e.role?Mt.jsx(Pv,{className:"h-4 w-4 text-blue-600 mt-0.5"}):Mt.jsx(Cx,{className:"h-4 w-4 text-green-600 mt-0.5"}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx("span",{className:"text-xs font-medium text-gray-600 uppercase",children:e.role}),Mt.jsx("div",{className:"text-sm text-gray-800 mt-1 prose prose-sm max-w-none",children:Mt.jsx(QN,{remarkPlugins:[US],children:e.content})})]})]},t))})})]}),(null==(n=e.context)?void 0:n.retrieved_content)&&Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs(Gv,{variant:"ghost",onClick:()=>s(!r),className:"flex items-center gap-2 p-0 h-auto text-orange-600 hover:text-orange-800",children:[Mt.jsx(Yx,{className:"h-4 w-4"}),Mt.jsx("span",{className:"font-medium",children:"Retrieved Content"}),r?Mt.jsx(Ax,{className:"h-4 w-4"}):Mt.jsx(Ix,{className:"h-4 w-4"})]}),r&&Mt.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 rounded-r-lg",children:Mt.jsx("div",{className:"text-gray-800 leading-relaxed text-sm prose prose-sm max-w-none",children:Mt.jsx(QN,{remarkPlugins:[US],children:e.context.retrieved_content})})})]}),Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Pv,{className:"h-4 w-4 text-blue-600"}),Mt.jsx("span",{className:"font-medium text-blue-800",children:"Input"})]}),Mt.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:Mt.jsx("div",{className:"text-gray-800 leading-relaxed prose prose-sm max-w-none",children:Mt.jsx(QN,{remarkPlugins:[US],children:e.input})})})]}),Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Cx,{className:"h-4 w-4 text-green-600"}),Mt.jsx("span",{className:"font-medium text-green-800",children:"Output"})]}),Mt.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg",children:Mt.jsx("div",{className:"text-gray-800 leading-relaxed prose prose-sm max-w-none",children:Mt.jsx(QN,{remarkPlugins:[US],children:e.output})})})]})]})]})};function c_(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function u_(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>kt.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return kt.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const s=kt.createContext(r),a=n.length;n=[...n,r];const i=t=>{var n;const{scope:r,children:i,...o}=t,l=(null==(n=null==r?void 0:r[e])?void 0:n[a])||s,c=kt.useMemo(()=>o,Object.values(o));return Mt.jsx(l.Provider,{value:c,children:i})};return i.displayName=t+"Provider",[i,function(n,i){var o;const l=(null==(o=null==i?void 0:i[e])?void 0:o[a])||s,c=kt.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},d_(r,...t)]}function d_(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return kt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function h_(e){const t=e+"CollectionProvider",[n,r]=u_(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{const{scope:t,children:n}=e,r=St.useRef(null),a=St.useRef(new Map).current;return Mt.jsx(s,{scope:t,itemMap:a,collectionRef:r,children:n})};i.displayName=t;const o=e+"CollectionSlot",l=$v(o),c=St.forwardRef((e,t)=>{const{scope:n,children:r}=e,s=Uv(t,a(o,n).collectionRef);return Mt.jsx(l,{ref:s,children:r})});c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=$v(u),p=St.forwardRef((e,t)=>{const{scope:n,children:r,...s}=e,i=St.useRef(null),o=Uv(t,i),l=a(u,n);return St.useEffect(()=>(l.itemMap.set(i,{ref:i,...s}),()=>{l.itemMap.delete(i)})),Mt.jsx(h,{[d]:"",ref:o,children:r})});return p.displayName=u,[{Provider:i,Slot:c,ItemSlot:p},function(t){const n=a(e+"CollectionConsumer",t),r=St.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),r=Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return r},[n.collectionRef,n.itemMap]);return r},r]}var p_=(null==globalThis?void 0:globalThis.document)?kt.useLayoutEffect:()=>{},f_=_t[" useId ".trim().toString()]||(()=>{}),m_=0;function g_(e){const[t,n]=kt.useState(f_());return p_(()=>{n(e=>e??String(m_++))},[e]),t?`radix-${t}`:""}var x_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=$v(`Primitive.${t}`),r=kt.forwardRef((e,r)=>{const{asChild:s,...a}=e,i=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Mt.jsx(i,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function v_(e,t){e&&$h.flushSync(()=>e.dispatchEvent(t))}function y_(e){const t=kt.useRef(e);return kt.useEffect(()=>{t.current=e}),kt.useMemo(()=>(...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)},[])}var b_=_t[" useInsertionEffect ".trim().toString()]||p_;function w_({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=function({defaultProp:e,onChange:t}){const[n,r]=kt.useState(e),s=kt.useRef(n),a=kt.useRef(t);return b_(()=>{a.current=t},[t]),kt.useEffect(()=>{var e;s.current!==n&&(null==(e=a.current)||e.call(a,n),s.current=n)},[n,s]),[n,r,a]}({defaultProp:t,onChange:n}),o=void 0!==e,l=o?e:s;{const t=kt.useRef(void 0!==e);kt.useEffect(()=>{const e=t.current;if(e!==o){const t=e?"controlled":"uncontrolled",n=o?"controlled":"uncontrolled";console.warn(`${r} is changing from ${t} to ${n}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=o},[o,r])}const c=kt.useCallback(t=>{var n;if(o){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&(null==(n=i.current)||n.call(i,r))}else a(t)},[o,e,a,i]);return[l,c]}var j_=kt.createContext(void 0);function N_(e){const t=kt.useContext(j_);return e||t||"ltr"}var k_="rovingFocusGroup.onEntryFocus",S_={bubbles:!1,cancelable:!0},__="RovingFocusGroup",[C_,E_,T_]=h_(__),[P_,R_]=u_(__,[T_]),[I_,D_]=P_(__),M_=kt.forwardRef((e,t)=>Mt.jsx(C_.Provider,{scope:e.__scopeRovingFocusGroup,children:Mt.jsx(C_.Slot,{scope:e.__scopeRovingFocusGroup,children:Mt.jsx(A_,{...e,ref:t})})}));M_.displayName=__;var A_=kt.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=kt.useRef(null),p=Uv(t,h),f=N_(a),[m,g]=w_({prop:i,defaultProp:o??null,onChange:l,caller:__}),[x,v]=kt.useState(!1),y=y_(c),b=E_(n),w=kt.useRef(!1),[j,N]=kt.useState(0);return kt.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(k_,y),()=>e.removeEventListener(k_,y)},[y]),Mt.jsx(I_,{scope:n,orientation:r,dir:f,loop:s,currentTabStopId:m,onItemFocus:kt.useCallback(e=>g(e),[g]),onItemShiftTab:kt.useCallback(()=>v(!0),[]),onFocusableItemAdd:kt.useCallback(()=>N(e=>e+1),[]),onFocusableItemRemove:kt.useCallback(()=>N(e=>e-1),[]),children:Mt.jsx(x_.div,{tabIndex:x||0===j?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:c_(e.onMouseDown,()=>{w.current=!0}),onFocus:c_(e.onFocus,e=>{const t=!w.current;if(e.target===e.currentTarget&&t&&!x){const t=new CustomEvent(k_,S_);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=b().filter(e=>e.focusable);z_([e.find(e=>e.active),e.find(e=>e.id===m),...e].filter(Boolean).map(e=>e.ref.current),u)}}w.current=!1}),onBlur:c_(e.onBlur,()=>v(!1))})})}),O_="RovingFocusGroupItem",L_=kt.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...o}=e,l=g_(),c=a||l,u=D_(O_,n),d=u.currentTabStopId===c,h=E_(n),{onFocusableItemAdd:p,onFocusableItemRemove:f,currentTabStopId:m}=u;return kt.useEffect(()=>{if(r)return p(),()=>f()},[r,p,f]),Mt.jsx(C_.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:Mt.jsx(x_.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:c_(e.onMouseDown,e=>{r?u.onItemFocus(c):e.preventDefault()}),onFocus:c_(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:c_(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:F_[r]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){"prev"===t&&s.reverse();const a=s.indexOf(e.currentTarget);s=u.loop?(r=a+1,(n=s).map((e,t)=>n[(r+t)%n.length])):s.slice(a+1)}setTimeout(()=>z_(s))}var n,r}),children:"function"==typeof i?i({isCurrentTabStop:d,hasTabStop:null!=m}):i})})});L_.displayName=O_;var F_={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function z_(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var W_=M_,U_=L_;var $_=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=kt.useState(),r=kt.useRef(null),s=kt.useRef(e),a=kt.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return kt.useReducer((e,n)=>t[e][n]??e,e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return kt.useEffect(()=>{const e=q_(r.current);a.current="mounted"===o?e:"none"},[o]),p_(()=>{const t=r.current,n=s.current;if(n!==e){const r=a.current,i=q_(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,l]),p_(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,i=a=>{const i=q_(r.current).includes(a.animationName);if(a.target===t&&i&&(l("ANIMATION_END"),!s.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(a.current=q_(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:kt.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),s="function"==typeof n?n({present:r.isPresent}):kt.Children.only(n),a=Uv(r.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;if(s)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof n||r.isPresent?kt.cloneElement(s,{ref:a}):null};function q_(e){return(null==e?void 0:e.animationName)||"none"}$_.displayName="Presence";var B_="Tabs",[V_,H_]=u_(B_,[R_]),Q_=R_(),[K_,G_]=V_(B_),Y_=kt.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,u=N_(o),[d,h]=w_({prop:r,onChange:s,defaultProp:a??"",caller:B_});return Mt.jsx(K_,{scope:n,baseId:g_(),value:d,onValueChange:h,orientation:i,dir:u,activationMode:l,children:Mt.jsx(x_.div,{dir:u,"data-orientation":i,...c,ref:t})})});Y_.displayName=B_;var J_="TabsList",X_=kt.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=G_(J_,n),i=Q_(n);return Mt.jsx(W_,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:Mt.jsx(x_.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});X_.displayName=J_;var Z_="TabsTrigger",eC=kt.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,i=G_(Z_,n),o=Q_(n),l=rC(i.baseId,r),c=sC(i.baseId,r),u=r===i.value;return Mt.jsx(U_,{asChild:!0,...o,focusable:!s,active:u,children:Mt.jsx(x_.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...a,ref:t,onMouseDown:c_(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(r)}),onKeyDown:c_(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(r)}),onFocus:c_(e.onFocus,()=>{const e="manual"!==i.activationMode;u||s||!e||i.onValueChange(r)})})})});eC.displayName=Z_;var tC="TabsContent",nC=kt.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...i}=e,o=G_(tC,n),l=rC(o.baseId,r),c=sC(o.baseId,r),u=r===o.value,d=kt.useRef(u);return kt.useEffect(()=>{const e=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(e)},[]),Mt.jsx($_,{present:s||u,children:({present:n})=>Mt.jsx(x_.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:n&&a})})});function rC(e,t){return`${e}-trigger-${t}`}function sC(e,t){return`${e}-content-${t}`}nC.displayName=tC;var aC=X_,iC=eC,oC=nC;const lC=Y_,cC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(aC,{ref:n,className:dx("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));cC.displayName=aC.displayName;const uC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(iC,{ref:n,className:dx("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));uC.displayName=iC.displayName;const dC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(oC,{ref:n,className:dx("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));dC.displayName=oC.displayName;const hC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("div",{className:"relative w-full overflow-auto",children:Mt.jsx("table",{ref:n,className:dx("w-full caption-bottom text-sm",e),...t})}));hC.displayName="Table";const pC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("thead",{ref:n,className:dx("[&_tr]:border-b",e),...t}));pC.displayName="TableHeader";const fC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("tbody",{ref:n,className:dx("[&_tr:last-child]:border-0",e),...t}));fC.displayName="TableBody";kt.forwardRef(({className:e,...t},n)=>Mt.jsx("tfoot",{ref:n,className:dx("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const mC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("tr",{ref:n,className:dx("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));mC.displayName="TableRow";const gC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("th",{ref:n,className:dx("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));gC.displayName="TableHead";const xC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("td",{ref:n,className:dx("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));xC.displayName="TableCell";function vC({trace:e,className:t="",showContext:n=!1}){const[r,s]=kt.useState("table"),a=kt.useMemo(()=>{try{return"string"==typeof e.output?JSON.parse(e.output):e.output}catch(t){return null}},[e.output]),i=kt.useMemo(()=>{try{return"string"==typeof e.input?JSON.parse(e.input):e.input}catch(t){return e.input}},[e.input]),o=a&&Array.isArray(a.result),l=a&&a.query_text,c=kt.useMemo(()=>{if(!o||0===a.result.length)return[];const e=a.result[0];return Object.keys(e)},[a,o]),u=async(e,t)=>{try{await navigator.clipboard.writeText(e)}catch(n){}};return a?Mt.jsxs(hx,{className:t,children:[Mt.jsx(px,{className:"pb-3",children:Mt.jsx("div",{className:"flex items-center justify-between",children:Mt.jsxs(fx,{className:"flex items-center gap-2 text-lg",children:[Mt.jsx(Yx,{className:"h-4 w-4"}),"Trace Data Viewer",e.mlflow_trace_id&&Mt.jsxs(Lv,{variant:"outline",className:"text-xs",children:["MLflow: ",e.mlflow_trace_id.slice(0,8),"..."]})]})})}),Mt.jsxs(gx,{className:"space-y-4",children:[Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Input"}),Mt.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[Mt.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:JSON.stringify(i,null,2)}),Mt.jsxs(Gv,{variant:"ghost",size:"sm",className:"mt-2 h-6 px-2 text-xs",onClick:()=>u(JSON.stringify(i,null,2)),children:[Mt.jsx(Vx,{className:"h-3 w-3 mr-1"}),"Copy"]})]})]}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Output"}),o&&Mt.jsxs(lC,{value:r,onValueChange:s,className:"w-full",children:[Mt.jsxs(cC,{className:"grid w-full grid-cols-2",children:[Mt.jsxs(uC,{value:"table",className:"flex items-center gap-2",children:[Mt.jsx(hC,{className:"h-4 w-4"}),"Data Table"]}),Mt.jsxs(uC,{value:"json",className:"flex items-center gap-2",children:[Mt.jsx(Yx,{className:"h-4 w-4"}),"Raw JSON"]})]}),Mt.jsx(dC,{value:"table",className:"mt-4",children:Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{className:"text-sm text-gray-600",children:[a.result.length," rows  ",c.length," columns"]}),Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:()=>{if(!o)return;const t=c,n=[t.join(","),...a.result.map(e=>t.map(t=>{const n=e[t];return"string"==typeof n&&(n.includes(",")||n.includes('"'))?`"${n.replace(/"/g,'""')}"`:n}).join(","))].join("\n"),r=new Blob([n],{type:"text/csv"}),s=window.URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=`trace_${e.id}_data.csv`,i.click(),window.URL.revokeObjectURL(s)},className:"h-8 px-3 text-xs",children:[Mt.jsx(Qx,{className:"h-3 w-3 mr-1"}),"Download CSV"]}),Mt.jsxs(Gv,{variant:"ghost",size:"sm",onClick:()=>u(JSON.stringify(a.result,null,2)),className:"h-8 px-3 text-xs",children:[Mt.jsx(Vx,{className:"h-3 w-3 mr-1"}),"Copy"]})]})]}),Mt.jsx("div",{className:"border rounded-lg overflow-hidden",children:Mt.jsxs(hC,{children:[Mt.jsx(pC,{children:Mt.jsx(mC,{children:c.map(e=>Mt.jsx(gC,{className:"bg-gray-50",children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})}),Mt.jsx(fC,{children:a.result.map((e,t)=>Mt.jsx(mC,{children:c.map(t=>Mt.jsx(xC,{className:"font-mono text-sm",children:e[t]},t))},t))})]})})]})}),Mt.jsx(dC,{value:"json",className:"mt-4",children:Mt.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[Mt.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap overflow-x-auto",children:JSON.stringify(a,null,2)}),Mt.jsxs(Gv,{variant:"ghost",size:"sm",className:"mt-2 h-6 px-2 text-xs",onClick:()=>u(JSON.stringify(a,null,2)),children:[Mt.jsx(Vx,{className:"h-3 w-3 mr-1"}),"Copy"]})]})})]}),!o&&Mt.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[Mt.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:JSON.stringify(a,null,2)}),Mt.jsxs(Gv,{variant:"ghost",size:"sm",className:"mt-2 h-6 px-2 text-xs",onClick:()=>u(JSON.stringify(a,null,2)),children:[Mt.jsx(Vx,{className:"h-3 w-3 mr-1"}),"Copy"]})]})]}),l&&Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"SQL Query"}),Mt.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[Mt.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono overflow-x-auto",children:a.query_text?(d=a.query_text,d.replace(/\bSELECT\b/gi,"\nSELECT").replace(/\bFROM\b/gi,"\nFROM").replace(/\bWHERE\b/gi,"\nWHERE").replace(/\bGROUP BY\b/gi,"\nGROUP BY").replace(/\bORDER BY\b/gi,"\nORDER BY").replace(/\bHAVING\b/gi,"\nHAVING").replace(/\bJOIN\b/gi,"\nJOIN").replace(/\bLEFT JOIN\b/gi,"\nLEFT JOIN").replace(/\bRIGHT JOIN\b/gi,"\nRIGHT JOIN").replace(/\bINNER JOIN\b/gi,"\nINNER JOIN").replace(/\bUNION\b/gi,"\nUNION").replace(/\bLIMIT\b/gi,"\nLIMIT").trim()):""}),Mt.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[Mt.jsxs(Gv,{variant:"ghost",size:"sm",onClick:()=>{if(!l||!a.query_text)return;const t=new Blob([a.query_text],{type:"text/sql"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`trace_${e.id}_query.sql`,r.click(),window.URL.revokeObjectURL(n)},className:"h-6 px-2 text-xs",children:[Mt.jsx(Qx,{className:"h-3 w-3 mr-1"}),"Download SQL"]}),Mt.jsxs(Gv,{variant:"ghost",size:"sm",onClick:()=>a.query_text&&u(a.query_text),className:"h-6 px-2 text-xs",children:[Mt.jsx(Vx,{className:"h-3 w-3 mr-1"}),"Copy"]})]})]})]}),n&&e.context&&Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Context"}),Mt.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:Mt.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:JSON.stringify(e.context,null,2)})})]})]})]}):Mt.jsx(hx,{className:t,children:Mt.jsx(gx,{className:"p-4",children:Mt.jsxs("div",{className:"text-center text-gray-500",children:[Mt.jsx(Hx,{className:"h-8 w-8 mx-auto mb-2"}),Mt.jsx("p",{children:"Unable to parse trace output"})]})})});var d}kt.forwardRef(({className:e,...t},n)=>Mt.jsx("caption",{ref:n,className:dx("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const yC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("textarea",{className:dx("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));yC.displayName="Textarea";var bC=kt.forwardRef((e,t)=>Mt.jsx(x_.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));bC.displayName="Label";var wC=bC;const jC=Av("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),NC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(wC,{ref:n,className:dx(jC(),e),...t}));NC.displayName=wC.displayName;const kC=e=>({id:e.id,input:e.input,output:e.output,context:e.context||void 0,mlflow_trace_id:e.mlflow_trace_id||void 0,mlflow_url:e.mlflow_url||void 0,mlflow_host:e.mlflow_host||void 0,mlflow_experiment_id:e.mlflow_experiment_id||void 0});function SC(){const{workshopId:e}=Ym(),{currentPhase:t}=gg(),{user:n}=Bm(),{canCreateFindings:r,isFacilitator:s}=Hm();if(!n||!n.id)return Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center max-w-md",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Please Log In"}),Mt.jsx("div",{className:"text-sm text-gray-500 mb-4",children:"You must be logged in to view discovery traces."})]})});if(s&&("discovery"===t||"annotation"===t))return Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center max-w-md",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Facilitator Dashboard Required"}),Mt.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["As a facilitator during the ",t," phase, you should use the monitoring dashboard instead of the participant interface."]}),Mt.jsx("p",{className:"text-xs text-gray-400",children:"Please navigate back to access the appropriate facilitator tools for monitoring and managing this phase."})]})});const[a,i]=kt.useState(0),[o,l]=kt.useState(""),[c,u]=kt.useState(""),[d,h]=kt.useState(new Set),[p,f]=kt.useState(!1),[m,g]=kt.useState(!1),[x,v]=kt.useState(!1),[y,b]=kt.useState(!1),w=kt.useRef(null),j=kt.useRef(!1),N=kt.useRef(0),{data:k,isLoading:S,error:_}=ag(e,n.id),{data:C}=og(e,n),E=function(e){const t=$p();return Gp({mutationFn:t=>$m.submitFindingWorkshopsWorkshopIdFindingsPost(e,t),onMutate:async n=>{await t.cancelQueries({queryKey:["findings",e,n.user_id]});const r=t.getQueryData(["findings",e,n.user_id]);return t.setQueryData(["findings",e,n.user_id],t=>{const r={id:`temp-${Date.now()}`,workshop_id:e,trace_id:n.trace_id,user_id:n.user_id,insight:n.insight,created_at:(new Date).toISOString()};if(!t)return[r];const s=t.findIndex(e=>e.trace_id===n.trace_id);if(s>=0){const e=[...t];return e[s]={...e[s],insight:n.insight},e}return[...t,r]}),{previousFindings:r}},onError:(n,r,s)=>{(null==s?void 0:s.previousFindings)&&t.setQueryData(["findings",e,r.user_id],s.previousFindings)},onSuccess:(n,r)=>{t.setQueryData(["findings",e,r.user_id],e=>{if(!e)return[n];const t=e.findIndex(e=>{var t;return e.trace_id===r.trace_id||(null==(t=e.id)?void 0:t.startsWith("temp-"))});if(t>=0){const r=[...e];return r[t]=n,r}return[...e,n]}),t.invalidateQueries({queryKey:["discovery-completion-status",e]}),t.invalidateQueries({queryKey:["user-discovery-complete",e,r.user_id]})}})}(e);$p();const T=kt.useMemo(()=>(null==k?void 0:k.map(kC))||[],[k]),P=T[a],R=T.length>0&&T.every(e=>d.has(e.id))&&d.size===T.length;kt.useEffect(()=>{C&&C.length>0&&C.forEach(e=>{const t=e.insight||"",n=t.split("\n\nImprovement Analysis: ");if(2===n.length){const t=n[0].replace("Quality Assessment: ",""),r=n[1];I.current.set(e.trace_id,{q1:t,q2:r})}else I.current.set(e.trace_id,{q1:t,q2:""})})},[null==C?void 0:C.length]),kt.useEffect(()=>{if((null==P?void 0:P.id)&&P.id!==w.current){const e=null==C?void 0:C.find(e=>e.trace_id===P.id);if(e){const t=e.insight||"",n=t.split("\n\nImprovement Analysis: ");if(2===n.length){const e=n[0].replace("Quality Assessment: ",""),t=n[1];l(e),u(t)}else l(t),u("")}else l(""),u("");w.current=P.id}},[null==P?void 0:P.id,C]),kt.useEffect(()=>{if(C&&T.length>0){const e=new Set(T.map(e=>e.id)),t=new Set(C.filter(t=>e.has(t.trace_id)).map(e=>e.trace_id)),n=N.current>0&&T.length>N.current;if(j.current){if(n){const e=N.current;i(t=>t>=e-1?e:t)}}else{const e=T.findIndex(e=>!t.has(e.id));-1!==e?i(e):t.size===T.length&&i(T.length-1),j.current=!0}N.current=T.length}},[C,T]),kt.useEffect(()=>{if(C&&T.length>0){const e=new Set(T.map(e=>e.id)),t=new Set(C.filter(t=>e.has(t.trace_id)).map(e=>e.trace_id));h(e=>{const n=Array.from(e).sort(),r=Array.from(t).sort();return n.length===r.length&&n.every((e,t)=>e===r[t])?e:t})}},[C,T]);const I=kt.useRef(new Map),D=kt.useRef(new Set),M=kt.useRef(!1),A=kt.useRef(new Map),O=kt.useCallback(async(e,t,r,s=!1)=>{var a,i;if(!e.trim()&&!t.trim()||!r)return!0;const o=e.trim(),l=t.trim();if(D.current.has(r))return console.warn(`Save already in progress for trace ${r}, skipping duplicate save`),!1;if(!s){if(M.current)return console.warn("User-initiated save already in progress, skipping duplicate save"),!1;const e=I.current.get(r);if(e){if(!(o!==e.q1||l!==e.q2))return console.log(`No changes detected for trace ${r}, skipping save`),!0}M.current=!0,g(!0)}D.current.add(r),s&&A.current.set(r,"saving");try{const e=`Quality Assessment: ${o}\n\nImprovement Analysis: ${l}`;return console.log("Saving finding:",{traceId:r,q1Length:o.length,q2Length:l.length,isBackground:s}),s?await(async(e,t=3,n=1e3)=>{let r;for(let a=0;a<=t;a++)try{return await e()}catch(s){if(r=s,a<t){const e=n*Math.pow(2,a);console.log(`Save attempt ${a+1} failed, retrying in ${e}ms...`),await new Promise(t=>setTimeout(t,e))}}throw r})(()=>E.mutateAsync({trace_id:r,user_id:(null==n?void 0:n.id)||"demo_user",insight:e}),3,1e3):await E.mutateAsync({trace_id:r,user_id:(null==n?void 0:n.id)||"demo_user",insight:e}),h(e=>new Set([...e,r])),I.current.set(r,{q1:o,q2:l}),s&&A.current.set(r,"saved"),console.log("Successfully saved finding for trace:",r),!0}catch(c){return console.error("Failed to save finding after retries:",c),console.error("Error details:",{message:null==c?void 0:c.message,response:null==(a=null==c?void 0:c.response)?void 0:a.data,status:null==(i=null==c?void 0:c.response)?void 0:i.status,traceId:r,q1Length:o.length,q2Length:l.length,isBackground:s}),s&&A.current.set(r,"failed"),s||ZS.error("Failed to save. Please try again."),!1}finally{D.current.delete(r),s||(M.current=!1,g(!1))}},[E,null==n?void 0:n.id]),L=async()=>{P&&o.trim()&&c.trim()&&await O(o,c,P.id)};return n&&n.id?"intake"===t?s?Mt.jsx("div",{className:"p-8",children:Mt.jsxs("div",{className:"max-w-2xl mx-auto",children:[Mt.jsxs("div",{className:"text-center mb-8",children:[Mt.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:Mt.jsx(wv,{className:"h-8 w-8 text-white"})}),Mt.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Ready to Begin Discovery"}),Mt.jsx("p",{className:"text-slate-600",children:"Start the discovery phase to distribute traces to all participants for analysis"})]}),Mt.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 mb-6",children:[Mt.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Workshop Status"}),Mt.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[Mt.jsxs("div",{children:[" ",Mt.jsx("strong",{children:"Traces ready:"})," ",T.length," traces loaded"]}),Mt.jsxs("div",{children:[" ",Mt.jsx("strong",{children:"Phase:"})," Pre-discovery (Intake)"]}),Mt.jsxs("div",{children:[" ",Mt.jsx("strong",{children:"Next step:"})," Begin discovery phase"]})]})]}),Mt.jsx(Gv,{onClick:async()=>{try{await $m.beginDiscoveryPhaseWorkshopsWorkshopIdBeginDiscoveryPost(e),window.location.reload()}catch(t){ZS.error("Failed to start discovery phase. Please try again.")}},className:"w-full bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white py-3 rounded-xl font-medium",children:" Start Discovery Phase"}),Mt.jsx("p",{className:"text-xs text-slate-500 text-center mt-4",children:"This will allow all participants to begin exploring traces and providing insights"})]})}):Mt.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-slate-900 mb-2",children:"Discovery Phase Not Started"}),Mt.jsx("div",{className:"text-sm text-slate-600",children:"The facilitator will begin the discovery phase shortly"})]})}):S?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("div",{className:"text-lg font-medium text-gray-600 mb-2",children:"Loading traces..."}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"Fetching workshop data from API"})]})}):_||!T.length?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:_?"Failed to load traces":"No traces available"}),Mt.jsx("div",{className:"text-sm text-gray-500",children:_?"Please check your connection and try again":"Upload some traces to get started"})]})}):Mt.jsx("div",{className:"p-6",children:Mt.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[Mt.jsxs("div",{children:[Mt.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Discovery Phase"}),Mt.jsx("p",{className:"text-gray-600 mb-4",children:"Review LLM responses and share your insights"}),Mt.jsxs("div",{className:"mb-6",children:[Mt.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Mt.jsx("span",{className:"text-sm text-gray-600",children:"Progress"}),Mt.jsxs("span",{className:"text-sm text-gray-600",children:[d.size," of ",T.length," complete",R&&Mt.jsx("span",{className:"ml-2 text-green-600 font-medium",children:" All traces reviewed!"})]})]}),Mt.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Mt.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(R?"bg-green-500":"bg-blue-500"),style:{width:d.size/T.length*100+"%"}})})]}),Mt.jsx("div",{className:"flex items-center justify-between",children:Mt.jsx("div",{className:"flex items-center gap-3",children:Mt.jsxs(Lv,{variant:"outline",children:["Trace ",a+1," of ",T.length]})})})]}),Mt.jsx(l_,{trace:P}),Mt.jsxs(hx,{className:"mt-4",children:[Mt.jsx(px,{className:"pb-3",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsx(fx,{className:"text-lg",children:"Trace Data Analysis"}),Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:()=>b(!y),className:"flex items-center gap-2",children:[Mt.jsx(kv,{className:"h-4 w-4"}),y?"Hide":"Show"," Data Table"]})]})}),y&&Mt.jsx(gx,{children:Mt.jsx(vC,{trace:P,showContext:!1,className:"border-0 shadow-none"})})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsx(fx,{children:"Discovery Questions"}),!r&&Mt.jsxs("p",{className:"text-sm text-red-600 mt-2",children:[Mt.jsx(Fx,{className:"h-4 w-4 inline mr-1"}),"You don't have permission to submit findings. You can view the traces but cannot contribute insights."]})]}),Mt.jsxs(gx,{className:"space-y-6",children:[Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsx(NC,{htmlFor:"question1",className:"text-sm font-medium",children:"What makes this response effective or ineffective?"}),Mt.jsx(yC,{id:"question1",placeholder:r?"Share your thoughts on what makes this response work well or poorly...":"You don't have permission to submit findings",value:o,onChange:e=>l(e.target.value),onBlur:L,className:"min-h-[100px]",disabled:!r||m})]}),Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsx(NC,{htmlFor:"question2",className:"text-sm font-medium",children:"If this response was good, what would have made it bad? If bad, what would have made it good?"}),Mt.jsx(yC,{id:"question2",placeholder:r?"Consider alternative scenarios - what changes would flip the quality of this response?":"You don't have permission to submit findings",value:c,onChange:e=>u(e.target.value),onBlur:L,className:"min-h-[100px]",disabled:!r||m})]})]})]}),Mt.jsx(hx,{children:Mt.jsx(gx,{className:"pt-6",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsx(Gv,{variant:"outline",onClick:()=>{if(!P)return void console.warn("prevTrace: No current trace");if(x)return void console.warn("prevTrace: Already navigating",{isNavigating:x});if(a<=0)return void console.log("prevTrace: Already at first trace");console.log("prevTrace: Starting optimistic navigation",{currentTraceIndex:a,prevIndex:a-1}),v(!0);const e=P.id,t=o.trim(),n=c.trim(),r=t||n,s=a-1;console.log("prevTrace: Navigating to index",s),l(""),u(""),i(s),v(!1),r?(console.log("prevTrace: Saving content in background",{traceId:e,q1:t.substring(0,50),q2:n.substring(0,50)}),O(t,n,e,!0).then(t=>{t?console.log("prevTrace: Background save successful for trace:",e):console.warn("prevTrace: Background save failed after retries for trace:",e)}).catch(e=>{console.error("prevTrace: Unexpected background save error:",e)})):console.log("prevTrace: No content to save")},disabled:0===a||x,className:"flex items-center gap-2",children:x?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-4 h-4 border-2 border-gray-400/30 border-t-gray-600 rounded-full animate-spin"}),"Navigating..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Dx,{className:"h-4 w-4"}),"Previous"]})}),Mt.jsx(Gv,{onClick:()=>{if(!P)return void console.warn("nextTrace: No current trace");if(x)return void console.warn("nextTrace: Already navigating",{isNavigating:x});if(a>=T.length-1)return void console.log("nextTrace: Already at last trace",{currentTraceIndex:a,totalTraces:T.length});console.log("nextTrace: Starting optimistic navigation",{currentTraceIndex:a,nextIndex:a+1}),v(!0);const e=P.id,t=o.trim(),n=c.trim(),r=t||n,s=a+1;console.log("nextTrace: Navigating to index",s),l(""),u(""),i(s),v(!1),r?(console.log("nextTrace: Saving content in background",{traceId:e,q1:t.substring(0,50),q2:n.substring(0,50)}),O(t,n,e,!0).then(t=>{t?console.log("nextTrace: Background save successful for trace:",e):console.warn("nextTrace: Background save failed after retries for trace:",e)}).catch(e=>{console.error("nextTrace: Unexpected background save error:",e)})):console.log("nextTrace: No content to save")},disabled:x||!r,className:"flex items-center gap-2",children:x?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Navigating..."]}):a===T.length-1?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(bv,{className:"h-4 w-4"}),"Complete"]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Mx,{className:"h-4 w-4"}),"Next"]})})]})})}),R&&Mt.jsx(hx,{className:"border-green-200 bg-green-50",children:Mt.jsx(gx,{className:"pt-6",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(zx,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),Mt.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"All Traces Reviewed!"}),Mt.jsxs("p",{className:"text-green-700 mb-4",children:["You've successfully reviewed all ",T.length," traces and submitted findings for each one."]}),Mt.jsx(Gv,{onClick:async()=>{if((null==n?void 0:n.id)&&e){f(!0);try{if(!(await fetch(`/workshops/${e}/users/${n.id}/complete-discovery`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to mark discovery complete");ZS.success("Discovery phase completed! You can now wait for the facilitator to move to the next phase.")}catch(t){ZS.error("Failed to complete discovery. Please try again.")}finally{f(!1)}}},disabled:p,className:"bg-green-600 hover:bg-green-700 text-white",children:p?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Completing Discovery..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(zx,{className:"h-4 w-4 mr-2"}),"Complete Discovery Phase"]})})]})})})]})}):Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Authentication Required"}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"You must be logged in to access discovery traces."})]})})}const _C=kt.forwardRef(({className:e,type:t,...n},r)=>Mt.jsx("input",{type:t,className:dx("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));function CC({discoveryResponses:e,scratchPad:t,setScratchPad:n}){const[r,s]=kt.useState(0),[a,i]=kt.useState(null),[o,l]=kt.useState(""),c=e[r],u=e.length,d=(h=null==c?void 0:c.trace)?{id:c.traceId,input:h.input,output:h.output,context:h.context,mlflow_trace_id:h.mlflow_trace_id||void 0}:null;var h;const p=kt.useCallback(()=>{i(null),s(e=>e>0?e-1:u-1)},[u]),f=kt.useCallback(()=>{i(null),s(e=>e<u-1?e+1:0)},[u]),m=kt.useCallback(e=>{e!==r&&(i(r),s(e))},[r]),g=kt.useCallback(()=>{null!==a&&(s(a),i(null))},[a]);kt.useEffect(()=>{const e=e=>{const t=e.target;"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||("ArrowLeft"===e.key&&(e.preventDefault(),p()),"ArrowRight"===e.key&&(e.preventDefault(),f()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[p,f]);const x=(e,s,a)=>{const i={id:Date.now().toString(),traceId:c.traceId,traceIndex:r+1,comment:e,timestamp:new Date,category:s,source:a};n([...t,i])},v=()=>{const e=new Set;return c.responses.forEach(t=>{t.question1.toLowerCase().includes("clear")&&e.add("Clarity"),t.question1.toLowerCase().includes("accurate")&&e.add("Accuracy"),t.question1.toLowerCase().includes("helpful")&&e.add("Helpfulness"),t.question1.toLowerCase().includes("example")&&e.add("Examples"),t.question1.toLowerCase().includes("technical")&&e.add("Technical Detail"),t.question1.toLowerCase().includes("safety")&&e.add("Safety")}),Array.from(e)};return c?Mt.jsxs("div",{className:"h-full max-h-[calc(100vh-12rem)] flex gap-6 w-full",children:[Mt.jsxs("div",{className:"flex-1 min-w-0 space-y-4 overflow-y-auto",children:[Mt.jsx(hx,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:Mt.jsxs(px,{className:"pb-4",children:[Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs(fx,{className:"flex items-center gap-2 text-blue-900",children:[Mt.jsx(tv,{className:"h-5 w-5 text-blue-600"}),"Focused Analysis"]}),Mt.jsxs("div",{className:"flex items-center gap-3",children:[null!==a&&Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:g,className:"flex items-center gap-2 border-blue-300 text-blue-700 hover:bg-blue-100",children:[Mt.jsx(Nx,{className:"h-4 w-4"}),"Back to Trace ",a+1]}),Mt.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-3 py-2 border border-blue-200",children:[Mt.jsx(Gv,{variant:"ghost",size:"sm",onClick:p,disabled:u<=1,className:"h-8 w-8 p-0 hover:bg-blue-100",children:Mt.jsx(Dx,{className:"h-4 w-4"})}),Mt.jsxs("div",{className:"text-sm font-semibold px-2 min-w-[6rem] text-center text-blue-900",children:[r+1," of ",u]}),Mt.jsx(Gv,{variant:"ghost",size:"sm",onClick:f,disabled:u<=1,className:"h-8 w-8 p-0 hover:bg-blue-100",children:Mt.jsx(Mx,{className:"h-4 w-4"})})]})]})]}),Mt.jsxs("div",{className:"mt-3",children:[Mt.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:Mt.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:(r+1)/u*100+"%"}})}),Mt.jsxs("div",{className:"flex justify-between text-xs text-blue-600 mt-1",children:[Mt.jsx("span",{children:"Progress"}),Mt.jsxs("span",{children:[Math.round((r+1)/u*100),"%"]})]})]})]})}),d?Mt.jsx(l_,{trace:d}):Mt.jsx(hx,{className:"shadow-sm",children:Mt.jsx(gx,{className:"pt-6",children:Mt.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:Mt.jsx("p",{className:"text-amber-800 text-sm",children:"No trace data available for this discovery response."})})})}),v().length>0&&Mt.jsx(hx,{className:"shadow-sm",children:Mt.jsx(gx,{className:"pt-6",children:Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx(sv,{className:"h-4 w-4 text-amber-500 mt-0.5"}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx("span",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Common Themes:"}),Mt.jsx("div",{className:"flex flex-wrap gap-1",children:v().map(e=>Mt.jsx(Lv,{variant:"outline",className:"text-xs bg-amber-50 border-amber-200 text-amber-800",children:e},e))})]})]})})}),Mt.jsxs(hx,{className:"shadow-sm",children:[Mt.jsx(px,{className:"bg-gray-50 border-b",children:Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(cv,{className:"h-5 w-5 text-gray-600"}),Mt.jsx("h3",{className:"font-semibold text-gray-900",children:"Discovery Responses"})]})}),Mt.jsxs(gx,{children:[Mt.jsxs("div",{className:"space-y-6",children:[Mt.jsxs("div",{children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Mt.jsx("div",{className:"w-2 h-6 bg-blue-500 rounded-full"}),Mt.jsx("h4",{className:"font-semibold text-gray-900",children:"Response Effectiveness Analysis"}),Mt.jsxs(Lv,{variant:"secondary",className:"text-xs",children:[c.responses.length," responses"]})]}),Mt.jsx("div",{className:"space-y-3",children:c.responses.map((e,t)=>Mt.jsx(hx,{className:"p-4 hover:shadow-md transition-all hover:border-blue-300 bg-gradient-to-r from-white to-blue-50/30",children:Mt.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Mt.jsxs("div",{className:"flex-1",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-xs font-medium text-blue-700",children:e.participant.split("_")[1]||t+1}),Mt.jsx("span",{className:"text-xs text-gray-500",children:e.participant})]}),Mt.jsx("p",{className:"text-sm text-gray-800 leading-relaxed whitespace-pre-wrap",children:e.question1})]}),Mt.jsx(Gv,{variant:"ghost",size:"sm",onClick:()=>x(e.question1,"effectiveness",e.participant),className:"text-blue-600 hover:text-blue-800 hover:bg-blue-100",children:Mt.jsx(pv,{className:"h-4 w-4"})})]})},t))})]}),c.responses.some(e=>e.question2)&&Mt.jsxs("div",{children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Mt.jsx("div",{className:"w-2 h-6 bg-green-500 rounded-full"}),Mt.jsx("h4",{className:"font-semibold text-gray-900",children:"Good/Bad Scenario Analysis"}),Mt.jsxs(Lv,{variant:"secondary",className:"text-xs",children:[c.responses.filter(e=>e.question2).length," responses"]})]}),Mt.jsx("div",{className:"space-y-3",children:c.responses.filter(e=>e.question2).map((e,t)=>Mt.jsx(hx,{className:"p-4 hover:shadow-md transition-all hover:border-green-300 bg-gradient-to-r from-white to-green-50/30",children:Mt.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Mt.jsxs("div",{className:"flex-1",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center text-xs font-medium text-green-700",children:e.participant.split("_")[1]||t+1}),Mt.jsx("span",{className:"text-xs text-gray-500",children:e.participant})]}),Mt.jsx("p",{className:"text-sm text-gray-800 leading-relaxed whitespace-pre-wrap",children:e.question2})]}),Mt.jsx(Gv,{variant:"ghost",size:"sm",onClick:()=>x(e.question2,"scenario",e.participant),className:"text-green-600 hover:text-green-800 hover:bg-green-100",children:Mt.jsx(pv,{className:"h-4 w-4"})})]})},t))})]})]}),Mt.jsx("div",{className:"mt-6 pt-4 border-t bg-gray-50 -mx-6 px-6 py-3",children:Mt.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[Mt.jsx("div",{className:"flex items-center gap-2",children:Mt.jsx("span",{className:"font-medium",children:"Keyboard shortcuts:"})}),Mt.jsxs("div",{className:"flex items-center gap-1",children:[Mt.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded text-xs",children:""}),Mt.jsx("span",{children:"Previous"})]}),Mt.jsxs("div",{className:"flex items-center gap-1",children:[Mt.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded text-xs",children:""}),Mt.jsx("span",{children:"Next"})]})]})})]})]})]}),Mt.jsx("div",{className:"w-80 lg:w-96 flex-shrink-0 bg-gradient-to-b from-gray-50 to-gray-100 rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:Mt.jsxs("div",{className:"h-full flex flex-col",children:[Mt.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[Mt.jsx(dv,{className:"h-5 w-5 text-gray-600"}),"Scratch Pad",t.length>0&&Mt.jsx(Lv,{variant:"secondary",children:t.length})]}),t.length>0&&Mt.jsx(Gv,{onClick:()=>{const e=t.map(e=>`[Trace ${e.traceIndex}] ${e.category?`(${e.category})`:""}\n${e.comment}\n---`).join("\n\n"),n=new Blob([e],{type:"text/plain"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`rubric-insights-${(new Date).toISOString().split("T")[0]}.txt`,s.click(),URL.revokeObjectURL(r)},variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-800",children:Mt.jsx(Qx,{className:"h-4 w-4"})})]})}),Mt.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:Mt.jsxs("div",{className:"space-y-4",children:[Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(yC,{placeholder:"Add a custom note...",value:o,onChange:e=>l(e.target.value),className:"min-h-[80px] bg-white"}),Mt.jsx(Gv,{onClick:()=>{if(o.trim()){const e={id:Date.now().toString(),traceId:c.traceId,traceIndex:r+1,comment:o,timestamp:new Date};n([...t,e]),l("")}},disabled:!o.trim(),size:"sm",className:"w-full",children:"Add Note"})]}),Mt.jsx("div",{className:"space-y-3",children:0===t.length?Mt.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Mt.jsx(dv,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),Mt.jsx("p",{className:"text-sm",children:"No insights pinned yet."}),Mt.jsx("p",{className:"text-xs mt-1",children:"Click the pin icon on any comment to save it here."})]}):t.map(e=>Mt.jsx(hx,{className:"p-3 "+(e.traceIndex===r+1?"border-blue-300 bg-blue-50/50":"bg-white"),children:Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx("p",{className:"text-sm text-gray-700",children:e.comment}),Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsxs("button",{onClick:()=>m(e.traceIndex-1),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",children:["From Trace ",e.traceIndex,Mt.jsx(kx,{className:"h-3 w-3"})]}),e.category&&Mt.jsx(Lv,{variant:"outline",className:"text-xs",children:e.category})]}),Mt.jsx(Gv,{variant:"ghost",size:"sm",onClick:()=>{return r=e.id,void n(t.filter(e=>e.id!==r));var r},className:"text-red-600 hover:text-red-800 h-6 w-6 p-0",children:Mt.jsx(Cv,{className:"h-3 w-3"})})]})]})},e.id))})]})})]})})]}):Mt.jsx("div",{children:"No discovery responses available."})}_C.displayName="Input";const EC="|||QUESTION_SEPARATOR|||",TC="|||JUDGE_TYPE|||",PC=e=>{if(!e)return[];return e.split(EC).map((e,t)=>{const n=e.trim();if(!n)return null;let r=n,s="likert";if(n.includes(TC)){const[e,t]=n.split(TC);r=e.trim();const a=null==t?void 0:t.trim();"likert"!==a&&"binary"!==a&&"freeform"!==a||(s=a)}const a=r.indexOf(":");if(-1===a)return null;return{id:`q_${t+1}`,title:r.substring(0,a).trim(),description:r.substring(a+1).trim(),judgeType:s}}).filter(e=>null!==e)},RC={likert:"You are an expert evaluator assessing the quality of an AI assistant's response.\n\n## Evaluation Criteria\n{rubric}\n\n## Task\nRate the response on a scale of 1-5 where:\n- 1 = Poor: Does not meet the criteria\n- 2 = Below Average: Partially meets criteria with significant issues\n- 3 = Average: Meets basic criteria but has room for improvement\n- 4 = Good: Meets criteria well with minor issues\n- 5 = Excellent: Fully meets or exceeds all criteria\n\n## Input\n{input}\n\n## Output to Evaluate\n{output}\n\nProvide your rating as a single number (1-5) followed by a brief explanation.",binary:"You are an expert evaluator performing a quality check on an AI assistant's response.\n\n## Evaluation Criteria\n{criteria}\n\n## Task\nDetermine if the response meets the evaluation criteria.\n\n- 1: The response meets the required criteria (PASS)\n- 0: The response does not meet the required criteria (FAIL)\n\n## Input\n{input}\n\n## Output to Evaluate\n{output}\n\nThink step by step about whether the output meets the criteria, then provide your rating.\n\nYour response MUST start with a single integer rating (0 or 1) on its own line, followed by your reasoning.\n\nExample format:\n1\nThe response meets the criteria because...",freeform:"You are an expert evaluator providing detailed feedback on an AI assistant's response.\n\n## Evaluation Focus\n{focus}\n\n## Task\nProvide constructive feedback on the response, including:\n1. Strengths of the response\n2. Areas for improvement\n3. Specific suggestions for enhancement\n\n## Input\n{input}\n\n## Output to Evaluate\n{output}\n\nProvide your detailed feedback below."},IC={pass_fail:{pass:"Pass",fail:"Fail"},yes_no:{pass:"Yes",fail:"No"},accept_reject:{pass:"Accept",fail:"Reject"},safe_unsafe:{pass:"Safe",fail:"Unsafe"},compliant_violation:{pass:"Compliant",fail:"Violation"}};function DC(){const{workshopId:e}=Ym(),{setCurrentPhase:t}=gg(),{user:n}=Bm(),{isFacilitator:r}=Hm(),s=$p(),[a,i]=kt.useState([]),[o,l]=kt.useState(!1),[c,u]=kt.useState({title:"",description:"",judgeType:"likert"}),[d,h]=kt.useState(!1),[p,f]=kt.useState("focused"),[m,g]=kt.useState([]),[x,v]=kt.useState(null),[y,b]=kt.useState(null),[w,j]=kt.useState("likert"),[N,k]=kt.useState({pass:"Pass",fail:"Fail"}),{data:S,isLoading:_,error:C}=cg(e),{data:E}=ig(e),{data:T}=r?lg(e):og(e,n),P=function(e){const t=$p();return Gp({mutationFn:t=>$m.createRubricWorkshopsWorkshopIdRubricPost(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:Zm(e)})}})}(e),R=function(e){const t=$p();return Gp({mutationFn:t=>$m.updateRubricWorkshopsWorkshopIdRubricPut(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:Zm(e)})}})}(e);if(!n||!n.id)return Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Authentication Required"}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"You must be logged in to access rubric creation."})]})});const I=((e,t)=>{if(!e||0===e.length||!t||0===t.length)return[];const n=t.reduce((e,t)=>(e[t.id]=t,e),{}),r=e.reduce((e,t)=>(e[t.trace_id]||(e[t.trace_id]=[]),e[t.trace_id].push(t),e),{});return Object.entries(r).map(([e,t])=>{const r=n[e];return{traceId:e,trace:r?{input:r.input,output:r.output,context:r.context,mlflow_trace_id:r.mlflow_trace_id}:null,responses:t.map((e,t)=>{const n=e.insight||"",r=n.split("\n\nImprovement Analysis: ");let s=n,a=null;return 2===r.length&&(s=r[0].replace("Quality Assessment: ",""),a=r[1]),{participant:e.user_name||e.user_id,question1:s,question2:a}})}}).filter(e=>null!==e.trace)})(T,E),D=kt.useCallback(t=>{if(!e)return;const n=`scratch-pad-${e}`;if(t.length>0){const e={timestamp:Date.now(),scratchPad:t};localStorage.setItem(n,JSON.stringify(e))}else localStorage.removeItem(n)},[e]),M=kt.useCallback(e=>{g(t=>{const n="function"==typeof e?e(t):e;return D(n),n})},[D]);kt.useEffect(()=>{if(e){const n=`scratch-pad-${e}`,r=localStorage.getItem(n);if(r)try{const e=JSON.parse(r);Date.now()-e.timestamp<6048e5?g(e.scratchPad):localStorage.removeItem(n)}catch(t){localStorage.removeItem(n)}}},[e]),kt.useEffect(()=>{S&&!d&&(i((e=>PC(e.question))(S)),S.judge_type&&j(S.judge_type),S.binary_labels&&k(S.binary_labels))},[S,d]);const A=(e,t)=>{i(a.map(n=>n.id===e?{...n,...t}:n)),h(!0)};return _?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("div",{className:"text-lg font-medium text-gray-600 mb-2",children:"Loading rubric..."}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"Fetching workshop data from API"})]})}):Mt.jsx("div",{className:"h-full",children:Mt.jsxs("div",{className:`h-full ${"grid"===p?"max-w-6xl mx-auto p-6":"px-6 py-4"} space-y-6`,children:[Mt.jsxs("div",{className:"flex justify-center gap-2",children:[Mt.jsx(Lv,{variant:"outline",children:"Facilitator View"}),S&&Mt.jsxs(Lv,{className:"bg-green-500",children:[Mt.jsx(zx,{className:"h-3 w-3 mr-1"}),"Rubric Exists"]}),C&&Mt.jsxs(Lv,{variant:"destructive",children:[Mt.jsx(Fx,{className:"h-3 w-3 mr-1"}),"API Error"]})]}),Mt.jsxs(lC,{defaultValue:"discovery",className:"w-full",children:[Mt.jsxs(cC,{className:"grid w-full grid-cols-2",children:[Mt.jsxs(uC,{value:"discovery",className:"flex items-center gap-2",children:[Mt.jsx(Rv,{className:"h-4 w-4"}),"Discovery Responses"]}),Mt.jsxs(uC,{value:"rubric",className:"flex items-center gap-2",children:[Mt.jsx($x,{className:"h-4 w-4"}),"Rubric Questions",a.length>0&&Mt.jsx(Lv,{variant:"secondary",className:"ml-2",children:a.length})]})]}),Mt.jsx(dC,{value:"discovery",children:Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center justify-between",children:[Mt.jsx("span",{children:"Discovery Responses"}),Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsxs(Gv,{variant:"grid"===p?"default":"outline",size:"sm",onClick:()=>f("grid"),className:"flex items-center gap-2",children:[Mt.jsx(Zx,{className:"h-4 w-4"}),"Grid View"]}),Mt.jsxs(Gv,{variant:"focused"===p?"default":"outline",size:"sm",onClick:()=>f("focused"),className:"flex items-center gap-2",children:[Mt.jsx(Jx,{className:"h-4 w-4"}),"Focused View"]})]})]})}),Mt.jsxs(gx,{children:[Mt.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx(sv,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),Mt.jsxs("div",{children:[Mt.jsx("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"Facilitator Instructions"}),Mt.jsx("p",{className:"text-sm text-blue-700",children:"Review participant responses to identify patterns and create rubric questions. Use these responses to facilitate group discussion and build consensus on evaluation criteria."})]})]})}),"grid"===p?Mt.jsx("div",{className:"space-y-8",children:I.length>0?I.map((e,t)=>Mt.jsxs("div",{className:"border rounded-xl p-6 bg-gradient-to-br from-white to-gray-50",children:[Mt.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[Mt.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:Mt.jsx("span",{className:"text-blue-600 font-medium text-sm",children:t+1})}),Mt.jsxs("div",{children:[Mt.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Trace Analysis"}),e.trace?Mt.jsxs("p",{className:"text-gray-600 text-sm italic",children:['"',e.trace.input.substring(0,100),'..."']}):Mt.jsx("p",{className:"text-gray-500 text-sm italic",children:"No trace data available"})]})]}),Mt.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Mt.jsxs("div",{children:[Mt.jsxs("h4",{className:"font-medium text-gray-800 mb-3 flex items-center gap-2",children:[Mt.jsx(Nv,{className:"h-4 w-4 text-yellow-500"}),"Response Effectiveness"]}),Mt.jsx("div",{className:"space-y-3",children:e.responses.map((e,t)=>Mt.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:Mt.jsx("span",{className:"text-white font-medium text-xs",children:e.participant.includes("SME")?"E":"P"})}),Mt.jsx("span",{className:"font-medium text-sm text-gray-700",children:e.participant})]}),Mt.jsx("p",{className:"text-sm text-gray-600 leading-relaxed whitespace-pre-wrap",children:e.question1})]},t))})]}),Mt.jsxs("div",{children:[Mt.jsxs("h4",{className:"font-medium text-gray-800 mb-3 flex items-center gap-2",children:[Mt.jsx($x,{className:"h-4 w-4 text-green-500"}),"Good/Bad Scenarios"]}),Mt.jsx("div",{className:"space-y-3",children:e.responses.map((e,t)=>Mt.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:Mt.jsx("span",{className:"text-white font-medium text-xs",children:e.participant.includes("SME")?"E":"P"})}),Mt.jsx("span",{className:"font-medium text-sm text-gray-700",children:e.participant})]}),Mt.jsx("p",{className:"text-sm text-gray-600 leading-relaxed whitespace-pre-wrap",children:e.question2})]},t))})]})]}),Mt.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsx(sv,{className:"h-4 w-4 text-amber-500"}),Mt.jsx("span",{className:"font-medium text-sm text-gray-700",children:"Potential Rubric Themes"})]}),Mt.jsx("div",{className:"flex flex-wrap gap-2",children:e.responses.length>0&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Lv,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:"Empathy & Understanding"}),Mt.jsx(Lv,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Professional Tone"}),Mt.jsx(Lv,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Solution Orientation"}),Mt.jsx(Lv,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:"Personalization"})]})})]})]},t)):Mt.jsxs("div",{className:"text-center py-12",children:[Mt.jsx(sv,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Mt.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Discovery Data Available"}),Mt.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Complete the discovery phase first to see participant insights here."}),Mt.jsx("p",{className:"text-xs text-gray-400",children:"Discovery responses will appear once participants have explored traces and provided feedback."})]})}):I.length>0?Mt.jsx(CC,{discoveryResponses:I,scratchPad:m,setScratchPad:M}):Mt.jsxs("div",{className:"text-center py-12",children:[Mt.jsx(Jx,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Mt.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Discovery Data for Analysis"}),Mt.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Complete the discovery phase first to use focused analysis mode."}),Mt.jsx("p",{className:"text-xs text-gray-400",children:"Switch to grid view to create rubric questions manually, or wait for discovery data."})]})]})]})}),Mt.jsxs(dC,{value:"rubric",children:[Mt.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx(sv,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),Mt.jsxs("div",{children:[Mt.jsx("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"Per-Question Evaluation Types"}),Mt.jsxs("p",{className:"text-sm text-blue-700",children:["Each criterion can have its own evaluation type: ",Mt.jsx("strong",{children:"Likert Scale"})," (1-5 ratings),",Mt.jsx("strong",{children:" Binary"})," (Pass/Fail), or ",Mt.jsx("strong",{children:"Free-form"})," (open text feedback). Select the type for each criterion individually."]})]})]})}),a.some(e=>"binary"===e.judgeType)&&Mt.jsxs(hx,{className:"mb-6",children:[Mt.jsxs(px,{className:"pb-3",children:[Mt.jsx(fx,{className:"text-base",children:"Binary Label Settings"}),Mt.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize the labels for all binary evaluation criteria"})]}),Mt.jsx(gx,{children:Mt.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(IC).map(([e,t])=>Mt.jsxs(Lv,{variant:N.pass===t.pass?"default":"outline",className:"cursor-pointer",onClick:()=>k(t),children:[t.pass," / ",t.fail]},e))})})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center justify-between",children:[Mt.jsx("span",{children:"Evaluation Criteria"}),Mt.jsxs(Gv,{onClick:()=>l(!0),className:"flex items-center gap-2",disabled:o,children:[Mt.jsx(mv,{className:"h-4 w-4"}),"Add Criterion"]})]})}),Mt.jsxs(gx,{className:"space-y-6",children:[0===a.length&&!o&&Mt.jsxs("div",{className:"text-center py-8",children:[Mt.jsx($x,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),Mt.jsx("p",{className:"text-gray-600 mb-4",children:"No rubric questions yet"}),Mt.jsxs(Gv,{onClick:()=>l(!0),className:"flex items-center gap-2",children:[Mt.jsx(mv,{className:"h-4 w-4"}),"Create First Question"]})]}),a.map((t,n)=>Mt.jsx("div",{className:"border rounded-xl p-6 bg-gradient-to-br from-white to-green-50 border-green-200",children:Mt.jsxs("div",{className:"flex items-start gap-4",children:[Mt.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:Mt.jsx("span",{className:"text-green-600 font-medium",children:n+1})}),Mt.jsxs("div",{className:"flex-1 space-y-4",children:[Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:`title-${t.id}`,className:"text-sm font-medium text-gray-700 mb-1 block",children:"Question Title"}),Mt.jsx(_C,{id:`title-${t.id}`,value:t.title,onChange:e=>A(t.id,{title:e.target.value}),placeholder:"e.g., Response Accuracy",className:"font-medium"})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:`desc-${t.id}`,className:"text-sm font-medium text-gray-700 mb-1 block",children:"Question Description"}),Mt.jsx(yC,{id:`desc-${t.id}`,value:t.description,onChange:e=>A(t.id,{description:e.target.value}),placeholder:"e.g., This response is factually accurate and well-supported.",className:"min-h-[80px]"})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Evaluation Type"}),Mt.jsxs("div",{className:"flex flex-col gap-1",children:[Mt.jsx(Lv,{variant:"likert"===t.judgeType?"default":"outline",className:"cursor-pointer justify-center py-1.5",onClick:()=>A(t.id,{judgeType:"likert"}),children:"Likert Scale"}),Mt.jsx(Lv,{variant:"binary"===t.judgeType?"default":"outline",className:"cursor-pointer justify-center py-1.5",onClick:()=>A(t.id,{judgeType:"binary"}),children:"Binary"}),Mt.jsx(Lv,{variant:"freeform"===t.judgeType?"default":"outline",className:"cursor-pointer justify-center py-1.5",onClick:()=>A(t.id,{judgeType:"freeform"}),children:"Free-form"})]})]})]}),Mt.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-4",children:["likert"===t.judgeType&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Mt.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Likert Scale Preview"}),Mt.jsx(Lv,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"1-5 Scale"})]}),Mt.jsx("div",{className:"grid grid-cols-5 gap-4",children:[1,2,3,4,5].map(e=>Mt.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Mt.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-green-300 bg-white"}),Mt.jsx("label",{className:"text-xs text-center text-gray-600 leading-tight",children:["","Strongly Disagree","Disagree","Neutral","Agree","Strongly Agree"][e]})]},e))})]}),"binary"===t.judgeType&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Mt.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Binary Choice Preview"}),Mt.jsxs(Lv,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[N.pass,"/",N.fail]})]}),Mt.jsxs("div",{className:"flex justify-center gap-8",children:[Mt.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Mt.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-green-400 bg-green-50 flex items-center justify-center",children:Mt.jsx(zx,{className:"w-6 h-6 text-green-600"})}),Mt.jsx("label",{className:"text-sm font-medium text-green-700",children:N.pass})]}),Mt.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Mt.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-red-400 bg-red-50 flex items-center justify-center",children:Mt.jsx(Fx,{className:"w-6 h-6 text-red-600"})}),Mt.jsx("label",{className:"text-sm font-medium text-red-700",children:N.fail})]})]})]}),"freeform"===t.judgeType&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Mt.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Free-form Feedback Preview"}),Mt.jsx(Lv,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:"Open Text"})]}),Mt.jsx("div",{className:"border-2 border-dashed border-purple-200 rounded-lg p-4 bg-purple-50/30",children:Mt.jsx("p",{className:"text-sm text-gray-500 italic",children:"Annotators will provide detailed written feedback based on this focus area..."})})]})]})]}),Mt.jsxs("div",{className:"flex gap-2",children:[Mt.jsxs(Gv,{variant:"ghost",size:"sm",onClick:()=>(async t=>{const n=a.find(e=>e.id===t);if(n){v(t);try{const r=await fetch(`/workshops/${e}/rubric/questions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n.title,description:n.description,judge_type:n.judgeType})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);s.invalidateQueries({queryKey:["rubric",e]}),ZS.success("Question updated successfully"),b(t),setTimeout(()=>{b(null)},3e3)}catch(r){ZS.error("Failed to update question. Please try again.")}finally{v(null)}}})(t.id),className:y===t.id?"text-green-600 hover:text-green-800 hover:bg-green-50":"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:x===t.id||R.isPending,title:"Save changes to this question to the database",children:[x===t.id?Mt.jsx(av,{className:"h-4 w-4 animate-spin"}):y===t.id?Mt.jsx(zx,{className:"h-4 w-4"}):Mt.jsx(gv,{className:"h-4 w-4"}),x===t.id?"Updating...":y===t.id?"Updated!":"Update"]}),Mt.jsxs(Gv,{variant:"ghost",size:"sm",onClick:()=>(async t=>{try{await fetch(`/workshops/${e}/rubric/questions/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),s.invalidateQueries({queryKey:["rubric",e]})}catch(n){ZS.error("Failed to delete question. Please try again.")}})(t.id),className:"text-red-600 hover:text-red-800 hover:bg-red-50",title:"Remove this question from the rubric",children:[Mt.jsx(Cv,{className:"h-4 w-4"}),"Delete"]})]})]})},t.id)),o&&Mt.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-xl p-6 bg-blue-50",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Mt.jsx(mv,{className:"h-5 w-5 text-blue-600"}),Mt.jsx("h3",{className:"font-medium text-blue-900",children:"Add New Evaluation Criterion"})]}),Mt.jsxs("div",{className:"space-y-4",children:[Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"new-title",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Title"}),Mt.jsx(_C,{id:"new-title",value:c.title,onChange:e=>u({...c,title:e.target.value}),placeholder:"e.g., Response Helpfulness",className:"bg-white"})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"new-description",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Description"}),Mt.jsx(yC,{id:"new-description",value:c.description,onChange:e=>u({...c,description:e.target.value}),placeholder:"e.g., This response is helpful in addressing the user's needs.",className:"min-h-[80px] bg-white"})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Evaluation Type"}),Mt.jsxs("div",{className:"flex flex-col gap-1",children:[Mt.jsx(Lv,{variant:"likert"===c.judgeType?"default":"outline",className:"cursor-pointer justify-center py-1.5 "+("likert"!==c.judgeType?"bg-white":""),onClick:()=>u({...c,judgeType:"likert"}),children:"Likert Scale"}),Mt.jsx(Lv,{variant:"binary"===c.judgeType?"default":"outline",className:"cursor-pointer justify-center py-1.5 "+("binary"!==c.judgeType?"bg-white":""),onClick:()=>u({...c,judgeType:"binary"}),children:"Binary"}),Mt.jsx(Lv,{variant:"freeform"===c.judgeType?"default":"outline",className:"cursor-pointer justify-center py-1.5 "+("freeform"!==c.judgeType?"bg-white":""),onClick:()=>u({...c,judgeType:"freeform"}),children:"Free-form"})]})]})]}),Mt.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-4",children:["likert"===c.judgeType&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Likert Scale Preview:"}),Mt.jsx("div",{className:"grid grid-cols-5 gap-4",children:[1,2,3,4,5].map(e=>Mt.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Mt.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-blue-300 bg-white"}),Mt.jsx("label",{className:"text-xs text-center text-gray-600 leading-tight",children:["","Strongly Disagree","Disagree","Neutral","Agree","Strongly Agree"][e]})]},e))})]}),"binary"===c.judgeType&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Binary Choice Preview:"}),Mt.jsxs("div",{className:"flex justify-center gap-8",children:[Mt.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Mt.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-green-400 bg-green-50 flex items-center justify-center",children:Mt.jsx(zx,{className:"w-6 h-6 text-green-600"})}),Mt.jsx("label",{className:"text-sm font-medium text-green-700",children:N.pass})]}),Mt.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Mt.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-red-400 bg-red-50 flex items-center justify-center",children:Mt.jsx(Fx,{className:"w-6 h-6 text-red-600"})}),Mt.jsx("label",{className:"text-sm font-medium text-red-700",children:N.fail})]})]})]}),"freeform"===c.judgeType&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Free-form Response Preview:"}),Mt.jsx("div",{className:"border-2 border-dashed border-purple-200 rounded-lg p-4 bg-purple-50/30",children:Mt.jsx("p",{className:"text-sm text-gray-500 italic",children:"Annotators will provide detailed written feedback for this focus area..."})})]})]}),Mt.jsxs("div",{className:"flex gap-3 pt-2",children:[Mt.jsxs(Gv,{onClick:async()=>{if(c.title.trim()&&c.description.trim())try{const t={...c,id:Date.now().toString()},n=[...a,t];i(n);const r=(e=>e&&0!==e.length?e.map(e=>`${e.title}: ${e.description}${TC}${e.judgeType}`).join(EC):"")(n),o={question:r,created_by:"facilitator",judge_type:w,binary_labels:"binary"===w?N:void 0,rating_scale:5};S?await R.mutateAsync(o):await P.mutateAsync(o),u({title:"",description:"",judgeType:"likert"}),l(!1),h(!1),s.invalidateQueries({queryKey:["rubric",e]})}catch(t){}},className:"flex items-center gap-2",disabled:!c.title.trim()||!c.description.trim()||P.isPending||R.isPending,children:[Mt.jsx(mv,{className:"h-4 w-4"}),P.isPending||R.isPending?"Saving...":"Save"]}),Mt.jsx(Gv,{variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]})]}),a.length>0&&Mt.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsx($x,{className:"h-4 w-4 text-green-600"}),Mt.jsx("span",{className:"font-medium text-green-800",children:"Evaluation Summary"})]}),Mt.jsxs("p",{className:"text-sm text-green-700",children:[a.length," criterion",1!==a.length?"s":""," created:"," ",a.filter(e=>"likert"===e.judgeType).length>0&&Mt.jsxs(Lv,{variant:"outline",className:"mr-1 bg-green-100",children:[a.filter(e=>"likert"===e.judgeType).length," Likert"]}),a.filter(e=>"binary"===e.judgeType).length>0&&Mt.jsxs(Lv,{variant:"outline",className:"mr-1 bg-blue-100",children:[a.filter(e=>"binary"===e.judgeType).length," Binary"]}),a.filter(e=>"freeform"===e.judgeType).length>0&&Mt.jsxs(Lv,{variant:"outline",className:"mr-1 bg-purple-100",children:[a.filter(e=>"freeform"===e.judgeType).length," Free-form"]})]})]})]})]})]})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Rv,{className:"h-5 w-5 text-blue-600"}),"Next Steps"]})}),Mt.jsx(gx,{children:S&&a.length>0?Mt.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:Mt.jsx(zx,{className:"w-5 h-5 text-green-600"})}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx("p",{className:"text-sm text-green-800 font-medium mb-1",children:"Ready for Annotation Phase"}),Mt.jsxs("p",{className:"text-sm text-green-700",children:["Rubric is complete with ",a.length," question",1!==a.length?"s":"",". Use the sidebar workflow to start the annotation phase."]})]})]})}):Mt.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:Mt.jsx(Fx,{className:"w-5 h-5 text-amber-600"})}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx("p",{className:"text-sm text-amber-800 font-medium mb-1",children:"Rubric Required"}),Mt.jsx("p",{className:"text-sm text-amber-700",children:"Create at least one rubric question before proceeding to the annotation phase."})]})]})})})]})]})})}const MC=e=>({id:e.id,input:e.input,output:e.output,context:e.context||void 0,mlflow_trace_id:e.mlflow_trace_id||void 0,mlflow_url:e.mlflow_url||void 0,mlflow_host:e.mlflow_host||void 0,mlflow_experiment_id:e.mlflow_experiment_id||void 0});function AC(){const{workshopId:e}=Ym(),[t,n]=kt.useState(0),[r,s]=kt.useState({}),[a,i]=kt.useState({}),[o,l]=kt.useState(""),[c,u]=kt.useState(new Set),[d,h]=kt.useState(!1),[p,f]=kt.useState(!1),[m,g]=kt.useState(!1),[x,v]=kt.useState(!1),y=kt.useRef(null),b=kt.useRef(new Map),w=kt.useRef(new Set),j=kt.useRef(!1),N=kt.useCallback(async(e,t=3,n=1e3)=>{let r;for(let a=0;a<=t;a++)try{return await e()}catch(s){if(r=s,a<t){const e=n*Math.pow(2,a);console.log(`Save attempt ${a+1} failed, retrying in ${e}ms...`),await new Promise(t=>setTimeout(t,e))}}throw r},[]),{user:k}=Bm(),{canAnnotate:S}=Hm(),_=(null==k?void 0:k.id)||"demo_user";if(!k||!k.id)return Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center max-w-md",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Please Log In"}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"You must be logged in to annotate traces."})]})});const{data:C,isLoading:E,error:T}=ag(e,k.id),{data:P,isLoading:R}=cg(e),{data:I}=function(e,t){return Kp({queryKey:eg(e,null==t?void 0:t.id),queryFn:()=>$m.getAnnotationsWorkshopsWorkshopIdAnnotationsGet(e,null==t?void 0:t.id),enabled:!!e&&!!(null==t?void 0:t.id),staleTime:3e4,refetchInterval:!1,retry:3})}(e,k),{data:D}=pg(e),M=function(e){const t=$p();return Gp({mutationFn:t=>$m.submitAnnotationWorkshopsWorkshopIdAnnotationsPost(e,t),onMutate:async n=>{await t.cancelQueries({queryKey:["annotations",e,n.user_id]});const r=t.getQueryData(["annotations",e,n.user_id]);return t.setQueryData(["annotations",e,n.user_id],t=>{const r={id:`temp-${Date.now()}`,workshop_id:e,trace_id:n.trace_id,user_id:n.user_id,rating:n.rating,comment:n.comment,created_at:(new Date).toISOString()};return t?[...t,r]:[r]}),{previousAnnotations:r}},onError:(n,r,s)=>{(null==s?void 0:s.previousAnnotations)&&t.setQueryData(["annotations",e,r.user_id],s.previousAnnotations)},onSuccess:(n,r)=>{t.invalidateQueries({queryKey:["annotations",e,r.user_id]}),t.invalidateQueries({queryKey:["workshop",e]}),t.invalidateQueries({queryKey:["irr",e]}),t.invalidateQueries({queryKey:["findings",e]}),t.refetchQueries({queryKey:["annotations",e,r.user_id]})}})}(e);$p();const A=(null==C?void 0:C.map(MC))||[],O=A[t],L=P?(e=>e&&e.question?PC(e.question).map((t,n)=>({id:`${e.id}_${n}`,title:t.title,description:t.description,judgeType:t.judgeType||"likert"})):[])(P):[],F=e=>{const t=e||r;for(const n of L)if("likert"===n.judgeType){const e=t[n.id];if("number"==typeof e&&e>=1&&e<=5)return e}return 3},z=(e,t)=>{const n=t||a;let r=(void 0!==e?e:o).trim();const s=Object.entries(n).filter(([e,t])=>t.trim());if(s.length>0){const e={};for(const[n,r]of s){const t=L.find(e=>e.id===n);e[(null==t?void 0:t.title)||n]=r.trim()}const t=JSON.stringify(e);r=r?`${r}\n\n|||FREEFORM_JSON|||${t}|||END_FREEFORM|||`:`|||FREEFORM_JSON|||${t}|||END_FREEFORM|||`}return r||null},W=e=>{const t={};let n=e;const r="|||FREEFORM_JSON|||",s=e.indexOf(r),a=e.indexOf("|||END_FREEFORM|||");if(-1!==s&&-1!==a){n=e.substring(0,s).trim();const r=e.substring(s+19,a);try{const e=JSON.parse(r);for(const[n,r]of Object.entries(e)){const e=L.find(e=>e.title===n);e&&(t[e.id]=r)}}catch(vW){}}else{const r="--- Free-form Responses ---",s=e.indexOf(r);if(-1!==s){n=e.substring(0,s).trim();const a=e.substring(s+r.length).trim().split("\n");for(const e of a){const n=e.match(/^\[([^\]]+)\]:\s*(.*)$/);if(n){const e=n[1],r=n[2],s=L.find(t=>t.title===e);s&&(t[s.id]=r)}}}}return{userComment:n,freeformData:t}};kt.useEffect(()=>{u(new Set),s({}),i({}),l(""),n(0),h(!1),y.current=null,U.current=!1},[_]),kt.useEffect(()=>{if((null==O?void 0:O.id)&&O.id!==y.current){s({}),i({}),l(""),y.current=O.id;const e=null==I?void 0:I.find(e=>e.trace_id===O.id&&e.user_id===_);if(e){let t={};if(e.ratings&&"object"==typeof e.ratings){const n=Object.keys(e.ratings);if(n.length>0){t={...e.ratings};for(const r of n){const n=e.ratings[r];"number"==typeof n&&(t[r]=n)}}else if(void 0!==e.rating&&null!==e.rating){const n=L.length>0?L[0].id:"accuracy";t={[n]:e.rating}}}else if(void 0!==e.rating&&null!==e.rating){const n=L.length>0?L[0].id:"accuracy";t={[n]:e.rating}}console.debug("Loading annotation:",{traceId:O.id,loadedRatings:t,existingAnnotationRatings:e.ratings,existingAnnotationRating:e.rating});const n=e.comment||"",{userComment:r,freeformData:a}=W(n);s(t),l(r),i(a),u(e=>e.has(O.id)?e:new Set([...e,O.id]))}}},[null==O?void 0:O.id,I,_]),kt.useEffect(()=>{I&&I.length>0&&L.length>0&&I.forEach(e=>{let t={};if(e.ratings&&Object.keys(e.ratings).length>0)t=e.ratings;else{const n=L.length>0?L[0].id:"accuracy";t={[n]:e.rating}}const n=e.comment||"",{userComment:r,freeformData:s}=W(n);b.current.set(e.trace_id,{ratings:t,freeformResponses:s,comment:r})})},[null==I?void 0:I.length,L.length]);const U=kt.useRef(!1);kt.useEffect(()=>{if(I&&A.length>0&&!d&&!U.current){const e=new Set(A.map(e=>e.id)),t=new Set(I.filter(t=>e.has(t.trace_id)).map(e=>e.trace_id));u(t);const r=I.find(e=>e.trace_id===(null==O?void 0:O.id)&&e.user_id===_);if(r){let e={};if(r.ratings&&Object.keys(r.ratings).length>0)e=r.ratings;else{const t=L.length>0?L[0].id:"accuracy";e={[t]:r.rating}}const t=r.comment||"",{userComment:n,freeformData:a}=W(t);i(a),s(e),l(n)}const a=A.findIndex(e=>!t.has(e.id));-1!==a?n(a):t.size===A.length?n(A.length-1):n(0),U.current=!0}},[I,A,d]);const $=async(e,t=!1,n,s,i)=>{var l,c;const d=e||(null==O?void 0:O.id);if(!d)return!0;const h=n||r,p=s||a,m=void 0!==i?i:o;if(!(Object.keys(h).length>0))return!0;if(w.current.has(d))return console.warn(`Save already in progress for trace ${d}, skipping duplicate save`),!1;if(!t){if(j.current)return console.warn("User-initiated save already in progress, skipping duplicate save"),!1;const e=(e=>{const t=b.current.get(e);if(!t)return Object.keys(r).length>0;const n=Object.keys(r),s=Object.keys(t.ratings);if(n.length>0){for(const e of n)if(!(e in t.ratings)||r[e]!==t.ratings[e])return!0;for(const e of s)if(!(e in r))return!0}const i=Object.keys(a),l=Object.keys(t.freeformResponses);if(i.length!==l.length)return!0;for(const r of i)if(a[r]!==t.freeformResponses[r])return!0;return o.trim()!==t.comment.trim()})(d);if(!e)return console.log(`No changes detected for trace ${d}, skipping save`),!0;j.current=!0,f(!0)}w.current.add(d);try{const e=(e=>{const t=e||r,n={};for(const[r,s]of Object.entries(t))"number"==typeof s&&(n[r]=s);return n})(h),n={trace_id:d,user_id:_,rating:F(h),ratings:e,comment:z(m,p)};return console.log("Saving annotation:",{traceId:d,ratings:e,isBackground:t}),t?await N(()=>M.mutateAsync(n),3,1e3):await M.mutateAsync(n),u(e=>new Set([...e,d])),b.current.set(d,{ratings:{...h},freeformResponses:{...p},comment:m}),console.log("Successfully saved annotation for trace:",d),!0}catch(g){return console.error("Failed to save annotation after retries:",g),console.error("Error details:",{message:null==g?void 0:g.message,response:null==(l=null==g?void 0:g.response)?void 0:l.data,status:null==(c=null==g?void 0:g.response)?void 0:c.status,traceId:d,isBackground:t}),t||ZS.error("Failed to save annotation. Please try again."),!1}finally{w.current.delete(d),t||(j.current=!1,f(!1))}},q=c.size;Object.keys(r).length;const B=!S||0===Object.keys(r).length||m;return E||R?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("div",{className:"text-lg font-medium text-gray-600 mb-2",children:"Loading annotation interface..."}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"Fetching traces and rubric from API"})]})}):T||!A.length?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:T?"Failed to load traces":"No traces available"}),Mt.jsx("div",{className:"text-sm text-gray-500",children:T?"Please check your connection and try again":"Upload some traces to get started"})]})}):L&&0!==L.length?Mt.jsx("div",{className:"p-6",children:Mt.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[Mt.jsxs("div",{children:[Mt.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Annotation Phase"}),Mt.jsx("p",{className:"text-gray-600 mb-4",children:"Rate LLM responses using the evaluation rubric"}),Mt.jsxs("div",{className:"mb-6",children:[Mt.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Mt.jsx("span",{className:"text-sm text-gray-600",children:"Progress"}),Mt.jsxs("span",{className:"text-sm text-gray-600",children:[q," of ",A.length," complete"]})]}),Mt.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Mt.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:q/A.length*100+"%"}})})]}),Mt.jsx("div",{className:"flex items-center justify-between",children:Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsxs(Lv,{variant:"outline",children:["Trace ",t+1," of ",A.length]}),c.has(O.id)&&Mt.jsxs(Lv,{className:"bg-green-500",children:[Mt.jsx(zx,{className:"h-3 w-3 mr-1"}),"Annotation Submitted"]})]})})]}),Mt.jsx(l_,{trace:O}),Mt.jsxs(hx,{className:"mt-4",children:[Mt.jsx(px,{className:"pb-3",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsx(fx,{className:"text-lg",children:"Trace Data Analysis"}),Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:()=>v(!x),className:"flex items-center gap-2",children:[Mt.jsx(kv,{className:"h-4 w-4"}),x?"Hide":"Show"," Data Table"]})]})}),x&&Mt.jsx(gx,{children:Mt.jsx(vC,{trace:O,showContext:!1,className:"border-0 shadow-none"})})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center justify-between",children:[Mt.jsx("span",{children:"Rate this Response"}),(null==O?void 0:O.mlflow_trace_id)&&Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:()=>{if(O.mlflow_url)window.open(O.mlflow_url,"_blank");else if(D){const e=`${D.databricks_host}/ml/experiments/${D.experiment_id}/traces?selectedEvaluationId=${O.mlflow_trace_id}`;window.open(e,"_blank")}},className:"flex items-center gap-2 text-xs",children:[Mt.jsx(Fx,{className:"h-3 w-3"}),"View Full Context"]}),(null==O?void 0:O.mlflow_trace_id)&&!D&&Mt.jsx("div",{className:"text-xs text-orange-600",children:" MLflow config not loaded"}),!(null==O?void 0:O.mlflow_trace_id)&&Mt.jsx("div",{className:"text-xs text-gray-500",children:"No MLflow trace ID"})]}),!S&&Mt.jsxs("p",{className:"text-sm text-red-600 mt-2",children:[Mt.jsx(Fx,{className:"h-4 w-4 inline mr-1"}),"You don't have permission to submit annotations. You can view the traces but cannot provide ratings."]})]}),Mt.jsxs(gx,{className:"space-y-6",children:[L.map((e,t)=>Mt.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[Mt.jsxs("div",{className:"mb-4",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(NC,{className:"text-base font-medium",children:e.title}),Mt.jsx(Lv,{variant:"outline",className:"text-xs "+("likert"===e.judgeType?"bg-green-50 text-green-700 border-green-200":"binary"===e.judgeType?"bg-blue-50 text-blue-700 border-blue-200":"bg-purple-50 text-purple-700 border-purple-200"),children:"likert"===e.judgeType?"Likert":"binary"===e.judgeType?"Binary":"Free-form"})]}),Mt.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),Mt.jsxs("div",{className:"space-y-4",children:["likert"===e.judgeType&&Mt.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(t=>Mt.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Mt.jsx("label",{className:S?"cursor-pointer":"cursor-not-allowed opacity-50",children:Mt.jsx("input",{type:"radio",name:`rating-${e.id}`,value:t,checked:r[e.id]===t,onChange:t=>{s(n=>({...n,[e.id]:parseInt(t.target.value)}))},className:"w-4 h-4",disabled:!S||p})}),Mt.jsx("span",{className:"text-xs text-center text-gray-700 leading-tight max-w-[80px]",children:["","Strongly Disagree","Disagree","Neutral","Agree","Strongly Agree"][t]})]},t))}),"binary"===e.judgeType&&Mt.jsxs("div",{className:"flex justify-center gap-8",children:[Mt.jsxs("div",{className:"flex flex-col items-center gap-2 "+(S&&!p?"cursor-pointer":"cursor-not-allowed opacity-50"),onClick:()=>S&&!p&&s(t=>({...t,[e.id]:1})),role:"button",tabIndex:S&&!p?0:-1,onKeyDown:t=>"Enter"===t.key&&S&&!p&&s(t=>({...t,[e.id]:1})),children:[Mt.jsx("div",{className:"w-16 h-16 rounded-xl border-2 flex items-center justify-center transition-all duration-200 "+(1===r[e.id]?"border-emerald-500 bg-emerald-50 shadow-md scale-105 ring-2 ring-emerald-200":"border-gray-300 bg-white hover:border-emerald-300 hover:bg-emerald-50/50"),children:Mt.jsx(zx,{className:"w-8 h-8 "+(1===r[e.id]?"text-emerald-600":"text-gray-400")})}),Mt.jsx("span",{className:"text-sm font-semibold "+(1===r[e.id]?"text-emerald-700":"text-gray-500"),children:"Pass"})]}),Mt.jsxs("div",{className:"flex flex-col items-center gap-2 "+(S&&!p?"cursor-pointer":"cursor-not-allowed opacity-50"),onClick:()=>S&&!p&&s(t=>({...t,[e.id]:0})),role:"button",tabIndex:S&&!p?0:-1,onKeyDown:t=>"Enter"===t.key&&S&&!p&&s(t=>({...t,[e.id]:0})),children:[Mt.jsx("div",{className:"w-16 h-16 rounded-xl border-2 flex items-center justify-center transition-all duration-200 "+(0===r[e.id]?"border-rose-400 bg-rose-50 shadow-md scale-105 ring-2 ring-rose-200":"border-gray-300 bg-white hover:border-rose-300 hover:bg-rose-50/50"),children:Mt.jsx(Fx,{className:"w-8 h-8 "+(0===r[e.id]?"text-rose-500":"text-gray-400")})}),Mt.jsx("span",{className:"text-sm font-semibold "+(0===r[e.id]?"text-rose-600":"text-gray-500"),children:"Fail"})]})]}),"freeform"===e.judgeType&&Mt.jsxs("div",{children:[Mt.jsx(yC,{placeholder:"Provide your detailed feedback for this criterion...",value:a[e.id]||"",onChange:t=>i(n=>({...n,[e.id]:t.target.value})),className:"min-h-[100px]",disabled:!S||p}),Mt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Provide detailed written feedback for this evaluation criterion."})]})]})]},e.id)),0===L.length&&Mt.jsx("div",{className:"text-center text-gray-500 py-8",children:Mt.jsx("p",{children:"No evaluation criteria available. Please wait for the facilitator to create the rubric."})}),Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsxs(NC,{htmlFor:"comment",className:"text-sm font-medium",children:["Feedback for Judge Alignment",Mt.jsx("span",{className:"text-gray-500 font-normal ml-2",children:"(Optional)"})]}),Mt.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[Mt.jsx("strong",{children:"Important:"})," Your feedback here will be used to train and align the AI judge. Focus on explaining ",Mt.jsx("em",{children:"why"})," you gave this rating - what specific aspects of the response influenced your score? This helps the AI judge learn to evaluate similarly."]}),Mt.jsx("textarea",{id:"comment",placeholder:S?"Explain your reasoning for this rating. What made this response good or poor? What criteria did you focus on? This feedback will be used to train the AI judge...":"You don't have permission to submit annotations",value:o,onChange:e=>{l(e.target.value)},className:"w-full min-h-[100px] p-2 border rounded whitespace-pre-wrap",disabled:!S||p,style:{whiteSpace:"pre-wrap"}})]}),c.has(O.id)&&Mt.jsxs("div",{className:"flex items-center justify-between bg-green-50 border border-green-200 rounded-lg p-3",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(zx,{className:"h-4 w-4 text-green-600"}),Mt.jsx("span",{className:"text-sm text-green-800 font-medium",children:"Annotation Saved"})]}),Mt.jsx("span",{className:"text-xs text-green-700",children:"Edit and click Next/Previous to save changes"})]})]})]}),Mt.jsx(hx,{children:Mt.jsx(gx,{className:"py-4",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsx(Gv,{variant:"outline",onClick:()=>{if(!O)return void console.warn("prevTrace: No current trace");if(m)return void console.warn("prevTrace: Already navigating",{isNavigating:m});if(t<=0)return void console.log("prevTrace: Already at first trace");console.log("prevTrace: Starting optimistic navigation",{currentTraceIndex:t,prevIndex:t-1}),g(!0);const e=O.id,s={...r},i={...a},l=o,c=Object.keys(s).length>0,u=t-1;console.log("prevTrace: Navigating to index",u),h(!0),n(u),g(!1),c?(console.log("prevTrace: Saving annotation in background",{traceId:e}),$(e,!0,s,i,l).then(t=>{t?console.log("prevTrace: Background save successful for trace:",e):console.warn("prevTrace: Background save failed after retries for trace:",e)}).catch(e=>{console.error("prevTrace: Unexpected background save error:",e)})):console.log("prevTrace: No ratings to save")},disabled:0===t||m,className:"flex items-center gap-2",children:m?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-4 h-4 border-2 border-gray-400/30 border-t-gray-600 rounded-full animate-spin"}),"Navigating..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Dx,{className:"h-4 w-4"}),"Previous"]})}),Mt.jsx(Gv,{onClick:()=>{if(!O)return void console.warn("nextTrace: No current trace");if(m)return void console.warn("nextTrace: Already navigating",{isNavigating:m});if(t>=A.length-1)return void ZS.success("All traces annotated! Great work.");console.log("nextTrace: Starting optimistic navigation",{currentTraceIndex:t,nextIndex:t+1}),g(!0);const e=O.id,c={...r},u={...a},d=o,p=Object.keys(c).length>0,f=t+1;console.log("nextTrace: Navigating to index",f),h(!0),n(f),s({}),i({}),l(""),g(!1),p?(console.log("nextTrace: Saving annotation in background",{traceId:e}),$(e,!0,c,u,d).then(t=>{t?console.log("nextTrace: Background save successful for trace:",e):console.warn("nextTrace: Background save failed after retries for trace:",e)}).catch(e=>{console.error("nextTrace: Unexpected background save error:",e)})):console.log("nextTrace: No ratings to save")},disabled:B,className:"flex items-center gap-2",children:m?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Navigating..."]}):t===A.length-1?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(bv,{className:"h-4 w-4"}),"Complete"]}):Mt.jsxs(Mt.Fragment,{children:["Next",Mt.jsx(Mx,{className:"h-4 w-4"})]})})]})})})]})}):Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"No rubric available"}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"A rubric must be created before annotations can begin"})]})})}const OC=e=>({id:e.id,input:e.input,output:e.output,context:e.context||void 0,mlflow_trace_id:e.mlflow_trace_id||void 0,mlflow_url:e.mlflow_url||void 0,mlflow_host:e.mlflow_host||void 0,mlflow_experiment_id:e.mlflow_experiment_id||void 0});function LC(e){const t=kt.useRef({value:e,previous:e});return kt.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function FC(e){const[t,n]=kt.useState(void 0);return p_(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let s,a;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var zC="Switch",[WC,UC]=u_(zC),[$C,qC]=WC(zC),BC=kt.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:i,disabled:o,value:l="on",onCheckedChange:c,form:u,...d}=e,[h,p]=kt.useState(null),f=Uv(t,e=>p(e)),m=kt.useRef(!1),g=!h||(u||!!h.closest("form")),[x,v]=w_({prop:s,defaultProp:a??!1,onChange:c,caller:zC});return Mt.jsxs($C,{scope:n,checked:x,disabled:o,children:[Mt.jsx(x_.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":KC(x),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:f,onClick:c_(e.onClick,e=>{v(e=>!e),g&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})}),g&&Mt.jsx(QC,{control:h,bubbles:!m.current,name:r,value:l,checked:x,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});BC.displayName=zC;var VC="SwitchThumb",HC=kt.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=qC(VC,n);return Mt.jsx(x_.span,{"data-state":KC(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});HC.displayName=VC;var QC=kt.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=kt.useRef(null),o=Uv(i,a),l=LC(n),c=FC(t);return kt.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&s){const t=new Event("click",{bubbles:r});s.call(e,n),e.dispatchEvent(t)}},[l,n,r]),Mt.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function KC(e){return e?"checked":"unchecked"}QC.displayName="SwitchBubbleInput";var GC=BC,YC=HC;const JC=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(GC,{className:dx("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:Mt.jsx(YC,{className:dx("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));JC.displayName=GC.displayName;const XC={ready_to_proceed:!0,calculated_at:(new Date).toISOString(),details:{problematic_patterns:["Trace 3 shows low agreement (0.45) - may need clarification","Participant_1 shows lower consistency - may need additional training"]}};function ZC({workshopId:e}){var t,n,r;const{workshopId:s}=Ym(),a=e||s,{isFacilitator:i}=Hm(),{markPhaseComplete:o}=gg(),l=$p(),[c,u]=kt.useState(!1),[d,h]=kt.useState(new Set),{data:p,isLoading:f,error:m}=function(e){return Kp({queryKey:tg(e),queryFn:()=>$m.getIrrWorkshopsWorkshopIdIrrGet(e),enabled:!!e})}(a),{data:g}=rg(a),{data:x}=cg(a),{data:v,refetch:y}=ig(a),{data:b}=dg(a),{data:w}=pg(a),j=function(e){const t=$p();return Gp({mutationFn:async({traceId:t,includeInAlignment:n})=>{const r=await fetch(`/workshops/${e}/traces/${t}/alignment?include_in_alignment=${n}`,{method:"PATCH"});if(!r.ok)throw new Error("Failed to update trace alignment");return r.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["traces",e]}),t.invalidateQueries({queryKey:["traces-for-alignment",e]})}})}(a),N=x?(e=>e&&e.question?PC(e.question).map((t,n)=>({id:`${e.id}_${n}`,title:t.title,description:t.description,index:n})):[])(x):[],k=(null==(t=null==p?void 0:p.details)?void 0:t.per_metric_scores)||{},S=Object.keys(k).length>0,_={};N.forEach(e=>{_[e.id]=e.title});const[C,E]=kt.useState("");St.useEffect(()=>{const e=Object.keys(k)[0];e&&!C&&E(`metric-${e}`)},[k,C]);const T=p&&p.details&&"error"in p.details,P="judge_tuning"===(null==g?void 0:g.current_phase);kt.useEffect(()=>{P&&o("results")},[P,o]);const R=p&&!T?p:XC,I=e=>e>=.8?"bg-green-100 text-green-800":e>=.6?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return f?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("div",{className:"text-lg font-medium text-gray-600 mb-2",children:"Loading IRR results..."}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"Calculating inter-rater reliability"})]})}):m?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load IRR results"}),Mt.jsx("div",{className:"text-sm text-gray-500",children:m?"Error loading data from API":"Please check your connection and try again"})]})}):T?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Insufficient Data for IRR Calculation"}),Mt.jsx("div",{className:"text-sm text-gray-500 mb-4",children:(null==(n=null==p?void 0:p.details)?void 0:n.error)||"Need more annotations to calculate inter-rater reliability"}),Mt.jsxs("div",{className:"text-sm text-gray-600",children:[Mt.jsx("p",{children:"Complete the annotation phase to view IRR results."}),Mt.jsxs("p",{className:"mt-2",children:["Current annotations: ",(null==(r=null==p?void 0:p.details)?void 0:r.num_annotations)||0]})]})]})}):Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:Mt.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"LLM Judge Calibration Workshop"}),Mt.jsx("p",{className:"text-lg text-gray-600",children:"Inter-Rater Reliability Results"}),Mt.jsxs("div",{className:"mt-2 space-x-2",children:[Mt.jsx(Lv,{variant:"outline",children:"Facilitator View"}),(!p||T)&&Mt.jsxs(Lv,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:[Mt.jsx(rv,{className:"h-3 w-3 mr-1"}),"Demo Data"]})]})]}),Mt.jsx(hx,{children:Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center justify-between",children:[Mt.jsxs("span",{className:"flex items-center gap-2",children:[Mt.jsx(Tx,{className:"h-5 w-5"}),"IRR Results Summary"]}),Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:()=>{var e,t;if(!p)return;const n=p.details,r=`\n# Inter-Rater Reliability Analysis Report\nGenerated: ${(new Date).toLocaleString()}\nWorkshop ID: ${a}\nWorkshop Name: ${(null==g?void 0:g.name)||"Unknown Workshop"}\n\n## Summary\n${null==n?void 0:n.metric_used}: ${p.score.toFixed(3)}\nInterpretation: ${null==n?void 0:n.interpretation}\nReady to Proceed: ${p.ready_to_proceed?"Yes":"No"}\n\n## Data Overview\n- Number of Raters: ${(null==n?void 0:n.num_raters)||0}\n- Number of Traces: ${(null==n?void 0:n.num_traces)||0}\n- Total Annotations: ${(null==n?void 0:n.num_annotations)||0}\n- Data Completeness: ${(100*((null==n?void 0:n.completeness)||0)).toFixed(1)}%\n\n## Key Insights\n${(null==(e=null==n?void 0:n.suggestions)?void 0:e.map((e,t)=>`${t+1}. ${e}`).join("\n"))||"No suggestions available"}\n\n## Identified Issues\n${(null==(t=null==n?void 0:n.problematic_patterns)?void 0:t.map((e,t)=>`${t+1}. ${e}`).join("\n"))||"No issues identified"}\n\n---\nReport generated by Databricks LLM-Judge Builder Workshop\n    `.trim(),s=new Blob([r],{type:"text/plain"}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=`irr_analysis_report_${null==a?void 0:a.slice(0,8)}_${(new Date).toISOString().split("T")[0]}.txt`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},children:[Mt.jsx(Yx,{className:"h-4 w-4 mr-2"}),"Save Report"]}),Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:()=>{var e,t,n;if(!p)return;const r={workshop_id:a,workshop_name:(null==g?void 0:g.name)||"Unknown Workshop",exported_at:(new Date).toISOString(),irr_analysis:p,metadata:{export_type:"irr_results",workshop_phase:null==g?void 0:g.current_phase,total_annotations:(null==(e=p.details)?void 0:e.num_annotations)||0,total_traces:(null==(t=p.details)?void 0:t.num_traces)||0,total_raters:(null==(n=p.details)?void 0:n.num_raters)||0}},s=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=`irr_results_${null==a?void 0:a.slice(0,8)}_${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},children:[Mt.jsx(Qx,{className:"h-4 w-4 mr-2"}),"Export Data"]}),Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:async()=>{if(a)try{ZS.info("Recalculating IRR...");if(!(await fetch(`/workshops/${a}/irr`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("IRR calculation failed");l.invalidateQueries({queryKey:["irr",a]}),ZS.success("IRR recalculated successfully!")}catch(e){ZS.error("Failed to recalculate IRR")}},children:[Mt.jsx(gv,{className:"h-4 w-4 mr-2"}),"Recalculate"]})]})]}),Mt.jsx(mx,{children:"Krippendorff's Alpha calculated separately for each evaluation criterion"})]})}),Mt.jsxs(lC,{value:C,onValueChange:E,children:[Mt.jsx(cC,{className:`grid w-full ${1===Object.keys(k).length?"grid-cols-1":2===Object.keys(k).length?"grid-cols-2":3===Object.keys(k).length?"grid-cols-3":4===Object.keys(k).length?"grid-cols-4":5===Object.keys(k).length?"grid-cols-5":6===Object.keys(k).length?"grid-cols-6":"grid-cols-4"} ${Object.keys(k).length>6?"overflow-x-auto":""}`,children:S&&Object.keys(k).map(e=>Mt.jsx(uC,{value:`metric-${e}`,children:_[e]||e},e))}),S&&Object.entries(k).map(([e,t])=>{var n,r,s,a,o;return Mt.jsxs(dC,{value:`metric-${e}`,className:"space-y-4",children:[Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Sv,{className:"h-5 w-5"}),_[e]||e]}),Mt.jsx(mx,{children:(null==(n=N.find(t=>t.id===e))?void 0:n.description)||"Inter-rater reliability for this evaluation criterion"})]}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("div",{className:"mb-2",children:Mt.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Krippendorff's Alpha"})}),Mt.jsx("div",{className:"text-4xl font-bold "+(o=t.score,o>=.8?"text-green-600":o>=.6?"text-yellow-600":"text-red-600"),children:t.score.toFixed(3)}),Mt.jsx("div",{className:"mt-2",children:Mt.jsx(Lv,{className:I(t.score),children:t.interpretation})})]}),Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("div",{className:"mb-2",children:Mt.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Status"})}),Mt.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(a=t.acceptable,a?Mt.jsx(zx,{className:"h-5 w-5 text-green-600"}):Mt.jsx(Wx,{className:"h-5 w-5 text-red-600"})),Mt.jsx("span",{className:"font-medium "+(t.acceptable?"text-green-600":"text-red-600"),children:t.acceptable?"Acceptable":"Needs Improvement"})]}),Mt.jsx("div",{className:"text-sm text-gray-500",children:t.acceptable?"Reliability is sufficient for this criterion":"Consider additional calibration for this criterion"})]})]})})]}),Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(sv,{className:"h-5 w-5 text-yellow-600"}),"Recommendations"]})}),Mt.jsx(gx,{children:(t.suggestions||[]).length>0?Mt.jsx("div",{className:"space-y-3",children:(t.suggestions||[]).map((e,t)=>Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx(Sv,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),Mt.jsx("span",{className:"text-sm text-gray-700",children:e})]},t))}):t.score>=.3?Mt.jsxs("div",{className:"flex flex-col items-center justify-center py-4 text-center",children:[Mt.jsx(zx,{className:"h-8 w-8 text-green-500 mb-2"}),Mt.jsx("span",{className:"text-sm text-gray-600",children:"Agreement is acceptable for this criterion"})]}):Mt.jsxs("div",{className:"flex flex-col items-center justify-center py-4 text-center",children:[Mt.jsx(Fx,{className:"h-8 w-8 text-orange-500 mb-2"}),Mt.jsx("span",{className:"text-sm text-gray-600",children:t.score<0?"Systematic disagreement detected - raters may be interpreting the scale differently":"Low agreement - consider additional calibration"})]})})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Fx,{className:"h-5 w-5 text-orange-600"}),"Identified Issues"]})}),Mt.jsx(gx,{children:((null==(r=R.details)?void 0:r.problematic_patterns)||[]).length>0?Mt.jsx("div",{className:"space-y-3",children:((null==(s=R.details)?void 0:s.problematic_patterns)||[]).map((e,t)=>Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx(rv,{className:"h-4 w-4 text-orange-600 mt-0.5 flex-shrink-0"}),Mt.jsx("span",{className:"text-sm text-gray-700",children:e})]},t))}):Mt.jsxs("div",{className:"text-center py-4 text-gray-500",children:[Mt.jsx(zx,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),Mt.jsx("p",{children:"No significant issues detected"})]})})]})]}),(()=>{const t=((e,t,n=null)=>{if(!e||!t)return{};const r={};return e.forEach(e=>{const s=t.filter(t=>t.trace_id===e.id);if(s.length>=2){const t=s.map(e=>n&&e.ratings&&void 0!==e.ratings[n]?e.ratings[n]:e.rating).filter(e=>null!=e);if(t.length<2)return;const a=t.reduce((e,t)=>e+t,0)/t.length,i=t.reduce((e,t)=>e+Math.pow(t-a,2),0)/t.length,o=Math.sqrt(i);r[e.id]={agreement:o,ratingCount:t.length}}}),r})(v,b,e);return Object.keys(t).length>0?Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(ov,{className:"h-5 w-5"}),"Traces by Disagreement Level - ",_[e]||e]}),Mt.jsx(mx,{children:"Traces sorted by disagreement level for this specific criterion (most disagreement first)."})]}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-3",children:[(()=>{const n=Object.entries(t).filter(([,e])=>e.agreement>1.5).sort(([,e],[,t])=>t.agreement-e.agreement);return n.length>0?Mt.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsx(Fx,{className:"h-4 w-4 text-red-600"}),Mt.jsx("span",{className:"font-medium text-red-800",children:"Priority Discussion Needed"})]}),Mt.jsxs("p",{className:"text-sm text-red-700 mb-2",children:[n.length," trace",1!==n.length?"s":""," with high disagreement ( > 1.5) for ",_[e]||e,":"]}),Mt.jsxs("div",{className:"space-y-1",children:[n.slice(0,3).map(([t,n])=>Mt.jsxs("div",{className:"flex items-center justify-between text-xs",children:[Mt.jsxs("span",{className:"text-red-700",children:["Trace ",t.slice(0,8),"... -  = ",n.agreement.toFixed(2)]}),Mt.jsx(Gv,{variant:"ghost",size:"sm",className:"h-6 px-2 text-red-600 hover:text-red-800",onClick:()=>{const n=document.getElementById(`trace-${e}-${t}`);n&&(n.scrollIntoView({behavior:"smooth"}),h(n=>new Set([...n,`${e}-${t}`])))},children:"View"})]},t)),n.length>3&&Mt.jsxs("div",{className:"text-xs text-red-600 italic",children:["...and ",n.length-3," more"]})]})]}):null})(),Object.entries((n=t,Object.entries(n).sort(([,e],[,t])=>t.agreement-e.agreement).reduce((e,[t,n])=>({...e,[t]:n}),{}))).map(([t,n])=>{const r=null==v?void 0:v.find(e=>e.id===t),s=n.agreement,a=e=>e<.5?"bg-green-500":e<1?"bg-green-400":e<1.5?"bg-yellow-400":e<2?"bg-orange-400":"bg-red-500",o=(null==b?void 0:b.filter(e=>e.trace_id===t))||[],l=d.has(`${e}-${t}`);return o.forEach(t=>{t.ratings&&void 0!==t.ratings[e]?t.ratings[e]:t.rating}),Mt.jsxs("div",{id:`trace-${e}-${t}`,className:"border rounded-lg p-4 "+(s>1.5?"border-orange-300 bg-orange-50":s>1?"border-yellow-300 bg-yellow-50":"border-gray-200 bg-white"),children:[Mt.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:opacity-80",onClick:()=>{const n=new Set(d),r=`${e}-${t}`;n.has(r)?n.delete(r):n.add(r),h(n)},children:[Mt.jsxs("span",{className:"font-medium flex items-center gap-2",children:[Mt.jsx(ov,{className:"h-4 w-4"}),"Trace ",((null==r?void 0:r.mlflow_trace_id)||t).slice(0,20),"...",s>1.5&&Mt.jsx(Lv,{className:"bg-red-500 text-white text-xs",children:"High Disagreement"}),!1===(null==r?void 0:r.include_in_alignment)&&Mt.jsx(Lv,{variant:"outline",className:"bg-gray-100 text-gray-600 border-gray-200 text-xs",children:"Excluded"}),l?Mt.jsx(Ax,{className:"h-4 w-4"}):Mt.jsx(Ix,{className:"h-4 w-4"})]}),Mt.jsxs("div",{className:"flex items-center gap-2",children:[(null==r?void 0:r.mlflow_trace_id)&&Mt.jsxs(Gv,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:e=>{if(e.stopPropagation(),r.mlflow_url)window.open(r.mlflow_url,"_blank");else if(w){const e=`${w.databricks_host}/ml/experiments/${w.experiment_id}/traces?selectedEvaluationId=${r.mlflow_trace_id}`;window.open(e,"_blank")}else ZS.error("MLflow configuration not available")},children:[Mt.jsx(Kx,{className:"h-3 w-3 mr-1"}),"MLflow"]}),Mt.jsxs(Lv,{variant:"outline",className:"text-xs",children:[n.ratingCount," ratings"]}),Mt.jsxs(Lv,{className:`${a(s)} text-white`,children:[" = ",s.toFixed(2)]})]})]}),Mt.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mt-2 overflow-hidden",children:Mt.jsx("div",{className:`h-3 transition-all duration-300 ${a(s)}`,style:{width:`${Math.max(5,100-40*s)}%`}})}),Mt.jsxs("div",{className:"text-xs mt-1 "+(c=s,c<.5?"text-green-700":c<1?"text-green-600":c<1.5?"text-yellow-700":c<2?"text-orange-700":"text-red-700"),children:[s<.5&&" Perfect agreement",s>=.5&&s<1&&" Good agreement",s>=1&&s<1.5&&"~ Moderate disagreement",s>=1.5&&s<2&&" High disagreement - discuss",s>=2&&" Very high disagreement - priority discussion"]}),l&&Mt.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[Mt.jsxs("div",{className:"text-sm font-medium mb-2",children:["Rating Details for ",_[e]||e,":"]}),Mt.jsx("div",{className:"flex items-center gap-2 mb-3",children:[1,2,3,4,5].map(t=>Mt.jsxs("div",{className:"flex flex-col items-center",children:[Mt.jsx("div",{className:"flex flex-wrap justify-center gap-0.5 min-h-[20px] mb-1",children:o.filter(n=>(n.ratings&&void 0!==n.ratings[e]?n.ratings[e]:n.rating)===t).map((e,n)=>Mt.jsx("div",{className:"w-2 h-2 rounded-full "+(t<=2?"bg-red-400":3===t?"bg-yellow-400":"bg-green-400"),title:e.user_name||e.user_id},n))}),Mt.jsx("span",{className:"text-xs font-medium",children:t})]},t))}),Mt.jsx("div",{className:"space-y-1",children:o.map((t,n)=>{const r=t.ratings&&void 0!==t.ratings[e]?t.ratings[e]:t.rating;return Mt.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[Mt.jsxs("span",{children:[t.user_name||t.user_id,":"]}),Mt.jsxs("div",{className:"flex items-center gap-1",children:[Mt.jsx("span",{className:"font-medium",children:r}),Mt.jsx("div",{className:"w-2 h-2 rounded-full "+(r<=2?"bg-red-400":3===r?"bg-yellow-400":"bg-green-400")})]})]},n)})}),i&&r&&Mt.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{children:[Mt.jsx("div",{className:"text-sm font-medium text-blue-900",children:"Include in Judge Alignment"}),Mt.jsx("div",{className:"text-xs text-blue-700 mt-1",children:s>1.5?"High disagreement detected. Consider excluding from alignment.":"This trace will be used to train the AI judge."})]}),Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx(JC,{checked:!1!==r.include_in_alignment,onCheckedChange:e=>{j.mutate({traceId:r.id,includeInAlignment:e},{onSuccess:()=>{ZS.success(e?"Trace will be included in alignment":"Trace excluded from alignment"),y()},onError:()=>{ZS.error("Failed to update alignment setting")}})},disabled:j.isPending}),Mt.jsx(Lv,{variant:"outline",className:!1!==r.include_in_alignment?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-600 border-gray-200",children:!1!==r.include_in_alignment?"Included":"Excluded"})]})]})}),r&&Mt.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[Mt.jsx("div",{className:"text-sm font-medium mb-3 text-gray-700",children:"Trace Content - What the annotators are rating:"}),Mt.jsx(l_,{trace:OC(r)})]})]})]},t);var c})]})})]}):Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{children:["Trace Analysis - ",_[e]||e]})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"text-center py-4 text-gray-500",children:[Mt.jsx(rv,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),Mt.jsx("p",{children:"No trace data available for this metric"})]})})]});var n})()]},e)})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Sx,{className:"h-5 w-5 text-green-600"}),"Next Steps"]})}),Mt.jsx(gx,{children:Mt.jsx("div",{className:"p-4 rounded-lg border-2 "+(P?"border-blue-200 bg-blue-50":R.ready_to_proceed?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"),children:Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx("p",{className:"text-sm font-medium mb-1 "+(P?"text-blue-800":R.ready_to_proceed?"text-green-800":"text-yellow-800"),children:P?"Workshop in Judge Tuning Phase":R.ready_to_proceed?"Workshop Complete - Ready for Evaluation":"Additional Calibration Recommended"}),Mt.jsx("p",{className:"text-sm "+(P?"text-blue-700":R.ready_to_proceed?"text-green-700":"text-yellow-700"),children:P?"The workshop has advanced to the judge tuning phase where AI judges can be created and evaluated.":R.ready_to_proceed?"The inter-rater reliability is sufficient to proceed with confident evaluation of LLM outputs.":"Consider additional training or rubric refinement before proceeding with evaluation."})]}),i?Mt.jsx("div",{className:"flex flex-col gap-2",children:P?Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs(Gv,{className:"flex items-center gap-2",disabled:!0,children:["Workshop in Judge Tuning Phase",Mt.jsx(zx,{className:"h-4 w-4"})]}),Mt.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Judge tuning phase is active"})]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Gv,{className:"flex items-center gap-2",onClick:async()=>{if(a){u(!0);try{await $m.advanceToJudgeTuningWorkshopsWorkshopIdAdvanceToJudgeTuningPost(a),o("results"),l.invalidateQueries({queryKey:["workshop",a]})}catch(e){}finally{u(!1)}}},disabled:c,children:c?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(gv,{className:"h-4 w-4 animate-spin"}),"Advancing..."]}):Mt.jsxs(Mt.Fragment,{children:["Proceed to Judge Tuning",Mt.jsx(Ex,{className:"h-4 w-4"})]})}),Mt.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Create AI judges from annotation data"})]})}):Mt.jsxs(Gv,{className:"flex items-center gap-2",disabled:!0,children:[R.ready_to_proceed?"Workshop Complete":"Continue Calibration",Mt.jsx(zx,{className:"h-4 w-4"})]})]})})})]})]})})}const eE=Av("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),tE=kt.forwardRef(({className:e,variant:t,...n},r)=>Mt.jsx("div",{ref:r,role:"alert",className:dx(eE({variant:t}),e),...n}));tE.displayName="Alert";kt.forwardRef(({className:e,...t},n)=>Mt.jsx("h5",{ref:n,className:dx("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";const nE=kt.forwardRef(({className:e,...t},n)=>Mt.jsx("div",{ref:n,className:dx("text-sm [&_p]:leading-relaxed",e),...t}));function rE(e,[t,n]){return Math.min(n,Math.max(t,e))}function sE(e,t=(null==globalThis?void 0:globalThis.document)){const n=y_(e);kt.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}nE.displayName="AlertDescription";var aE,iE="dismissableLayer.update",oE="dismissableLayer.pointerDownOutside",lE="dismissableLayer.focusOutside",cE=kt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uE=kt.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:o,...l}=e,c=kt.useContext(cE),[u,d]=kt.useState(null),h=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,p]=kt.useState({}),f=Uv(t,e=>d(e)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(g),v=u?m.indexOf(u):-1,y=c.layersWithOutsidePointerEventsDisabled.size>0,b=v>=x,w=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=y_(e),r=kt.useRef(!1),s=kt.useRef(()=>{});return kt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){hE(oE,n,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=r,t.addEventListener("click",s.current,{once:!0})):r()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...c.branches].some(e=>e.contains(t));b&&!n&&(null==s||s(e),null==i||i(e),e.defaultPrevented||null==o||o())},h),j=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=y_(e),r=kt.useRef(!1);return kt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){hE(lE,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...c.branches].some(e=>e.contains(t))||(null==a||a(e),null==i||i(e),e.defaultPrevented||null==o||o())},h);return sE(e=>{v===c.layers.size-1&&(null==r||r(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},h),kt.useEffect(()=>{if(u)return n&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(aE=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),dE(),()=>{n&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=aE)}},[u,h,n,c]),kt.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),dE())},[u,c]),kt.useEffect(()=>{const e=()=>p({});return document.addEventListener(iE,e),()=>document.removeEventListener(iE,e)},[]),Mt.jsx(x_.div,{...l,ref:f,style:{pointerEvents:y?b?"auto":"none":void 0,...e.style},onFocusCapture:c_(e.onFocusCapture,j.onFocusCapture),onBlurCapture:c_(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:c_(e.onPointerDownCapture,w.onPointerDownCapture)})});uE.displayName="DismissableLayer";function dE(){const e=new CustomEvent(iE);document.dispatchEvent(e)}function hE(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?v_(s,a):s.dispatchEvent(a)}kt.forwardRef((e,t)=>{const n=kt.useContext(cE),r=kt.useRef(null),s=Uv(t,r);return kt.useEffect(()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),Mt.jsx(x_.div,{...e,ref:s})}).displayName="DismissableLayerBranch";var pE=0;function fE(){kt.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??mE()),document.body.insertAdjacentElement("beforeend",e[1]??mE()),pE++,()=>{1===pE&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),pE--}},[])}function mE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var gE="focusScope.autoFocusOnMount",xE="focusScope.autoFocusOnUnmount",vE={bubbles:!1,cancelable:!0},yE=kt.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[o,l]=kt.useState(null),c=y_(s),u=y_(a),d=kt.useRef(null),h=Uv(t,e=>l(e)),p=kt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;kt.useEffect(()=>{if(r){let e=function(e){if(p.paused||!o)return;const t=e.target;o.contains(t)?d.current=t:NE(d.current,{select:!0})},t=function(e){if(p.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||NE(d.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&NE(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[r,o,p.paused]),kt.useEffect(()=>{if(o){kE.add(p);const t=document.activeElement;if(!o.contains(t)){const n=new CustomEvent(gE,vE);o.addEventListener(gE,c),o.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(NE(r,{select:t}),document.activeElement!==n)return}((e=bE(o),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&NE(o))}return()=>{o.removeEventListener(gE,c),setTimeout(()=>{const e=new CustomEvent(xE,vE);o.addEventListener(xE,u),o.dispatchEvent(e),e.defaultPrevented||NE(t??document.body,{select:!0}),o.removeEventListener(xE,u),kE.remove(p)},0)}}var e},[o,c,u,p]);const f=kt.useCallback(e=>{if(!n&&!r)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[r,a]=function(e){const t=bE(e),n=wE(t,e),r=wE(t.reverse(),e);return[n,r]}(t);r&&a?e.shiftKey||s!==a?e.shiftKey&&s===r&&(e.preventDefault(),n&&NE(a,{select:!0})):(e.preventDefault(),n&&NE(r,{select:!0})):s===t&&e.preventDefault()}},[n,r,p.paused]);return Mt.jsx(x_.div,{tabIndex:-1,...i,ref:h,onKeyDown:f})});function bE(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function wE(e,t){for(const n of e)if(!jE(n,{upTo:t}))return n}function jE(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function NE(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}yE.displayName="FocusScope";var kE=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=SE(e,t),e.unshift(t)},remove(t){var n;e=SE(e,t),null==(n=e[0])||n.resume()}}}();function SE(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}const _E=["top","right","bottom","left"],CE=Math.min,EE=Math.max,TE=Math.round,PE=Math.floor,RE=e=>({x:e,y:e}),IE={left:"right",right:"left",bottom:"top",top:"bottom"},DE={start:"end",end:"start"};function ME(e,t,n){return EE(e,CE(t,n))}function AE(e,t){return"function"==typeof e?e(t):e}function OE(e){return e.split("-")[0]}function LE(e){return e.split("-")[1]}function FE(e){return"x"===e?"y":"x"}function zE(e){return"y"===e?"height":"width"}const WE=new Set(["top","bottom"]);function UE(e){return WE.has(OE(e))?"y":"x"}function $E(e){return FE(UE(e))}function qE(e){return e.replace(/start|end/g,e=>DE[e])}const BE=["left","right"],VE=["right","left"],HE=["top","bottom"],QE=["bottom","top"];function KE(e,t,n,r){const s=LE(e);let a=function(e,t,n){switch(e){case"top":case"bottom":return n?t?VE:BE:t?BE:VE;case"left":case"right":return t?HE:QE;default:return[]}}(OE(e),"start"===n,r);return s&&(a=a.map(e=>e+"-"+s),t&&(a=a.concat(a.map(qE)))),a}function GE(e){return e.replace(/left|right|bottom|top/g,e=>IE[e])}function YE(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function JE(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function XE(e,t,n){let{reference:r,floating:s}=e;const a=UE(t),i=$E(t),o=zE(i),l=OE(t),c="y"===a,u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[o]/2-s[o]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(LE(t)){case"start":p[i]-=h*(n&&c?-1:1);break;case"end":p[i]+=h*(n&&c?-1:1)}return p}async function ZE(e,t){var n;void 0===t&&(t={});const{x:r,y:s,platform:a,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=AE(t,e),f=YE(p),m=o[h?"floating"===d?"reference":"floating":d],g=JE(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(m)))||n?m:m.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),x="floating"===d?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),y=await(null==a.isElement?void 0:a.isElement(v))&&await(null==a.getScale?void 0:a.getScale(v))||{x:1,y:1},b=JE(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:v,strategy:l}):x);return{top:(g.top-b.top+f.top)/y.y,bottom:(b.bottom-g.bottom+f.bottom)/y.y,left:(g.left-b.left+f.left)/y.x,right:(b.right-g.right+f.right)/y.x}}function eT(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function tT(e){return _E.some(t=>e[t]>=0)}const nT=new Set(["left","top"]);function rT(){return"undefined"!=typeof window}function sT(e){return oT(e)?(e.nodeName||"").toLowerCase():"#document"}function aT(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function iT(e){var t;return null==(t=(oT(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function oT(e){return!!rT()&&(e instanceof Node||e instanceof aT(e).Node)}function lT(e){return!!rT()&&(e instanceof Element||e instanceof aT(e).Element)}function cT(e){return!!rT()&&(e instanceof HTMLElement||e instanceof aT(e).HTMLElement)}function uT(e){return!(!rT()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof aT(e).ShadowRoot)}const dT=new Set(["inline","contents"]);function hT(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=kT(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!dT.has(s)}const pT=new Set(["table","td","th"]);function fT(e){return pT.has(sT(e))}const mT=[":popover-open",":modal"];function gT(e){return mT.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const xT=["transform","translate","scale","rotate","perspective"],vT=["transform","translate","scale","rotate","perspective","filter"],yT=["paint","layout","strict","content"];function bT(e){const t=wT(),n=lT(e)?kT(e):e;return xT.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||vT.some(e=>(n.willChange||"").includes(e))||yT.some(e=>(n.contain||"").includes(e))}function wT(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const jT=new Set(["html","body","#document"]);function NT(e){return jT.has(sT(e))}function kT(e){return aT(e).getComputedStyle(e)}function ST(e){return lT(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _T(e){if("html"===sT(e))return e;const t=e.assignedSlot||e.parentNode||uT(e)&&e.host||iT(e);return uT(t)?t.host:t}function CT(e){const t=_T(e);return NT(t)?e.ownerDocument?e.ownerDocument.body:e.body:cT(t)&&hT(t)?t:CT(t)}function ET(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const s=CT(e),a=s===(null==(r=e.ownerDocument)?void 0:r.body),i=aT(s);if(a){const e=TT(i);return t.concat(i,i.visualViewport||[],hT(s)?s:[],e&&n?ET(e):[])}return t.concat(s,ET(s,[],n))}function TT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function PT(e){const t=kT(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=cT(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,o=TE(n)!==a||TE(r)!==i;return o&&(n=a,r=i),{width:n,height:r,$:o}}function RT(e){return lT(e)?e:e.contextElement}function IT(e){const t=RT(e);if(!cT(t))return RE(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=PT(t);let i=(a?TE(n.width):n.width)/r,o=(a?TE(n.height):n.height)/s;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const DT=RE(0);function MT(e){const t=aT(e);return wT()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:DT}function AT(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),a=RT(e);let i=RE(1);t&&(r?lT(r)&&(i=IT(r)):i=IT(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==aT(e))&&t}(a,n,r)?MT(a):RE(0);let l=(s.left+o.x)/i.x,c=(s.top+o.y)/i.y,u=s.width/i.x,d=s.height/i.y;if(a){const e=aT(a),t=r&&lT(r)?aT(r):r;let n=e,s=TT(n);for(;s&&r&&t!==n;){const e=IT(s),t=s.getBoundingClientRect(),r=kT(s),a=t.left+(s.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(s.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=a,c+=i,n=aT(s),s=TT(n)}}return JE({width:u,height:d,x:l,y:c})}function OT(e,t){const n=ST(e).scrollLeft;return t?t.left+n:AT(iT(e)).left+n}function LT(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:OT(e,r)),y:r.top+t.scrollTop}}const FT=new Set(["absolute","fixed"]);function zT(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=aT(e),r=iT(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,o=0,l=0;if(s){a=s.width,i=s.height;const e=wT();(!e||e&&"fixed"===t)&&(o=s.offsetLeft,l=s.offsetTop)}return{width:a,height:i,x:o,y:l}}(e,n);else if("document"===t)r=function(e){const t=iT(e),n=ST(e),r=e.ownerDocument.body,s=EE(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=EE(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+OT(e);const o=-n.scrollTop;return"rtl"===kT(r).direction&&(i+=EE(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:o}}(iT(e));else if(lT(t))r=function(e,t){const n=AT(e,!0,"fixed"===t),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=cT(e)?IT(e):RE(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:s*a.x,y:r*a.y}}(t,n);else{const n=MT(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return JE(r)}function WT(e,t){const n=_T(e);return!(n===t||!lT(n)||NT(n))&&("fixed"===kT(n).position||WT(n,t))}function UT(e,t,n){const r=cT(t),s=iT(t),a="fixed"===n,i=AT(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const l=RE(0);function c(){l.x=OT(s)}if(r||!r&&!a)if(("body"!==sT(t)||hT(s))&&(o=ST(t)),r){const e=AT(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else s&&c();a&&!r&&s&&c();const u=!s||r||a?RE(0):LT(s,o);return{x:i.left+o.scrollLeft-l.x-u.x,y:i.top+o.scrollTop-l.y-u.y,width:i.width,height:i.height}}function $T(e){return"static"===kT(e).position}function qT(e,t){if(!cT(e)||"fixed"===kT(e).position)return null;if(t)return t(e);let n=e.offsetParent;return iT(e)===n&&(n=n.ownerDocument.body),n}function BT(e,t){const n=aT(e);if(gT(e))return n;if(!cT(e)){let t=_T(e);for(;t&&!NT(t);){if(lT(t)&&!$T(t))return t;t=_T(t)}return n}let r=qT(e,t);for(;r&&fT(r)&&$T(r);)r=qT(r,t);return r&&NT(r)&&$T(r)&&!bT(r)?n:r||function(e){let t=_T(e);for(;cT(t)&&!NT(t);){if(bT(t))return t;if(gT(t))return null;t=_T(t)}return null}(e)||n}const VT={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a="fixed"===s,i=iT(r),o=!!t&&gT(t.floating);if(r===i||o&&a)return n;let l={scrollLeft:0,scrollTop:0},c=RE(1);const u=RE(0),d=cT(r);if((d||!d&&!a)&&(("body"!==sT(r)||hT(i))&&(l=ST(r)),cT(r))){const e=AT(r);c=IT(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!i||d||a?RE(0):LT(i,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:iT,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[..."clippingAncestors"===n?gT(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=ET(e,[],!1).filter(e=>lT(e)&&"body"!==sT(e)),s=null;const a="fixed"===kT(e).position;let i=a?_T(e):e;for(;lT(i)&&!NT(i);){const t=kT(i),n=bT(i);n||"fixed"!==t.position||(s=null),(a?!n&&!s:!n&&"static"===t.position&&s&&FT.has(s.position)||hT(i)&&!n&&WT(e,i))?r=r.filter(e=>e!==i):s=t,i=_T(i)}return t.set(e,r),r}(t,this._c):[].concat(n),r],i=a[0],o=a.reduce((e,n)=>{const r=zT(t,n,s);return e.top=EE(r.top,e.top),e.right=CE(r.right,e.right),e.bottom=CE(r.bottom,e.bottom),e.left=EE(r.left,e.left),e},zT(t,i,s));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:BT,getElementRects:async function(e){const t=this.getOffsetParent||BT,n=this.getDimensions,r=await n(e.floating);return{reference:UT(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=PT(e);return{width:t,height:n}},getScale:IT,isElement:lT,isRTL:function(e){return"rtl"===kT(e).direction}};function HT(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function QT(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=RT(e),u=s||a?[...c?ET(c):[],...ET(t)]:[];u.forEach(e=>{s&&e.addEventListener("scroll",n,{passive:!0}),a&&e.addEventListener("resize",n)});const d=c&&o?function(e,t){let n,r=null;const s=iT(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(o||t(),!h||!p)return;const f={rootMargin:-PE(d)+"px "+-PE(s.clientWidth-(u+h))+"px "+-PE(s.clientHeight-(d+p))+"px "+-PE(u)+"px",threshold:EE(0,CE(1,l))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!m)return i();r?i(!1,r):n=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==r||HT(c,e.getBoundingClientRect())||i(),m=!1}try{r=new IntersectionObserver(g,{...f,root:s.ownerDocument})}catch(x){r=new IntersectionObserver(g,f)}r.observe(e)}(!0),a}(c,n):null;let h,p=-1,f=null;i&&(f=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),n()}),c&&!l&&f.observe(c),f.observe(t));let m=l?AT(e):null;return l&&function t(){const r=AT(e);m&&!HT(m,r)&&n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{s&&e.removeEventListener("scroll",n),a&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const KT=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:n,platform:r,elements:s}=e,a=await(null==r.isRTL?void 0:r.isRTL(s.floating)),i=OE(n),o=LE(n),l="y"===UE(n),c=nT.has(i)?-1:1,u=a&&l?-1:1,d=AE(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&"number"==typeof f&&(p="end"===o?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return i===(null==(n=o.offset)?void 0:n.placement)&&null!=(r=o.arrow)&&r.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:{...l,placement:i}}}}},GT=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=AE(e,t),c={x:n,y:r},u=await ZE(t,l),d=UE(OE(s)),h=FE(d);let p=c[h],f=c[d];if(a){const e="y"===h?"bottom":"right";p=ME(p+u["y"===h?"top":"left"],p,p-u[e])}if(i){const e="y"===d?"bottom":"right";f=ME(f+u["y"===d?"top":"left"],f,f-u[e])}const m=o.fn({...t,[h]:p,[d]:f});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:a,[d]:i}}}}}},YT=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=AE(e,t);if(null!=(n=a.arrow)&&n.alignmentOffset)return{};const x=OE(s),v=UE(o),y=OE(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!m?[GE(o)]:function(e){const t=GE(e);return[qE(e),t,qE(t)]}(o)),j="none"!==f;!h&&j&&w.push(...KE(o,m,f,b));const N=[o,...w],k=await ZE(t,g),S=[];let _=(null==(r=a.flip)?void 0:r.overflows)||[];if(u&&S.push(k[x]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=LE(e),s=$E(e),a=zE(s);let i="x"===s?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=GE(i)),[i,GE(i)]}(s,i,b);S.push(k[e[0]],k[e[1]])}if(_=[..._,{placement:s,overflows:S}],!S.every(e=>e<=0)){var C,E;const e=((null==(C=a.flip)?void 0:C.index)||0)+1,t=N[e];if(t){if(!("alignment"===d&&v!==UE(t))||_.every(e=>e.overflows[0]>0&&UE(e.placement)===v))return{data:{index:e,overflows:_},reset:{placement:t}}}let n=null==(E=_.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:E.placement;if(!n)switch(p){case"bestFit":{var T;const e=null==(T=_.filter(e=>{if(j){const t=UE(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:T[0];e&&(n=e);break}case"initialPlacement":n=o}if(s!==n)return{reset:{placement:n}}}return{}}}},JT=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:o}=t,{apply:l=()=>{},...c}=AE(e,t),u=await ZE(t,c),d=OE(s),h=LE(s),p="y"===UE(s),{width:f,height:m}=a.floating;let g,x;"top"===d||"bottom"===d?(g=d,x=h===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(x=d,g="end"===h?"top":"bottom");const v=m-u.top-u.bottom,y=f-u.left-u.right,b=CE(m-u[g],v),w=CE(f-u[x],y),j=!t.middlewareData.shift;let N=b,k=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(k=y),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(N=v),j&&!h){const e=EE(u.left,0),t=EE(u.right,0),n=EE(u.top,0),r=EE(u.bottom,0);p?k=f-2*(0!==e||0!==t?e+t:EE(u.left,u.right)):N=m-2*(0!==n||0!==r?n+r:EE(u.top,u.bottom))}await l({...t,availableWidth:k,availableHeight:N});const S=await i.getDimensions(o.floating);return f!==S.width||m!==S.height?{reset:{rects:!0}}:{}}}},XT=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=AE(e,t);switch(r){case"referenceHidden":{const e=eT(await ZE(t,{...s,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:tT(e)}}}case"escaped":{const e=eT(await ZE(t,{...s,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:tT(e)}}}default:return{}}}}},ZT=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=AE(e,t)||{};if(null==c)return{};const d=YE(u),h={x:n,y:r},p=$E(s),f=zE(p),m=await i.getDimensions(c),g="y"===p,x=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=a.reference[f]+a.reference[p]-h[p]-a.floating[f],w=h[p]-a.reference[p],j=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let N=j?j[y]:0;N&&await(null==i.isElement?void 0:i.isElement(j))||(N=o.floating[y]||a.floating[f]);const k=b/2-w/2,S=N/2-m[f]/2-1,_=CE(d[x],S),C=CE(d[v],S),E=_,T=N-m[f]-C,P=N/2-m[f]/2+k,R=ME(E,P,T),I=!l.arrow&&null!=LE(s)&&P!==R&&a.reference[f]/2-(P<E?_:C)-m[f]/2<0,D=I?P<E?P-E:P-T:0;return{[p]:h[p]+D,data:{[p]:R,centerOffset:P-R-D,...I&&{alignmentOffset:D}},reset:I}}}),eP=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=AE(e,t),u={x:n,y:r},d=UE(s),h=FE(d);let p=u[h],f=u[d];const m=AE(o,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===h?"height":"width",t=a.reference[h]-a.floating[e]+g.mainAxis,n=a.reference[h]+a.reference[e]-g.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var x,v;const e="y"===h?"width":"height",t=nT.has(OE(s)),n=a.reference[d]-a.floating[e]+(t&&(null==(x=i.offset)?void 0:x[d])||0)+(t?0:g.crossAxis),r=a.reference[d]+a.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[d])||0)-(t?g.crossAxis:0);f<n?f=n:f>r&&(f=r)}return{[h]:p,[d]:f}}}},tP=(e,t,n)=>{const r=new Map,s={platform:VT,...n},a={...s.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,o=a.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:d}=XE(c,r,l),h=r,p={},f=0;for(let m=0;m<o.length;m++){const{name:n,fn:a}=o[m],{x:g,y:x,data:v,reset:y}=await a({x:u,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=x?x:d,p={...p,[n]:{...p[n],...v}},y&&f<=50&&(f++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:s}):y.rects),({x:u,y:d}=XE(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:p}})(e,t,{...s,platform:a})};var nP="undefined"!=typeof document?kt.useLayoutEffect:function(){};function rP(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!rP(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;0!==r--;){const n=s[r];if(("_owner"!==n||!e.$$typeof)&&!rP(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function sP(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function aP(e,t){const n=sP(e);return Math.round(t*n)/n}function iP(e){const t=kt.useRef(e);return nP(()=>{t.current=e}),t}const oP=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(s=n,{}.hasOwnProperty.call(s,"current"))?null!=n.current?ZT({element:n.current,padding:r}).fn(t):{}:n?ZT({element:n,padding:r}).fn(t):{};var s}}),lP=(e,t)=>({...KT(e),options:[e,t]}),cP=(e,t)=>({...GT(e),options:[e,t]}),uP=(e,t)=>({...eP(e),options:[e,t]}),dP=(e,t)=>({...YT(e),options:[e,t]}),hP=(e,t)=>({...JT(e),options:[e,t]}),pP=(e,t)=>({...XT(e),options:[e,t]}),fP=(e,t)=>({...oP(e),options:[e,t]});var mP=kt.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return Mt.jsx(x_.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:Mt.jsx("polygon",{points:"0,0 30,0 15,10"})})});mP.displayName="Arrow";var gP=mP,xP="Popper",[vP,yP]=u_(xP),[bP,wP]=vP(xP),jP=e=>{const{__scopePopper:t,children:n}=e,[r,s]=kt.useState(null);return Mt.jsx(bP,{scope:t,anchor:r,onAnchorChange:s,children:n})};jP.displayName=xP;var NP="PopperAnchor",kP=kt.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=wP(NP,n),i=kt.useRef(null),o=Uv(t,i);return kt.useEffect(()=>{a.onAnchorChange((null==r?void 0:r.current)||i.current)}),r?null:Mt.jsx(x_.div,{...s,ref:o})});kP.displayName=NP;var SP="PopperContent",[_P,CP]=vP(SP),EP=kt.forwardRef((e,t)=>{var n,r,s,a,i,o;const{__scopePopper:l,side:c="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:p=0,avoidCollisions:f=!0,collisionBoundary:m=[],collisionPadding:g=0,sticky:x="partial",hideWhenDetached:v=!1,updatePositionStrategy:y="optimized",onPlaced:b,...w}=e,j=wP(SP,l),[N,k]=kt.useState(null),S=Uv(t,e=>k(e)),[_,C]=kt.useState(null),E=FC(_),T=(null==E?void 0:E.width)??0,P=(null==E?void 0:E.height)??0,R=c+("center"!==d?"-"+d:""),I="number"==typeof g?g:{top:0,right:0,bottom:0,left:0,...g},D=Array.isArray(m)?m:[m],M=D.length>0,A={padding:I,boundary:D.filter(IP),altBoundary:M},{refs:O,floatingStyles:L,placement:F,isPositioned:z,middlewareData:W}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,d]=kt.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=kt.useState(r);rP(h,r)||p(r);const[f,m]=kt.useState(null),[g,x]=kt.useState(null),v=kt.useCallback(e=>{e!==j.current&&(j.current=e,m(e))},[]),y=kt.useCallback(e=>{e!==N.current&&(N.current=e,x(e))},[]),b=a||f,w=i||g,j=kt.useRef(null),N=kt.useRef(null),k=kt.useRef(u),S=null!=l,_=iP(l),C=iP(s),E=iP(c),T=kt.useCallback(()=>{if(!j.current||!N.current)return;const e={placement:t,strategy:n,middleware:h};C.current&&(e.platform=C.current),tP(j.current,N.current,e).then(e=>{const t={...e,isPositioned:!1!==E.current};P.current&&!rP(k.current,t)&&(k.current=t,$h.flushSync(()=>{d(t)}))})},[h,t,n,C,E]);nP(()=>{!1===c&&k.current.isPositioned&&(k.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);const P=kt.useRef(!1);nP(()=>(P.current=!0,()=>{P.current=!1}),[]),nP(()=>{if(b&&(j.current=b),w&&(N.current=w),b&&w){if(_.current)return _.current(b,w,T);T()}},[b,w,T,_,S]);const R=kt.useMemo(()=>({reference:j,floating:N,setReference:v,setFloating:y}),[v,y]),I=kt.useMemo(()=>({reference:b,floating:w}),[b,w]),D=kt.useMemo(()=>{const e={position:n,left:0,top:0};if(!I.floating)return e;const t=aP(I.floating,u.x),r=aP(I.floating,u.y);return o?{...e,transform:"translate("+t+"px, "+r+"px)",...sP(I.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,o,I.floating,u.x,u.y]);return kt.useMemo(()=>({...u,update:T,refs:R,elements:I,floatingStyles:D}),[u,T,R,I,D])}({strategy:"fixed",placement:R,whileElementsMounted:(...e)=>QT(...e,{animationFrame:"always"===y}),elements:{reference:j.anchor},middleware:[lP({mainAxis:u+P,alignmentAxis:h}),f&&cP({mainAxis:!0,crossAxis:!1,limiter:"partial"===x?uP():void 0,...A}),f&&dP({...A}),hP({...A,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:s,height:a}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${n}px`),i.setProperty("--radix-popper-available-height",`${r}px`),i.setProperty("--radix-popper-anchor-width",`${s}px`),i.setProperty("--radix-popper-anchor-height",`${a}px`)}}),_&&fP({element:_,padding:p}),DP({arrowWidth:T,arrowHeight:P}),v&&pP({strategy:"referenceHidden",...A})]}),[U,$]=MP(F),q=y_(b);p_(()=>{z&&(null==q||q())},[z,q]);const B=null==(n=W.arrow)?void 0:n.x,V=null==(r=W.arrow)?void 0:r.y,H=0!==(null==(s=W.arrow)?void 0:s.centerOffset),[Q,K]=kt.useState();return p_(()=>{N&&K(window.getComputedStyle(N).zIndex)},[N]),Mt.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:z?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[null==(a=W.transformOrigin)?void 0:a.x,null==(i=W.transformOrigin)?void 0:i.y].join(" "),...(null==(o=W.hide)?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Mt.jsx(_P,{scope:l,placedSide:U,onArrowChange:C,arrowX:B,arrowY:V,shouldHideArrow:H,children:Mt.jsx(x_.div,{"data-side":U,"data-align":$,...w,ref:S,style:{...w.style,animation:z?void 0:"none"}})})})});EP.displayName=SP;var TP="PopperArrow",PP={top:"bottom",right:"left",bottom:"top",left:"right"},RP=kt.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,s=CP(TP,n),a=PP[s.placedSide];return Mt.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:Mt.jsx(gP,{...r,ref:t,style:{...r.style,display:"block"}})})});function IP(e){return null!==e}RP.displayName=TP;var DP=e=>({name:"transformOrigin",options:e,fn(t){var n,r,s;const{placement:a,rects:i,middlewareData:o}=t,l=0!==(null==(n=o.arrow)?void 0:n.centerOffset),c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,h]=MP(a),p={start:"0%",center:"50%",end:"100%"}[h],f=((null==(r=o.arrow)?void 0:r.x)??0)+c/2,m=((null==(s=o.arrow)?void 0:s.y)??0)+u/2;let g="",x="";return"bottom"===d?(g=l?p:`${f}px`,x=-u+"px"):"top"===d?(g=l?p:`${f}px`,x=`${i.floating.height+u}px`):"right"===d?(g=-u+"px",x=l?p:`${m}px`):"left"===d&&(g=`${i.floating.width+u}px`,x=l?p:`${m}px`),{data:{x:g,y:x}}}});function MP(e){const[t,n="center"]=e.split("-");return[t,n]}var AP=jP,OP=kP,LP=EP,FP=RP,zP=kt.forwardRef((e,t)=>{var n;const{container:r,...s}=e,[a,i]=kt.useState(!1);p_(()=>i(!0),[]);const o=r||a&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return o?qh.createPortal(Mt.jsx(x_.div,{...s,ref:t}),o):null});zP.displayName="Portal";var WP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});kt.forwardRef((e,t)=>Mt.jsx(x_.span,{...e,ref:t,style:{...WP,...e.style}})).displayName="VisuallyHidden";var UP=new WeakMap,$P=new WeakMap,qP={},BP=0,VP=function(e){return e&&(e.host||VP(e.parentNode))},HP=function(e,t,n,r){var s=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=VP(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);qP[n]||(qP[n]=new WeakMap);var a=qP[n],i=[],o=new Set,l=new Set(s),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};s.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(r),s=null!==t&&"false"!==t,l=(UP.get(e)||0)+1,c=(a.get(e)||0)+1;UP.set(e,l),a.set(e,c),i.push(e),1===l&&s&&$P.set(e,!0),1===c&&e.setAttribute(n,"true"),s||e.setAttribute(r,"true")}catch(vW){console.error("aria-hidden: cannot operate on ",e,vW)}})};return u(t),o.clear(),BP++,function(){i.forEach(function(e){var t=UP.get(e)-1,s=a.get(e)-1;UP.set(e,t),a.set(e,s),t||($P.has(e)||e.removeAttribute(r),$P.delete(e)),s||e.removeAttribute(n)}),--BP||(UP=new WeakMap,UP=new WeakMap,$P=new WeakMap,qP={})}},QP=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),HP(r,s,n,"aria-hidden")):function(){return null}},KP=function(){return KP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},KP.apply(this,arguments)};function GP(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}"function"==typeof SuppressedError&&SuppressedError;var YP="right-scroll-bar-position",JP="width-before-scroll-bar";function XP(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var ZP="undefined"!=typeof window?kt.useLayoutEffect:kt.useEffect,eR=new WeakMap;function tR(e,t){var n,r,s,a=(n=null,r=function(t){return e.forEach(function(e){return XP(e,t)})},(s=kt.useState(function(){return{value:n,callback:r,facade:{get current(){return s.value},set current(e){var t=s.value;t!==e&&(s.value=e,s.callback(e,t))}}}})[0]).callback=r,s.facade);return ZP(function(){var t=eR.get(a);if(t){var n=new Set(t),r=new Set(e),s=a.current;n.forEach(function(e){r.has(e)||XP(e,null)}),r.forEach(function(e){n.has(e)||XP(e,s)})}eR.set(a,e)},[e]),a}function nR(e){return e}var rR=function(e){var t=e.sideCar,n=GP(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return kt.createElement(r,KP({},n))};rR.isSideCarExport=!0;var sR=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=nR);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var s=t(e,r);return n.push(s),function(){n=n.filter(function(e){return e!==s})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var s=n;n=[],s.forEach(e),t=n}var a=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(a)};i(),n={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=KP({async:!0,ssr:!1},e),t}(),aR=function(){},iR=kt.forwardRef(function(e,t){var n=kt.useRef(null),r=kt.useState({onScrollCapture:aR,onWheelCapture:aR,onTouchMoveCapture:aR}),s=r[0],a=r[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,p=e.noRelative,f=e.noIsolation,m=e.inert,g=e.allowPinchZoom,x=e.as,v=void 0===x?"div":x,y=e.gapMode,b=GP(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,j=tR([n,t]),N=KP(KP({},b),s);return kt.createElement(kt.Fragment,null,u&&kt.createElement(w,{sideCar:sR,removeScrollBar:c,shards:d,noRelative:p,noIsolation:f,inert:m,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:y}),i?kt.cloneElement(kt.Children.only(o),KP(KP({},N),{ref:j})):kt.createElement(v,KP({},N,{className:l,ref:j}),o))});iR.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},iR.classNames={fullWidth:JP,zeroRight:YP};function oR(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var lR=function(){var e=0,t=null;return{add:function(n){var r,s;0==e&&(t=oR())&&(s=n,(r=t).styleSheet?r.styleSheet.cssText=s:r.appendChild(document.createTextNode(s)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},cR=function(){var e,t=(e=lR(),function(t,n){kt.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},uR={left:0,top:0,right:0,gap:0},dR=function(e){return parseInt(e||"",10)||0},hR=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return uR;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],s=t["padding"===e?"paddingRight":"marginRight"];return[dR(n),dR(r),dR(s)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},pR=cR(),fR="data-scroll-locked",mR=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(fR,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(s,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(YP," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(JP," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(YP," .").concat(YP," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(JP," .").concat(JP," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(fR,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},gR=function(){var e=parseInt(document.body.getAttribute(fR)||"0",10);return isFinite(e)?e:0},xR=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=void 0===r?"margin":r;kt.useEffect(function(){return document.body.setAttribute(fR,(gR()+1).toString()),function(){var e=gR()-1;e<=0?document.body.removeAttribute(fR):document.body.setAttribute(fR,e.toString())}},[]);var a=kt.useMemo(function(){return hR(s)},[s]);return kt.createElement(pR,{styles:mR(a,!t,s,n?"":"!important")})},vR=!1;if("undefined"!=typeof window)try{var yR=Object.defineProperty({},"passive",{get:function(){return vR=!0,!0}});window.addEventListener("test",yR,yR),window.removeEventListener("test",yR,yR)}catch(yW){vR=!1}var bR=!!vR&&{passive:!1},wR=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},jR=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),NR(e,r)){var s=kR(e,r);if(s[1]>s[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},NR=function(e,t){return"v"===e?function(e){return wR(e,"overflowY")}(t):function(e){return wR(e,"overflowX")}(t)},kR=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},SR=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_R=function(e){return[e.deltaX,e.deltaY]},CR=function(e){return e&&"current"in e?e.current:e},ER=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},TR=0,PR=[];function RR(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const IR=(DR=function(e){var t=kt.useRef([]),n=kt.useRef([0,0]),r=kt.useRef(),s=kt.useState(TR++)[0],a=kt.useState(cR)[0],i=kt.useRef(e);kt.useEffect(function(){i.current=e},[e]),kt.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=function(e,t,n){if(n||2===arguments.length)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(CR),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=kt.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var s,a=SR(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=jR(d,u);if(!h)return!0;if(h?s=d:(s="v"===d?"h":"v",h=jR(d,u)),!h)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=s),!s)return!0;var p=r.current||s;return function(e,t,n,r){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=s*r,i=n.target,o=t.contains(i),l=!1,c=a>0,u=0,d=0;do{if(!i)break;var h=kR(e,i),p=h[0],f=h[1]-h[2]-s*p;(p||f)&&NR(e,i)&&(u+=f,d+=p);var m=i.parentNode;i=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!o&&i!==document.body||o&&(t.contains(i)||t===i));return(c&&Math.abs(u)<1||!c&&Math.abs(d)<1)&&(l=!0),l}(p,t,e,"h"===p?l:c)},[]),l=kt.useCallback(function(e){var n=e;if(PR.length&&PR[PR.length-1]===a){var r="deltaY"in n?_R(n):SR(n),s=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,s=r,t[0]===s[0]&&t[1]===s[1]);var t,s})[0];if(s&&s.should)n.cancelable&&n.preventDefault();else if(!s){var l=(i.current.shards||[]).map(CR).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?o(n,l[0]):!i.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=kt.useCallback(function(e,n,r,s){var a={name:e,delta:n,target:r,should:s,shadowParent:RR(r)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),u=kt.useCallback(function(e){n.current=SR(e),r.current=void 0},[]),d=kt.useCallback(function(t){c(t.type,_R(t),t.target,o(t,e.lockRef.current))},[]),h=kt.useCallback(function(t){c(t.type,SR(t),t.target,o(t,e.lockRef.current))},[]);kt.useEffect(function(){return PR.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,bR),document.addEventListener("touchmove",l,bR),document.addEventListener("touchstart",u,bR),function(){PR=PR.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,bR),document.removeEventListener("touchmove",l,bR),document.removeEventListener("touchstart",u,bR)}},[]);var p=e.removeScrollBar,f=e.inert;return kt.createElement(kt.Fragment,null,f?kt.createElement(a,{styles:ER(s)}):null,p?kt.createElement(xR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},sR.useMedium(DR),rR);var DR,MR=kt.forwardRef(function(e,t){return kt.createElement(iR,KP({},e,{ref:t,sideCar:IR}))});MR.classNames=iR.classNames;var AR=[" ","Enter","ArrowUp","ArrowDown"],OR=[" ","Enter"],LR="Select",[FR,zR,WR]=h_(LR),[UR,$R]=u_(LR,[WR,yP]),qR=yP(),[BR,VR]=UR(LR),[HR,QR]=UR(LR),KR=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:p,form:f}=e,m=qR(t),[g,x]=kt.useState(null),[v,y]=kt.useState(null),[b,w]=kt.useState(!1),j=N_(c),[N,k]=w_({prop:r,defaultProp:s??!1,onChange:a,caller:LR}),[S,_]=w_({prop:i,defaultProp:o,onChange:l,caller:LR}),C=kt.useRef(null),E=!g||(f||!!g.closest("form")),[T,P]=kt.useState(new Set),R=Array.from(T).map(e=>e.props.value).join(";");return Mt.jsx(AP,{...m,children:Mt.jsxs(BR,{required:p,scope:t,trigger:g,onTriggerChange:x,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:g_(),value:S,onValueChange:_,open:N,onOpenChange:k,dir:j,triggerPointerDownPosRef:C,disabled:h,children:[Mt.jsx(FR.Provider,{scope:t,children:Mt.jsx(HR,{scope:e.__scopeSelect,onNativeOptionAdd:kt.useCallback(e=>{P(t=>new Set(t).add(e))},[]),onNativeOptionRemove:kt.useCallback(e=>{P(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),E?Mt.jsxs(MI,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:S,onChange:e=>_(e.target.value),disabled:h,form:f,children:[void 0===S?Mt.jsx("option",{value:""}):null,Array.from(T)]},R):null]})})};KR.displayName=LR;var GR="SelectTrigger",YR=kt.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=qR(n),i=VR(GR,n),o=i.disabled||r,l=Uv(t,i.onTriggerChange),c=zR(n),u=kt.useRef("touch"),[d,h,p]=OI(e=>{const t=c().filter(e=>!e.disabled),n=t.find(e=>e.value===i.value),r=LI(t,e,n);void 0!==r&&i.onValueChange(r.value)}),f=e=>{o||(i.onOpenChange(!0),p()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return Mt.jsx(OP,{asChild:!0,...a,children:Mt.jsx(x_.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":AI(i.value)?"":void 0,...s,ref:l,onClick:c_(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==u.current&&f(e)}),onPointerDown:c_(s.onPointerDown,e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(f(e),e.preventDefault())}),onKeyDown:c_(s.onKeyDown,e=>{const t=""!==d.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||AR.includes(e.key)&&(f(),e.preventDefault())})})})});YR.displayName=GR;var JR="SelectValue",XR=kt.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:i="",...o}=e,l=VR(JR,n),{onValueNodeHasChildrenChange:c}=l,u=void 0!==a,d=Uv(t,l.onValueNodeChange);return p_(()=>{c(u)},[c,u]),Mt.jsx(x_.span,{...o,ref:d,style:{pointerEvents:"none"},children:AI(l.value)?Mt.jsx(Mt.Fragment,{children:i}):a})});XR.displayName=JR;var ZR=kt.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return Mt.jsx(x_.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});ZR.displayName="SelectIcon";var eI=e=>Mt.jsx(zP,{asChild:!0,...e});eI.displayName="SelectPortal";var tI="SelectContent",nI=kt.forwardRef((e,t)=>{const n=VR(tI,e.__scopeSelect),[r,s]=kt.useState();if(p_(()=>{s(new DocumentFragment)},[]),!n.open){const t=r;return t?$h.createPortal(Mt.jsx(sI,{scope:e.__scopeSelect,children:Mt.jsx(FR.Slot,{scope:e.__scopeSelect,children:Mt.jsx("div",{children:e.children})})}),t):null}return Mt.jsx(oI,{...e,ref:t})});nI.displayName=tI;var rI=10,[sI,aI]=UR(tI),iI=$v("SelectContent.RemoveScroll"),oI=kt.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:f,hideWhenDetached:m,avoidCollisions:g,...x}=e,v=VR(tI,n),[y,b]=kt.useState(null),[w,j]=kt.useState(null),N=Uv(t,e=>b(e)),[k,S]=kt.useState(null),[_,C]=kt.useState(null),E=zR(n),[T,P]=kt.useState(!1),R=kt.useRef(!1);kt.useEffect(()=>{if(y)return QP(y)},[y]),fE();const I=kt.useCallback(e=>{const[t,...n]=E().map(e=>e.ref.current),[r]=n.slice(-1),s=document.activeElement;for(const a of e){if(a===s)return;if(null==a||a.scrollIntoView({block:"nearest"}),a===t&&w&&(w.scrollTop=0),a===r&&w&&(w.scrollTop=w.scrollHeight),null==a||a.focus(),document.activeElement!==s)return}},[E,w]),D=kt.useCallback(()=>I([k,y]),[I,k,y]);kt.useEffect(()=>{T&&D()},[T,D]);const{onOpenChange:M,triggerPointerDownPosRef:A}=v;kt.useEffect(()=>{if(y){let e={x:0,y:0};const t=t=>{var n,r;e={x:Math.abs(Math.round(t.pageX)-((null==(n=A.current)?void 0:n.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=A.current)?void 0:r.y)??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():y.contains(n.target)||M(!1),document.removeEventListener("pointermove",t),A.current=null};return null!==A.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[y,M,A]),kt.useEffect(()=>{const e=()=>M(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[M]);const[O,L]=OI(e=>{const t=E().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=LI(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),F=kt.useCallback((e,t,n)=>{const r=!R.current&&!n;(void 0!==v.value&&v.value===t||r)&&(S(e),r&&(R.current=!0))},[v.value]),z=kt.useCallback(()=>null==y?void 0:y.focus(),[y]),W=kt.useCallback((e,t,n)=>{const r=!R.current&&!n;(void 0!==v.value&&v.value===t||r)&&C(e)},[v.value]),U="popper"===r?cI:lI,$=U===cI?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:f,hideWhenDetached:m,avoidCollisions:g}:{};return Mt.jsx(sI,{scope:n,content:y,viewport:w,onViewportChange:j,itemRefCallback:F,selectedItem:k,onItemLeave:z,itemTextRefCallback:W,focusSelectedItem:D,selectedItemText:_,position:r,isPositioned:T,searchRef:O,children:Mt.jsx(MR,{as:iI,allowPinchZoom:!0,children:Mt.jsx(yE,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:c_(s,e=>{var t;null==(t=v.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:Mt.jsx(uE,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:Mt.jsx(U,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:e=>e.preventDefault(),...x,...$,onPlaced:()=>P(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:c_(x.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||L(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=E().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>I(t)),e.preventDefault()}})})})})})})});oI.displayName="SelectContentImpl";var lI=kt.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=VR(tI,n),i=aI(tI,n),[o,l]=kt.useState(null),[c,u]=kt.useState(null),d=Uv(t,e=>u(e)),h=zR(n),p=kt.useRef(!1),f=kt.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:x,focusSelectedItem:v}=i,y=kt.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&c&&m&&g&&x){const e=a.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),n=a.valueNode.getBoundingClientRect(),s=x.getBoundingClientRect();if("rtl"!==a.dir){const r=s.left-t.left,a=n.left-r,i=e.left-a,l=e.width+i,c=Math.max(l,t.width),u=window.innerWidth-rI,d=rE(a,[rI,Math.max(rI,u-c)]);o.style.minWidth=l+"px",o.style.left=d+"px"}else{const r=t.right-s.right,a=window.innerWidth-n.right-r,i=window.innerWidth-e.right-a,l=e.width+i,c=Math.max(l,t.width),u=window.innerWidth-rI,d=rE(a,[rI,Math.max(rI,u-c)]);o.style.minWidth=l+"px",o.style.right=d+"px"}const i=h(),l=window.innerHeight-2*rI,u=m.scrollHeight,d=window.getComputedStyle(c),f=parseInt(d.borderTopWidth,10),v=parseInt(d.paddingTop,10),y=parseInt(d.borderBottomWidth,10),b=f+v+u+parseInt(d.paddingBottom,10)+y,w=Math.min(5*g.offsetHeight,b),j=window.getComputedStyle(m),N=parseInt(j.paddingTop,10),k=parseInt(j.paddingBottom,10),S=e.top+e.height/2-rI,_=l-S,C=g.offsetHeight/2,E=f+v+(g.offsetTop+C),T=b-E;if(E<=S){const e=i.length>0&&g===i[i.length-1].ref.current;o.style.bottom="0px";const t=c.clientHeight-m.offsetTop-m.offsetHeight,n=E+Math.max(_,C+(e?k:0)+t+y);o.style.height=n+"px"}else{const e=i.length>0&&g===i[0].ref.current;o.style.top="0px";const t=Math.max(S,f+m.offsetTop+(e?N:0)+C)+T;o.style.height=t+"px",m.scrollTop=E-S+m.offsetTop}o.style.margin=`${rI}px 0`,o.style.minHeight=w+"px",o.style.maxHeight=l+"px",null==r||r(),requestAnimationFrame(()=>p.current=!0)}},[h,a.trigger,a.valueNode,o,c,m,g,x,a.dir,r]);p_(()=>y(),[y]);const[b,w]=kt.useState();p_(()=>{c&&w(window.getComputedStyle(c).zIndex)},[c]);const j=kt.useCallback(e=>{e&&!0===f.current&&(y(),null==v||v(),f.current=!1)},[y,v]);return Mt.jsx(uI,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:j,children:Mt.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:Mt.jsx(x_.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});lI.displayName="SelectItemAlignedPosition";var cI=kt.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=rI,...a}=e,i=qR(n);return Mt.jsx(LP,{...i,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});cI.displayName="SelectPopperPosition";var[uI,dI]=UR(tI,{}),hI="SelectViewport",pI=kt.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=aI(hI,n),i=dI(hI,n),o=Uv(t,a.onViewportChange),l=kt.useRef(0);return Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),Mt.jsx(FR.Slot,{scope:n,children:Mt.jsx(x_.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:c_(s.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=i;if((null==r?void 0:r.current)&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*rI,s=parseFloat(n.style.minHeight),a=parseFloat(n.style.height),i=Math.max(s,a);if(i<r){const s=i+e,a=Math.min(r,s),o=s-a;n.style.height=a+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});pI.displayName=hI;var fI="SelectGroup",[mI,gI]=UR(fI);kt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=g_();return Mt.jsx(mI,{scope:n,id:s,children:Mt.jsx(x_.div,{role:"group","aria-labelledby":s,...r,ref:t})})}).displayName=fI;var xI="SelectLabel",vI=kt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=gI(xI,n);return Mt.jsx(x_.div,{id:s.id,...r,ref:t})});vI.displayName=xI;var yI="SelectItem",[bI,wI]=UR(yI),jI=kt.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...i}=e,o=VR(yI,n),l=aI(yI,n),c=o.value===r,[u,d]=kt.useState(a??""),[h,p]=kt.useState(!1),f=Uv(t,e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,r,s)}),m=g_(),g=kt.useRef("touch"),x=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(""===r)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Mt.jsx(bI,{scope:n,value:r,disabled:s,textId:m,isSelected:c,onItemTextChange:kt.useCallback(e=>{d(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:Mt.jsx(FR.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:Mt.jsx(x_.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:f,onFocus:c_(i.onFocus,()=>p(!0)),onBlur:c_(i.onBlur,()=>p(!1)),onClick:c_(i.onClick,()=>{"mouse"!==g.current&&x()}),onPointerUp:c_(i.onPointerUp,()=>{"mouse"===g.current&&x()}),onPointerDown:c_(i.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:c_(i.onPointerMove,e=>{var t;g.current=e.pointerType,s?null==(t=l.onItemLeave)||t.call(l):"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:c_(i.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))}),onKeyDown:c_(i.onKeyDown,e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(OR.includes(e.key)&&x()," "===e.key&&e.preventDefault())})})})})});jI.displayName=yI;var NI="SelectItemText",kI=kt.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,i=VR(NI,n),o=aI(NI,n),l=wI(NI,n),c=QR(NI,n),[u,d]=kt.useState(null),h=Uv(t,e=>d(e),l.onItemTextChange,e=>{var t;return null==(t=o.itemTextRefCallback)?void 0:t.call(o,e,l.value,l.disabled)}),p=null==u?void 0:u.textContent,f=kt.useMemo(()=>Mt.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=c;return p_(()=>(m(f),()=>g(f)),[m,g,f]),Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(x_.span,{id:l.textId,...a,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?$h.createPortal(a.children,i.valueNode):null]})});kI.displayName=NI;var SI="SelectItemIndicator",_I=kt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return wI(SI,n).isSelected?Mt.jsx(x_.span,{"aria-hidden":!0,...r,ref:t}):null});_I.displayName=SI;var CI="SelectScrollUpButton",EI=kt.forwardRef((e,t)=>{const n=aI(CI,e.__scopeSelect),r=dI(CI,e.__scopeSelect),[s,a]=kt.useState(!1),i=Uv(t,r.onScrollButtonChange);return p_(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;a(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?Mt.jsx(RI,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});EI.displayName=CI;var TI="SelectScrollDownButton",PI=kt.forwardRef((e,t)=>{const n=aI(TI,e.__scopeSelect),r=dI(TI,e.__scopeSelect),[s,a]=kt.useState(!1),i=Uv(t,r.onScrollButtonChange);return p_(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;a(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),s?Mt.jsx(RI,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});PI.displayName=TI;var RI=kt.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=aI("SelectScrollButton",n),i=kt.useRef(null),o=zR(n),l=kt.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return kt.useEffect(()=>()=>l(),[l]),p_(()=>{var e;const t=o().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[o]),Mt.jsx(x_.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:c_(s.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(r,50))}),onPointerMove:c_(s.onPointerMove,()=>{var e;null==(e=a.onItemLeave)||e.call(a),null===i.current&&(i.current=window.setInterval(r,50))}),onPointerLeave:c_(s.onPointerLeave,()=>{l()})})}),II=kt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Mt.jsx(x_.div,{"aria-hidden":!0,...r,ref:t})});II.displayName="SelectSeparator";var DI="SelectArrow";kt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=qR(n),a=VR(DI,n),i=aI(DI,n);return a.open&&"popper"===i.position?Mt.jsx(FP,{...s,...r,ref:t}):null}).displayName=DI;var MI=kt.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=kt.useRef(null),a=Uv(r,s),i=LC(t);return kt.useEffect(()=>{const e=s.current;if(!e)return;const n=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==t&&r){const n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[i,t]),Mt.jsx(x_.select,{...n,style:{...WP,...n.style},ref:a,defaultValue:t})});function AI(e){return""===e||void 0===e}function OI(e){const t=y_(e),n=kt.useRef(""),r=kt.useRef(0),s=kt.useCallback(e=>{const s=n.current+e;t(s),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(s)},[t]),a=kt.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return kt.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function LI(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=(i=e,o=Math.max(s,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===r.length&&(a=a.filter(e=>e!==n));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}MI.displayName="SelectBubbleInput";var FI=KR,zI=YR,WI=XR,UI=ZR,$I=eI,qI=nI,BI=pI,VI=vI,HI=jI,QI=kI,KI=_I,GI=EI,YI=PI,JI=II;function XI(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}var ZI=["color"],eD=kt.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,s=XI(e,ZI);return kt.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),kt.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),tD=["color"],nD=kt.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,s=XI(e,tD);return kt.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),kt.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),rD=["color"],sD=kt.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,s=XI(e,rD);return kt.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),kt.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),aD=["color"],iD=kt.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,s=XI(e,aD);return kt.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),kt.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const oD=FI,lD=WI,cD=kt.forwardRef(({className:e,children:t,...n},r)=>Mt.jsxs(zI,{ref:r,className:dx("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,Mt.jsx(UI,{asChild:!0,children:Mt.jsx(nD,{className:"h-4 w-4 opacity-50"})})]}));cD.displayName=zI.displayName;const uD=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(GI,{ref:n,className:dx("flex cursor-default items-center justify-center py-1",e),...t,children:Mt.jsx(sD,{className:"h-4 w-4"})}));uD.displayName=GI.displayName;const dD=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(YI,{ref:n,className:dx("flex cursor-default items-center justify-center py-1",e),...t,children:Mt.jsx(nD,{className:"h-4 w-4"})}));dD.displayName=YI.displayName;const hD=kt.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>Mt.jsx($I,{children:Mt.jsxs(qI,{ref:s,className:dx("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[Mt.jsx(uD,{}),Mt.jsx(BI,{className:dx("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),Mt.jsx(dD,{})]})}));hD.displayName=qI.displayName;kt.forwardRef(({className:e,...t},n)=>Mt.jsx(VI,{ref:n,className:dx("px-2 py-1.5 text-sm font-semibold",e),...t})).displayName=VI.displayName;const pD=kt.forwardRef(({className:e,children:t,...n},r)=>Mt.jsxs(HI,{ref:r,className:dx("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[Mt.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:Mt.jsx(KI,{children:Mt.jsx(eD,{className:"h-4 w-4"})})}),Mt.jsx(QI,{children:t})]}));pD.displayName=HI.displayName;kt.forwardRef(({className:e,...t},n)=>Mt.jsx(JI,{ref:n,className:dx("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=JI.displayName;const fD={"GPT-5.1":"databricks-gpt-5-1","Gemini 3 Pro":"databricks-gemini-3-pro","Gemini 2.5 Flash":"databricks-gemini-2-5-flash","Claude Sonnet 4.5":"databricks-claude-sonnet-4-5","Claude Sonnet 4":"databricks-claude-sonnet-4","Llama 4 Maverick":"databricks-llama-4-maverick","Llama 3.3 70B Instruct":"databricks-meta-llama-3-3-70b-instruct"},mD=Object.fromEntries(Object.entries(fD).map(([e,t])=>[t,e]));function gD(e){return fD[e]||e}function xD(e){return mD[e]||e}function vD(e=!1){return[{value:"GPT-5.1",label:"GPT-5.1",description:"OpenAI GPT-5.1 model",disabled:!e,requiresDatabricks:!0},{value:"Gemini 3 Pro",label:"Gemini 3 Pro",description:"Google Gemini 3 Pro model",disabled:!e,requiresDatabricks:!0},{value:"Gemini 2.5 Flash",label:"Gemini 2.5 Flash",description:"Google Gemini 2.5 Flash model",disabled:!e,requiresDatabricks:!0},{value:"Claude Sonnet 4.5",label:"Claude Sonnet 4.5",description:"Anthropic Claude Sonnet 4.5 model",disabled:!e,requiresDatabricks:!0},{value:"Claude Sonnet 4",label:"Claude Sonnet 4",description:"Anthropic Claude Sonnet 4 model",disabled:!e,requiresDatabricks:!0},{value:"Llama 4 Maverick",label:"Llama 4 Maverick",description:"Meta Llama 4 Maverick model",disabled:!e,requiresDatabricks:!0},{value:"Llama 3.3 70B Instruct",label:"Llama 3.3 70B Instruct",description:"Meta Llama 3.3 70B Instruct model",disabled:!e,requiresDatabricks:!0}]}function yD(e){const t=function(e,t=!1){return vD(t).find(t=>t.value===e)}(e);return(null==t?void 0:t.label)||e}function bD({currentPage:e,totalPages:t,totalItems:n,itemsPerPage:r,onPageChange:s,onItemsPerPageChange:a,showItemsPerPageSelector:i=!1,showQuickJump:o=!1,showKeyboardShortcuts:l=!1,className:c=""}){const[u,d]=kt.useState("");kt.useEffect(()=>{if(!l)return;const n=n=>{if(!(n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement))switch(n.key){case"ArrowLeft":e>1&&(n.preventDefault(),s(e-1));break;case"ArrowRight":e<t&&(n.preventDefault(),s(e+1));break;case"Home":e>1&&(n.preventDefault(),s(1));break;case"End":e<t&&(n.preventDefault(),s(t))}};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e,t,s,l]);const h=()=>{const e=parseInt(u);e>=1&&e<=t&&(s(e),d(""))},p=(()=>{const n=[],r=[];for(let s=Math.max(2,e-2);s<=Math.min(t-1,e+2);s++)n.push(s);return e-2>2?r.push(1,"..."):r.push(1),r.push(...n),e+2<t-1?r.push("...",t):t>1&&r.push(t),r})(),f=(e-1)*r+1,m=Math.min(e*r,n);return t<=1?null:Mt.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-4 ${c}`,children:[i&&a&&Mt.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Mt.jsx("span",{children:"Show"}),Mt.jsx("select",{value:r,onChange:e=>a(Number(e.target.value)),className:"border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[10,25,50,100].map(e=>Mt.jsx("option",{value:e,children:e},e))}),Mt.jsx("span",{children:"per page"})]}),Mt.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",f," to ",m," of ",n," results",l&&Mt.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Use   arrows, Home, End for navigation"})]}),o&&Mt.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Mt.jsx("span",{children:"Go to page:"}),Mt.jsx(_C,{type:"number",min:1,max:t,value:u,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&h()},className:"w-16 h-8 text-center text-sm",placeholder:e.toString()}),Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:h,disabled:!u||parseInt(u)<1||parseInt(u)>t,className:"h-8 px-2 text-xs",children:"Go"})]}),Mt.jsxs("div",{className:"flex items-center gap-1",children:[Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:()=>s(1),disabled:1===e,className:"h-8 w-8 p-0",title:"First page (Home)",children:Mt.jsx(Ox,{className:"h-4 w-4"})}),Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:()=>s(e-1),disabled:1===e,className:"h-8 w-8 p-0",title:"Previous page ()",children:Mt.jsx(Dx,{className:"h-4 w-4"})}),p.map((t,n)=>Mt.jsx(St.Fragment,{children:"..."===t?Mt.jsx("span",{className:"px-3 py-1 text-gray-500",children:"..."}):Mt.jsx(Gv,{variant:e===t?"default":"outline",size:"sm",onClick:()=>s(t),className:"h-8 w-8 p-0",title:`Go to page ${t}`,children:t})},n)),Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:()=>s(e+1),disabled:e===t,className:"h-8 w-8 p-0",title:"Next page ()",children:Mt.jsx(Mx,{className:"h-4 w-4"})}),Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:()=>s(t),disabled:e===t,className:"h-8 w-8 p-0",title:"Last page (End)",children:Mt.jsx(Lx,{className:"h-4 w-4"})})]})]})}function wD(){const{workshopId:e}=Ym(),{user:t}=Bm();Hm();const{data:n}=rg(e),{data:r}=function(e){return Kp({queryKey:["original-traces",e],queryFn:async()=>{const t=await fetch(`/workshops/${e}/original-traces`);if(!t.ok)throw new Error("Failed to fetch original traces");return t.json()},enabled:!!e,staleTime:0,gcTime:3e5})}(e),s=function(e){const t=$p();return Gp({mutationFn:async()=>{const t=await fetch(`/workshops/${e}/aggregate-all-feedback`,{method:"POST"});if(!t.ok)throw new Error("Failed to aggregate feedback");return t.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["traces",e]}),t.invalidateQueries({queryKey:["traces-for-alignment",e]})}})}(e),a=$p(),[i,o]=kt.useState([]),[l,c]=kt.useState(""),[u,d]=kt.useState(null),[h,p]=kt.useState("GPT-5.1"),[f,m]=kt.useState("GPT-5.1"),[g,x]=kt.useState([]),[v,y]=kt.useState(null),[b,w]=kt.useState(null),[j,N]=kt.useState([]),[k,S]=kt.useState(null),_=(null==b?void 0:b.question)?PC(b.question):[],C=_.length>0?_[0].judgeType:(null==b?void 0:b.judge_type)||"likert",E=(null==b?void 0:b.binary_labels)||{pass:"Pass",fail:"Fail"},[T,P]=kt.useState(""),[R,I]=kt.useState(!1),[D,M]=kt.useState(!1),[A,O]=kt.useState(null),[L,F]=kt.useState(1),[z,W]=kt.useState(10),[U,$]=kt.useState(!1),[q,B]=kt.useState(null),[V,H]=kt.useState(null),[Q,K]=kt.useState(!1),[G,Y]=kt.useState(!1),[J,X]=kt.useState(!1),[Z,ee]=kt.useState([]),[te,ne]=kt.useState(null),[re,se]=kt.useState(!1),[ae,ie]=kt.useState("mlflow"),[oe,le]=kt.useState("databricks-claude-sonnet-4-5"),ce=kt.useMemo(()=>{if((null==n?void 0:n.judge_name)&&"workshop_judge"!==n.judge_name)return n.judge_name;if(null==b?void 0:b.question){const e=PC(b.question);if(e.length>0&&e[0].title){return`${e[0].title.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"")}_judge`}}return"workshop_judge"},[null==n?void 0:n.judge_name,null==b?void 0:b.question]),ue=kt.useMemo(()=>e?`judge-alignment-logs-${e}`:"judge-alignment-logs",[e]),de=kt.useCallback(e=>{ee(t=>{const n="function"==typeof e?e(t):e;try{localStorage.setItem(ue,JSON.stringify(n))}catch(r){}return n})},[ue]);kt.useEffect(()=>{if(ue)try{const e=localStorage.getItem(ue);if(e){const t=JSON.parse(e);Array.isArray(t)?ee(t):Array.isArray(null==t?void 0:t.logs)&&ee(t.logs)}}catch(e){}},[ue]);const he=kt.useMemo(()=>{if(!(null==j?void 0:j.length))return 0;return new Set(j.filter(e=>null!==e.rating&&void 0!==e.rating).map(e=>e.trace_id)).size},[j]),pe=e=>{let t=e||"";const n=/{input}|{{\s*inputs\s*}}/i.test(t),r=/{output}|{{\s*outputs\s*}}/i.test(t);return n||(t+=(t.trim().length?"\n\n":"")+"Input: {input}"),r||(t+="\nOutput: {output}"),t};kt.useEffect(()=>{if((null==b?void 0:b.judge_type)&&!l.trim()&&!i.length){const e=PC(b.question),t=e.length>0?e[0].judgeType:(null==b?void 0:b.judge_type)||"likert";c(RC[t]),P(RC[t])}},[null==b?void 0:b.question,null==b?void 0:b.judge_type,i.length]),kt.useEffect(()=>{if(e){me();const n=`judge-evaluations-${e}`,r=localStorage.getItem(n);if(r)try{const e=JSON.parse(r);Date.now()-e.timestamp<36e5?(x(e.evaluations),y(e.metrics),M(!0)):localStorage.removeItem(n)}catch(t){localStorage.removeItem(n)}}},[e]),kt.useEffect(()=>{const e=l!==T;I(e),e&&(M(!1),X(!1),ne(null))},[l,T]);const fe=kt.useMemo(()=>{if(!r||!j.length)return[];const e=new Set(j.filter(e=>void 0!==e.rating&&null!==e.rating).map(e=>e.trace_id));return r.filter(t=>e.has(t.id))},[r,j]);kt.useEffect(()=>{fe&&fe.length>0&&F(1)},[fe]),kt.useEffect(()=>{O(null)},[L]);const me=async()=>{var t,n;if(e){a.invalidateQueries({queryKey:["workshop",e]}),$(!0),B(null);try{const[r,s,a,i]=await Promise.all([$m.getJudgePromptsWorkshopsWorkshopIdJudgePromptsGet(e).catch(e=>[]),$m.getRubricWorkshopsWorkshopIdRubricGet(e).catch(e=>null),$m.getAnnotationsWorkshopsWorkshopIdAnnotationsGet(e).catch(e=>[]),$m.getMlflowConfigWorkshopsWorkshopIdMlflowConfigGet(e).catch(e=>null)]);o(r),w(s),N(a),S(i);const l=vD(!!i),u=(null==(t=l.find(e=>!e.disabled))?void 0:t.value)||(null==(n=l[0])?void 0:n.value)||"GPT-5.1";if(0===r.length&&s){const e=ge(s.question);c(e),P(e),p(u),m(u)}else if(r.length>0){const e=r[0],t=s?PC(s.question).length>0?PC(s.question)[0].judgeType:s.judge_type||"likert":"likert",n=e.judge_type||"likert";if(t!==n&&s){console.log(`Prompt judge type (${n}) doesn't match rubric judge type (${t}), updating prompt template...`);const e=ge(s.question);c(e),P(e),I(!0)}else c(e.prompt_text),P(e.prompt_text);if(d(e.id),e.model_name){const t=xD(e.model_name);l.some(e=>e.value===t)?(p(t),m(t)):(p(u),m(u))}else p(u),m(u);e.performance_metrics&&y(e.performance_metrics),xe(e.id)}}catch(yW){}finally{$(!1)}}},ge=e=>{const t=PC(e),n=t.length>0?`${t[0].title}: ${t[0].description}`:e,r=t.length>0?t[0].judgeType:"likert";return"binary"===r?`You are an expert evaluator. Please evaluate the following response based on this criteria: "${n}"\n\nRate the response on a scale of 0-1, where:\n\n- 0: The response does not meet the criteria (FAIL)\n- 1: The response meets the criteria (PASS)\n\nInput: {{ inputs }}\nOutput: {{ outputs }}\n\nThink step by step about whether the output meets the criteria, then provide your rating.\n\nYour response MUST start with a single integer rating (0 or 1) on its own line, followed by your reasoning.\n\nExample format:\n1\nThe response meets the criteria because...`:"freeform"===r?`You are an expert evaluator. Please evaluate the following response based on this criteria: "${n}"\n\nProvide detailed qualitative feedback on how well the response addresses this criteria.\n\nInput: {input}\nOutput: {output}\n\nThink step by step about the strengths and weaknesses of the output with respect to the criteria.\n\nProvide your analysis as a structured response with:\n1. Key observations\n2. Strengths\n3. Areas for improvement\n4. Overall assessment`:`You are an expert evaluator. Please evaluate the following response based on this criteria: "${n}"\n\nRate the response on a scale of 1-5, where:\n- 1 = Poor (does not meet criteria)\n- 2 = Below Average (partially meets criteria)\n- 3 = Average (meets basic criteria)\n- 4 = Good (exceeds criteria in some ways)\n- 5 = Excellent (fully exceeds criteria)\n\nInput: {input}\nOutput: {output}\n\nThink step by step about how well the output addresses the criteria, then provide your rating.\n\nYour response MUST start with a single integer rating (1, 2, 3, 4, or 5) on its own line, followed by your reasoning.\n\nExample format:\n3\nThe response partially meets the criteria because...`},xe=async t=>{if(e)try{const n=await $m.getJudgeEvaluationsWorkshopsWorkshopIdJudgeEvaluationsPromptIdGet(e,t);x(n),n&&n.length>0&&(M(!0),n.length>=10&&X(!0));const r=i.find(e=>e.id===t);(null==r?void 0:r.performance_metrics)&&y(r.performance_metrics)}catch(yW){}},ve=async()=>{if(!e||!l.trim())return void ZS.error("Please enter a judge prompt first");if(!ce.trim())return void ZS.error("Please enter a judge name");if("mlflow"===ae&&!k){const e="Databricks configuration required for MLflow evaluation. Please configure MLflow settings in the Intake phase.";return H(e),void ZS.error(e)}if("simple"===ae&&!oe.trim())return void ZS.error("Please enter a Databricks model serving endpoint name");K(!0),H(null),de([`Starting ${"simple"===ae?"simple model serving":"MLflow"} evaluation job...`]),se(!0),ne(null),X(!1),y(null),x([]);const t=pe(l);if("mlflow"===ae)try{ZS.info("Aggregating SME feedback..."),await s.mutateAsync()}catch(yW){const t=(null==yW?void 0:yW.message)||"Failed to aggregate SME feedback";return ZS.error(t),H(t),void K(!1)}try{const n="simple"===ae?`/workshops/${e}/start-simple-evaluation`:`/workshops/${e}/start-evaluation`,r="simple"===ae?{judge_prompt:t,endpoint_name:oe,prompt_id:u||void 0}:{judge_name:ce,judge_prompt:t,evaluation_model_name:gD(h),alignment_model_name:gD(f),prompt_id:u||void 0};console.log(`[EVAL] Starting ${ae} evaluation with polling approach...`);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const e=await s.text();throw new Error(`Failed to start evaluation: ${s.status} ${e}`)}const{job_id:a}=await s.json();console.log("[EVAL] Job started with ID:",a),de(e=>[...e,`Evaluation job started (ID: ${a.substring(0,8)}...)`]);let i=0,c=0;const p=600,m=async()=>{var t;c++;try{const n=await fetch(`/workshops/${e}/evaluation-job/${a}?since_log_index=${i}`);if(!n.ok)return void console.error("[EVAL] Status poll failed:",n.status);const r=await n.json();if(r.logs&&r.logs.length>0&&(de(e=>[...e,...r.logs]),i=r.log_count),"completed"===r.status){if(console.log("[EVAL] Job completed!",r.result),null==(t=r.result)?void 0:t.success){if(y(r.result.metrics||null),x(r.result.evaluations||[]),M(!0),X(!0),ZS.success("Evaluation complete!"),r.result.saved_prompt_id){const t=await $m.getJudgePromptsWorkshopsWorkshopIdJudgePromptsGet(e);o(t),d(r.result.saved_prompt_id),P(l),I(!1),xe(r.result.saved_prompt_id)}const t=`judge-evaluations-${e}`;localStorage.setItem(t,JSON.stringify({evaluations:r.result.evaluations||[],metrics:r.result.metrics||null,timestamp:Date.now()}))}return void K(!1)}if("failed"===r.status)return console.error("[EVAL] Job failed:",r.error),ZS.error(`Evaluation failed: ${r.error||"Unknown error"}`),H(r.error||"Unknown error"),de(e=>[...e,`ERROR: ${r.error||"Unknown error"}`]),void K(!1);"running"===r.status&&c<p?setTimeout(m,2e3):c>=p&&(console.warn("[EVAL] Max poll count reached"),de(e=>[...e,"Warning: Polling timeout reached. Job may still be running."]),K(!1))}catch(n){console.error("[EVAL] Poll error:",n),c<p&&setTimeout(m,5e3)}};await m()}catch(n){console.error("[EVAL] Exception caught:",n);const e=(null==n?void 0:n.message)||"Evaluation failed";ZS.error(`Evaluation failed: ${e}`),de(t=>[...t,`ERROR: ${e}`]),H(e),K(!1)}},ye=(e,t)=>"correlation"===t||"accuracy"===t?e>=.8?"text-green-600":e>=.6?"text-yellow-600":"text-red-600":"text-gray-600";return Mt.jsxs("div",{className:"h-full bg-gray-50 p-6 space-y-6",children:[Mt.jsxs("div",{className:"mb-6",children:[Mt.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Mt.jsx(Ex,{className:"h-8 w-8 text-blue-600"}),Mt.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Judge Tuning"}),Mt.jsx("div",{className:"ml-auto",children:i.length>0&&Mt.jsxs(Lv,{variant:"outline",children:[i.length," Prompt",1===i.length?"":"s"]})})]}),Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsx("p",{className:"text-gray-600",children:"Create and refine AI judges using your workshop's human annotation data."}),Mt.jsx("div",{className:"text-sm",children:k?Mt.jsxs(Lv,{className:"bg-green-100 text-green-800",children:[Mt.jsx(Hx,{className:"h-3 w-3 mr-1"}),"MLflow Connected"]}):Mt.jsxs(Lv,{className:"bg-yellow-100 text-yellow-800",children:[Mt.jsx(Fx,{className:"h-3 w-3 mr-1"}),"MLflow Not Configured"]})})]})]}),q&&Mt.jsxs(tE,{variant:"destructive",className:"mb-6",children:[Mt.jsx(Fx,{className:"h-4 w-4"}),Mt.jsx(nE,{children:q})]}),Mt.jsx(hx,{className:"mb-6",children:Mt.jsxs(px,{className:"pb-3",children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Ex,{className:"h-5 w-5"}),"Judge Type",Mt.jsxs(Lv,{variant:"outline",className:"ml-2",children:["likert"===C&&"Likert Scale","binary"===C&&"Binary","freeform"===C&&"Free-form"]})]}),Mt.jsxs(mx,{children:["likert"===C&&"1-5 Likert scale scoring with rubric criteria. Set during Rubric Creation phase.","binary"===C&&`Binary ${E.pass}/${E.fail} evaluation. Set during Rubric Creation phase.`,"freeform"===C&&"Free-form qualitative feedback. Set during Rubric Creation phase."]})]})}),Mt.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Mt.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[i.length>0&&Mt.jsxs("div",{children:[Mt.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Prompt History"}),Mt.jsxs(oD,{value:u||void 0,onValueChange:e=>{d(e);const t=i.find(t=>t.id===e);if(t){if(c(t.prompt_text),P(t.prompt_text),t.model_name){const e=xD(t.model_name);p(e),m(e)}M(!1),H(null),xe(e)}},children:[Mt.jsx(cD,{className:"w-full bg-white",children:Mt.jsx(lD,{placeholder:u&&R?"Modified (unsaved changes)":"Select a previous prompt"})}),Mt.jsx(hD,{children:i.map(e=>{var t;return Mt.jsx(pD,{value:e.id,children:Mt.jsxs("div",{className:"flex items-center justify-between w-full",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsxs("span",{children:["v",e.version]}),Mt.jsx(Lv,{variant:"outline",className:"text-xs",children:(null==(t=e.model_parameters)?void 0:t.aligned)?"Aligned":"demo"===e.model_name?"Demo":yD(xD(e.model_name||""))})]}),e.performance_metrics&&Mt.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["=",(100*e.performance_metrics.correlation).toFixed(0),"%"]})]})},e.id)})})]})]}),Mt.jsxs(hx,{className:"flex-1 flex flex-col",children:[Mt.jsxs(px,{className:"pb-3",children:[Mt.jsxs(fx,{className:"flex items-center gap-2 text-lg",children:[Mt.jsx(Iv,{className:"h-4 w-4"}),"Judge Prompt"]}),Mt.jsxs(mx,{className:"text-xs",children:["The prompt in the textbox below is what gets evaluated. Use ","{input}"," and ","{output}"," as placeholders."]})]}),Mt.jsxs(gx,{className:"flex-1 flex flex-col space-y-3",children:[Mt.jsx("div",{className:"flex-1",children:Mt.jsx(yC,{value:l,onChange:e=>c(e.target.value),placeholder:"Enter your judge prompt here...",className:"min-h-[300px] h-full font-mono text-sm resize-none"})}),Mt.jsx("div",{className:"space-y-3",children:Mt.jsxs("div",{className:"flex gap-2",children:[Mt.jsx(Gv,{onClick:async()=>{if(e&&l.trim()){$(!0),B(null);try{const r={prompt_text:l,few_shot_examples:[],model_name:gD(h),model_parameters:"demo"===h?null:{temperature:0,max_tokens:10}},s=await $m.createJudgePromptWorkshopsWorkshopIdJudgePromptsPost(e,r);if(v)try{const t=await fetch(`/workshops/${e}/judge-prompts/${s.id}/metrics`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({correlation:v.correlation,accuracy:v.accuracy,mean_absolute_error:0,total_evaluations:v.total_evaluations,agreement_by_rating:v.agreement_by_rating,confusion_matrix:v.confusion_matrix})});if(!t.ok){const e=await t.text();throw new Error(`HTTP ${t.status}: ${e}`)}await t.json()}catch(t){}if(g&&g.length>0)try{const t=await fetch(`/workshops/${e}/judge-evaluations/${s.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g.map(e=>({prompt_id:s.id,trace_id:e.trace_id,predicted_rating:e.predicted_rating,human_rating:e.human_rating,confidence:e.confidence,reasoning:e.reasoning})))});if(t.ok){await t.json()}else{await t.text()}}catch(n){}const a=await $m.getJudgePromptsWorkshopsWorkshopIdJudgePromptsGet(e);o(a),d(s.id),P(l),M(!1),ZS.success(`Prompt saved as v${s.version}`)}catch(yW){B(yW.message||"Failed to save prompt"),ZS.error("Failed to save prompt: "+(yW.message||"Unknown error"))}finally{$(!1)}}},disabled:!l.trim()||U,variant:"outline",className:"flex-1",size:"sm",title:"Save prompt to database as new version",children:U?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(qx,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Hx,{className:"mr-2 h-4 w-4"}),"Save as New Version"]})}),Mt.jsx(Gv,{onClick:()=>{if(!l.trim())return;const t={prompt_text:l,model_name:gD(h),model_parameters:"demo"===h?null:{temperature:0,max_tokens:10},exported_at:(new Date).toISOString(),workshop_id:e,metrics:v||null},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`judge-prompt-${e}-${Date.now()}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r),ZS.success("Prompt downloaded successfully")},disabled:!l.trim(),variant:"outline",size:"sm",title:"Download prompt as JSON file",children:Mt.jsx(Qx,{className:"h-4 w-4"})})]})})]})]})]}),Mt.jsxs("div",{className:"lg:col-span-2 flex flex-col",children:[V&&Mt.jsxs(tE,{variant:"destructive",className:"mb-4",children:[Mt.jsx(Fx,{className:"h-4 w-4"}),Mt.jsxs(nE,{children:[V,Mt.jsx(Gv,{size:"sm",variant:"outline",onClick:()=>ve(),className:"mt-2",children:"Retry"})]})]}),!k&&"demo"!==h&&j.length>0&&Mt.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:Mt.jsxs("div",{className:"flex gap-3",children:[Mt.jsx(Fx,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-medium text-amber-900",children:"Databricks Configuration Required"}),Mt.jsx("p",{className:"text-sm text-amber-800 mt-1",children:"Configure your Databricks workspace connection in the Intake phase to use AI judges."})]})]})}),v&&(()=>{const e=v.agreement_by_rating||{};return Mt.jsxs("div",{className:"bg-white rounded-lg border p-4 mb-4",children:[Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{className:"flex items-center gap-6",children:[Mt.jsxs("div",{children:[Mt.jsx("span",{className:"text-sm text-gray-500",children:"Mode"}),Mt.jsx("div",{className:"flex items-center gap-2",children:"demo"===h?Mt.jsxs(Lv,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:[Mt.jsx(_v,{className:"h-3 w-3 mr-1"}),"Demo"]}):Mt.jsxs(Lv,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[Mt.jsx(Iv,{className:"h-3 w-3 mr-1"}),"MLflow"]})})]}),Mt.jsxs("div",{children:[Mt.jsxs("span",{className:"text-sm text-gray-500",children:["Cohen's ",v.total_evaluations<3&&Mt.jsx("span",{className:"text-xs text-amber-600 ml-1",children:"(limited data)"})]}),Mt.jsxs("div",{className:`text-xl font-bold ${ye(v.correlation,"correlation")}`,children:[(100*v.correlation).toFixed(1),"%",v.total_evaluations<3&&Mt.jsx("span",{className:"text-xs text-amber-600 ml-1",children:"*"})]})]}),Mt.jsxs("div",{children:[Mt.jsx("span",{className:"text-sm text-gray-500",children:"Accuracy"}),Mt.jsxs("div",{className:`text-xl font-bold ${ye(v.accuracy,"accuracy")}`,children:[(100*v.accuracy).toFixed(1),"%"]})]}),Mt.jsxs("div",{children:[Mt.jsx("span",{className:"text-sm text-gray-500",children:"Total"}),Mt.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[v.total_evaluations,v.total_evaluations_all&&v.total_evaluations_all>v.total_evaluations&&Mt.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["/ ",v.total_evaluations_all]})]}),v.total_evaluations_all&&v.total_evaluations_all>v.total_evaluations&&Mt.jsxs("div",{className:"text-xs text-amber-600 mt-1",children:[v.total_evaluations_all-v.total_evaluations," missing ratings"]})]})]}),Mt.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4,5].map(t=>Mt.jsxs("div",{className:"text-center",children:[Mt.jsxs("div",{className:"text-xs text-gray-500",children:[t,""]}),Mt.jsxs("div",{className:"text-sm font-semibold "+((e[t.toString()]||0)>=.8?"text-green-600":(e[t.toString()]||0)>=.6?"text-yellow-600":"text-red-600"),children:[(100*(e[t.toString()]||0)).toFixed(0),"%"]})]},t))})]}),v.total_evaluations<3&&Mt.jsxs("div",{className:"mt-3 text-xs text-amber-700 bg-amber-50 px-3 py-2 rounded",children:[Mt.jsx("strong",{children:"Note:"})," Cohen's kappa with fewer than 3 evaluations shows simple agreement rate instead of statistical kappa. Get more annotation data for reliable inter-rater agreement metrics."]}),v.total_evaluations_all&&v.total_evaluations_all>v.total_evaluations&&Mt.jsxs("div",{className:"mt-3 text-xs text-orange-700 bg-orange-50 px-3 py-2 rounded",children:[Mt.jsx("strong",{children:"Warning:"})," ",v.total_evaluations_all-v.total_evaluations," out of ",v.total_evaluations_all," evaluations have missing or invalid judge ratings. These may have been rejected due to invalid responses (e.g., MLflow returning 3.0 for binary judges). Only evaluations with both valid human and judge ratings are included in the metrics."]})]})})(),Mt.jsxs(hx,{className:"flex flex-col",children:[Mt.jsx(px,{className:"pb-3",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs(fx,{className:"flex items-center gap-2 text-lg",children:[Mt.jsx(Sv,{className:"h-4 w-4"}),"Evaluation Results"]}),Mt.jsx("div",{className:"flex items-center gap-2",children:g.length>0&&Mt.jsxs(Lv,{variant:"outline",children:[g.length," evaluations"]})})]})}),Mt.jsx(gx,{className:"flex-1 overflow-hidden p-0",children:fe.length>0?Mt.jsxs("div",{className:"h-full overflow-auto",children:[Mt.jsxs("table",{className:"w-full text-sm",children:[Mt.jsx("thead",{className:"sticky top-0 bg-gray-50 border-b",children:Mt.jsxs("tr",{children:[Mt.jsx("th",{className:"text-left p-3 font-medium text-gray-700",children:"Input"}),Mt.jsx("th",{className:"text-left p-3 font-medium text-gray-700",children:"Output"}),Mt.jsx("th",{className:"text-center p-3 font-medium text-gray-700 w-20",children:"Human"}),Mt.jsx("th",{className:"text-center p-3 font-medium text-gray-700 w-20",children:"Judge"}),Mt.jsx("th",{className:"text-center p-3 font-medium text-gray-700 w-20",children:"Diff"}),Mt.jsx("th",{className:"text-center p-3 font-medium text-gray-700 w-20",children:"Match"})]})}),Mt.jsx("tbody",{children:(()=>{const e=(L-1)*z,t=e+z;return fe.slice(e,t).map((t,n)=>{const r=j.filter(e=>e.trace_id===t.id);let s=null;if(r.length>0){const e=_.map(e=>e.id),n=[];for(const t of r){let r=!1;if(t.ratings&&"object"==typeof t.ratings&&e.length>0){for(const s of e){const e=t.ratings[s];if(null!=e&&"number"==typeof e){n.push(e),r=!0;break}}if(!r&&Object.keys(t.ratings).length>0){const e=Object.values(t.ratings).find(e=>null!=e&&"number"==typeof e);void 0!==e&&(n.push(e),r=!0)}}r||void 0===t.rating||null===t.rating||"number"!=typeof t.rating||n.push(t.rating)}if(r.length>0&&0===n.length&&console.log("No ratings found for trace:",t.id,{annotations:r.map(t=>({id:t.id,rating:t.rating,ratings:t.ratings,questionIds:e}))}),n.length>0)if("binary"===C){s=n.filter(e=>1===e).length>n.length/2?1:0}else{const e=n.sort((e,t)=>n.filter(e=>e===t).length-n.filter(t=>t===e).length)[0];s=e}}const a=g.find(e=>e.workshop_uuid===t.id||e.trace_id===t.id),i=null==a?void 0:a.predicted_rating,o=null!==s&&null!=i?Math.abs(i-s):null,l=0===o,c=A===t.id;return Mt.jsxs(St.Fragment,{children:[Mt.jsxs("tr",{className:"border-b hover:bg-gray-50 cursor-pointer "+((e+n)%2==0?"bg-white":"bg-gray-50/50"),onClick:()=>O(c?null:t.id),children:[Mt.jsx("td",{className:"p-3 max-w-xs",children:Mt.jsx("div",{className:"text-xs text-gray-700 "+(c?"whitespace-pre-wrap break-words":"truncate"),children:t.input||"N/A"})}),Mt.jsx("td",{className:"p-3 max-w-xs",children:Mt.jsx("div",{className:"text-xs text-gray-700 "+(c?"whitespace-pre-wrap break-words":"truncate"),children:t.output||"N/A"})}),Mt.jsx("td",{className:"text-center p-3",children:null!=s?Mt.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-800 font-semibold",children:s}):Mt.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-gray-400 font-semibold",children:""})}),Mt.jsx("td",{className:"text-center p-3",children:null!=i?Mt.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full font-semibold "+(0===o?"bg-green-100 text-green-800":1===o?"bg-yellow-100 text-yellow-800":null!==o&&o>1?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:i}):Mt.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-gray-400 font-semibold",children:""})}),Mt.jsx("td",{className:"text-center p-3",children:null!==o?Mt.jsx("span",{className:"font-semibold "+(0===o?"text-green-600":1===o?"text-yellow-600":"text-red-600"),children:0===o?"0":`${o}`}):Mt.jsx("span",{className:"text-gray-400",children:""})}),Mt.jsx("td",{className:"text-center p-3",children:null!==o?l?Mt.jsx(zx,{className:"h-5 w-5 text-green-500 mx-auto"}):1===o?Mt.jsx(Fx,{className:"h-5 w-5 text-yellow-500 mx-auto"}):Mt.jsx(Wx,{className:"h-5 w-5 text-red-500 mx-auto"}):Mt.jsx("span",{className:"text-gray-400",children:""})})]}),c&&Mt.jsx("tr",{children:Mt.jsx("td",{colSpan:6,className:"p-0",children:Mt.jsx("div",{className:"bg-gray-50 border-t",children:Mt.jsx(vC,{trace:t,showContext:!0,className:"m-4"})})})})]},t.id)})})()})]}),fe.length>z&&Mt.jsx("div",{className:"border-t bg-gray-50 p-4",children:Mt.jsx(bD,{currentPage:L,totalPages:Math.ceil(fe.length/z),totalItems:fe.length,itemsPerPage:z,onPageChange:F,onItemsPerPageChange:e=>{W(e),F(1)},showItemsPerPageSelector:!0,showQuickJump:!0,showKeyboardShortcuts:!0})})]}):r&&0!==r.length?0===j.length?Mt.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:Mt.jsxs("div",{className:"text-center p-8",children:[Mt.jsx(Rv,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),Mt.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Waiting for Annotation Data"}),Mt.jsx("p",{className:"text-gray-600 max-w-md",children:"Participants need to complete annotations before you can create AI judges."})]})}):Mt.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Ex,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),Mt.jsx("p",{className:"text-sm",children:"No evaluations yet"}),Mt.jsx("p",{className:"text-xs mt-1",children:'Click "Evaluate Current Prompt" to generate AI judge ratings'}),Mt.jsx("p",{className:"text-xs mt-1",children:"This will compare the AI judge against human annotations"})]})}):Mt.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:Mt.jsxs("div",{className:"text-center p-8",children:[Mt.jsx(Hx,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),Mt.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Traces Available"}),Mt.jsx("p",{className:"text-gray-600 max-w-md",children:"No traces found. Please check the intake phase and ensure traces have been ingested."})]})})})]})]})]}),Mt.jsxs(hx,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-indigo-50",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Ex,{className:"h-5 w-5 text-purple-600"}),"Judge Alignment"]}),Mt.jsx(mx,{children:"mlflow"===ae?"Run mlflow.genai.evaluate() and align() using the prompt and model above. Ensure traces are tagged for alignment in Results Review.":"Use simple Databricks Model Serving to evaluate your judge prompt against human annotations."})]}),Mt.jsxs(gx,{className:"space-y-4",children:[Mt.jsxs("div",{className:"flex items-center gap-4 p-3 bg-white border border-purple-200 rounded-lg",children:[Mt.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Evaluation Mode:"}),Mt.jsxs("div",{className:"flex gap-2",children:[Mt.jsxs(Gv,{variant:"mlflow"===ae?"default":"outline",size:"sm",onClick:()=>ie("mlflow"),className:"mlflow"===ae?"bg-purple-600 hover:bg-purple-700":"",children:[Mt.jsx(Hx,{className:"h-4 w-4 mr-1"}),"MLflow"]}),Mt.jsxs(Gv,{variant:"simple"===ae?"default":"outline",size:"sm",onClick:()=>ie("simple"),className:"simple"===ae?"bg-blue-600 hover:bg-blue-700":"",children:[Mt.jsx(Bx,{className:"h-4 w-4 mr-1"}),"Simple Model Serving"]})]}),Mt.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:"mlflow"===ae?"Full MLflow integration with metrics tracking":"Direct endpoint calls (no MLflow required)"})]}),Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Mt.jsxs("div",{children:[Mt.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Traces Included"}),Mt.jsxs("div",{className:"px-3 py-2 bg-white border border-gray-200 rounded-md mt-1",children:[Mt.jsx("span",{className:"text-lg font-bold text-purple-600",children:he}),Mt.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["SME-annotated trace",1===he?"":"s"]})]})]}),Mt.jsxs("div",{children:[Mt.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Evaluation Status"}),Mt.jsx("div",{className:"mt-2",children:J&&g.length>=10?Mt.jsxs(Lv,{className:"bg-green-100 text-green-800",children:[Mt.jsx(zx,{className:"h-3 w-3 mr-1"}),"Ready for alignment"]}):Mt.jsx(Lv,{className:"bg-gray-100 text-gray-600",children:"Pending evaluate() (need 10 samples)"})}),Mt.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Evaluated traces: ",Math.min(g.length,10),"/10"]})]})]}),"mlflow"===ae&&Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Mt.jsxs("div",{children:[Mt.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Evaluation LLM Judge"}),Mt.jsxs(oD,{value:h,onValueChange:p,children:[Mt.jsx(cD,{className:"w-full",children:Mt.jsx(lD,{placeholder:"Choose evaluation model"})}),Mt.jsx(hD,{children:vD(!!k).map(e=>Mt.jsx(pD,{value:e.value,disabled:e.disabled,children:Mt.jsxs("div",{className:"flex items-center justify-between w-full",children:[Mt.jsx("span",{children:e.label}),e.requiresDatabricks&&!k&&Mt.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Requires Databricks)"})]})},e.value))})]}),Mt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for evaluate() job"})]}),Mt.jsxs("div",{children:[Mt.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Alignment LLM"}),Mt.jsxs(oD,{value:f,onValueChange:m,children:[Mt.jsx(cD,{className:"w-full",children:Mt.jsx(lD,{placeholder:"Choose alignment model"})}),Mt.jsx(hD,{children:vD(!!k).map(e=>Mt.jsx(pD,{value:e.value,disabled:e.disabled,children:Mt.jsxs("div",{className:"flex items-center justify-between w-full",children:[Mt.jsx("span",{children:e.label}),e.requiresDatabricks&&!k&&Mt.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Requires Databricks)"})]})},e.value))})]}),Mt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for SIMBA optimizer"})]}),Mt.jsxs("div",{children:[Mt.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Judge Name"}),Mt.jsx(_C,{value:ce,readOnly:!0,className:"bg-gray-50",placeholder:"workshop_judge"}),Mt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Set in Annotation Phase (Facilitator Dashboard)"})]})]}),"simple"===ae&&Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Mt.jsxs("div",{children:[Mt.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Databricks Model Serving Endpoint"}),Mt.jsxs(oD,{value:oe,onValueChange:le,children:[Mt.jsx(cD,{className:"bg-white",children:Mt.jsx(lD,{placeholder:"Select model endpoint"})}),Mt.jsx(hD,{children:Object.entries(fD).map(([e,t])=>Mt.jsx(pD,{value:t,children:e},t))})]}),Mt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a Databricks model serving endpoint"})]}),Mt.jsxs("div",{children:[Mt.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Judge Name"}),Mt.jsx(_C,{value:ce,readOnly:!0,className:"bg-gray-50",placeholder:"workshop_judge"}),Mt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Set in Annotation Phase (Facilitator Dashboard)"})]})]}),Mt.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[Mt.jsx(Gv,{onClick:ve,disabled:!l.trim()||!ce.trim()||Q||G||"simple"===ae&&!oe.trim(),className:"simple"===ae?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700",children:Q?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(gv,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Evaluate()..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Sv,{className:"h-4 w-4 mr-2"}),"simple"===ae?"Run Simple Evaluate":"Run Evaluate()"]})}),"mlflow"===ae&&Mt.jsx(Gv,{onClick:async()=>{if(console.log("[ALIGN] ===== FUNCTION CALLED ====="),!e||!l.trim())return void ZS.error("Please enter a judge prompt first");if(!ce.trim())return void ZS.error("Please enter a judge name");if(!k)return void ZS.error("Databricks configuration required for alignment");if(!J)return void ZS.error("Please run evaluate() first");if(g.length<10)return void ZS.error("Need at least 10 evaluated traces before running align()");console.log("[ALIGN] Starting alignment with polling approach..."),Y(!0),de(["Starting alignment job..."]),se(!0),ne(null);const t=pe(l);try{const n={judge_name:ce,judge_prompt:t,evaluation_model_name:gD(h),alignment_model_name:gD(f)},r=await fetch(`/workshops/${e}/start-alignment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const e=await r.text();throw new Error(`Failed to start alignment: ${r.status} ${e}`)}const{job_id:s}=await r.json();console.log("[ALIGN] Job started with ID:",s),de(e=>[...e,`Alignment job started (ID: ${s.substring(0,8)}...)`]);let a=0,i=0;const l=1800,u=async()=>{i++;try{const n=await fetch(`/workshops/${e}/alignment-job/${s}?since_log_index=${a}`);if(!n.ok)return void console.error("[ALIGN] Status poll failed:",n.status);const r=await n.json();if(r.logs&&r.logs.length>0&&(de(e=>[...e,...r.logs]),a=r.log_count),"completed"===r.status){if(console.log("[ALIGN] Job completed!",r.result),r.result&&(ne(r.result),r.result.success&&(ZS.success("Alignment complete! Judge has been optimized."),r.result.aligned_instructions&&(c(r.result.aligned_instructions),P(r.result.aligned_instructions),I(!1)),r.result.saved_prompt_id)))try{const t=await $m.getJudgePromptsWorkshopsWorkshopIdJudgePromptsGet(e);o(t),d(r.result.saved_prompt_id);const n=t.find(e=>e.id===r.result.saved_prompt_id);n&&(c(n.prompt_text),P(n.prompt_text),I(!1)),x([]),y(null),M(!1),X(!1)}catch(t){console.error("[ALIGN] Failed to refresh prompts:",t)}return void Y(!1)}if("failed"===r.status)return console.error("[ALIGN] Job failed:",r.error),ZS.error(`Alignment failed: ${r.error||"Unknown error"}`),de(e=>[...e,`ERROR: ${r.error||"Unknown error"}`]),void Y(!1);"running"===r.status&&i<l?setTimeout(u,2e3):i>=l&&(console.warn("[ALIGN] Max poll count reached"),de(e=>[...e,"Warning: Polling timeout reached. Job may still be running."]),Y(!1))}catch(n){console.error("[ALIGN] Poll error:",n),i<l&&setTimeout(u,5e3)}};await u()}catch(n){console.error("[ALIGN] Exception caught:",n);const e=(null==n?void 0:n.message)||"Alignment failed";ZS.error(`Alignment failed: ${e}`),de(t=>[...t,`ERROR: ${e}`]),Y(!1)}},disabled:G||Q||!ce.trim(),className:J&&g.length>=10?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-600 hover:bg-gray-700 text-white",children:G?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(gv,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Align()..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Ex,{className:"h-4 w-4 mr-2"}),"Run Align()"]})}),"mlflow"===ae&&(!J||g.length<10)&&Mt.jsx("span",{className:"text-sm text-gray-500",children:" Run evaluate() on at least 10 traces to enable alignment"}),"simple"===ae&&Mt.jsx("span",{className:"text-sm text-blue-600",children:" Simple mode: Direct evaluation via Model Serving (no alignment available)"})]}),Mt.jsxs("div",{className:"mt-4",children:[Mt.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Mt.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Execution Logs"}),Mt.jsx(Gv,{variant:"ghost",size:"sm",onClick:()=>se(e=>!e),children:re?"Hide Logs":"Show Logs"})]}),re&&Mt.jsx("div",{className:"bg-gray-900 rounded-lg p-4 max-h-[300px] overflow-y-auto",children:0===Z.length?Mt.jsx("p",{className:"text-sm text-gray-400 font-mono",children:"No logs yet."}):Mt.jsx("pre",{className:"text-sm text-green-400 font-mono whitespace-pre-wrap",children:Z.map((e,t)=>Mt.jsx("div",{className:e.includes("ERROR")?"text-red-400":"",children:e},t))})})]}),te&&te.success&&Mt.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsx(zx,{className:"h-5 w-5 text-green-600"}),Mt.jsx("span",{className:"font-medium text-green-800",children:"Alignment Successful"})]}),Mt.jsxs("p",{className:"text-sm text-green-700",children:['Judge "',te.judge_name,'" tuned on ',te.trace_count," traces.",te.saved_prompt_version&&Mt.jsxs("span",{className:"ml-1",children:["(Saved as v",te.saved_prompt_version,")"]})]}),te.aligned_instructions&&Mt.jsxs("div",{className:"mt-3 space-y-2",children:[Mt.jsx(Gv,{onClick:()=>{c(te.aligned_instructions),P(te.aligned_instructions)},className:"bg-green-600 hover:bg-green-700 text-white",children:"Use Aligned Prompt"}),Mt.jsxs("details",{className:"text-sm",children:[Mt.jsx("summary",{className:"cursor-pointer text-green-600 hover:text-green-800",children:"View Aligned Instructions"}),Mt.jsx("pre",{className:"mt-2 p-2 bg-white rounded text-xs overflow-auto max-h-[200px]",children:te.aligned_instructions})]})]})]})]})]})]})}function jD(){var e;const{workshopId:t}=Ym(),{data:n}=rg(t),r=$p(),s=()=>{if(!t)return{};const e=`dbsql-export-state-${t}`,n=localStorage.getItem(e);if(n)try{const t=JSON.parse(n);if(Date.now()-t.timestamp<864e5)return t.state;localStorage.removeItem(e)}catch(r){localStorage.removeItem(e)}return{}},[a,i]=kt.useState(()=>s().databricksHost||""),[o,l]=kt.useState(()=>s().databricksToken||""),[c,u]=kt.useState(()=>s().httpPath||""),[d,h]=kt.useState(()=>s().catalog||""),[p,f]=kt.useState(()=>s().schemaName||""),[m,g]=kt.useState(()=>s().volumePath||""),[x,v]=kt.useState(()=>s().fileName||""),[y,b]=kt.useState(!1),[w,j]=kt.useState(null),[N,k]=kt.useState(null),[S,_]=kt.useState(!1),[C,E]=kt.useState(!1),[T,P]=kt.useState(null),[R,I]=kt.useState(0),{data:D}=Kp({queryKey:["dbsql-export-result",t],queryFn:async()=>null,staleTime:1/0,cacheTime:1/0}),{data:M,refetch:A}=Kp({queryKey:["dbsql-export-status",t],queryFn:async()=>{if(!t)return null;const e=await fetch(`/dbsql-export/${t}/export-status`);if(e.ok)return await e.json();throw new Error("Failed to check export status")},enabled:!!t,staleTime:3e5}),O=e=>{if(!t)return;const n=`dbsql-export-state-${t}`,r={databricksHost:a,databricksToken:o,httpPath:c,catalog:d,schemaName:p,scrollPosition:R,...e};localStorage.setItem(n,JSON.stringify({state:r,timestamp:Date.now()}))};kt.useEffect(()=>{O({})},[a,o,c,d,p]),kt.useEffect(()=>{const e=()=>{const e=window.scrollY;I(e),O({scrollPosition:e})};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),kt.useEffect(()=>{R>0&&window.scrollTo(0,R)},[R]),kt.useEffect(()=>{t&&A()},[t,A]);return Mt.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[Mt.jsxs("div",{className:"text-center space-y-2",children:[Mt.jsxs("h1",{className:"text-3xl font-bold flex items-center justify-center gap-2",children:[Mt.jsx(Hx,{className:"h-8 w-8"}),"Export to Databricks DBSQL"]}),Mt.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Export all workshop data from SQLite to Databricks DBSQL tables. This creates tables in your Unity Catalog and inserts all workshop data for analysis and reporting."})]}),Mt.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Mt.jsxs("div",{className:"space-y-6",children:[Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Yx,{className:"h-5 w-5"}),"Workshop Summary"]})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsxs("div",{className:"flex justify-between",children:[Mt.jsx("span",{children:"Workshop Name:"}),Mt.jsx("span",{className:"font-medium",children:(null==n?void 0:n.name)||"Loading..."})]}),Mt.jsxs("div",{className:"flex justify-between",children:[Mt.jsx("span",{children:"Current Phase:"}),Mt.jsx(Lv,{variant:"outline",children:(null==n?void 0:n.current_phase)||"Loading..."})]}),Mt.jsxs("div",{className:"flex justify-between",children:[Mt.jsx("span",{children:"Workshop ID:"}),Mt.jsx("span",{className:"font-mono text-sm",children:t})]})]})})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(wv,{className:"h-5 w-5"}),"DBSQL Configuration"]}),Mt.jsx(mx,{children:"Configure your Databricks workspace and DBSQL warehouse settings"})]}),Mt.jsxs(gx,{className:"space-y-4",children:[Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"databricks-host",children:"Databricks Host"}),Mt.jsx(_C,{id:"databricks-host",placeholder:"https://your-workspace.cloud.databricks.com",value:a,onChange:e=>{i(e.target.value),O({databricksHost:e.target.value})}})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"databricks-token",children:"Databricks Token"}),Mt.jsx(_C,{id:"databricks-token",type:"password",placeholder:"dapi...",value:o,onChange:e=>{l(e.target.value),O({databricksToken:e.target.value})}})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"http-path",children:"DBSQL Warehouse HTTP Path"}),Mt.jsx(_C,{id:"http-path",placeholder:"/sql/1.0/warehouses/xxxxxx",value:c,onChange:e=>{u(e.target.value),O({httpPath:e.target.value})}})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"catalog",children:"Unity Catalog"}),Mt.jsx(_C,{id:"catalog",placeholder:"your_catalog",value:d,onChange:e=>{h(e.target.value),O({catalog:e.target.value})}})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"schema",children:"Schema"}),Mt.jsx(_C,{id:"schema",placeholder:"your_schema",value:p,onChange:e=>{f(e.target.value),O({schemaName:e.target.value})}})]}),Mt.jsxs("div",{className:"flex gap-2 pt-4",children:[Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:()=>{if(!t)return;const e=`dbsql-export-state-${t}`;localStorage.removeItem(e),i(""),l(""),u(""),h(""),f(""),g(""),v(""),j(null),k(null),I(0)},className:"flex-1",children:"Clear Form"}),Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:()=>O({}),className:"flex-1",children:"Save State"})]})]})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Tx,{className:"h-5 w-5"}),"Data Status"]}),Mt.jsx(mx,{children:"Check what data is available for export"})]}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-4",children:[Mt.jsx(Gv,{variant:"outline",onClick:async()=>{if(t){E(!0),P(null);try{await A()}catch(yW){P("Failed to check export status")}finally{E(!1)}}},disabled:C,className:"w-full",children:C?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking Status..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Tx,{className:"h-4 w-4 mr-2"}),"Check Export Status"]})}),M&&Mt.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Nv,{className:"h-4 w-4"}),Mt.jsx("span",{children:"Rubrics:"}),Mt.jsx(Lv,{variant:M.export_requirements.has_rubrics?"default":"secondary",children:M.data_summary.rubrics_count})]}),Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(zx,{className:"h-4 w-4"}),Mt.jsx("span",{children:"Annotations:"}),Mt.jsx(Lv,{variant:M.export_requirements.has_annotations?"default":"secondary",children:M.data_summary.annotations_count})]}),Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Hx,{className:"h-4 w-4"}),Mt.jsx("span",{children:"Traces:"}),Mt.jsx(Lv,{variant:M.export_requirements.has_traces?"default":"secondary",children:M.data_summary.traces_count})]}),Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Rv,{className:"h-4 w-4"}),Mt.jsx("span",{children:"Users:"}),Mt.jsx(Lv,{variant:M.export_requirements.has_users?"default":"secondary",children:M.data_summary.users_count})]})]})]})})]})]}),Mt.jsxs("div",{className:"space-y-6",children:[Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Qx,{className:"h-5 w-5"}),"Export to DBSQL"]}),Mt.jsx(mx,{children:"Export all workshop data to Databricks DBSQL tables"})]}),Mt.jsx(gx,{children:Mt.jsx(Gv,{onClick:async()=>{if(t&&a&&o&&c&&d&&p){_(!0),P(null);try{const e=await fetch(`/dbsql-export/${t}/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({databricks_host:a,databricks_token:o,http_path:c,catalog:d,schema_name:p})});if(e.ok){const n=await e.json();r.setQueryData(["dbsql-export-result",t],n)}else{const t=await e.json();P("string"==typeof t.detail?t.detail:"Export failed")}}catch(yW){P("Export failed")}finally{_(!1)}}else P("Please provide all required DBSQL configuration fields")},disabled:S||!a||!o||!c||!d||!p,className:"w-full",size:"lg",children:S?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting to DBSQL..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Hx,{className:"h-4 w-4 mr-2"}),"Export to DBSQL"]})})})]}),T&&Mt.jsxs(tE,{variant:"destructive",children:[Mt.jsx(Fx,{className:"h-4 w-4"}),Mt.jsx(nE,{children:T})]}),D&&Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(zx,{className:"h-5 w-5 text-green-600"}),"Export Successful"]})}),Mt.jsxs(gx,{className:"space-y-4",children:[Mt.jsxs(tE,{children:[Mt.jsx(zx,{className:"h-4 w-4"}),Mt.jsx(nE,{children:Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx("p",{className:"font-medium",children:D.message}),Mt.jsxs("div",{className:"text-sm space-y-1",children:[Mt.jsxs("p",{children:[Mt.jsx("strong",{children:"Total Rows:"})," ",D.total_rows]}),Mt.jsxs("p",{children:[Mt.jsx("strong",{children:"Tables Exported:"})," ",(null==(e=D.tables_exported)?void 0:e.length)||0]}),Mt.jsxs("p",{children:[Mt.jsx("strong",{children:"Target Location:"})," ",d,".",p]})]})]})})]}),D.tables_exported&&D.tables_exported.length>0&&Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx("h4",{className:"text-sm font-medium",children:"Exported Tables"}),Mt.jsx("div",{className:"space-y-2",children:D.tables_exported.map((e,t)=>Mt.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(kv,{className:"h-3 w-3"}),Mt.jsx("span",{className:"text-sm font-mono",children:e.table_name})]}),Mt.jsxs(Lv,{variant:"outline",children:[e.rows_exported," rows"]})]},t))})]}),D.errors&&D.errors.length>0&&Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx("h4",{className:"text-sm font-medium text-red-600",children:"Errors"}),Mt.jsx("div",{className:"space-y-1",children:D.errors.map((e,t)=>Mt.jsx("p",{className:"text-sm text-red-600",children:e},t))})]}),Mt.jsxs("div",{className:"flex gap-2",children:[Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:()=>{return e=`${d}.${p}`,void navigator.clipboard.writeText(e);var e},children:[Mt.jsx(Vx,{className:"h-4 w-4 mr-2"}),"Copy Location"]}),Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:()=>window.open(`https://${a.replace("https://","").replace("http://","")}`,"_blank"),children:[Mt.jsx(Kx,{className:"h-4 w-4 mr-2"}),"View in Databricks"]})]})]})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Ev,{className:"h-5 w-5"}),"Upload SQLite to Unity Catalog Volume"]}),Mt.jsx(mx,{children:"Upload the SQLite database file to a Unity Catalog volume for backup and sharing"})]}),Mt.jsxs(gx,{className:"space-y-4",children:[Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"volume-path",children:"Volume Path"}),Mt.jsx(_C,{id:"volume-path",placeholder:"main.marketing.raw_files",value:m,onChange:e=>{g(e.target.value),O({volumePath:e.target.value})},className:"font-mono text-sm"}),Mt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Format: catalog.schema.volume_name"})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"file-name",children:"File Name (Optional)"}),Mt.jsx(_C,{id:"file-name",placeholder:"workshop_data.db",value:x,onChange:e=>{v(e.target.value),O({fileName:e.target.value})},className:"font-mono text-sm"}),Mt.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Default: workshop_",t,".db"]})]}),Mt.jsx(Gv,{onClick:async()=>{if(t&&m&&a&&o){b(!0),k(null),j(null);try{const e=m.trim().split(".");if(3!==e.length)throw new Error("Volume path must be in format: catalog.schema.volume_name");const[n,r,s]=e,i=x||`workshop_${t}.db`,l=await fetch(`/workshops/${t}/upload-to-volume`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({volume_path:m,file_name:i,databricks_host:a,databricks_token:o})});if(!l.ok){const e=await l.json();throw new Error(e.detail||`Upload failed: ${l.statusText}`)}const c=await l.json();j(c),k(null)}catch(yW){k(yW.message||"Upload failed"),j(null)}finally{b(!1)}}else k("Missing required fields: workshop ID, volume path, Databricks host, or token")},disabled:y||!a||!o||!m,className:"w-full",size:"lg",children:y?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading to Volume..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Ev,{className:"h-4 w-4 mr-2"}),"Upload to Unity Catalog Volume"]})}),w&&Mt.jsxs(tE,{children:[Mt.jsx(zx,{className:"h-4 w-4"}),Mt.jsx(nE,{children:Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx("p",{className:"font-medium",children:"Upload Successful!"}),Mt.jsxs("div",{className:"text-sm space-y-1",children:[Mt.jsxs("p",{children:[Mt.jsx("strong",{children:"Volume Path:"})," ",m]}),Mt.jsxs("p",{children:[Mt.jsx("strong",{children:"File Path:"})," ",w.file_path]}),Mt.jsxs("p",{children:[Mt.jsx("strong",{children:"File Size:"})," ",w.file_size," bytes"]})]})]})})]}),N&&Mt.jsxs(tE,{variant:"destructive",children:[Mt.jsx(Fx,{className:"h-4 w-4"}),Mt.jsx(nE,{children:N})]})]})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(rv,{className:"h-5 w-5"}),"What Gets Exported"]})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-3 text-sm",children:[Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx(kv,{className:"h-4 w-4 mt-0.5"}),Mt.jsxs("div",{children:[Mt.jsx("strong",{children:"All Tables:"})," Complete SQLite database exported to DBSQL tables"]})]}),Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx(Nv,{className:"h-4 w-4 mt-0.5"}),Mt.jsxs("div",{children:[Mt.jsx("strong",{children:"Rubrics:"})," Evaluation criteria and questions"]})]}),Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx(zx,{className:"h-4 w-4 mt-0.5"}),Mt.jsxs("div",{children:[Mt.jsx("strong",{children:"Annotations:"})," Human ratings and comments"]})]}),Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx(Hx,{className:"h-4 w-4 mt-0.5"}),Mt.jsxs("div",{children:[Mt.jsx("strong",{children:"Traces:"})," Input/output pairs and context"]})]}),Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx(Rv,{className:"h-4 w-4 mt-0.5"}),Mt.jsxs("div",{children:[Mt.jsx("strong",{children:"Users:"})," Workshop participants and roles"]})]}),Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx(Qx,{className:"h-4 w-4 mt-0.5"}),Mt.jsxs("div",{children:[Mt.jsx("strong",{children:"Automatic Schema:"})," Tables created with proper data types"]})]})]})})]})]})]})]})}function ND(){const{workshopId:e}=Ym(),{data:t}=rg(e),[n,r]=kt.useState(""),[s,a]=kt.useState(""),[i,o]=kt.useState(""),[l,c]=kt.useState(`workshop_${e}.db`),[u,d]=kt.useState(!1),[h,p]=kt.useState(!1),[f,m]=kt.useState(0),[g,x]=kt.useState(null),{data:v}=Kp({queryKey:["all-traces",e],queryFn:async()=>{if(!e)return[];const t=await fetch(`/workshops/${e}/all-traces`);if(!t.ok)throw new Error("Failed to fetch traces");return t.json()},enabled:!!e}),{data:y}=Kp({queryKey:["annotations",e],queryFn:async()=>{if(!e)return[];const t=await fetch(`/workshops/${e}/annotations`);if(!t.ok)throw new Error("Failed to fetch annotations");return t.json()},enabled:!!e});return Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:Mt.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Manage Workshop Data"}),Mt.jsx("p",{className:"text-lg text-gray-600",children:"Upload workshop data to Unity Volume or download locally for analysis"})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Hx,{className:"h-5 w-5"}),"Workshop Database Summary"]}),Mt.jsx(mx,{children:"Overview of the data that will be uploaded/downloaded"})]}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Mt.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[Mt.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(null==v?void 0:v.length)||0}),Mt.jsx("div",{className:"text-sm text-gray-600",children:"Total Traces"})]}),Mt.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[Mt.jsx("div",{className:"text-2xl font-bold text-green-600",children:(null==y?void 0:y.length)||0}),Mt.jsx("div",{className:"text-sm text-gray-600",children:"Total Annotations"})]}),Mt.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[Mt.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(null==t?void 0:t.name)||"Workshop"}),Mt.jsx("div",{className:"text-sm text-gray-600",children:"Workshop Name"})]})]})})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Bx,{className:"h-5 w-5"}),"Upload to Unity Volume"]}),Mt.jsx(mx,{children:"Upload the workshop database to a Unity Catalog volume for sharing and analysis"})]}),Mt.jsxs(gx,{className:"space-y-4",children:[Mt.jsxs(tE,{children:[Mt.jsx(rv,{className:"h-4 w-4"}),Mt.jsxs(nE,{children:["The volume path should be in the format: ",Mt.jsx("code",{children:"catalog.schema.volume_name"}),Mt.jsx("br",{}),"Example: ",Mt.jsx("code",{children:"main.default.workshop_data"})]})]}),Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"databricks-host-upload",children:"Databricks Host"}),Mt.jsx(_C,{id:"databricks-host-upload",placeholder:"https://your-workspace.cloud.databricks.com",value:n,onChange:e=>r(e.target.value)})]}),Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"databricks-token-upload",children:"Databricks Token"}),Mt.jsx(_C,{id:"databricks-token-upload",type:"password",placeholder:"dapi...",value:s,onChange:e=>a(e.target.value)})]})]}),Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"volume-path",children:"Volume Path"}),Mt.jsx(_C,{id:"volume-path",placeholder:"catalog.schema.volume_name",value:i,onChange:e=>o(e.target.value)})]}),Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"file-name",children:"File Name"}),Mt.jsx(_C,{id:"file-name",placeholder:"workshop_database.db",value:l,onChange:e=>c(e.target.value)})]})]}),Mt.jsx(Gv,{onClick:async()=>{if(n.trim()&&s.trim()&&i.trim()&&l.trim()){d(!0),m(0),x(null);try{const t=setInterval(()=>{m(e=>e>=90?(clearInterval(t),90):e+10)},200),r=await fetch(`/workshops/${e}/upload-to-volume`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({databricks_host:n,databricks_token:s,volume_path:i,file_name:l})});if(clearInterval(t),m(100),!r.ok){const e=await r.json();throw new Error(e.detail||"Failed to upload to volume")}await r.json();ZS.success("Workshop database uploaded to Unity volume successfully!"),setTimeout(()=>{m(0)},2e3)}catch(yW){x(yW.message||"Failed to upload to volume"),ZS.error("Failed to upload to volume")}finally{d(!1)}}else x("Please provide all required fields: Databricks host, token, volume path, and file name")},disabled:u||!n.trim()||!s.trim()||!i.trim()||!l.trim(),className:"w-full",variant:"outline",children:u?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading to Volume... ",f,"%"]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Ev,{className:"mr-2 h-4 w-4"}),"Upload to Unity Volume"]})}),f>0&&Mt.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Mt.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(ev,{className:"h-5 w-5"}),"Download Database"]}),Mt.jsx(mx,{children:"Download the workshop database file to your local machine"})]}),Mt.jsxs(gx,{className:"space-y-4",children:[Mt.jsxs(tE,{children:[Mt.jsx(rv,{className:"h-4 w-4"}),Mt.jsx(nE,{children:"This will download the complete workshop database including all traces, annotations, rubric data, and workshop configuration."})]}),Mt.jsx(Gv,{onClick:async()=>{p(!0),x(null);try{const t=await fetch(`/workshops/${e}/download-database`);if(!t.ok)throw new Error("Failed to download database");const n=await t.blob(),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`workshop_${e}_${(new Date).toISOString().split("T")[0]}.db`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r),ZS.success("Workshop database downloaded successfully!")}catch(yW){x(yW.message||"Failed to download database"),ZS.error("Failed to download database")}finally{p(!1)}},disabled:h,className:"w-full",variant:"outline",children:h?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"mr-2 h-4 w-4 animate-spin"}),"Downloading Database..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Qx,{className:"mr-2 h-4 w-4"}),"Download Workshop Database"]})})]})]}),g&&Mt.jsxs(tE,{variant:"destructive",children:[Mt.jsx(Fx,{className:"h-4 w-4"}),Mt.jsx(nE,{children:g})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(rv,{className:"h-5 w-5"}),"How It Works"]})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-medium mb-2",children:"Unity Volume Upload"}),Mt.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[Mt.jsx("li",{children:" Uploads the complete workshop.db file"}),Mt.jsx("li",{children:" Uses provided Databricks credentials (not stored)"}),Mt.jsx("li",{children:" Stores in Unity Catalog for team access"}),Mt.jsx("li",{children:" Enables sharing and collaboration"}),Mt.jsx("li",{children:" Supports version control and backup"})]})]}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-medium mb-2",children:"Local Download"}),Mt.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[Mt.jsx("li",{children:" Downloads the complete database file"}),Mt.jsx("li",{children:" Includes all workshop data and history"}),Mt.jsx("li",{children:" Can be used for offline analysis"}),Mt.jsx("li",{children:" Compatible with SQLite tools"})]})]})]})})]})]})})}const kD=({onBack:e})=>{const{workshopId:t}=Ym(),{user:n}=Bm(),{isFacilitator:r}=Hm(),s=$p(),[a,i]=kt.useState(""),[o,l]=kt.useState("all"),[c,u]=kt.useState(null),{data:d}=Kp({queryKey:["facilitator-findings-with-users",t],queryFn:async()=>{const e=await fetch(`/workshops/${t}/findings-with-users`);if(!e.ok)throw new Error("Failed to fetch findings");return e.json()},enabled:!!t}),{data:h}=ig(t),{data:p,refetch:f}=Kp({queryKey:["discovery-completion-status",t],queryFn:async()=>{const e=await fetch(`/workshops/${t}/discovery-completion-status`);if(!e.ok)throw new Error("Failed to fetch completion status");return e.json()},enabled:!!t});if(!r)return Mt.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Yx,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-slate-900 mb-2",children:"Facilitator Access Required"}),Mt.jsx("div",{className:"text-sm text-slate-600",children:"This findings review is only available to workshop facilitators"})]})});const m=St.useMemo(()=>{if(!d||!h)return new Map;const e=new Map;return d.forEach(t=>{e.has(t.trace_id)||e.set(t.trace_id,[]),e.get(t.trace_id).push(t)}),e},[d,h]),g=St.useMemo(()=>d?Array.from(new Set(d.map(e=>e.user_id))):[],[d]),x=St.useMemo(()=>{if(!d)return[];let e=d;return"all"!==o&&(e=e.filter(e=>e.user_id===o)),a&&(e=e.filter(e=>e.insight.toLowerCase().includes(a.toLowerCase())||e.user_name.toLowerCase().includes(a.toLowerCase())||e.user_email.toLowerCase().includes(a.toLowerCase()))),e},[d,o,a]),v=e=>null==h?void 0:h.find(t=>t.id===e),y=e=>e.startsWith("demo_")?e.replace("_"," ").toUpperCase():e;return Mt.jsx("div",{className:"p-6 h-full overflow-auto",children:Mt.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[Mt.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e&&Mt.jsxs(Gv,{variant:"outline",size:"sm",onClick:e,children:[Mt.jsx(Nx,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-full flex items-center justify-center",children:Mt.jsx(Yx,{className:"w-6 h-6 text-white"})}),Mt.jsxs("div",{children:[Mt.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Discovery Findings Review"}),Mt.jsx("p",{className:"text-slate-600",children:"Review all participant insights and discoveries from the workshop"})]})]})]}),Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[Mt.jsx(hx,{children:Mt.jsx(gx,{className:"p-4",children:Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Yx,{className:"w-5 h-5 text-emerald-600"}),Mt.jsxs("div",{children:[Mt.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(null==d?void 0:d.length)||0}),Mt.jsx("div",{className:"text-sm text-slate-600",children:"Total Findings"})]})]})})}),Mt.jsx(hx,{children:Mt.jsx(gx,{className:"p-4",children:Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Rv,{className:"w-5 h-5 text-blue-600"}),Mt.jsxs("div",{children:[Mt.jsx("div",{className:"text-2xl font-bold text-slate-900",children:g.length}),Mt.jsx("div",{className:"text-sm text-slate-600",children:"Active Users"})]})]})})}),Mt.jsx(hx,{children:Mt.jsx(gx,{className:"p-4",children:Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Gx,{className:"w-5 h-5 text-purple-600"}),Mt.jsxs("div",{children:[Mt.jsx("div",{className:"text-2xl font-bold text-slate-900",children:m.size}),Mt.jsx("div",{className:"text-sm text-slate-600",children:"Traces Reviewed"})]})]})})}),Mt.jsx(hx,{children:Mt.jsx(gx,{className:"p-4",children:Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Xx,{className:"w-5 h-5 text-orange-600"}),Mt.jsxs("div",{children:[Mt.jsx("div",{className:"text-2xl font-bold text-slate-900",children:x.length}),Mt.jsx("div",{className:"text-sm text-slate-600",children:"Filtered Results"})]})]})})})]}),p&&Mt.jsxs(hx,{className:"border-blue-200 bg-blue-50",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2 text-blue-900",children:[Mt.jsx(Rv,{className:"w-5 h-5"}),"Discovery Completion Status"]}),Mt.jsx(mx,{className:"text-blue-700",children:"Track participant progress and manage phase progression"})]}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-4",children:[Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{className:"flex items-center gap-4",children:[Mt.jsxs("div",{className:"text-center",children:[Mt.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[p.completed_participants,"/",p.total_participants]}),Mt.jsx("div",{className:"text-sm text-blue-700",children:"Participants Complete"})]}),Mt.jsxs("div",{className:"text-center",children:[Mt.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[Math.round(p.completion_percentage),"%"]}),Mt.jsx("div",{className:"text-sm text-blue-700",children:"Completion Rate"})]})]}),Mt.jsx("div",{className:"flex-1 max-w-md",children:Mt.jsx("div",{className:"w-full bg-blue-200 rounded-full h-3",children:Mt.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${p.completion_percentage}%`}})})})]}),Mt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Object.values(p.participant_status).map(e=>Mt.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx("div",{className:"w-3 h-3 rounded-full "+(e.completed?"bg-green-500":"bg-gray-300")}),Mt.jsxs("div",{className:"flex flex-col",children:[Mt.jsx("span",{className:"text-sm font-medium",children:e.user_name}),Mt.jsx("span",{className:"text-xs text-gray-500",children:e.user_email})]}),Mt.jsx(Lv,{variant:"outline",className:"text-xs",children:e.role})]}),Mt.jsx(Lv,{className:e.completed?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:e.completed?"Complete":"In Progress"})]},e.user_id))}),Mt.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-blue-200",children:[Mt.jsx("div",{className:"text-sm text-blue-700",children:p.all_completed?Mt.jsxs("span",{className:"flex items-center gap-2",children:[Mt.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"All participants have completed discovery"]}):Mt.jsxs("span",{className:"flex items-center gap-2",children:[Mt.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),"Waiting for ",p.total_participants-p.completed_participants," participants to complete"]})}),Mt.jsxs("div",{className:"flex gap-2",children:[Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:()=>f(),children:"Refresh Status"}),p.all_completed&&Mt.jsx(Gv,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{if(confirm("Are you sure you want to move to Rubric Creation? This will complete the discovery phase."))try{const n=await fetch(`/workshops/${t}`);if(!n.ok)throw new Error(`Failed to fetch workshop: ${n.statusText}`);const r=await n.json();if("discovery"!==r.current_phase)throw new Error(`Cannot advance to rubric: workshop is in ${r.current_phase} phase, not discovery phase`);if(!d||0===d.length)throw new Error("Cannot advance to rubric: No discovery findings submitted yet");const a=await fetch(`/workshops/${t}/complete-phase/discovery`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok){const e=await a.json().catch(()=>({}));throw new Error(`Failed to complete discovery phase: ${e.detail||a.statusText}`)}const i=await fetch(`/workshops/${t}/advance-to-rubric`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!i.ok){const e=await i.json().catch(()=>({}));throw new Error(`Failed to advance to rubric phase: ${e.detail||i.statusText}`)}ZS.success("Discovery phase completed! Moving to Rubric Creation."),s.invalidateQueries({queryKey:["workshop",t]}),s.invalidateQueries({queryKey:["discovery-completion-status",t]}),e&&e()}catch(n){const e=n instanceof Error?n.message:"Failed to complete discovery phase. Please try again.";ZS.error(e)}},children:"Move to Rubric Creation"})]})]})]})})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{className:"pb-4",children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(yv,{className:"w-5 h-5"}),"Search & Filter Findings"]})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"flex gap-4",children:[Mt.jsx("div",{className:"flex-1",children:Mt.jsx(_C,{placeholder:"Search findings by content or user...",value:a,onChange:e=>i(e.target.value),className:"w-full"})}),Mt.jsxs(oD,{value:o,onValueChange:l,children:[Mt.jsx(cD,{className:"w-48",children:Mt.jsx(lD,{placeholder:"Filter by user"})}),Mt.jsxs(hD,{children:[Mt.jsx(pD,{value:"all",children:"All Users"}),g.map(e=>{const t=null==d?void 0:d.find(t=>t.user_id===e);return Mt.jsx(pD,{value:e,children:t?`${t.user_name} (${t.user_email})`:y(e)},e)})]})]})]})})]}),Mt.jsxs(lC,{defaultValue:"by-finding",className:"space-y-4",children:[Mt.jsxs(cC,{children:[Mt.jsx(uC,{value:"by-finding",children:"All Findings"}),Mt.jsx(uC,{value:"by-trace",children:"By Trace"}),Mt.jsx(uC,{value:"by-user",children:"By User"})]}),Mt.jsx(dC,{value:"by-finding",children:Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{children:["All Findings (",x.length,")"]}),Mt.jsx(mx,{children:"Chronological list of all discovery findings"})]}),Mt.jsx(gx,{children:Mt.jsx("div",{className:"space-y-4",children:x.length>0?x.map(e=>{var t;const n=v(e.trace_id);return Mt.jsxs("div",{className:"border rounded-lg p-4 bg-slate-50",children:[Mt.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsxs("div",{className:"flex flex-col",children:[Mt.jsx(Lv,{variant:"outline",className:"text-xs",children:e.user_name}),Mt.jsx("span",{className:"text-xs text-slate-500",children:e.user_email})]}),Mt.jsxs("span",{className:"text-xs text-slate-500",children:["Trace: ",(null==(t=null==n?void 0:n.id)?void 0:t.slice(0,8))||"Unknown","..."]})]}),Mt.jsx("span",{className:"text-xs text-slate-400",children:new Date(e.created_at).toLocaleString()})]}),Mt.jsx("div",{className:"prose prose-sm max-w-none",children:Mt.jsx("div",{className:"whitespace-pre-wrap text-slate-700",children:e.insight})})]},e.id)}):Mt.jsxs("div",{className:"text-center py-8 text-slate-500",children:[Mt.jsx(Yx,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),Mt.jsx("p",{children:"No findings match your current filters"})]})})})]})}),Mt.jsx(dC,{value:"by-trace",children:Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsx(fx,{children:"Findings Organized by Trace"}),Mt.jsx(mx,{children:"See all findings grouped by the traces they analyze"})]}),Mt.jsx(gx,{children:Mt.jsx("div",{className:"space-y-6",children:Array.from(m.entries()).map(([e,t])=>{const n=v(e),r=t.filter(e=>x.some(t=>t.id===e.id));return 0===r.length?null:Mt.jsxs("div",{className:"border rounded-lg p-4",children:[Mt.jsxs("div",{className:"mb-4",children:[Mt.jsxs("h3",{className:"font-semibold text-slate-900 mb-2",children:["Trace: ",e.slice(0,8),"...",Mt.jsxs(Lv,{variant:"secondary",className:"ml-2",children:[r.length," finding",1!==r.length?"s":""]})]}),n&&Mt.jsxs("div",{className:"text-xs text-slate-600 mb-3 p-2 bg-slate-100 rounded",children:[Mt.jsx("strong",{children:"Input:"})," ",n.input.slice(0,100),"..."]})]}),Mt.jsx("div",{className:"space-y-3",children:r.map(e=>Mt.jsxs("div",{className:"pl-4 border-l-2 border-emerald-200 bg-emerald-50 p-3 rounded-r",children:[Mt.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Mt.jsxs("div",{className:"flex flex-col",children:[Mt.jsx(Lv,{variant:"outline",className:"text-xs",children:e.user_name}),Mt.jsx("span",{className:"text-xs text-slate-500",children:e.user_email})]}),Mt.jsx("span",{className:"text-xs text-slate-400",children:new Date(e.created_at).toLocaleString()})]}),Mt.jsx("div",{className:"whitespace-pre-wrap text-slate-700 text-sm",children:e.insight})]},e.id))})]},e)})})})]})}),Mt.jsx(dC,{value:"by-user",children:Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsx(fx,{children:"Findings Organized by User"}),Mt.jsx(mx,{children:"See all findings grouped by contributor"})]}),Mt.jsx(gx,{children:Mt.jsx("div",{className:"space-y-6",children:g.map(e=>{const t=x.filter(t=>t.user_id===e);if(0===t.length)return null;const n=null==d?void 0:d.find(t=>t.user_id===e);return Mt.jsxs("div",{className:"border rounded-lg p-4",children:[Mt.jsxs("div",{className:"mb-4",children:[Mt.jsxs("h3",{className:"font-semibold text-slate-900 mb-2",children:[n?n.user_name:y(e),Mt.jsxs(Lv,{variant:"secondary",className:"ml-2",children:[t.length," finding",1!==t.length?"s":""]})]}),n&&Mt.jsx("p",{className:"text-sm text-slate-600",children:n.user_email})]}),Mt.jsx("div",{className:"space-y-3",children:t.map(e=>{var t;const n=v(e.trace_id);return Mt.jsxs("div",{className:"pl-4 border-l-2 border-blue-200 bg-blue-50 p-3 rounded-r",children:[Mt.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Mt.jsxs("span",{className:"text-xs text-slate-600",children:["Trace: ",(null==(t=null==n?void 0:n.id)?void 0:t.slice(0,8))||"Unknown","..."]}),Mt.jsx("span",{className:"text-xs text-slate-400",children:new Date(e.created_at).toLocaleString()})]}),Mt.jsx("div",{className:"whitespace-pre-wrap text-slate-700 text-sm",children:e.insight})]},e.id)})})]},e)})})})]})})]})]})})};function SD(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}var _D,CD="dismissableLayer.update",ED="dismissableLayer.pointerDownOutside",TD="dismissableLayer.focusOutside",PD=kt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),RD=kt.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:o,...l}=e,c=kt.useContext(PD),[u,d]=kt.useState(null),h=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,p]=kt.useState({}),f=Uv(t,e=>d(e)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(g),v=u?m.indexOf(u):-1,y=c.layersWithOutsidePointerEventsDisabled.size>0,b=v>=x,w=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=y_(e),r=kt.useRef(!1),s=kt.useRef(()=>{});return kt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){DD(ED,n,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=r,t.addEventListener("click",s.current,{once:!0})):r()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...c.branches].some(e=>e.contains(t));b&&!n&&(null==s||s(e),null==i||i(e),e.defaultPrevented||null==o||o())},h),j=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=y_(e),r=kt.useRef(!1);return kt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){DD(TD,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...c.branches].some(e=>e.contains(t))||(null==a||a(e),null==i||i(e),e.defaultPrevented||null==o||o())},h);return sE(e=>{v===c.layers.size-1&&(null==r||r(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},h),kt.useEffect(()=>{if(u)return n&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(_D=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),ID(),()=>{n&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=_D)}},[u,h,n,c]),kt.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),ID())},[u,c]),kt.useEffect(()=>{const e=()=>p({});return document.addEventListener(CD,e),()=>document.removeEventListener(CD,e)},[]),Mt.jsx(x_.div,{...l,ref:f,style:{pointerEvents:y?b?"auto":"none":void 0,...e.style},onFocusCapture:SD(e.onFocusCapture,j.onFocusCapture),onBlurCapture:SD(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:SD(e.onPointerDownCapture,w.onPointerDownCapture)})});RD.displayName="DismissableLayer";function ID(){const e=new CustomEvent(CD);document.dispatchEvent(e)}function DD(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?v_(s,a):s.dispatchEvent(a)}kt.forwardRef((e,t)=>{const n=kt.useContext(PD),r=kt.useRef(null),s=Uv(t,r);return kt.useEffect(()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),Mt.jsx(x_.div,{...e,ref:s})}).displayName="DismissableLayerBranch";var MD=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=kt.useState(),r=kt.useRef(null),s=kt.useRef(e),a=kt.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return kt.useReducer((e,n)=>t[e][n]??e,e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return kt.useEffect(()=>{const e=AD(r.current);a.current="mounted"===o?e:"none"},[o]),p_(()=>{const t=r.current,n=s.current;if(n!==e){const r=a.current,i=AD(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,l]),p_(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,i=a=>{const i=AD(r.current).includes(CSS.escape(a.animationName));if(a.target===t&&i&&(l("ANIMATION_END"),!s.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(a.current=AD(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:kt.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),s="function"==typeof n?n({present:r.isPresent}):kt.Children.only(n),a=Uv(r.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;if(s)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof n||r.isPresent?kt.cloneElement(s,{ref:a}):null};function AD(e){return(null==e?void 0:e.animationName)||"none"}MD.displayName="Presence";var OD=0;function LD(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var FD="Dialog",[zD,WD]=u_(FD),[UD,$D]=zD(FD),qD=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,o=kt.useRef(null),l=kt.useRef(null),[c,u]=w_({prop:r,defaultProp:s??!1,onChange:a,caller:FD});return Mt.jsx(UD,{scope:t,triggerRef:o,contentRef:l,contentId:g_(),titleId:g_(),descriptionId:g_(),open:c,onOpenChange:u,onOpenToggle:kt.useCallback(()=>u(e=>!e),[u]),modal:i,children:n})};qD.displayName=FD;var BD="DialogTrigger",VD=kt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$D(BD,n),a=Uv(t,s.triggerRef);return Mt.jsx(x_.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":dM(s.open),...r,ref:a,onClick:SD(e.onClick,s.onOpenToggle)})});VD.displayName=BD;var HD="DialogPortal",[QD,KD]=zD(HD,{forceMount:void 0}),GD=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=$D(HD,t);return Mt.jsx(QD,{scope:t,forceMount:n,children:kt.Children.map(r,e=>Mt.jsx(MD,{present:n||a.open,children:Mt.jsx(zP,{asChild:!0,container:s,children:e})}))})};GD.displayName=HD;var YD="DialogOverlay",JD=kt.forwardRef((e,t)=>{const n=KD(YD,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=$D(YD,e.__scopeDialog);return a.modal?Mt.jsx(MD,{present:r||a.open,children:Mt.jsx(ZD,{...s,ref:t})}):null});JD.displayName=YD;var XD=$v("DialogOverlay.RemoveScroll"),ZD=kt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$D(YD,n);return Mt.jsx(MR,{as:XD,allowPinchZoom:!0,shards:[s.contentRef],children:Mt.jsx(x_.div,{"data-state":dM(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),eM="DialogContent",tM=kt.forwardRef((e,t)=>{const n=KD(eM,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=$D(eM,e.__scopeDialog);return Mt.jsx(MD,{present:r||a.open,children:a.modal?Mt.jsx(nM,{...s,ref:t}):Mt.jsx(rM,{...s,ref:t})})});tM.displayName=eM;var nM=kt.forwardRef((e,t)=>{const n=$D(eM,e.__scopeDialog),r=kt.useRef(null),s=Uv(t,n.contentRef,r);return kt.useEffect(()=>{const e=r.current;if(e)return QP(e)},[]),Mt.jsx(sM,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:SD(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:SD(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:SD(e.onFocusOutside,e=>e.preventDefault())})}),rM=kt.forwardRef((e,t)=>{const n=$D(eM,e.__scopeDialog),r=kt.useRef(!1),s=kt.useRef(!1);return Mt.jsx(sM,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,i;null==(a=e.onCloseAutoFocus)||a.call(e,t),t.defaultPrevented||(r.current||null==(i=n.triggerRef.current)||i.focus(),t.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:t=>{var a,i;null==(a=e.onInteractOutside)||a.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const o=t.target;(null==(i=n.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),sM=kt.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,o=$D(eM,n),l=kt.useRef(null),c=Uv(t,l);return kt.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??LD()),document.body.insertAdjacentElement("beforeend",e[1]??LD()),OD++,()=>{1===OD&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),OD--}},[]),Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(yE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:Mt.jsx(RD,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":dM(o.open),...i,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(mM,{titleId:o.titleId}),Mt.jsx(gM,{contentRef:l,descriptionId:o.descriptionId})]})]})}),aM="DialogTitle",iM=kt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$D(aM,n);return Mt.jsx(x_.h2,{id:s.titleId,...r,ref:t})});iM.displayName=aM;var oM="DialogDescription",lM=kt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$D(oM,n);return Mt.jsx(x_.p,{id:s.descriptionId,...r,ref:t})});lM.displayName=oM;var cM="DialogClose",uM=kt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$D(cM,n);return Mt.jsx(x_.button,{type:"button",...r,ref:t,onClick:SD(e.onClick,()=>s.onOpenChange(!1))})});function dM(e){return e?"open":"closed"}uM.displayName=cM;var hM="DialogTitleWarning",[pM,fM]=function(e,t){const n=kt.createContext(t),r=e=>{const{children:t,...r}=e,s=kt.useMemo(()=>r,Object.values(r));return Mt.jsx(n.Provider,{value:s,children:t})};return r.displayName=e+"Provider",[r,function(r){const s=kt.useContext(n);if(s)return s;if(void 0!==t)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}]}(hM,{contentName:eM,titleName:aM,docsSlug:"dialog"}),mM=({titleId:e})=>{const t=fM(hM),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return kt.useEffect(()=>{if(e){document.getElementById(e)||console.error(n)}},[n,e]),null},gM=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fM("DialogDescriptionWarning").contentName}}.`;return kt.useEffect(()=>{var r;const s=null==(r=e.current)?void 0:r.getAttribute("aria-describedby");if(t&&s){document.getElementById(t)||console.warn(n)}},[n,e,t]),null},xM=qD,vM=VD,yM=GD,bM=JD,wM=tM,jM=iM,NM=lM,kM=uM;function SM(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}var _M="AlertDialog",[CM,EM]=u_(_M,[WD]),TM=WD(),PM=e=>{const{__scopeAlertDialog:t,...n}=e,r=TM(t);return Mt.jsx(xM,{...r,...n,modal:!0})};PM.displayName=_M;var RM=kt.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=TM(n);return Mt.jsx(vM,{...s,...r,ref:t})});RM.displayName="AlertDialogTrigger";var IM=e=>{const{__scopeAlertDialog:t,...n}=e,r=TM(t);return Mt.jsx(yM,{...r,...n})};IM.displayName="AlertDialogPortal";var DM=kt.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=TM(n);return Mt.jsx(bM,{...s,...r,ref:t})});DM.displayName="AlertDialogOverlay";var MM="AlertDialogContent",[AM,OM]=CM(MM),LM=Hv("AlertDialogContent"),FM=kt.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,a=TM(n),i=kt.useRef(null),o=Uv(t,i),l=kt.useRef(null);return Mt.jsx(pM,{contentName:MM,titleName:zM,docsSlug:"alert-dialog",children:Mt.jsx(AM,{scope:n,cancelRef:l,children:Mt.jsxs(wM,{role:"alertdialog",...a,...s,ref:o,onOpenAutoFocus:SM(s.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=l.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[Mt.jsx(LM,{children:r}),Mt.jsx(HM,{contentRef:i})]})})})});FM.displayName=MM;var zM="AlertDialogTitle",WM=kt.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=TM(n);return Mt.jsx(jM,{...s,...r,ref:t})});WM.displayName=zM;var UM="AlertDialogDescription",$M=kt.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=TM(n);return Mt.jsx(NM,{...s,...r,ref:t})});$M.displayName=UM;var qM=kt.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=TM(n);return Mt.jsx(kM,{...s,...r,ref:t})});qM.displayName="AlertDialogAction";var BM="AlertDialogCancel",VM=kt.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=OM(BM,n),a=TM(n),i=Uv(t,s);return Mt.jsx(kM,{...a,...r,ref:i})});VM.displayName=BM;var HM=({contentRef:e})=>{const t=`\`${MM}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${MM}\` by passing a \`${UM}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${MM}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return kt.useEffect(()=>{var n;document.getElementById(null==(n=e.current)?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},QM=DM,KM=FM,GM=qM,YM=VM,JM=WM,XM=$M;const ZM=PM,eA=RM,tA=IM,nA=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(QM,{className:dx("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));nA.displayName=QM.displayName;const rA=kt.forwardRef(({className:e,...t},n)=>Mt.jsxs(tA,{children:[Mt.jsx(nA,{}),Mt.jsx(KM,{ref:n,className:dx("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));rA.displayName=KM.displayName;const sA=({className:e,...t})=>Mt.jsx("div",{className:dx("flex flex-col space-y-2 text-center sm:text-left",e),...t});sA.displayName="AlertDialogHeader";const aA=({className:e,...t})=>Mt.jsx("div",{className:dx("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});aA.displayName="AlertDialogFooter";const iA=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(JM,{ref:n,className:dx("text-lg font-semibold",e),...t}));iA.displayName=JM.displayName;const oA=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(XM,{ref:n,className:dx("text-sm text-muted-foreground",e),...t}));oA.displayName=XM.displayName;const lA=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(GM,{ref:n,className:dx(Kv(),e),...t}));lA.displayName=GM.displayName;const cA=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(YM,{ref:n,className:dx(Kv({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));function uA(){const{workshopId:e}=Ym(),{setCurrentPhase:t}=gg(),n=$p(),[r,s]=kt.useState({databricks_host:"",databricks_token:"",experiment_id:"",max_traces:100,filter_string:""}),[a,i]=kt.useState(null),[o,l]=kt.useState(!1),[c,u]=kt.useState(null),[d,h]=kt.useState(null),[p,f]=kt.useState(!1),[m,g]=kt.useState(!1);kt.useEffect(()=>{x()},[e]);const x=async()=>{if(e)try{const t=await fetch(`/workshops/${e}/mlflow-status`);if(t.ok){const e=await t.json();i(e),e.config&&s(e.config)}}catch(yW){}},v=(e,t)=>{s(n=>({...n,[e]:t}))};return Mt.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[Mt.jsxs("div",{className:"mb-8",children:[Mt.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"MLflow Trace Intake"}),Mt.jsx("p",{className:"text-gray-600",children:"Configure and pull MLflow traces from your Databricks workspace to begin the workshop."})]}),Mt.jsxs(hx,{className:"mb-6",children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Hx,{className:"h-5 w-5"}),"Intake Status"]})}),Mt.jsx(gx,{children:a?Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Lv,{variant:a.is_configured?"default":"secondary",children:a.is_configured?"Configured":"Not Configured"}),Mt.jsx(Lv,{variant:a.is_ingested?"default":"secondary",children:a.is_ingested?"Ingested":"Not Ingested"}),a.trace_count>0&&Mt.jsxs(Lv,{variant:"outline",children:[a.trace_count," traces"]})]}),a.last_ingestion_time&&Mt.jsxs("p",{className:"text-sm text-gray-600",children:["Last ingested: ",new Date(a.last_ingestion_time).toLocaleString()]}),a.error_message&&Mt.jsxs(tE,{variant:"destructive",children:[Mt.jsx(Fx,{className:"h-4 w-4"}),Mt.jsx(nE,{children:a.error_message})]})]}):Mt.jsx("p",{className:"text-gray-500",children:"Loading status..."})})]}),Mt.jsxs(hx,{className:"mb-6",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(wv,{className:"h-5 w-5"}),"MLflow Configuration"]}),Mt.jsx(mx,{children:"Configure your Databricks workspace and MLflow experiment details."})]}),Mt.jsxs(gx,{className:"space-y-4",children:[Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"databricks_host",children:"Databricks Host"}),Mt.jsx(_C,{id:"databricks_host",placeholder:"https://your-workspace.cloud.databricks.com",value:r.databricks_host,onChange:e=>v("databricks_host",e.target.value)})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"experiment_id",children:"Experiment ID"}),Mt.jsx(_C,{id:"experiment_id",placeholder:"1234567890123456",value:r.experiment_id,onChange:e=>v("experiment_id",e.target.value)})]})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"databricks_token",children:"Databricks Token"}),Mt.jsx(_C,{id:"databricks_token",type:"password",placeholder:"dapi...",value:r.databricks_token,onChange:e=>v("databricks_token",e.target.value)})]}),Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"max_traces",children:"Max Traces"}),Mt.jsx(_C,{id:"max_traces",type:"number",min:"1",max:"1000",value:r.max_traces,onChange:e=>v("max_traces",parseInt(e.target.value))})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{htmlFor:"filter_string",children:"Filter String (Optional)"}),Mt.jsx(_C,{id:"filter_string",placeholder:"attributes.status = 'OK'",value:r.filter_string||"",onChange:e=>v("filter_string",e.target.value)})]})]})]})]}),Mt.jsxs(hx,{className:"mb-6",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Qx,{className:"h-5 w-5"}),"Ingest Traces"]}),Mt.jsx(mx,{children:"Pull traces from MLflow into the workshop for analysis."})]}),Mt.jsxs(gx,{children:[Mt.jsx(Gv,{onClick:async()=>{if(e)if(r.databricks_host&&r.databricks_token&&r.experiment_id){l(!0),u(null);try{const t=await fetch(`/workshops/${e}/mlflow-config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok){const e=await t.json();return void u(e.detail||"Failed to save configuration")}const s=await fetch(`/workshops/${e}/mlflow-ingest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(s.ok){const t=await s.json();await x(),n.invalidateQueries({queryKey:["traces",e]}),n.invalidateQueries({queryKey:["all-traces",e]}),0===t.trace_count?ZS.info("Traces from this experiment have already been ingested. No new traces were added."):ZS.success(`Successfully ingested ${t.trace_count} traces!`)}else if(404===s.status)u("Workshop or MLflow endpoint not found. Please check your configuration and try again.");else{const e=await s.json().catch(()=>({}));u(e.detail||`Failed to ingest traces (HTTP ${s.status})`)}}catch(yW){u("Network error: Unable to connect to the server. Please check your connection and try again.")}finally{l(!1)}}else u("Please fill in all required fields: Databricks Host, Token, and Experiment ID.");else u("No workshop available. Please create a workshop first.")},disabled:o||!r.databricks_host||!r.databricks_token||!r.experiment_id,className:"w-full",children:o?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"mr-2 h-4 w-4 animate-spin"}),"Ingesting Traces..."]}):"Ingest Traces from MLflow"}),c&&Mt.jsxs(tE,{variant:"destructive",className:"mt-4",children:[Mt.jsx(Fx,{className:"h-4 w-4"}),Mt.jsx(nE,{children:c})]})]})]}),Mt.jsxs(hx,{className:"mb-6",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Ev,{className:"h-5 w-5"}),"Upload Traces from CSV"]}),Mt.jsx(mx,{children:'Upload traces from an MLflow trace export CSV for customers without direct MLflow access. CSV must have "request_preview" and "response_preview" columns.'})]}),Mt.jsxs(gx,{className:"space-y-4",children:[Mt.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[Mt.jsx(Yx,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),Mt.jsx("div",{className:"mb-4",children:Mt.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[Mt.jsx("input",{id:"csv-upload",type:"file",accept:".csv",className:"hidden",onChange:e=>{e.target.files&&e.target.files[0]&&(h(e.target.files[0]),u(null))}}),Mt.jsx(Gv,{variant:"outline",type:"button",asChild:!0,children:Mt.jsxs("span",{children:[Mt.jsx(Yx,{className:"mr-2 h-4 w-4"}),"Select CSV File"]})})]})}),d&&Mt.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Selected: ",Mt.jsx("span",{className:"font-medium",children:d.name})]}),Mt.jsx("p",{className:"text-xs text-gray-500",children:'Expected format: MLflow trace export CSV with "request_preview" and "response_preview" columns'})]}),Mt.jsx(Gv,{onClick:async()=>{if(e)if(d){f(!0),u(null);try{const t=new FormData;t.append("file",d);const r=await fetch(`/workshops/${e}/csv-upload`,{method:"POST",body:t});if(r.ok){const t=await r.json();await x(),n.invalidateQueries({queryKey:["traces",e]}),n.invalidateQueries({queryKey:["all-traces",e]}),ZS.success(`Successfully uploaded ${t.trace_count} traces from CSV!`),h(null)}else{const e=await r.json().catch(()=>({}));u(e.detail||`Failed to upload CSV (HTTP ${r.status})`)}}catch(yW){u("Network error: Unable to connect to the server. Please check your connection and try again.")}finally{f(!1)}}else u("Please select a CSV file to upload.");else u("No workshop available. Please create a workshop first.")},disabled:p||!d,className:"w-full",children:p?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading CSV..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Ev,{className:"mr-2 h-4 w-4"}),"Upload CSV Traces"]})})]})]}),Mt.jsxs(hx,{className:"mb-6 border-red-200 bg-gradient-to-r from-red-50 to-orange-50",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2 text-red-800",children:[Mt.jsx(xv,{className:"h-5 w-5"}),"Reset & Start Over"]}),Mt.jsx(mx,{className:"text-red-700",children:(null==a?void 0:a.trace_count)&&a.trace_count>0?`Delete all ${a.trace_count} traces and reset the workshop to start fresh with new data.`:"Reset the workshop and clear all progress to start fresh."})]}),Mt.jsx(gx,{children:Mt.jsxs(ZM,{children:[Mt.jsx(eA,{asChild:!0,children:Mt.jsx(Gv,{variant:"destructive",disabled:m,className:"w-full",children:m?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"mr-2 h-4 w-4 animate-spin"}),"Resetting..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Cv,{className:"mr-2 h-4 w-4"}),"Delete All & Reset Workshop"]})})}),Mt.jsxs(rA,{children:[Mt.jsxs(sA,{children:[Mt.jsx(iA,{children:"Are you absolutely sure?"}),Mt.jsx(oA,{children:(null==a?void 0:a.trace_count)&&a.trace_count>0?`This will permanently delete all ${a.trace_count} traces and reset the workshop to the intake phase. All annotations, findings, and progress will be lost. This action cannot be undone.`:"This will reset the workshop to the intake phase and clear all progress. This action cannot be undone."})]}),Mt.jsxs(aA,{children:[Mt.jsx(cA,{children:"Cancel"}),Mt.jsx(lA,{onClick:async()=>{if(e){g(!0),u(null);try{const t=await fetch(`/workshops/${e}/traces`,{method:"DELETE"});if(t.ok){const r=await t.json();await x(),n.invalidateQueries({queryKey:["traces",e]}),n.invalidateQueries({queryKey:["all-traces",e]}),n.invalidateQueries({queryKey:["workshop",e]}),ZS.success(`Deleted ${r.deleted_count} traces. Workshop reset to intake phase.`)}else{const e=await t.json().catch(()=>({}));u(e.detail||`Failed to delete traces (HTTP ${t.status})`)}}catch(yW){u("Network error: Unable to connect to the server.")}finally{g(!1)}}else u("No workshop available.")},className:"bg-red-600 hover:bg-red-700",children:"Delete All & Reset"})]})]})]})})]})]})}cA.displayName=YM.displayName;var dA="horizontal",hA=["horizontal","vertical"],pA=kt.forwardRef((e,t)=>{const{decorative:n,orientation:r=dA,...s}=e,a=function(e){return hA.includes(e)}(r)?r:dA,i=n?{role:"none"}:{"aria-orientation":"vertical"===a?a:void 0,role:"separator"};return Mt.jsx(x_.div,{"data-orientation":a,...i,...s,ref:t})});pA.displayName="Separator";var fA=pA;const mA=kt.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>Mt.jsx(fA,{ref:s,decorative:n,orientation:t,className:dx("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...r}));mA.displayName=fA.displayName;var gA=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=kt.useState(),r=kt.useRef(null),s=kt.useRef(e),a=kt.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return kt.useReducer((e,n)=>t[e][n]??e,e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return kt.useEffect(()=>{const e=xA(r.current);a.current="mounted"===o?e:"none"},[o]),p_(()=>{const t=r.current,n=s.current;if(n!==e){const r=a.current,i=xA(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,l]),p_(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,i=a=>{const i=xA(r.current).includes(CSS.escape(a.animationName));if(a.target===t&&i&&(l("ANIMATION_END"),!s.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(a.current=xA(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:kt.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),s="function"==typeof n?n({present:r.isPresent}):kt.Children.only(n),a=Uv(r.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;if(s)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof n||r.isPresent?kt.cloneElement(s,{ref:a}):null};function xA(e){return(null==e?void 0:e.animationName)||"none"}function vA(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}gA.displayName="Presence";var yA="ScrollArea",[bA,wA]=u_(yA),[jA,NA]=bA(yA),kA=kt.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[o,l]=kt.useState(null),[c,u]=kt.useState(null),[d,h]=kt.useState(null),[p,f]=kt.useState(null),[m,g]=kt.useState(null),[x,v]=kt.useState(0),[y,b]=kt.useState(0),[w,j]=kt.useState(!1),[N,k]=kt.useState(!1),S=Uv(t,e=>l(e)),_=N_(s);return Mt.jsx(jA,{scope:n,type:r,dir:_,scrollHideDelay:a,scrollArea:o,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:p,onScrollbarXChange:f,scrollbarXEnabled:w,onScrollbarXEnabledChange:j,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:N,onScrollbarYEnabledChange:k,onCornerWidthChange:v,onCornerHeightChange:b,children:Mt.jsx(x_.div,{dir:_,...i,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});kA.displayName=yA;var SA="ScrollAreaViewport",_A=kt.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,i=NA(SA,n),o=Uv(t,kt.useRef(null),i.onViewportChange);return Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),Mt.jsx(x_.div,{"data-radix-scroll-area-viewport":"",...a,ref:o,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:Mt.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});_A.displayName=SA;var CA="ScrollAreaScrollbar",EA=kt.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=NA(CA,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,o="horizontal"===e.orientation;return kt.useEffect(()=>(o?a(!0):i(!0),()=>{o?a(!1):i(!1)}),[o,a,i]),"hover"===s.type?Mt.jsx(TA,{...r,ref:t,forceMount:n}):"scroll"===s.type?Mt.jsx(PA,{...r,ref:t,forceMount:n}):"auto"===s.type?Mt.jsx(RA,{...r,ref:t,forceMount:n}):"always"===s.type?Mt.jsx(IA,{...r,ref:t}):null});EA.displayName=CA;var TA=kt.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=NA(CA,e.__scopeScrollArea),[a,i]=kt.useState(!1);return kt.useEffect(()=>{const e=s.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),i(!0)},r=()=>{t=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[s.scrollArea,s.scrollHideDelay]),Mt.jsx(gA,{present:n||a,children:Mt.jsx(RA,{"data-state":a?"visible":"hidden",...r,ref:t})})}),PA=kt.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=NA(CA,e.__scopeScrollArea),a="horizontal"===e.orientation,i=JA(()=>l("SCROLL_END"),100),[o,l]=(c="hidden",u={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},kt.useReducer((e,t)=>u[e][t]??e,c));var c,u;return kt.useEffect(()=>{if("idle"===o){const e=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(e)}},[o,s.scrollHideDelay,l]),kt.useEffect(()=>{const e=s.viewport,t=a?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(l("SCROLL"),i()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[s.viewport,a,l,i]),Mt.jsx(gA,{present:n||"hidden"!==o,children:Mt.jsx(IA,{"data-state":"hidden"===o?"hidden":"visible",...r,ref:t,onPointerEnter:vA(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:vA(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),RA=kt.forwardRef((e,t)=>{const n=NA(CA,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=kt.useState(!1),o="horizontal"===e.orientation,l=JA(()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;i(o?e:t)}},10);return XA(n.viewport,l),XA(n.content,l),Mt.jsx(gA,{present:r||a,children:Mt.jsx(IA,{"data-state":a?"visible":"hidden",...s,ref:t})})}),IA=kt.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=NA(CA,e.__scopeScrollArea),a=kt.useRef(null),i=kt.useRef(0),[o,l]=kt.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=VA(o.viewport,o.content),u={...r,sizes:o,onSizesChange:l,hasThumb:Boolean(c>0&&c<1),onThumbChange:e=>a.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function d(e,t){return function(e,t,n,r="ltr"){const s=HA(n),a=s/2,i=t||a,o=s-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,d="ltr"===r?[0,u]:[-1*u,0];return KA([l,c],d)(e)}(e,i.current,o,t)}return"horizontal"===n?Mt.jsx(DA,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const e=QA(s.viewport.scrollLeft,o,s.dir);a.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollLeft=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollLeft=d(e,s.dir))}}):"vertical"===n?Mt.jsx(MA,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const e=QA(s.viewport.scrollTop,o);a.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollTop=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollTop=d(e))}}):null}),DA=kt.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=NA(CA,e.__scopeScrollArea),[i,o]=kt.useState(),l=kt.useRef(null),c=Uv(t,l,a.onScrollbarXChange);return kt.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),Mt.jsx(LA,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:"rtl"===a.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===a.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":HA(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(a.viewport){const r=a.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),GA(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:BA(i.paddingLeft),paddingEnd:BA(i.paddingRight)}})}})}),MA=kt.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=NA(CA,e.__scopeScrollArea),[i,o]=kt.useState(),l=kt.useRef(null),c=Uv(t,l,a.onScrollbarYChange);return kt.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),Mt.jsx(LA,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":HA(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(a.viewport){const r=a.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),GA(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:BA(i.paddingTop),paddingEnd:BA(i.paddingBottom)}})}})}),[AA,OA]=bA(CA),LA=kt.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=e,p=NA(CA,n),[f,m]=kt.useState(null),g=Uv(t,e=>m(e)),x=kt.useRef(null),v=kt.useRef(""),y=p.viewport,b=r.content-r.viewport,w=y_(u),j=y_(l),N=JA(d,10);function k(e){if(x.current){const t=e.clientX-x.current.left,n=e.clientY-x.current.top;c({x:t,y:n})}}return kt.useEffect(()=>{const e=e=>{const t=e.target;(null==f?void 0:f.contains(t))&&w(e,b)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[y,f,b,w]),kt.useEffect(j,[r,j]),XA(f,N),XA(p.content,N),Mt.jsx(AA,{scope:n,scrollbar:f,hasThumb:s,onThumbChange:y_(a),onThumbPointerUp:y_(i),onThumbPositionChange:j,onThumbPointerDown:y_(o),children:Mt.jsx(x_.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:vA(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),x.current=f.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),k(e)}}),onPointerMove:vA(e.onPointerMove,k),onPointerUp:vA(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),FA="ScrollAreaThumb",zA=kt.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=OA(FA,e.__scopeScrollArea);return Mt.jsx(gA,{present:n||s.hasThumb,children:Mt.jsx(WA,{ref:t,...r})})}),WA=kt.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=NA(FA,n),i=OA(FA,n),{onThumbPositionChange:o}=i,l=Uv(t,e=>i.onThumbChange(e)),c=kt.useRef(void 0),u=JA(()=>{c.current&&(c.current(),c.current=void 0)},100);return kt.useEffect(()=>{const e=a.viewport;if(e){const t=()=>{if(u(),!c.current){const t=YA(e,o);c.current=t,o()}};return o(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[a.viewport,u,o]),Mt.jsx(x_.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:vA(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;i.onThumbPointerDown({x:n,y:r})}),onPointerUp:vA(e.onPointerUp,i.onThumbPointerUp)})});zA.displayName=FA;var UA="ScrollAreaCorner",$A=kt.forwardRef((e,t)=>{const n=NA(UA,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?Mt.jsx(qA,{...e,ref:t}):null});$A.displayName=UA;var qA=kt.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=NA(UA,n),[a,i]=kt.useState(0),[o,l]=kt.useState(0),c=Boolean(a&&o);return XA(s.scrollbarX,()=>{var e;const t=(null==(e=s.scrollbarX)?void 0:e.offsetHeight)||0;s.onCornerHeightChange(t),l(t)}),XA(s.scrollbarY,()=>{var e;const t=(null==(e=s.scrollbarY)?void 0:e.offsetWidth)||0;s.onCornerWidthChange(t),i(t)}),c?Mt.jsx(x_.div,{...r,ref:t,style:{width:a,height:o,position:"absolute",right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:0,...e.style}}):null});function BA(e){return e?parseInt(e,10):0}function VA(e,t){const n=e/t;return isNaN(n)?0:n}function HA(e){const t=VA(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function QA(e,t,n="ltr"){const r=HA(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,o=a-r,l=rE(e,"ltr"===n?[0,i]:[-1*i,0]);return KA([0,i],[0,o])(l)}function KA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function GA(e,t){return e>0&&e<t}var YA=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,o=n.top!==a.top;(i||o)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function JA(e,t){const n=y_(e),r=kt.useRef(0);return kt.useEffect(()=>()=>window.clearTimeout(r.current),[]),kt.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function XA(e,t){const n=y_(t);p_(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}var ZA=kA,eO=_A,tO=$A;const nO=kt.forwardRef(({className:e,children:t,...n},r)=>Mt.jsxs(ZA,{ref:r,className:dx("relative overflow-hidden",e),...n,children:[Mt.jsx(eO,{className:"h-full w-full rounded-[inherit]",children:t}),Mt.jsx(rO,{}),Mt.jsx(tO,{})]}));nO.displayName=ZA.displayName;const rO=kt.forwardRef(({className:e,orientation:t="vertical",...n},r)=>Mt.jsx(EA,{ref:r,orientation:t,className:dx("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:Mt.jsx(zA,{className:"relative flex-1 rounded-full bg-border"})}));rO.displayName=EA.displayName;var sO={exports:{}},aO={},iO=kt;var oO="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},lO=iO.useState,cO=iO.useEffect,uO=iO.useLayoutEffect,dO=iO.useDebugValue;function hO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oO(e,n)}catch(r){return!0}}var pO="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=lO({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return uO(function(){s.value=n,s.getSnapshot=t,hO(s)&&a({inst:s})},[e,n,t]),cO(function(){return hO(s)&&a({inst:s}),e(function(){hO(s)&&a({inst:s})})},[e]),dO(n),n};aO.useSyncExternalStore=void 0!==iO.useSyncExternalStore?iO.useSyncExternalStore:pO,sO.exports=aO;var fO=sO.exports;function mO(){return()=>{}}var gO="Avatar",[xO,vO]=u_(gO),[yO,bO]=xO(gO),wO=kt.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,a]=kt.useState("idle");return Mt.jsx(yO,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:Mt.jsx(x_.span,{...r,ref:t})})});wO.displayName=gO;var jO="AvatarImage",NO=kt.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=e,i=bO(jO,n),o=function(e,{referrerPolicy:t,crossOrigin:n}){const r=fO.useSyncExternalStore(mO,()=>!0,()=>!1),s=kt.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[i,o]=kt.useState(()=>_O(a,e));return p_(()=>{o(_O(a,e))},[a,e]),p_(()=>{const e=e=>()=>{o(e)};if(!a)return;const r=e("loaded"),s=e("error");return a.addEventListener("load",r),a.addEventListener("error",s),t&&(a.referrerPolicy=t),"string"==typeof n&&(a.crossOrigin=n),()=>{a.removeEventListener("load",r),a.removeEventListener("error",s)}},[a,n,t]),i}(r,a),l=y_(e=>{s(e),i.onImageLoadingStatusChange(e)});return p_(()=>{"idle"!==o&&l(o)},[o,l]),"loaded"===o?Mt.jsx(x_.img,{...a,ref:t,src:r}):null});NO.displayName=jO;var kO="AvatarFallback",SO=kt.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,a=bO(kO,n),[i,o]=kt.useState(void 0===r);return kt.useEffect(()=>{if(void 0!==r){const e=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(e)}},[r]),i&&"loaded"!==a.imageLoadingStatus?Mt.jsx(x_.span,{...s,ref:t}):null});function _O(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}SO.displayName=kO;var CO=wO,EO=NO,TO=SO;const PO=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(CO,{ref:n,className:dx("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));PO.displayName=CO.displayName;kt.forwardRef(({className:e,...t},n)=>Mt.jsx(EO,{ref:n,className:dx("aspect-square h-full w-full",e),...t})).displayName=EO.displayName;const RO=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(TO,{ref:n,className:dx("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));RO.displayName=TO.displayName;var IO=["Enter"," "],DO=["ArrowUp","PageDown","End"],MO=["ArrowDown","PageUp","Home",...DO],AO={ltr:[...IO,"ArrowRight"],rtl:[...IO,"ArrowLeft"]},OO={ltr:["ArrowLeft"],rtl:["ArrowRight"]},LO="Menu",[FO,zO,WO]=h_(LO),[UO,$O]=u_(LO,[WO,yP,R_]),qO=yP(),BO=R_(),[VO,HO]=UO(LO),[QO,KO]=UO(LO),GO=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:a,modal:i=!0}=e,o=qO(t),[l,c]=kt.useState(null),u=kt.useRef(!1),d=y_(a),h=N_(s);return kt.useEffect(()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),Mt.jsx(AP,{...o,children:Mt.jsx(VO,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:c,children:Mt.jsx(QO,{scope:t,onClose:kt.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:i,children:r})})})};GO.displayName=LO;var YO=kt.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=qO(n);return Mt.jsx(OP,{...s,...r,ref:t})});YO.displayName="MenuAnchor";var JO="MenuPortal",[XO,ZO]=UO(JO,{forceMount:void 0}),eL=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,a=HO(JO,t);return Mt.jsx(XO,{scope:t,forceMount:n,children:Mt.jsx($_,{present:n||a.open,children:Mt.jsx(zP,{asChild:!0,container:s,children:r})})})};eL.displayName=JO;var tL="MenuContent",[nL,rL]=UO(tL),sL=kt.forwardRef((e,t)=>{const n=ZO(tL,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=HO(tL,e.__scopeMenu),i=KO(tL,e.__scopeMenu);return Mt.jsx(FO.Provider,{scope:e.__scopeMenu,children:Mt.jsx($_,{present:r||a.open,children:Mt.jsx(FO.Slot,{scope:e.__scopeMenu,children:i.modal?Mt.jsx(aL,{...s,ref:t}):Mt.jsx(iL,{...s,ref:t})})})})}),aL=kt.forwardRef((e,t)=>{const n=HO(tL,e.__scopeMenu),r=kt.useRef(null),s=Uv(t,r);return kt.useEffect(()=>{const e=r.current;if(e)return QP(e)},[]),Mt.jsx(lL,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:c_(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),iL=kt.forwardRef((e,t)=>{const n=HO(tL,e.__scopeMenu);return Mt.jsx(lL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),oL=$v("MenuContent.ScrollLock"),lL=kt.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:f,...m}=e,g=HO(tL,n),x=KO(tL,n),v=qO(n),y=BO(n),b=zO(n),[w,j]=kt.useState(null),N=kt.useRef(null),k=Uv(t,N,g.onContentChange),S=kt.useRef(0),_=kt.useRef(""),C=kt.useRef(0),E=kt.useRef(null),T=kt.useRef("right"),P=kt.useRef(0),R=f?MR:kt.Fragment,I=f?{as:oL,allowPinchZoom:!0}:void 0,D=e=>{var t,n;const r=_.current+e,s=b().filter(e=>!e.disabled),a=document.activeElement,i=null==(t=s.find(e=>e.ref.current===a))?void 0:t.textValue,o=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),s=r?t[0]:t,a=n?e.indexOf(n):-1;let i=(o=e,l=Math.max(a,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===s.length&&(i=i.filter(e=>e!==n));const c=i.find(e=>e.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}(s.map(e=>e.textValue),r,i),l=null==(n=s.find(e=>e.textValue===o))?void 0:n.ref.current;!function e(t){_.current=t,window.clearTimeout(S.current),""!==t&&(S.current=window.setTimeout(()=>e(""),1e3))}(r),l&&setTimeout(()=>l.focus())};kt.useEffect(()=>()=>window.clearTimeout(S.current),[]),fE();const M=kt.useCallback(e=>{var t,n;return T.current===(null==(t=E.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a],o=t[i],l=e.x,c=e.y,u=o.x,d=o.y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(s=!s)}return s}(n,t)}(e,null==(n=E.current)?void 0:n.area)},[]);return Mt.jsx(nL,{scope:n,searchRef:_,onItemEnter:kt.useCallback(e=>{M(e)&&e.preventDefault()},[M]),onItemLeave:kt.useCallback(e=>{var t;M(e)||(null==(t=N.current)||t.focus(),j(null))},[M]),onTriggerLeave:kt.useCallback(e=>{M(e)&&e.preventDefault()},[M]),pointerGraceTimerRef:C,onPointerGraceIntentChange:kt.useCallback(e=>{E.current=e},[]),children:Mt.jsx(R,{...I,children:Mt.jsx(yE,{asChild:!0,trapped:s,onMountAutoFocus:c_(a,e=>{var t;e.preventDefault(),null==(t=N.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:Mt.jsx(uE,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:Mt.jsx(W_,{asChild:!0,...y,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:j,onEntryFocus:c_(l,e=>{x.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:Mt.jsx(LP,{role:"menu","aria-orientation":"vertical","data-state":ML(g.open),"data-radix-menu-content":"",dir:x.dir,...v,...m,ref:k,style:{outline:"none",...m.style},onKeyDown:c_(m.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&D(e.key));const s=N.current;if(e.target!==s)return;if(!MO.includes(e.key))return;e.preventDefault();const a=b().filter(e=>!e.disabled).map(e=>e.ref.current);DO.includes(e.key)&&a.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(a)}),onBlur:c_(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(S.current),_.current="")}),onPointerMove:c_(e.onPointerMove,LL(e=>{const t=e.target,n=P.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>P.current?"right":"left";T.current=t,P.current=e.clientX}}))})})})})})})});sL.displayName=tL;var cL=kt.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return Mt.jsx(x_.div,{role:"group",...r,ref:t})});cL.displayName="MenuGroup";var uL=kt.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return Mt.jsx(x_.div,{...r,ref:t})});uL.displayName="MenuLabel";var dL="MenuItem",hL="menu.itemSelect",pL=kt.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,a=kt.useRef(null),i=KO(dL,e.__scopeMenu),o=rL(dL,e.__scopeMenu),l=Uv(t,a),c=kt.useRef(!1);return Mt.jsx(fL,{...s,ref:l,disabled:n,onClick:c_(e.onClick,()=>{const e=a.current;if(!n&&e){const t=new CustomEvent(hL,{bubbles:!0,cancelable:!0});e.addEventListener(hL,e=>null==r?void 0:r(e),{once:!0}),v_(e,t),t.defaultPrevented?c.current=!1:i.onClose()}}),onPointerDown:t=>{var n;null==(n=e.onPointerDown)||n.call(e,t),c.current=!0},onPointerUp:c_(e.onPointerUp,e=>{var t;c.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:c_(e.onKeyDown,e=>{const t=""!==o.searchRef.current;n||t&&" "===e.key||IO.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});pL.displayName=dL;var fL=kt.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=e,i=rL(dL,n),o=BO(n),l=kt.useRef(null),c=Uv(t,l),[u,d]=kt.useState(!1),[h,p]=kt.useState("");return kt.useEffect(()=>{const e=l.current;e&&p((e.textContent??"").trim())},[a.children]),Mt.jsx(FO.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:Mt.jsx(U_,{asChild:!0,...o,focusable:!r,children:Mt.jsx(x_.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:c,onPointerMove:c_(e.onPointerMove,LL(e=>{if(r)i.onItemLeave(e);else if(i.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:c_(e.onPointerLeave,LL(e=>i.onItemLeave(e))),onFocus:c_(e.onFocus,()=>d(!0)),onBlur:c_(e.onBlur,()=>d(!1))})})})}),mL=kt.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return Mt.jsx(NL,{scope:e.__scopeMenu,checked:n,children:Mt.jsx(pL,{role:"menuitemcheckbox","aria-checked":AL(n)?"mixed":n,...s,ref:t,"data-state":OL(n),onSelect:c_(s.onSelect,()=>null==r?void 0:r(!!AL(n)||!n),{checkForDefaultPrevented:!1})})})});mL.displayName="MenuCheckboxItem";var gL="MenuRadioGroup",[xL,vL]=UO(gL,{value:void 0,onValueChange:()=>{}}),yL=kt.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,a=y_(r);return Mt.jsx(xL,{scope:e.__scopeMenu,value:n,onValueChange:a,children:Mt.jsx(cL,{...s,ref:t})})});yL.displayName=gL;var bL="MenuRadioItem",wL=kt.forwardRef((e,t)=>{const{value:n,...r}=e,s=vL(bL,e.__scopeMenu),a=n===s.value;return Mt.jsx(NL,{scope:e.__scopeMenu,checked:a,children:Mt.jsx(pL,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":OL(a),onSelect:c_(r.onSelect,()=>{var e;return null==(e=s.onValueChange)?void 0:e.call(s,n)},{checkForDefaultPrevented:!1})})})});wL.displayName=bL;var jL="MenuItemIndicator",[NL,kL]=UO(jL,{checked:!1}),SL=kt.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,a=kL(jL,n);return Mt.jsx($_,{present:r||AL(a.checked)||!0===a.checked,children:Mt.jsx(x_.span,{...s,ref:t,"data-state":OL(a.checked)})})});SL.displayName=jL;var _L=kt.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return Mt.jsx(x_.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});_L.displayName="MenuSeparator";var CL=kt.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=qO(n);return Mt.jsx(FP,{...s,...r,ref:t})});CL.displayName="MenuArrow";var[EL,TL]=UO("MenuSub"),PL="MenuSubTrigger",RL=kt.forwardRef((e,t)=>{const n=HO(PL,e.__scopeMenu),r=KO(PL,e.__scopeMenu),s=TL(PL,e.__scopeMenu),a=rL(PL,e.__scopeMenu),i=kt.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=a,c={__scopeMenu:e.__scopeMenu},u=kt.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return kt.useEffect(()=>u,[u]),kt.useEffect(()=>{const e=o.current;return()=>{window.clearTimeout(e),l(null)}},[o,l]),Mt.jsx(YO,{asChild:!0,...c,children:Mt.jsx(fL,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":ML(n.open),...e,ref:Wv(t,s.onTriggerChange),onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:c_(e.onPointerMove,LL(t=>{a.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||i.current||(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:c_(e.onPointerLeave,LL(e=>{var t,r;u();const s=null==(t=n.content)?void 0:t.getBoundingClientRect();if(s){const t=null==(r=n.content)?void 0:r.dataset.side,i="right"===t,l=i?-5:5,c=s[i?"left":"right"],u=s[i?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:s.top},{x:u,y:s.top},{x:u,y:s.bottom},{x:c,y:s.bottom}],side:t}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:c_(e.onKeyDown,t=>{var s;const i=""!==a.searchRef.current;e.disabled||i&&" "===t.key||AO[r.dir].includes(t.key)&&(n.onOpenChange(!0),null==(s=n.content)||s.focus(),t.preventDefault())})})})});RL.displayName=PL;var IL="MenuSubContent",DL=kt.forwardRef((e,t)=>{const n=ZO(tL,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=HO(tL,e.__scopeMenu),i=KO(tL,e.__scopeMenu),o=TL(IL,e.__scopeMenu),l=kt.useRef(null),c=Uv(t,l);return Mt.jsx(FO.Provider,{scope:e.__scopeMenu,children:Mt.jsx($_,{present:r||a.open,children:Mt.jsx(FO.Slot,{scope:e.__scopeMenu,children:Mt.jsx(lL,{id:o.contentId,"aria-labelledby":o.triggerId,...s,ref:c,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;i.isUsingKeyboardRef.current&&(null==(t=l.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:c_(e.onFocusOutside,e=>{e.target!==o.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:c_(e.onEscapeKeyDown,e=>{i.onClose(),e.preventDefault()}),onKeyDown:c_(e.onKeyDown,e=>{var t;const n=e.currentTarget.contains(e.target),r=OO[i.dir].includes(e.key);n&&r&&(a.onOpenChange(!1),null==(t=o.trigger)||t.focus(),e.preventDefault())})})})})})});function ML(e){return e?"open":"closed"}function AL(e){return"indeterminate"===e}function OL(e){return AL(e)?"indeterminate":e?"checked":"unchecked"}function LL(e){return t=>"mouse"===t.pointerType?e(t):void 0}DL.displayName=IL;var FL=GO,zL=YO,WL=eL,UL=sL,$L=cL,qL=uL,BL=pL,VL=mL,HL=yL,QL=wL,KL=SL,GL=_L,YL=CL,JL=RL,XL=DL,ZL="DropdownMenu",[eF,tF]=u_(ZL,[$O]),nF=$O(),[rF,sF]=eF(ZL),aF=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=nF(t),c=kt.useRef(null),[u,d]=w_({prop:s,defaultProp:a??!1,onChange:i,caller:ZL});return Mt.jsx(rF,{scope:t,triggerId:g_(),triggerRef:c,contentId:g_(),open:u,onOpenChange:d,onOpenToggle:kt.useCallback(()=>d(e=>!e),[d]),modal:o,children:Mt.jsx(FL,{...l,open:u,onOpenChange:d,dir:r,modal:o,children:n})})};aF.displayName=ZL;var iF="DropdownMenuTrigger",oF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,a=sF(iF,n),i=nF(n);return Mt.jsx(zL,{asChild:!0,...i,children:Mt.jsx(x_.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Wv(t,a.triggerRef),onPointerDown:c_(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:c_(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&a.onOpenToggle(),"ArrowDown"===e.key&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});oF.displayName=iF;var lF=e=>{const{__scopeDropdownMenu:t,...n}=e,r=nF(t);return Mt.jsx(WL,{...r,...n})};lF.displayName="DropdownMenuPortal";var cF="DropdownMenuContent",uF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=sF(cF,n),a=nF(n),i=kt.useRef(!1);return Mt.jsx(UL,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:t,onCloseAutoFocus:c_(e.onCloseAutoFocus,e=>{var t;i.current||null==(t=s.triggerRef.current)||t.focus(),i.current=!1,e.preventDefault()}),onInteractOutside:c_(e.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;s.modal&&!r||(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});uF.displayName=cF;kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx($L,{...s,...r,ref:t})}).displayName="DropdownMenuGroup";var dF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(qL,{...s,...r,ref:t})});dF.displayName="DropdownMenuLabel";var hF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(BL,{...s,...r,ref:t})});hF.displayName="DropdownMenuItem";var pF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(VL,{...s,...r,ref:t})});pF.displayName="DropdownMenuCheckboxItem";kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(HL,{...s,...r,ref:t})}).displayName="DropdownMenuRadioGroup";var fF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(QL,{...s,...r,ref:t})});fF.displayName="DropdownMenuRadioItem";var mF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(KL,{...s,...r,ref:t})});mF.displayName="DropdownMenuItemIndicator";var gF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(GL,{...s,...r,ref:t})});gF.displayName="DropdownMenuSeparator";kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(YL,{...s,...r,ref:t})}).displayName="DropdownMenuArrow";var xF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(JL,{...s,...r,ref:t})});xF.displayName="DropdownMenuSubTrigger";var vF=kt.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nF(n);return Mt.jsx(XL,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vF.displayName="DropdownMenuSubContent";var yF=lF,bF=uF,wF=dF,jF=hF,NF=pF,kF=fF,SF=mF,_F=gF,CF=xF,EF=vF;const TF=aF,PF=oF;kt.forwardRef(({className:e,inset:t,children:n,...r},s)=>Mt.jsxs(CF,{ref:s,className:dx("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,Mt.jsx(Mx,{className:"ml-auto h-4 w-4"})]})).displayName=CF.displayName;kt.forwardRef(({className:e,...t},n)=>Mt.jsx(EF,{ref:n,className:dx("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=EF.displayName;const RF=kt.forwardRef(({className:e,sideOffset:t=4,...n},r)=>Mt.jsx(yF,{children:Mt.jsx(bF,{ref:r,sideOffset:t,className:dx("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));RF.displayName=bF.displayName;const IF=kt.forwardRef(({className:e,inset:t,...n},r)=>Mt.jsx(jF,{ref:r,className:dx("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));IF.displayName=jF.displayName;kt.forwardRef(({className:e,children:t,checked:n,...r},s)=>Mt.jsxs(NF,{ref:s,className:dx("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[Mt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Mt.jsx(SF,{children:Mt.jsx(Rx,{className:"h-4 w-4"})})}),t]})).displayName=NF.displayName;kt.forwardRef(({className:e,children:t,...n},r)=>Mt.jsxs(kF,{ref:r,className:dx("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[Mt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Mt.jsx(SF,{children:Mt.jsx(Ux,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=kF.displayName;const DF=kt.forwardRef(({className:e,inset:t,...n},r)=>Mt.jsx(wF,{ref:r,className:dx("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));DF.displayName=wF.displayName;const MF=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(_F,{ref:n,className:dx("-mx-1 my-1 h-px bg-muted",e),...t}));MF.displayName=_F.displayName;const AF=({onNavigate:e})=>{const{user:t}=Bm(),{workshopId:n}=Ym();$p();const{isFacilitator:r,isSME:s}=Hm(),{currentPhase:a,isPhaseComplete:i}=gg(),[o,l]=St.useState(!1),[c,u]=St.useState(null),d=i("discovery"),h=i("rubric"),p=i("annotation"),f=i("results"),m=i("judge_tuning"),{data:g}=Kp({queryKey:["user-discovery-complete",n,null==t?void 0:t.id],queryFn:async()=>{if(!(null==t?void 0:t.id)||!n)return!1;const e=await fetch(`/workshops/${n}/users/${t.id}/discovery-complete`);if(!e.ok)return!1;return(await e.json()).discovery_complete},enabled:!!(null==t?void 0:t.id)&&!!n&&"discovery"===a}),{data:x}=Kp({queryKey:["discovery-completion-status",n],queryFn:async()=>{if(!n)return null;const e=await fetch(`/workshops/${n}/discovery-completion-status`);return e.ok?e.json():null},enabled:!!n&&"discovery"===a});if(!t)return Mt.jsx(hx,{children:Mt.jsx(gx,{className:"pt-6",children:Mt.jsxs("div",{className:"text-center text-gray-500",children:[Mt.jsx(Fx,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),Mt.jsx("h3",{className:"text-lg font-medium mb-2",children:"Please log in"}),Mt.jsx("p",{className:"mb-4",children:"Choose your role to join the workshop."}),Mt.jsx(Gv,{onClick:()=>window.location.reload(),children:"Refresh Page"})]})})});const{data:v}=cg(n),y=!!v,b=()=>{const t=[],n=d||(null==x?void 0:x.all_completed)||["rubric","annotation","results","judge_tuning","dbsql_export"].includes(a);if("intake"===a?t.push({title:"Intake Phase",description:r?"Configure and pull MLflow traces":"Waiting for facilitator to load traces",status:r?"in_progress":"waiting",action:()=>e("intake"),accessible:r}):t.push({title:"Intake Phase",description:"MLflow traces loaded and ready",status:"completed",action:()=>e("intake"),accessible:r}),"intake"===a)t.push({title:"Discovery Phase",description:r?"Ready to begin discovery phase":"Waiting for facilitator to start discovery phase",status:r?"available":"waiting",action:()=>e("discovery"),accessible:!0});else{let s="upcoming",i="Explore traces and provide insights";n?(s="completed",i="Discovery phase completed for all participants"):g?(s="completed",i="You have completed discovery - waiting for others"):(s="in_progress",i="Explore traces and provide insights");const o="rubric"===a?"completed":s,l="rubric"===a?"Discovery phase completed for all participants":i;t.push({title:"Discovery Phase",description:r?"Monitor discovery progress and review findings":l,status:o,action:()=>e("discovery"),accessible:!0})}return n&&r&&!y?t.push({title:"Rubric Creation",description:"Create evaluation rubric for the annotation phase",status:"available",action:()=>e("rubric"),accessible:r}):!n||r||y?y&&!h?t.push({title:"Rubric Creation",description:r?"Rubric created - ready to start annotation phase":"Evaluation criteria ready - click to view",status:"completed",action:()=>e("rubric"),accessible:r}):h?t.push({title:"Rubric Creation",description:r?"View or edit the evaluation rubric":"View the evaluation rubric",status:"completed",action:()=>e("rubric"),accessible:r}):t.push({title:"Rubric Creation",description:"Complete discovery phase first",status:"upcoming",action:()=>e("rubric"),accessible:r}):t.push({title:"Rubric Creation",description:"Facilitator preparing evaluation criteria",status:"pending",action:()=>e("rubric"),accessible:r}),"discovery"===a&&n&&y&&r?t.push({title:"Annotation Phase",description:"Ready to start annotation phase - use discovery dashboard to begin",status:"available",action:()=>e("annotation"),accessible:!0}):"annotation"===a?s?t.push({title:"Annotation Phase",description:"Rate traces using the rubric",status:p?"completed":"in_progress",action:()=>e("annotation"),accessible:!0}):r?t.push({title:"Annotation Phase",description:"Monitor annotation progress (SMEs only)",status:p?"completed":"in_progress",action:()=>e("annotation"),accessible:!0}):t.push({title:"Annotation Phase",description:"SMEs are currently annotating the traces",status:"in_progress",action:()=>e("annotation"),accessible:!0}):p?t.push({title:"Annotation Phase",description:"View completed annotations",status:"completed",action:()=>e("annotation"),accessible:!0}):t.push({title:"Annotation Phase",description:s?"SMEs will annotate traces using the rubric":"SMEs will annotate traces (you will observe)",status:"upcoming",action:()=>e("annotation"),accessible:!0}),p?r?t.push({title:"Results Review",description:"View analysis and IRR results (share screen with participants)",status:f?"completed":"results"===a?"in_progress":"available",action:()=>e("results"),accessible:!0}):t.push({title:"Results Review",description:"Workshop complete! Facilitator will share the IRR results",status:f?"completed":"waiting",action:()=>e("results"),accessible:!0}):t.push({title:"Results Review",description:r?"Review IRR results and share with participants":"Facilitator will share results",status:"upcoming",action:()=>e("results"),accessible:r}),p&&r?t.push({title:"Judge Tuning",description:"Create and refine AI judges using annotation data",status:"judge_tuning"===a?"in_progress":"dbsql_export"===a||m?"completed":"available",action:()=>e("judge_tuning"),accessible:r}):p&&!r?t.push({title:"Judge Tuning",description:"Facilitator is creating AI judges (advanced feature)",status:"dbsql_export"===a||m?"completed":"waiting",action:()=>e("judge_tuning"),accessible:r}):t.push({title:"Judge Tuning",description:r?"Create AI judges from human annotations":"AI judge creation (facilitator only)",status:"upcoming",action:()=>e("judge_tuning"),accessible:r}),"unity_volume"===a?t.push({title:"Manage Workshop Data",description:"Upload to Unity Volume or download workshop data",status:"in_progress",action:()=>e("unity_volume"),accessible:!0}):m?t.push({title:"Manage Workshop Data",description:"Upload to Unity Volume or download workshop data",status:"available",action:()=>e("unity_volume"),accessible:!0}):t.push({title:"Manage Workshop Data",description:"Upload to Unity Volume or download workshop data after judge tuning",status:"upcoming",action:()=>e("unity_volume"),accessible:!0}),t},w=e=>{switch(e){case"completed":return Mt.jsx(zx,{className:"w-4 h-4"});case"in_progress":case"available":case"pending":case"upcoming":default:return Mt.jsx(qx,{className:"w-4 h-4"});case"action_required":return Mt.jsx(fv,{className:"w-4 h-4"});case"waiting":return Mt.jsx(Fx,{className:"w-4 h-4"})}};return Mt.jsxs("div",{className:"space-y-3",children:[c&&Mt.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-3",children:Mt.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[Mt.jsx(Fx,{className:"h-4 w-4"}),Mt.jsxs("span",{className:"text-xs font-medium",children:["Error: ",c]})]})}),r&&Mt.jsxs("div",{className:"rounded-lg border bg-card p-3 space-y-2",children:[Mt.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-foreground",children:[Mt.jsx(Rv,{className:"w-3.5 h-3.5"}),"Management"]}),Mt.jsxs("div",{className:"flex flex-col gap-1.5",children:[Mt.jsxs(Gv,{variant:"ghost",size:"sm",onClick:()=>e("user-management"),className:"justify-start h-8 px-2 text-xs",children:[Mt.jsx(Rv,{className:"w-3.5 h-3.5 mr-2"}),"Invite Participants"]}),Mt.jsxs(Gv,{variant:"ghost",size:"sm",onClick:()=>e("dashboard-general"),className:"justify-start h-8 px-2 text-xs",children:[Mt.jsx(wv,{className:"w-3.5 h-3.5 mr-2"}),"Dashboard"]})]})]}),Mt.jsx("div",{className:"space-y-2",children:b().map((e,t)=>{const n="in_progress"===e.status||"action_required"===e.status,r="completed"===e.status,s="waiting"===e.status,i=(()=>{const t=e.title.toLowerCase();return t.includes("discovery")?"discovery"===a:t.includes("rubric")?"rubric"===a:t.includes("annotation")?"annotation"===a:t.includes("results")?"results"===a:t.includes("judge")?"judge_tuning"===a:!!t.includes("dbsql")&&"dbsql_export"===a})();return Mt.jsxs("button",{onClick:()=>{o||e.action()},className:"relative w-full rounded-lg border p-3 text-left transition-all "+(i&&!r?"border-primary bg-primary/5 shadow-sm ring-2 ring-primary/20":n?"border-primary/50 bg-primary/5":r?"border-emerald-200 bg-emerald-50/50":s?"border-amber-200 bg-amber-50/50":"border-border bg-card hover:bg-accent"),children:[Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx("div",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full "+(r?"bg-emerald-100 text-emerald-700":n?"bg-primary/10 text-primary":s?"bg-amber-100 text-amber-700":"bg-muted text-muted-foreground"),children:w(e.status)}),Mt.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx("h4",{className:"text-xs font-semibold leading-none",children:e.title}),i&&!r&&Mt.jsx("span",{className:"rounded-full bg-primary/10 px-1.5 py-0.5 text-[10px] font-medium text-primary",children:"Current"})]}),Mt.jsx("p",{className:"text-[11px] leading-snug text-muted-foreground line-clamp-2",children:e.description})]})]}),t<b().length-1&&Mt.jsx("div",{className:"absolute left-[22px] top-10 h-3 w-px bg-border"})]},t)})})]})};function OF({onNavigate:e,showUserSwitching:t=!1}){const{user:n,setUser:r}=Bm(),{isFacilitator:s,isSME:a}=Hm();return Mt.jsxs("div",{className:"flex h-screen w-64 flex-col border-r bg-background",children:[Mt.jsxs("div",{className:"flex h-16 items-center gap-2 border-b px-6",children:[Mt.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600",children:Mt.jsx(Ex,{className:"h-5 w-5 text-white"})}),Mt.jsxs("div",{className:"flex flex-col",children:[Mt.jsx("span",{className:"text-sm font-semibold leading-none",children:"LLM Workshop"}),Mt.jsx("span",{className:"text-xs text-muted-foreground",children:"Annotation Tool"})]})]}),Mt.jsx(nO,{className:"flex-1 px-3 py-4",children:Mt.jsx(AF,{onNavigate:e})}),Mt.jsx(mA,{}),Mt.jsx("div",{className:"p-4",children:Mt.jsxs(TF,{children:[Mt.jsx(PF,{asChild:!0,children:Mt.jsxs(Gv,{variant:"ghost",className:"w-full justify-start gap-3 px-2 py-6 hover:bg-accent",children:[Mt.jsx(PO,{className:"h-9 w-9",children:Mt.jsx(RO,{className:`bg-gradient-to-br ${s?"from-cyan-500 to-teal-600":a?"from-purple-500 to-blue-600":"from-yellow-500 to-red-600"} text-sm font-semibold text-white`,children:(null==n?void 0:n.name)?n.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U"})}),Mt.jsxs("div",{className:"flex flex-1 flex-col items-start text-left",children:[Mt.jsx("span",{className:"text-sm font-medium",children:(null==n?void 0:n.name)||"User"}),Mt.jsx("span",{className:`text-xs ${s?"bg-cyan-100 text-cyan-700 border-cyan-200":a?"bg-purple-100 text-purple-700 border-purple-200":"bg-yellow-100 text-yellow-700 border-yellow-200"} rounded-full px-2 py-0.5 border mt-1`,children:(null==n?void 0:n.role)||"Participant"})]}),Mt.jsx(Ix,{className:"h-4 w-4 text-muted-foreground"})]})}),Mt.jsxs(RF,{align:"end",className:"w-56",children:[Mt.jsx(DF,{children:Mt.jsxs("div",{className:"flex flex-col space-y-1",children:[Mt.jsx("p",{className:"text-sm font-medium leading-none",children:(null==n?void 0:n.name)||"User"}),Mt.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:(null==n?void 0:n.email)||"No email"})]})}),Mt.jsx(MF,{}),Mt.jsxs(IF,{disabled:!0,children:[Mt.jsx(Pv,{className:"mr-2 h-4 w-4"}),Mt.jsx("span",{children:"Profile"})]}),Mt.jsxs(IF,{disabled:!0,children:[Mt.jsx(wv,{className:"mr-2 h-4 w-4"}),Mt.jsx("span",{children:"Settings"})]}),t&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(MF,{}),Mt.jsxs(IF,{onClick:()=>r(null),children:[Mt.jsx(iv,{className:"mr-2 h-4 w-4"}),Mt.jsx("span",{children:"Switch User"})]})]})]})]})})]})}var LF="Progress",FF=100,[zF,WF]=u_(LF),[UF,$F]=zF(LF),qF=kt.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=HF,...i}=e;!s&&0!==s||GF(s)||console.error(`Invalid prop \`max\` of value \`${`${s}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const o=GF(s)?s:FF;null===r||YF(r,o)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${r}`,"Progress"));const l=YF(r,o)?r:null,c=KF(l)?a(l,o):void 0;return Mt.jsx(UF,{scope:n,value:l,max:o,children:Mt.jsx(x_.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":KF(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":QF(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});qF.displayName=LF;var BF="ProgressIndicator",VF=kt.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=$F(BF,n);return Mt.jsx(x_.div,{"data-state":QF(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});function HF(e,t){return`${Math.round(e/t*100)}%`}function QF(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function KF(e){return"number"==typeof e}function GF(e){return KF(e)&&!isNaN(e)&&e>0}function YF(e,t){return KF(e)&&!isNaN(e)&&e<=t&&e>=0}VF.displayName=BF;var JF=qF,XF=VF;const ZF=kt.forwardRef(({className:e,value:t,...n},r)=>Mt.jsx(JF,{ref:r,className:dx("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:Mt.jsx(XF,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));ZF.displayName=JF.displayName;const ez=()=>{const{workshopId:e}=Ym(),{user:t}=Bm(),{canAssignAnnotations:n}=Hm(),[r,s]=kt.useState([]),[a,i]=kt.useState([]),[o,l]=kt.useState([]),[c,u]=kt.useState(!0),[d,h]=kt.useState(null),[p,f]=kt.useState(!1);kt.useEffect(()=>{e&&n&&m()},[e,n]);const m=async()=>{var t,n;try{u(!0),h(null);const[t,n,r]=await Promise.all([Um.getWorkshopParticipantsUsersWorkshopsWorkshopIdParticipantsGet(e),Um.listUsersUsersUsersGet(e),$m.getTracesWorkshopsWorkshopIdTracesGet(e,"all")]);s(t),i(n),l(r)}catch(yW){h((null==(n=null==(t=yW.response)?void 0:t.data)?void 0:n.detail)||"Failed to load data")}finally{u(!1)}};if(!n)return Mt.jsx(hx,{children:Mt.jsx(gx,{className:"pt-6",children:Mt.jsxs("div",{className:"text-center text-gray-500",children:[Mt.jsx(Fx,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),Mt.jsx("h3",{className:"text-lg font-medium mb-2",children:"Access Denied"}),Mt.jsx("p",{children:"You don't have permission to manage annotation assignments."})]})})});if(c)return Mt.jsx(hx,{children:Mt.jsx(gx,{className:"pt-6",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(gv,{className:"h-8 w-8 mx-auto mb-4 animate-spin text-blue-500"}),Mt.jsx("p",{className:"text-gray-600",children:"Loading assignment data..."})]})})});const g=r.filter(e=>"sme"===e.role||"participant"===e.role),x=(()=>{const e=o.length,t=new Set;return g.forEach(e=>{e.assigned_traces.forEach(e=>{t.add(e)})}),{totalTraces:e,assignedTraces:t.size,unassignedTraces:e-t.size,totalAnnotators:g.length}})();return Mt.jsxs("div",{className:"space-y-6",children:[Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(wv,{className:"h-5 w-5"}),"Annotation Assignment Manager"]})}),Mt.jsxs(gx,{children:[d&&Mt.jsxs(tE,{className:"mb-4",children:[Mt.jsx(Fx,{className:"h-4 w-4"}),Mt.jsx(nE,{children:d})]}),Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[Mt.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[Mt.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.totalTraces}),Mt.jsx("div",{className:"text-sm text-gray-600",children:"Total Traces"})]}),Mt.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[Mt.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.assignedTraces}),Mt.jsx("div",{className:"text-sm text-gray-600",children:"Assigned"})]}),Mt.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[Mt.jsx("div",{className:"text-2xl font-bold text-orange-600",children:x.unassignedTraces}),Mt.jsx("div",{className:"text-sm text-gray-600",children:"Unassigned"})]}),Mt.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[Mt.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.totalAnnotators}),Mt.jsx("div",{className:"text-sm text-gray-600",children:"Annotators"})]})]}),Mt.jsxs("div",{className:"mb-6",children:[Mt.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Mt.jsx("span",{className:"text-sm font-medium",children:"Assignment Progress"}),Mt.jsxs("span",{className:"text-sm text-gray-600",children:[x.assignedTraces," / ",x.totalTraces," traces assigned"]})]}),Mt.jsx(ZF,{value:x.totalTraces>0?x.assignedTraces/x.totalTraces*100:0,className:"h-2"})]}),Mt.jsxs("div",{className:"flex gap-2",children:[Mt.jsxs(Gv,{onClick:async()=>{var t,n;try{f(!0),h(null);const t=await Um.autoAssignAnnotationsUsersWorkshopsWorkshopIdAutoAssignAnnotationsPost(e);await m(),ZS.success(`Successfully assigned annotations to ${t.total_annotators} users across ${t.total_traces} traces`)}catch(yW){h((null==(n=null==(t=yW.response)?void 0:t.data)?void 0:n.detail)||"Failed to auto-assign annotations")}finally{f(!1)}},disabled:p,className:"flex items-center gap-2",children:[p?Mt.jsx(gv,{className:"h-4 w-4 animate-spin"}):Mt.jsx(Tx,{className:"h-4 w-4"}),"Auto-Assign Annotations"]}),Mt.jsxs(Gv,{variant:"outline",onClick:m,disabled:c,children:[Mt.jsx(gv,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]})]}),Mt.jsxs(lC,{defaultValue:"participants",className:"w-full",children:[Mt.jsxs(cC,{children:[Mt.jsx(uC,{value:"participants",children:"Participants"}),Mt.jsx(uC,{value:"traces",children:"Traces"})]}),Mt.jsx(dC,{value:"participants",className:"space-y-4",children:g.map(e=>{const t=(n=e.user_id,a.find(e=>e.id===n));var n;return Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center justify-between",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:["sme"===e.role?Mt.jsx(Tv,{className:"h-4 w-4 text-blue-500"}):Mt.jsx(Rv,{className:"h-4 w-4 text-gray-500"}),Mt.jsx("span",{children:(null==t?void 0:t.name)||"Unknown User"}),Mt.jsx(Lv,{variant:"outline",className:"capitalize",children:e.role})]}),Mt.jsxs(Lv,{variant:"secondary",children:[e.assigned_traces.length," traces assigned"]})]})}),Mt.jsxs(gx,{children:[Mt.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Email: ",(null==t?void 0:t.email)||"Unknown"]}),Mt.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Joined: ",new Date(e.joined_at).toLocaleDateString()]}),e.assigned_traces.length>0&&Mt.jsxs("div",{children:[Mt.jsx("div",{className:"text-sm font-medium mb-2",children:"Assigned Traces:"}),Mt.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.assigned_traces.slice(0,10).map(e=>Mt.jsxs(Lv,{variant:"outline",className:"text-xs",children:[e.slice(0,8),"..."]},e)),e.assigned_traces.length>10&&Mt.jsxs(Lv,{variant:"outline",className:"text-xs",children:["+",e.assigned_traces.length-10," more"]})]})]})]})]},e.user_id)})}),Mt.jsx(dC,{value:"traces",className:"space-y-4",children:Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsx(fx,{children:"Trace Assignment Status"})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-2",children:[o.slice(0,20).map(e=>{const t=g.filter(t=>t.assigned_traces.includes(e.id));return Mt.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[Mt.jsxs("div",{className:"flex-1",children:[Mt.jsxs("div",{className:"font-medium text-sm",children:["Trace ",e.id.slice(0,8),"..."]}),Mt.jsxs("div",{className:"text-xs text-gray-500",children:[e.input.slice(0,100),"..."]})]}),Mt.jsx("div",{className:"flex items-center gap-2",children:t.length>0?Mt.jsxs(Lv,{variant:"default",className:"text-xs",children:[t.length," annotator",t.length>1?"s":""]}):Mt.jsx(Lv,{variant:"outline",className:"text-xs",children:"Unassigned"})})]},e.id)}),o.length>20&&Mt.jsxs("div",{className:"text-center text-sm text-gray-500 pt-4",children:["... and ",o.length-20," more traces"]})]})})]})})]})]})},tz=({phase:e,onStatusChange:t})=>{var n;const{workshopId:r}=Ym(),{data:s}=rg(r),a=$p(),[i,o]=St.useState(!1);if(!["discovery","annotation"].includes(e))return null;const l=(null==(n=null==s?void 0:s.completed_phases)?void 0:n.includes(e))||!1;return Mt.jsx(Gv,{onClick:async()=>{if(r){o(!0);try{const n=l?`/workshops/${r}/resume-phase/${e}`:`/workshops/${r}/complete-phase/${e}`,s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok){const e=await s.json();throw new Error(e.detail||"Failed to update phase status")}a.setQueryData(["workshop",r],t=>{if(!t)return t;const n=t.completed_phases||[],r=l?n.filter(t=>t!==e):[...n,e];return{...t,completed_phases:r}}),a.refetchQueries({queryKey:["workshop",r]}),t&&t(),ZS.success(`${e} phase ${l?"resumed":"paused"}`)}catch(n){a.refetchQueries({queryKey:["workshop",r]}),ZS.error(`Failed to ${l?"resume":"pause"} phase: ${n.message}`)}finally{o(!1)}}},disabled:i,variant:l?"default":"destructive",size:"sm",className:"flex items-center gap-2 min-w-[100px] justify-center",children:i?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-4 h-4 border-2 border-current/30 border-t-current rounded-full animate-spin"}),Mt.jsx("span",{className:"text-sm",children:"Working..."})]}):l?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(fv,{className:"w-4 h-4"}),Mt.jsxs("span",{className:"text-sm font-medium",children:["Resume ",e]})]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(hv,{className:"w-4 h-4"}),Mt.jsxs("span",{className:"text-sm font-medium",children:["Pause ",e]})]})})},nz=({onNavigate:e,focusPhase:t=null})=>{var n,r,s;const{workshopId:a}=Ym(),{currentPhase:i,setCurrentPhase:o}=gg(),{user:l}=Bm(),{isFacilitator:c}=Hm(),u=$p(),{data:d}=rg(a),{data:h}=function(e){const{isFacilitator:t}=Hm();return Kp({queryKey:Xm(e,"all_findings"),queryFn:()=>$m.getFindingsWorkshopsWorkshopIdFindingsGet(e,void 0),enabled:!!e&&t})}(a),{data:p}=lg(a),{data:f}=ig(a),{data:m}=cg(a),{data:g}=ug(a),{data:x}=dg(a);if(!c)return Mt.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-slate-900 mb-2",children:"Facilitator Access Required"}),Mt.jsx("div",{className:"text-sm text-slate-600",children:"This dashboard is only available to workshop facilitators"})]})});const v="discovery"!==(null==d?void 0:d.current_phase)&&"discovery"!==t||!(null==(n=null==d?void 0:d.active_discovery_trace_ids)?void 0:n.length)?(null==f?void 0:f.length)||0:d.active_discovery_trace_ids.length,y="annotation"===(null==d?void 0:d.current_phase)&&(null==(r=null==d?void 0:d.active_annotation_trace_ids)?void 0:r.length)?d.active_annotation_trace_ids.length:(null==f?void 0:f.length)||0;null==f||f.length;const b=h?new Set(h.map(e=>e.trace_id)):new Set,w=Math.min(b.size,v),j=v>0?w/v*100:0,N=h?new Set(h.map(e=>e.user_id)):new Set,k=g?new Set(g.map(e=>e.user_id)):new Set,S=St.useMemo(()=>"annotation"===t?x?Object.entries(x.reduce((e,t)=>{const n=t.user_id;return e[n]||(e[n]={count:0,userName:t.user_name||n}),e[n].count+=1,e},{})).map(([e,t])=>({userId:e,userName:t.userName,count:t.count})):[]:p?Object.entries(p.reduce((e,t)=>{const n=t.user_id;return e[n]||(e[n]={count:0,userName:t.user_name||n}),e[n].count+=1,e},{})).map(([e,t])=>({userId:e,userName:t.userName,count:t.count})):[],[t,p,x]),_=St.useMemo(()=>{var e,n;if(!f||!h)return[];let r=f;if("discovery"===t&&(null==(e=null==d?void 0:d.active_discovery_trace_ids)?void 0:e.length))r=f.filter(e=>d.active_discovery_trace_ids.includes(e.id));else if("annotation"===t)if(g&&g.length>0){const e=new Set(g.map(e=>e.trace_id)),t=new Set((null==d?void 0:d.active_annotation_trace_ids)||[]),n=new Set([...e,...t]);r=f.filter(e=>n.has(e.id))}else(null==(n=null==d?void 0:d.active_annotation_trace_ids)?void 0:n.length)&&(r=f.filter(e=>d.active_annotation_trace_ids.includes(e.id)));return r.map(e=>{if("annotation"===t&&g){const t=g.filter(t=>t.trace_id===e.id),n=new Set(t.map(e=>e.user_id)),r=Math.min(2,k.size);return{traceId:e.mlflow_trace_id||e.id,input:e.input,reviewCount:t.length,uniqueReviewers:n.size,reviewers:Array.from(n),isFullyReviewed:k.size>0&&n.size>=r}}{const t=h.filter(t=>t.trace_id===e.id),n=new Set(t.map(e=>e.user_id));return{traceId:e.mlflow_trace_id||e.id,input:e.input,reviewCount:t.length,uniqueReviewers:n.size,reviewers:Array.from(n),isFullyReviewed:N.size>0&&n.size>=Math.min(3,N.size)}}}).sort((e,t)=>e.isFullyReviewed&&!t.isFullyReviewed?-1:!e.isFullyReviewed&&t.isFullyReviewed?1:t.reviewCount-e.reviewCount)},[f,h,g,N.size,k.size,t,null==d?void 0:d.active_discovery_trace_ids,null==d?void 0:d.active_annotation_trace_ids]),C=g?new Set(g.map(e=>e.trace_id)):new Set,E=y>0?C.size/y*100:0,T=St.useMemo(()=>{if(!g)return{smeCount:0,participantCount:0,avgRating:0,ratingDistribution:{}};const e=g.filter(e=>e.user_id.includes("sme")||e.user_id.includes("SME")),t=g.filter(e=>!e.user_id.includes("sme")&&!e.user_id.includes("SME")),n=g.length>0?g.reduce((e,t)=>e+t.rating,0)/g.length:0,r=g.reduce((e,t)=>(e[t.rating]=(e[t.rating]||0)+1,e),{});return{smeCount:e.length,participantCount:t.length,avgRating:Math.round(10*n)/10,ratingDistribution:r}},[g]),P=()=>{const e=["intake","discovery","rubric","annotation","results"],t=e.indexOf(i);return t<e.length-1?e[t+1]:null},[R,I]=St.useState(""),[D,M]=St.useState(""),[A,O]=St.useState(!1),[L,F]=St.useState(!1),[z,W]=St.useState(!1),[U,$]=St.useState((null==d?void 0:d.judge_name)||"workshop_judge"),[q,B]=St.useState(!1);St.useEffect(()=>{if((null==d?void 0:d.judge_name)&&"workshop_judge"!==d.judge_name)$(d.judge_name);else if(null==m?void 0:m.question){const e=PC(m.question);if(e.length>0&&e[0].title){const t=`${e[0].title.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"")}_judge`;$(t)}}},[null==d?void 0:d.judge_name,m]);const V=async()=>{const e=t||i,n="annotation"===e?"annotation":"discovery",r="annotation"===e?M:I,s=parseInt("annotation"===e?D:R);if(!s||s<=0)ZS.error("Please enter a valid number of traces to add.");else{O(!0);try{const t=await fetch(`/workshops/${a}/add-traces`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({additional_count:s,phase:"annotation"===e?"annotation":"discovery"})});if(!t.ok){const e=await t.json();throw new Error(e.detail||"Failed to add traces")}const i=await t.json();r(""),await u.refetchQueries({queryKey:["workshop",a]}),await u.refetchQueries({queryKey:["traces",a]}),u.invalidateQueries({queryKey:["findings",a]}),u.invalidateQueries({queryKey:["annotations",a]}),ZS.success(`Successfully added ${i.traces_added} traces to ${n}! (Total: ${i.total_active_traces})`)}catch(o){ZS.error(`Failed to add traces: ${o.message}`)}finally{O(!1)}}};return Mt.jsx("div",{className:"p-6",children:Mt.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[Mt.jsxs("div",{className:"flex items-center justify-between gap-3 mb-8",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:Mt.jsx(Px,{className:"w-6 h-6 text-white"})}),Mt.jsxs("div",{children:[Mt.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"discovery"===t?"Discovery Phase Monitoring":"annotation"===t?"Annotation Phase Monitoring":"Facilitator Dashboard"}),Mt.jsx("p",{className:"text-slate-600",children:"discovery"===t?"Monitor participant discovery progress and insights":"annotation"===t?"Monitor SME annotation progress and ratings":"Workshop progress tracking and management"})]})]}),Mt.jsx("div",{className:"flex items-center gap-3",children:null!==P()&&!t&&Mt.jsxs(Gv,{onClick:async()=>{const e=P();if(!e)return;const t=`Ready to start the ${e} phase?\n\nThis will move the workshop forward for all participants. Current progress:\n Discovery: ${Math.round(j)}% complete\n Active users: ${N.size}`;if(confirm(t))try{const t=`/workshops/${a}/advance-to-${e}`,n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok){const e=await n.json();throw new Error(e.detail||"Failed to advance phase")}await n.json();o(e),u.invalidateQueries()}catch(n){ZS.error(`Failed to start ${e} phase: ${n.message}`)}},className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",size:"sm",children:[Mt.jsx(fv,{className:"w-4 h-4 mr-2"}),(()=>{const e=P();if(!e)return null;return`Start ${{discovery:"Discovery",rubric:"Rubric Creation",annotation:"Annotation",results:"Results Review"}[e]||e}`})(),Mt.jsx(Mx,{className:"w-4 h-4 ml-1"})]})})]}),Mt.jsxs("div",{className:"grid grid-cols-1 gap-6 "+("discovery"===t||"annotation"===t?"md:grid-cols-1 max-w-md mx-auto":"md:grid-cols-3"),children:["annotation"!==t&&Mt.jsxs(hx,{className:"bg-gradient-to-br from-green-50 to-green-50 border-green-200 "+("discovery"===t?"ring-2 ring-green-400 shadow-lg":""),children:[Mt.jsx(px,{className:"pb-3",children:Mt.jsxs(fx,{className:"flex items-center gap-2 text-green-800",children:[Mt.jsx(Yx,{className:"w-5 h-5"}),"Discovery Phase",100===j?Mt.jsx(Lv,{className:"ml-2 bg-emerald-100 text-emerald-700",children:"Completed"}):"discovery"===t?Mt.jsx(Lv,{className:"ml-2 bg-slate-100 text-slate-600",children:"Viewing"}):null]})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex justify-between items-center",children:[Mt.jsx("span",{className:"text-sm text-green-700",children:"Traces Analyzed"}),Mt.jsxs("span",{className:"text-sm font-medium text-green-800",children:[w,"/",v]})]}),Mt.jsx(ZF,{value:j,className:"h-2"}),Mt.jsxs("div",{className:"flex justify-between items-center text-xs text-green-600",children:[Mt.jsxs("span",{children:[Math.round(j),"% Complete"]}),Mt.jsxs("span",{children:[N.size," Active Users"]})]})]})})]}),"discovery"!==t&&"annotation"!==t&&Mt.jsxs(hx,{className:"bg-gradient-to-br from-blue-50 to-blue-50 border-blue-200",children:[Mt.jsx(px,{className:"pb-3",children:Mt.jsxs(fx,{className:"flex items-center gap-2 text-blue-800",children:[Mt.jsx(wv,{className:"w-5 h-5"}),"Rubric Status"]})}),Mt.jsx(gx,{children:Mt.jsx("div",{className:"space-y-3",children:m?Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(zx,{className:"w-4 h-4 text-green-600"}),Mt.jsx("span",{className:"text-sm text-blue-700",children:"Rubric Created"})]}),Mt.jsx("p",{className:"text-xs text-blue-600 line-clamp-2",children:(null==m?void 0:m.question)&&(null==(s=PC(m.question)[0])?void 0:s.title)||"Evaluation rubric is ready"}),Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:()=>e("rubric"),className:"w-full text-xs",children:"View Rubric"})]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(qx,{className:"w-4 h-4 text-amber-500"}),Mt.jsx("span",{className:"text-sm text-blue-700",children:"Rubric Needed"})]}),Mt.jsx("p",{className:"text-xs text-blue-600",children:"Create evaluation criteria for annotation phase"}),Mt.jsx(Gv,{variant:"outline",size:"sm",onClick:()=>e("rubric"),className:"w-full text-xs",children:"Create Rubric"})]})})})]}),"discovery"!==t&&Mt.jsxs(hx,{className:"bg-gradient-to-br from-purple-50 to-purple-50 border-purple-200 "+("annotation"===t?"ring-2 ring-purple-400 shadow-lg":""),children:[Mt.jsx(px,{className:"pb-3",children:Mt.jsxs(fx,{className:"flex items-center gap-2 text-purple-800",children:[Mt.jsx(Rv,{className:"w-5 h-5"}),"Annotation Phase",100===E?Mt.jsx(Lv,{className:"ml-2 bg-emerald-100 text-emerald-700",children:"Completed"}):"annotation"===t?Mt.jsx(Lv,{className:"ml-2 bg-slate-100 text-slate-600",children:"Viewing"}):null]})}),Mt.jsx(gx,{children:Mt.jsx("div",{className:"space-y-3",children:"annotation"===i||"annotation"===t?Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{className:"flex justify-between items-center",children:[Mt.jsx("span",{className:"text-sm text-purple-700",children:"Traces Annotated"}),Mt.jsxs("span",{className:"text-sm font-medium text-purple-800",children:[C.size,"/",y]})]}),Mt.jsx(ZF,{value:E,className:"h-2"}),"annotation"===t?Mt.jsxs("div",{className:"space-y-2 text-xs",children:[Mt.jsxs("div",{className:"flex justify-between text-purple-600",children:[Mt.jsx("span",{children:"Average Rating:"}),Mt.jsxs("span",{className:"font-medium",children:[T.avgRating,"/5"]})]}),Mt.jsxs("div",{className:"flex justify-between text-purple-600",children:[Mt.jsx("span",{children:"SME Annotations:"}),Mt.jsx("span",{className:"font-medium",children:T.smeCount})]}),Mt.jsxs("div",{className:"flex justify-between text-purple-600",children:[Mt.jsx("span",{children:"Participant Annotations:"}),Mt.jsx("span",{className:"font-medium",children:T.participantCount})]}),Object.keys(T.ratingDistribution).length>0&&Mt.jsxs("div",{className:"pt-1 border-t border-purple-200",children:[Mt.jsx("div",{className:"text-purple-700 font-medium mb-1",children:"Rating Distribution:"}),[5,4,3,2,1].map(e=>T.ratingDistribution[e]&&Mt.jsxs("div",{className:"flex justify-between",children:[Mt.jsxs("span",{children:[e,":"]}),Mt.jsx("span",{children:T.ratingDistribution[e]})]},e))]})]}):Mt.jsxs("div",{className:"text-xs text-purple-600",children:[Math.round(E),"% Complete"]})]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(qx,{className:"w-4 h-4 text-purple-500"}),Mt.jsx("span",{className:"text-sm text-purple-700",children:"discovery"===i?"Pending Discovery":"Not Started"})]}),Mt.jsx("p",{className:"text-xs text-purple-600",children:"SMEs will annotate traces using the rubric"})]})})})]})]}),100===E&&"annotation"===i&&"annotation"===t&&Mt.jsx("div",{className:"mb-6",children:Mt.jsx(hx,{className:"border-green-200 bg-gradient-to-r from-green-50 to-emerald-50",children:Mt.jsx(gx,{className:"pt-6",children:Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:Mt.jsx(zx,{className:"w-5 h-5 text-green-600"})}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx("h4",{className:"font-semibold text-green-900",children:"Ready for Results Review & Judge Tuning"}),Mt.jsx("p",{className:"text-sm text-green-700",children:"Annotation phase complete! Use the sidebar workflow to review IRR results and proceed to judge tuning."})]})]})})})}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Gx,{className:"w-5 h-5"}),"discovery"===t?"Discovery Analysis":"Workshop Analysis"]}),Mt.jsx(mx,{children:"discovery"===t?"Detailed breakdown of discovery progress and trace coverage":"User participation and trace coverage analysis"})]}),Mt.jsx(gx,{children:Mt.jsxs(lC,{defaultValue:"users",className:"space-y-4",children:[Mt.jsxs(cC,{children:[Mt.jsx(uC,{value:"users",children:"User Participation"}),Mt.jsx(uC,{value:"traces",children:"Trace Coverage"})]}),Mt.jsx(dC,{value:"users",children:S.length>0?Mt.jsx("div",{className:"space-y-3",children:S.map(({userId:e,userName:t,count:n})=>{const r=_.filter(t=>t.reviewers.includes(e)).length;return Mt.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-400 to-slate-600 rounded-full flex items-center justify-center text-white text-xs font-semibold",children:t.slice(0,2).toUpperCase()}),Mt.jsxs("div",{children:[Mt.jsx("div",{className:"text-sm font-medium text-slate-900",children:t}),Mt.jsxs("div",{className:"text-xs text-slate-600",children:[n," finding",1!==n?"s":"","  ",r," trace",1!==r?"s":""," reviewed"]})]})]}),Mt.jsx("div",{className:"text-right",children:Mt.jsx(Lv,{variant:n>=3?"default":"secondary",className:"text-xs",children:n>=3?"Active":"Participating"})})]},e)})}):Mt.jsxs("div",{className:"text-center py-8 text-slate-500",children:[Mt.jsx(Rv,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),Mt.jsx("p",{className:"text-sm",children:"No user participation data yet"}),Mt.jsx("p",{className:"text-xs",children:"Users will appear here once they start contributing findings"})]})}),Mt.jsx(dC,{value:"traces",children:_.length>0?Mt.jsx("div",{className:"space-y-3","data-testid":"trace-coverage",children:_.map(e=>Mt.jsx("div",{className:"border rounded-lg p-4 bg-slate-50","data-testid":"trace-item",children:Mt.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Mt.jsxs("div",{className:"flex-1",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsxs("h4",{className:"font-medium text-slate-900 text-sm",children:["Trace: ",e.traceId.slice(0,20),"..."]}),Mt.jsxs(Lv,{variant:e.isFullyReviewed?"default":"secondary",className:"text-xs",children:[e.reviewCount," review",1!==e.reviewCount?"s":""]}),Mt.jsxs(Lv,{variant:e.uniqueReviewers>=2?"default":"outline",className:"text-xs",children:[e.uniqueReviewers," reviewer",1!==e.uniqueReviewers?"s":""]})]}),Mt.jsxs("p",{className:"text-xs text-slate-600 line-clamp-2 mb-2",children:[e.input.slice(0,120),"..."]}),e.reviewers.length>0&&Mt.jsx("div",{className:"flex flex-wrap gap-1",children:e.reviewers.map(e=>{const t=null==p?void 0:p.find(t=>t.user_id===e),n=(null==t?void 0:t.user_name)||e;return Mt.jsx(Lv,{variant:"outline",className:"text-xs px-2 py-0",children:n},e)})})]}),Mt.jsx("div",{className:"flex flex-col items-end gap-1",children:Mt.jsx("div",{className:"text-right text-xs",children:Mt.jsx("div",{className:"font-medium status-text "+(e.isFullyReviewed?"text-green-600":e.reviewCount>0?"text-amber-600":"text-slate-400"),children:e.isFullyReviewed?" Complete":e.reviewCount>0?"In Progress":"Pending"})})})]})},e.traceId))}):Mt.jsxs("div",{className:"text-center py-8 text-slate-500",children:[Mt.jsx(Yx,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),Mt.jsx("p",{className:"text-sm",children:"No trace coverage data yet"}),Mt.jsx("p",{className:"text-xs",children:"Traces will appear here once they start being reviewed"})]})})]})})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsx(fx,{children:"Quick Actions"}),Mt.jsx(mx,{children:"discovery"===t?"Discovery phase management tools":"annotation"===t?"Annotation phase management tools":"Common facilitator tasks and workshop management"})]}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"grid grid-cols-1 gap-4 "+("discovery"===t||"annotation"===t?"md:grid-cols-2 lg:grid-cols-3":"md:grid-cols-3"),children:["discovery"!==t&&"annotation"!==t&&Mt.jsxs(Gv,{variant:"outline",className:"flex items-center gap-2 justify-start p-4 h-auto",onClick:()=>e("view-all-findings"),children:[Mt.jsx(Yx,{className:"w-5 h-5"}),Mt.jsxs("div",{className:"text-left",children:[Mt.jsx("div",{className:"font-medium",children:"View All Findings"}),Mt.jsx("div",{className:"text-xs text-muted-foreground",children:"Review participant insights"})]})]}),"discovery"===t&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{className:"border rounded-lg p-4",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Mt.jsx(mv,{className:"w-5 h-5 text-green-600"}),Mt.jsxs("div",{className:"text-left",children:[Mt.jsx("div",{className:"font-medium",children:"Add More Traces"}),Mt.jsx("div",{className:"text-xs text-muted-foreground",children:"Include additional traces in discovery"})]})]}),Mt.jsxs("div",{className:"flex gap-2",children:[Mt.jsx(_C,{type:"number",min:"1",placeholder:"Number of traces",value:R,onChange:e=>I(e.target.value),className:"flex-1 h-8 text-xs",disabled:A}),Mt.jsx(Gv,{onClick:V,disabled:A||!R,size:"sm",className:"h-8 px-3 bg-green-600 hover:bg-green-700 text-white",children:A?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-3 h-3 border border-white/30 border-t-white rounded-full animate-spin mr-1"}),"Adding..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(mv,{className:"w-3 h-3 mr-1"}),"Add"]})})]})]}),Mt.jsxs("div",{className:"border rounded-lg p-4",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Mt.jsx(fv,{className:"w-5 h-5 text-blue-600"}),Mt.jsxs("div",{className:"text-left",children:[Mt.jsx("div",{className:"font-medium",children:"Discovery Control"}),Mt.jsx("div",{className:"text-xs text-muted-foreground",children:"Pause or resume discovery phase"})]})]}),Mt.jsx("div",{className:"flex justify-center",children:Mt.jsx(tz,{phase:"discovery"})})]}),Mt.jsxs("div",{className:"border border-amber-200 rounded-lg p-4 bg-amber-50",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Mt.jsx(xv,{className:"w-5 h-5 text-amber-600"}),Mt.jsxs("div",{className:"text-left",children:[Mt.jsx("div",{className:"font-medium text-amber-800",children:"Reset Discovery"}),Mt.jsx("div",{className:"text-xs text-amber-600",children:"Go back to reconfigure trace selection"})]})]}),Mt.jsxs(ZM,{children:[Mt.jsx(eA,{asChild:!0,children:Mt.jsx(Gv,{variant:"outline",size:"sm",disabled:z,className:"w-full border-amber-300 text-amber-700 hover:bg-amber-100",children:z?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-3 h-3 border border-amber-300 border-t-amber-600 rounded-full animate-spin mr-2"}),"Resetting..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(xv,{className:"w-3 h-3 mr-2"}),"Reset & Reconfigure"]})})}),Mt.jsxs(rA,{children:[Mt.jsxs(sA,{children:[Mt.jsx(iA,{children:"Reset Discovery Phase?"}),Mt.jsxs(oA,{children:["This will reset the discovery phase so you can reconfigure the number of traces (e.g., switch from Standard 10 to Custom 3).",Mt.jsx("br",{}),Mt.jsx("br",{}),Mt.jsx("strong",{children:"Your traces will be kept"}),", but you'll need to restart the discovery phase with your new configuration. Any discovery findings will be preserved."]})]}),Mt.jsxs(aA,{children:[Mt.jsx(cA,{children:"Cancel"}),Mt.jsx(lA,{onClick:async()=>{if(a){W(!0);try{const e=await fetch(`/workshops/${a}/reset-discovery`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json();throw new Error(t.detail||"Failed to reset discovery")}u.invalidateQueries({queryKey:["workshop",a]}),u.invalidateQueries({queryKey:["traces",a]}),ZS.success("Discovery reset! Select your trace configuration."),window.location.reload()}catch(e){ZS.error(`Failed to reset discovery: ${e.message}`)}finally{W(!1)}}},className:"bg-amber-600 hover:bg-amber-700",children:"Reset Discovery"})]})]})]})]})]}),"annotation"===t&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{className:"border rounded-lg p-4",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Mt.jsx(mv,{className:"w-5 h-5 text-purple-600"}),Mt.jsxs("div",{className:"text-left",children:[Mt.jsx("div",{className:"font-medium",children:"Add More Traces"}),Mt.jsx("div",{className:"text-xs text-muted-foreground",children:"Include additional traces for annotation"})]})]}),Mt.jsxs("div",{className:"flex gap-2",children:[Mt.jsx(_C,{type:"number",min:"1",placeholder:"Number of traces",value:D,onChange:e=>M(e.target.value),className:"flex-1 h-8 text-xs",disabled:A}),Mt.jsx(Gv,{onClick:V,disabled:A||!D,size:"sm",className:"h-8 px-3",children:A?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-3 h-3 border border-white/30 border-t-white rounded-full animate-spin mr-1"}),"Adding..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(mv,{className:"w-3 h-3 mr-1"}),"Add"]})})]})]}),Mt.jsxs("div",{className:"border rounded-lg p-4",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Mt.jsx(wv,{className:"w-5 h-5 text-purple-600"}),Mt.jsxs("div",{className:"text-left",children:[Mt.jsx("div",{className:"font-medium",children:"Judge Name"}),Mt.jsx("div",{className:"text-xs text-muted-foreground",children:"Used for MLflow feedback entries"})]})]}),Mt.jsxs("div",{className:"flex gap-2",children:[Mt.jsx(_C,{type:"text",placeholder:"workshop_judge",value:U,onChange:e=>$(e.target.value),className:"flex-1 h-8 text-xs",disabled:q||g&&g.length>0}),Mt.jsx(Gv,{onClick:async()=>{if(U.trim()){B(!0);try{if(!(await fetch(`/workshops/${a}/judge-name?judge_name=${encodeURIComponent(U.trim())}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to save judge name");u.invalidateQueries({queryKey:["workshop",a]}),ZS.success("Judge name saved successfully")}catch(e){ZS.error(`Failed to save judge name: ${e.message}`)}finally{B(!1)}}else ZS.error("Please enter a valid judge name")},disabled:q||!U.trim()||g&&g.length>0,size:"sm",className:"h-8 px-3",children:q?"...":"Save"})]}),g&&g.length>0&&Mt.jsx("p",{className:"text-xs text-amber-600 mt-1",children:" Locked (annotations exist)"})]}),Mt.jsxs("div",{className:"border rounded-lg p-4",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Mt.jsx(fv,{className:"w-5 h-5 text-purple-600"}),Mt.jsxs("div",{className:"text-left",children:[Mt.jsx("div",{className:"font-medium",children:"Annotation Control"}),Mt.jsx("div",{className:"text-xs text-muted-foreground",children:"Pause or resume annotation phase"})]})]}),Mt.jsx("div",{className:"flex justify-center",children:Mt.jsx(tz,{phase:"annotation"})})]})]})]})})]})]})})},rz=()=>{var e;const{user:t}=Bm(),{workshopId:n}=Ym(),{data:r}=rg(n),[s,a]=kt.useState([]),[i,o]=kt.useState(!1),[l,c]=kt.useState(null),[u,d]=kt.useState(null),[h,p]=kt.useState({email:"",name:"",role:"participant"});kt.useEffect(()=>{n&&f()},[n]);const f=async()=>{if(n){o(!0),c(null);try{const e=await Um.listWorkshopUsersUsersWorkshopsWorkshopIdUsersGet(n);a(e.users||[])}catch(e){c(`Failed to load users: ${e.message||"Unknown error"}`)}finally{o(!1)}}},[m,g]=kt.useState(null);return t&&"facilitator"===t.role?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:Mt.jsxs("div",{className:"max-w-6xl mx-auto",children:[Mt.jsxs("div",{className:"mb-8",children:[Mt.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Facilitator Dashboard"}),Mt.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your workshop and participants"})]}),Mt.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsx(fx,{children:"Add New User"}),Mt.jsx(mx,{children:"Add SMEs and participants to your workshop"})]}),Mt.jsx(gx,{children:Mt.jsxs("form",{onSubmit:async e=>{var t,r;if(e.preventDefault(),n){o(!0),c(null),d(null);try{await Um.addUserToWorkshopUsersWorkshopsWorkshopIdUsersPost(n,{email:h.email,name:h.name,role:h.role,workshop_id:n});d(`User ${h.email} added successfully.`),p({email:"",name:"",role:"participant"}),f()}catch(s){c((null==(r=null==(t=s.response)?void 0:t.data)?void 0:r.detail)||"Failed to add user")}finally{o(!1)}}},className:"space-y-4",children:[Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"email",children:"Email"}),Mt.jsx(_C,{id:"email",type:"email",placeholder:"user@example.com",value:h.email,onChange:e=>p({...h,email:e.target.value}),required:!0})]}),Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"name",children:"Name"}),Mt.jsx(_C,{id:"name",type:"text",placeholder:"Full Name",value:h.name,onChange:e=>p({...h,name:e.target.value}),required:!0})]}),Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"role",children:"Role"}),Mt.jsxs(oD,{value:h.role,onValueChange:e=>p({...h,role:e}),children:[Mt.jsx(cD,{children:Mt.jsx(lD,{placeholder:"Select role"})}),Mt.jsxs(hD,{children:[Mt.jsx(pD,{value:"sme",children:"Subject Matter Expert (SME)"}),Mt.jsx(pD,{value:"participant",children:"Participant"})]})]})]}),l&&Mt.jsx(tE,{variant:"destructive",children:Mt.jsx(nE,{children:l})}),u&&Mt.jsx(tE,{children:Mt.jsx(nE,{children:u})}),Mt.jsx(Gv,{type:"submit",className:"w-full",disabled:i,children:i?"Adding User...":"Add User"})]})})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsx(fx,{children:"Workshop Information"}),Mt.jsx(mx,{children:"Current workshop details"})]}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-4",children:[r?Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("div",{children:[Mt.jsx(NC,{className:"text-sm font-medium text-gray-500",children:"Workshop Name"}),Mt.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.name})]}),r.description&&Mt.jsxs("div",{children:[Mt.jsx(NC,{className:"text-sm font-medium text-gray-500",children:"Description"}),Mt.jsx("p",{className:"text-sm text-gray-600",children:r.description})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{className:"text-sm font-medium text-gray-500",children:"Current Phase"}),Mt.jsx(Lv,{variant:"outline",className:"capitalize",children:(null==(e=r.current_phase)?void 0:e.replace("_"," "))||"Unknown"})]})]}):Mt.jsx("div",{className:"text-sm text-gray-500",children:"Loading workshop information..."}),Mt.jsxs("div",{children:[Mt.jsx(NC,{className:"text-sm font-medium text-gray-500",children:"Workshop ID"}),Mt.jsx("p",{className:"text-sm font-mono bg-gray-100 p-2 rounded",children:n})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{className:"text-sm font-medium text-gray-500",children:"Total Users"}),Mt.jsx("p",{className:"text-2xl font-bold",children:s.length})]}),Mt.jsxs("div",{children:[Mt.jsx(NC,{className:"text-sm font-medium text-gray-500",children:"User Breakdown"}),Mt.jsxs("div",{className:"flex gap-2 mt-1",children:[Mt.jsxs(Lv,{variant:"secondary",children:[s.filter(e=>"sme"===e.role).length," SMEs"]}),Mt.jsxs(Lv,{variant:"secondary",children:[s.filter(e=>"participant"===e.role).length," Participants"]})]})]})]})})]})]}),Mt.jsxs(hx,{className:"mt-6",children:[Mt.jsxs(px,{children:[Mt.jsx(fx,{children:"Workshop Users"}),Mt.jsx(mx,{children:"All users in your workshop"})]}),Mt.jsx(gx,{children:i?Mt.jsx("div",{className:"text-center py-8",children:"Loading users..."}):l?Mt.jsxs("div",{className:"text-center py-8",children:[Mt.jsx(tE,{variant:"destructive",children:Mt.jsx(nE,{children:l})}),Mt.jsx(Gv,{variant:"outline",onClick:f,className:"mt-4",children:"Retry"})]}):Mt.jsxs(hC,{children:[Mt.jsx(pC,{children:Mt.jsxs(mC,{children:[Mt.jsx(gC,{children:"Name"}),Mt.jsx(gC,{children:"Email"}),Mt.jsx(gC,{children:"Role"}),Mt.jsx(gC,{children:"Status"}),Mt.jsx(gC,{children:"Joined"})]})}),Mt.jsx(fC,{children:s.map(e=>Mt.jsxs(mC,{children:[Mt.jsx(xC,{className:"font-medium",children:e.name}),Mt.jsx(xC,{children:e.email}),Mt.jsx(xC,{children:"facilitator"===e.role?Mt.jsx(Lv,{className:"bg-blue-50 text-blue-700 border border-blue-200",children:"Facilitator"}):Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsxs(oD,{value:e.role,onValueChange:t=>(async(e,t)=>{if(n){g(e);try{const r=await fetch(`/users/workshops/${n}/users/${e}/role`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:t})});if(r.ok)ZS.success(`Role updated to ${t.toUpperCase()}`),f();else{const e=await r.json().catch(()=>({}));ZS.error(e.detail||"Failed to update role")}}catch(r){ZS.error("Failed to update role")}finally{g(null)}}})(e.id,t),disabled:m===e.id,children:[Mt.jsx(cD,{className:"w-[130px] h-8 font-medium "+("sme"===e.role?"bg-violet-50 text-violet-700 border-violet-200 hover:bg-violet-100":"bg-purple-50 text-purple-700 border-purple-200 hover:bg-purple-100"),children:Mt.jsx(lD,{})}),Mt.jsxs(hD,{children:[Mt.jsx(pD,{value:"sme",children:Mt.jsxs("span",{className:"flex items-center gap-2",children:[Mt.jsx("span",{className:"w-2 h-2 rounded-full bg-violet-500"}),"SME"]})}),Mt.jsx(pD,{value:"participant",children:Mt.jsxs("span",{className:"flex items-center gap-2",children:[Mt.jsx("span",{className:"w-2 h-2 rounded-full bg-violet-500"}),"Participant"]})})]})]}),m===e.id&&Mt.jsx(gv,{className:"h-4 w-4 animate-spin text-gray-500"})]})}),Mt.jsx(xC,{children:Mt.jsx(Lv,{variant:"active"===e.status?"default":"pending"===e.status?"outline":"secondary",className:"pending"===e.status?"border-yellow-500 text-yellow-700 bg-yellow-50":"",children:e.status})}),Mt.jsx(xC,{children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})]})]})}):Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center max-w-md",children:[Mt.jsx(Fx,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Mt.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"Only facilitators can access this dashboard."})]})})},sz=()=>{const{setUser:e}=Bm(),{workshopId:t}=Ym(),[n,r]=kt.useState(!1),[s,a]=kt.useState(null),[i,o]=kt.useState({email:"",password:""});return Mt.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:Mt.jsxs(hx,{className:"w-full max-w-md",children:[Mt.jsxs(px,{className:"text-center",children:[Mt.jsx(fx,{className:"text-2xl font-bold",children:"Workshop Portal"}),Mt.jsx(mx,{children:"Sign in to access your workshop"}),Mt.jsxs("div",{className:"mt-3 text-sm text-slate-600 bg-blue-50 p-3 rounded-lg",children:[Mt.jsx("strong",{children:"Participants & SMEs:"})," Enter your email only (leave password blank)",Mt.jsx("br",{}),Mt.jsx("strong",{children:"Facilitators:"})," Enter both email and password"]})]}),Mt.jsxs(gx,{children:[Mt.jsxs("form",{onSubmit:async t=>{var n,s;t.preventDefault(),r(!0),a(null);try{const t=await Um.loginUsersAuthLoginPost({email:i.email,password:i.password});await e(t.user)}catch(o){a((null==(s=null==(n=o.response)?void 0:n.data)?void 0:s.detail)||"Login failed. Please check your credentials.")}finally{r(!1)}},className:"space-y-4",children:[Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"email",children:"Email"}),Mt.jsx(_C,{id:"email",type:"email",placeholder:"Enter your email",value:i.email,onChange:e=>o({...i,email:e.target.value}),required:!0})]}),Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsxs(NC,{htmlFor:"password",children:["Password ",Mt.jsx("span",{className:"text-slate-500",children:"(facilitators only)"})]}),Mt.jsx(_C,{id:"password",type:"password",placeholder:"Leave blank for participants/SMEs",value:i.password,onChange:e=>o({...i,password:e.target.value})})]}),s&&Mt.jsx(tE,{variant:"destructive",children:Mt.jsx(nE,{children:s})}),Mt.jsx(Gv,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign In"})]}),Mt.jsx("div",{className:"mt-4 text-center text-sm text-gray-600",children:Mt.jsx("p",{children:"Need help? Contact your workshop facilitator."})})]})]})})};function az(){const{setWorkshopId:e}=Ym(),{user:t}=Bm(),n=sg(),[r,s]=kt.useState({name:"LLM Judge Calibration Workshop",description:"A collaborative workshop to calibrate LLM judges through structured evaluation and consensus building."});return Mt.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-6",children:Mt.jsxs("div",{className:"w-full max-w-2xl",children:[Mt.jsxs("div",{className:"text-center mb-8",children:[Mt.jsxs("div",{className:"flex justify-center items-center gap-3 mb-4",children:[Mt.jsx(jv,{className:"h-12 w-12 text-blue-600"}),Mt.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Welcome, Facilitator!"})]}),Mt.jsx("p",{className:"text-xl text-gray-600 max-w-xl mx-auto",children:"Create your LLM Judge Calibration workshop to get started"})]}),Mt.jsxs(hx,{className:"mb-6 border-blue-200 bg-blue-50/50",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Sv,{className:"h-5 w-5 text-blue-600"}),"Quick Start"]}),Mt.jsx(mx,{children:"Get started immediately with a pre-configured workshop"})]}),Mt.jsx(gx,{children:Mt.jsx(Gv,{onClick:async()=>{try{const r=await n.mutateAsync({name:`LLM Judge Calibration Workshop - ${(new Date).toLocaleDateString()}`,description:"A collaborative workshop to calibrate LLM judges through structured evaluation and consensus building.",facilitator_id:(null==t?void 0:t.id)||"demo_facilitator"});e(r.id),window.history.pushState({},"",`?workshop=${r.id}`)}catch(r){}},disabled:n.isPending,className:"w-full",size:"lg",children:n.isPending?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating Workshop..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(jv,{className:"h-4 w-4 mr-2"}),"Start Workshop Now"]})})})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Rv,{className:"h-5 w-5 text-purple-600"}),"Create Custom Workshop"]}),Mt.jsx(mx,{children:"Customize your workshop details and settings"})]}),Mt.jsxs(gx,{children:[n.error&&Mt.jsx(tE,{className:"mb-4",children:Mt.jsxs(nE,{children:["Failed to create workshop: ",n.error.message]})}),Mt.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),r.name.trim())try{const s=await n.mutateAsync({name:r.name.trim(),description:r.description.trim(),facilitator_id:(null==t?void 0:t.id)||"demo_facilitator"});e(s.id),window.history.pushState({},"",`?workshop=${s.id}`)}catch(a){}else alert("Please enter a workshop name")},className:"space-y-4",children:[Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"name",children:"Workshop Name *"}),Mt.jsx(_C,{id:"name",value:r.name,onChange:e=>s({...r,name:e.target.value}),placeholder:"e.g., Customer Support Quality Assessment Workshop",required:!0}),Mt.jsx("p",{className:"text-sm text-gray-500",children:"Choose a descriptive name that reflects your workshop's purpose"})]}),Mt.jsxs("div",{className:"space-y-2",children:[Mt.jsx(NC,{htmlFor:"description",children:"Description"}),Mt.jsx(yC,{id:"description",value:r.description,onChange:e=>s({...r,description:e.target.value}),placeholder:"Describe the workshop goals, context, and what you hope to achieve...",rows:4}),Mt.jsx("p",{className:"text-sm text-gray-500",children:"This description will help participants understand the workshop's purpose and objectives"})]}),Mt.jsx(Gv,{type:"submit",disabled:n.isPending,className:"w-full",variant:"outline",children:n.isPending?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(av,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating Workshop..."]}):"Create Custom Workshop"})]})]})]}),Mt.jsx("div",{className:"text-center mt-8 text-sm text-gray-500",children:Mt.jsxs("p",{children:["You're logged in as: ",Mt.jsx("strong",{children:null==t?void 0:t.name})," (",null==t?void 0:t.role,")"]})})]})})}const iz=()=>{const{currentPhase:e,isPhaseComplete:t}=gg();return Mt.jsx("div",{className:"p-8 h-full flex items-center justify-center",children:Mt.jsxs(hx,{className:"max-w-2xl w-full",children:[Mt.jsxs(px,{className:"text-center",children:[Mt.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Mt.jsx(wv,{className:"h-8 w-8 text-amber-600"})}),Mt.jsx(fx,{className:"text-xl text-slate-900",children:" Evaluation Criteria Being Prepared"}),Mt.jsx(mx,{className:"text-base",children:"The facilitator is creating the evaluation rubric that will be used to rate traces."})]}),Mt.jsxs(gx,{className:"space-y-6",children:[Mt.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[Mt.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"What happens next:"}),Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold "+(t("discovery")?"bg-green-500 text-white":"bg-slate-300 text-slate-600"),children:t("discovery")?"":"1"}),Mt.jsxs("span",{className:"text-sm "+(t("discovery")?"text-green-700":"text-slate-600"),children:["Discovery insights collected ",t("discovery")?"(Complete)":"(In Progress)"]})]}),Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold "+("rubric"===e?"bg-amber-500 text-white":"bg-slate-300 text-slate-600"),children:"rubric"===e?Mt.jsx(qx,{className:"h-3 w-3"}):"2"}),Mt.jsxs("span",{className:"text-sm "+("rubric"===e?"text-amber-700 font-medium":"text-slate-600"),children:["Facilitator creates evaluation criteria ","rubric"===e?"(Current)":""]})]}),Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold bg-slate-300 text-slate-600",children:"3"}),Mt.jsx("span",{className:"text-sm text-slate-600",children:"Facilitator shares screen to explain rubric"})]}),Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold bg-slate-300 text-slate-600",children:"4"}),Mt.jsx("span",{className:"text-sm text-slate-600",children:"Annotation phase begins"})]})]})]}),Mt.jsx("div",{className:"text-center",children:Mt.jsxs(Lv,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:[Mt.jsx(qx,{className:"h-3 w-3 mr-1"}),"You'll be notified when ready to proceed"]})})]})]})})};function oz(){const{workshopId:e}=Ym(),{data:t,isLoading:n,error:r}=cg(e);if(n)return Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("div",{className:"text-lg font-medium text-gray-600 mb-2",children:"Loading rubric..."}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"Fetching evaluation criteria"})]})});if(r||!t)return Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("div",{className:"text-lg font-medium text-gray-600 mb-2",children:"No rubric available"}),Mt.jsx("div",{className:"text-sm text-gray-500",children:"The facilitator has not created evaluation criteria yet."})]})});const s=(e=>e&&e.question?PC(e.question).map((t,n)=>({id:`${e.id}_${n}`,title:t.title,description:t.description})):[])(t);return Mt.jsx("div",{className:"h-full",children:Mt.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Evaluation Rubric"}),Mt.jsx("p",{className:"text-lg text-gray-600",children:"Review the evaluation criteria created by the facilitator"})]}),Mt.jsxs("div",{className:"flex justify-center gap-2",children:[Mt.jsxs(Lv,{className:"bg-green-500",children:[Mt.jsx(zx,{className:"h-3 w-3 mr-1"}),"Rubric Created"]}),Mt.jsxs(Lv,{variant:"outline",children:[Mt.jsx(Rv,{className:"h-3 w-3 mr-1"}),"Read Only"]})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx($x,{className:"h-5 w-5 text-blue-600"}),"Evaluation Criteria"]})}),Mt.jsxs(gx,{className:"space-y-4",children:[s.map((e,t)=>Mt.jsx("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:t+1}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx("h3",{className:"font-medium text-green-900 mb-2",children:e.title}),Mt.jsx("p",{className:"text-green-700 text-sm mb-3",children:e.description}),Mt.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:[Mt.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Rating Scale (1-5)"}),Mt.jsx("div",{className:"flex justify-between items-center",children:[1,2,3,4,5].map(e=>Mt.jsxs("div",{className:"flex flex-col items-center gap-1",children:[Mt.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300 bg-white"}),Mt.jsxs("span",{className:"text-xs text-gray-600",children:[1===e&&"Strongly Disagree",2===e&&"Disagree",3===e&&"Neutral",4===e&&"Agree",5===e&&"Strongly Agree"]})]},e))})]})]})]})},e.id)),0===s.length&&Mt.jsxs("div",{className:"text-center text-gray-500 py-8",children:[Mt.jsx($x,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),Mt.jsx("p",{children:"No evaluation criteria defined yet."})]})]})]}),s.length>0&&Mt.jsx(hx,{className:"bg-blue-50 border-blue-200",children:Mt.jsxs(gx,{className:"pt-6",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Mt.jsx($x,{className:"h-4 w-4 text-blue-600"}),Mt.jsx("span",{className:"font-medium text-blue-800",children:"Rubric Summary"})]}),Mt.jsxs("p",{className:"text-sm text-blue-700",children:[s.length," evaluation criteria",1!==s.length?"":"a"," created by the facilitator. Each criterion will be rated on a 1-5 Likert scale during the annotation phase."]})]})}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Nv,{className:"h-5 w-5 text-yellow-600"}),"Next Steps"]})}),Mt.jsx(gx,{children:Mt.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:Mt.jsx("p",{className:"text-sm text-yellow-800",children:"The facilitator will start the annotation phase when ready. During annotation, you will use these evaluation criteria to rate LLM responses on a 1-5 scale."})})})]})]})})}const lz=()=>{const{currentPhase:e,isPhaseComplete:t}=gg();return Mt.jsx("div",{className:"p-8 h-full flex items-center justify-center",children:Mt.jsxs(hx,{className:"max-w-2xl w-full",children:[Mt.jsxs(px,{className:"text-center",children:[Mt.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Mt.jsx(Rv,{className:"h-8 w-8 text-purple-600"})}),Mt.jsx(fx,{className:"text-xl text-slate-900",children:" Annotation Phase Not Ready"}),Mt.jsx(mx,{className:"text-base",children:"The facilitator is preparing the annotation phase. You'll be able to rate traces once everything is ready."})]}),Mt.jsxs(gx,{className:"space-y-6",children:[Mt.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[Mt.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Requirements for annotation:"}),Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center "+(t("discovery")?"bg-green-500 text-white":"bg-slate-300 text-slate-600"),children:t("discovery")?Mt.jsx(zx,{className:"h-3 w-3"}):Mt.jsx(qx,{className:"h-3 w-3"})}),Mt.jsxs("span",{className:"text-sm "+(t("discovery")?"text-green-700":"text-slate-600"),children:["Discovery insights have been collected",t("discovery")&&Mt.jsx("span",{className:"ml-1 font-medium",children:""})]})]}),Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center "+(t("rubric")?"bg-green-500 text-white":"rubric"===e?"bg-amber-500 text-white":"bg-slate-300 text-slate-600"),children:t("rubric")?Mt.jsx(zx,{className:"h-3 w-3"}):Mt.jsx(qx,{className:"h-3 w-3"})}),Mt.jsxs("span",{className:"text-sm "+(t("rubric")?"text-green-700":"rubric"===e?"text-amber-700 font-medium":"text-slate-600"),children:["Evaluation rubric has been created",t("rubric")&&Mt.jsx("span",{className:"ml-1 font-medium",children:""}),"rubric"===e&&Mt.jsx("span",{className:"ml-1 font-medium",children:"(In Progress)"})]})]}),Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center "+("annotation"===e?"bg-purple-500 text-white":"bg-slate-300 text-slate-600"),children:Mt.jsx(qx,{className:"h-3 w-3"})}),Mt.jsxs("span",{className:"text-sm "+("annotation"===e?"text-purple-700 font-medium":"text-slate-600"),children:["Facilitator starts the annotation phase","annotation"===e&&Mt.jsx("span",{className:"ml-1 font-medium",children:"(Ready!)"})]})]})]})]}),Mt.jsx("div",{className:"text-center",children:Mt.jsxs(Lv,{variant:"outline",className:""+("annotation"===e?"bg-purple-50 text-purple-700 border-purple-200":"bg-slate-50 text-slate-700 border-slate-200"),children:[Mt.jsx(qx,{className:"h-3 w-3 mr-1"}),"annotation"===e?"Annotation phase is starting!":"Current status: "+("rubric"===e?"Creating evaluation criteria":"Waiting for setup")]})})]})]})})},cz=()=>{const{workshopId:e}=Ym(),{data:t}=ig(e),{data:n}=hg(e),r=(null==t?void 0:t.length)||0,s=n?new Set(n.map(e=>e.trace_id)):new Set,a=r>0?s.size/r*100:0,i=n?new Set(n.map(e=>e.user_id)).size:0;return Mt.jsx("div",{className:"p-8 h-full flex items-center justify-center",children:Mt.jsxs(hx,{className:"max-w-2xl w-full",children:[Mt.jsxs(px,{className:"text-center",children:[Mt.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Mt.jsx(Px,{className:"h-8 w-8 text-blue-600"})}),Mt.jsx(fx,{className:"text-xl text-slate-900",children:" Results Not Yet Available"}),Mt.jsx(mx,{className:"text-base",children:"Results will be shared when annotation is complete. The facilitator will analyze inter-rater reliability and share findings."})]}),Mt.jsxs(gx,{className:"space-y-6",children:[Mt.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[Mt.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Current Progress:"}),Mt.jsxs("div",{className:"space-y-4",children:[Mt.jsxs("div",{children:[Mt.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Mt.jsx("span",{className:"text-sm text-slate-600",children:"Traces Annotated"}),Mt.jsxs("span",{className:"text-sm font-medium text-slate-800",children:[s.size," of ",r]})]}),Mt.jsx(ZF,{value:a,className:"h-2"}),Mt.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[Math.round(a),"% Complete"]})]}),Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{className:"flex items-center gap-2",children:[Mt.jsx(Rv,{className:"h-4 w-4 text-slate-500"}),Mt.jsx("span",{className:"text-sm text-slate-600",children:"Active Annotators"})]}),Mt.jsxs(Lv,{variant:"outline",className:"text-xs",children:[i," contributors"]})]})]})]}),Mt.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[Mt.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"What happens next:"}),Mt.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[Mt.jsx("div",{children:" Facilitator monitors annotation progress"}),Mt.jsx("div",{children:" Once targets are met, inter-rater reliability is calculated"}),Mt.jsx("div",{children:" Results include agreement scores and quality insights"}),Mt.jsx("div",{children:" Facilitator shares findings with all participants"})]})]}),Mt.jsx("div",{className:"text-center",children:Mt.jsxs(Lv,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[Mt.jsx(qx,{className:"h-3 w-3 mr-1"}),a>=100?"Annotation complete - results being prepared!":"Waiting for annotation completion"]})})]})]})})};function uz(){const{workshopId:e}=Ym(),[t,n]=kt.useState(null),[r,s]=kt.useState(!0),[a,i]=kt.useState(null);return kt.useEffect(()=>{const t=async()=>{try{const t=await fetch(`/workshops/${e}/mlflow-status`);if(t.ok){const e=await t.json();n(e)}else i("Failed to load intake status")}catch(yW){i("Failed to load intake status")}finally{s(!1)}};t();const r=setInterval(t,5e3);return()=>clearInterval(r)},[e]),r?Mt.jsx("div",{className:"container mx-auto p-6 max-w-2xl",children:Mt.jsx("div",{className:"flex items-center justify-center h-64",children:Mt.jsxs("div",{className:"text-center",children:[Mt.jsx(av,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),Mt.jsx("p",{className:"text-gray-600",children:"Loading intake status..."})]})})}):Mt.jsxs("div",{className:"container mx-auto p-6 max-w-2xl",children:[Mt.jsxs("div",{className:"mb-8 text-center",children:[Mt.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Waiting for Traces"}),Mt.jsx("p",{className:"text-gray-600",children:"The facilitator is setting up MLflow trace intake. You'll be able to view traces once they're loaded."})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Hx,{className:"h-5 w-5"}),"Intake Progress"]}),Mt.jsx(mx,{children:"Current status of trace ingestion from MLflow"})]}),Mt.jsx(gx,{children:t?Mt.jsxs("div",{className:"space-y-4",children:[Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsx("span",{className:"text-sm font-medium",children:"Configuration"}),Mt.jsx(Lv,{variant:t.is_configured?"default":"secondary",children:t.is_configured?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(zx,{className:"h-3 w-3 mr-1"}),"Configured"]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(qx,{className:"h-3 w-3 mr-1"}),"Pending"]})})]}),Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsx("span",{className:"text-sm font-medium",children:"Trace Ingestion"}),Mt.jsx(Lv,{variant:t.is_ingested?"default":"secondary",children:t.is_ingested?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(zx,{className:"h-3 w-3 mr-1"}),"Complete"]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(qx,{className:"h-3 w-3 mr-1"}),"Pending"]})})]}),t.trace_count>0&&Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsx("span",{className:"text-sm font-medium",children:"Traces Available"}),Mt.jsxs(Lv,{variant:"outline",children:[t.trace_count," traces"]})]}),t.last_ingestion_time&&Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsx("span",{className:"text-sm font-medium",children:"Last Updated"}),Mt.jsx("span",{className:"text-sm text-gray-600",children:new Date(t.last_ingestion_time).toLocaleString()})]}),t.error_message&&Mt.jsx(tE,{variant:"destructive",children:Mt.jsxs(nE,{children:[Mt.jsx("strong",{children:"Error:"})," ",t.error_message]})}),!t.is_configured&&Mt.jsxs("div",{className:"text-center py-4",children:[Mt.jsx(qx,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),Mt.jsx("p",{className:"text-gray-600",children:"Waiting for facilitator to configure MLflow connection..."})]}),t.is_configured&&!t.is_ingested&&Mt.jsxs("div",{className:"text-center py-4",children:[Mt.jsx(av,{className:"h-8 w-8 mx-auto mb-2 animate-spin text-blue-600"}),Mt.jsx("p",{className:"text-gray-600",children:"MLflow is configured. Waiting for traces to be ingested..."})]}),t.is_ingested&&t.trace_count>0&&Mt.jsxs("div",{className:"text-center py-4",children:[Mt.jsx(zx,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),Mt.jsx("p",{className:"text-green-600 font-medium",children:"Traces are ready! The facilitator will advance to the next phase soon."})]})]}):Mt.jsxs("div",{className:"text-center py-8",children:[Mt.jsx(Hx,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),Mt.jsx("p",{className:"text-gray-600",children:a||"Unable to load intake status"})]})})]})]})}function dz(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}var hz="rovingFocusGroup.onEntryFocus",pz={bubbles:!1,cancelable:!0},fz="RovingFocusGroup",[mz,gz,xz]=h_(fz),[vz,yz]=u_(fz,[xz]),[bz,wz]=vz(fz),jz=kt.forwardRef((e,t)=>Mt.jsx(mz.Provider,{scope:e.__scopeRovingFocusGroup,children:Mt.jsx(mz.Slot,{scope:e.__scopeRovingFocusGroup,children:Mt.jsx(Nz,{...e,ref:t})})}));jz.displayName=fz;var Nz=kt.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=kt.useRef(null),p=Uv(t,h),f=N_(a),[m,g]=w_({prop:i,defaultProp:o??null,onChange:l,caller:fz}),[x,v]=kt.useState(!1),y=y_(c),b=gz(n),w=kt.useRef(!1),[j,N]=kt.useState(0);return kt.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(hz,y),()=>e.removeEventListener(hz,y)},[y]),Mt.jsx(bz,{scope:n,orientation:r,dir:f,loop:s,currentTabStopId:m,onItemFocus:kt.useCallback(e=>g(e),[g]),onItemShiftTab:kt.useCallback(()=>v(!0),[]),onFocusableItemAdd:kt.useCallback(()=>N(e=>e+1),[]),onFocusableItemRemove:kt.useCallback(()=>N(e=>e-1),[]),children:Mt.jsx(x_.div,{tabIndex:x||0===j?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:dz(e.onMouseDown,()=>{w.current=!0}),onFocus:dz(e.onFocus,e=>{const t=!w.current;if(e.target===e.currentTarget&&t&&!x){const t=new CustomEvent(hz,pz);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=b().filter(e=>e.focusable);Cz([e.find(e=>e.active),e.find(e=>e.id===m),...e].filter(Boolean).map(e=>e.ref.current),u)}}w.current=!1}),onBlur:dz(e.onBlur,()=>v(!1))})})}),kz="RovingFocusGroupItem",Sz=kt.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...o}=e,l=g_(),c=a||l,u=wz(kz,n),d=u.currentTabStopId===c,h=gz(n),{onFocusableItemAdd:p,onFocusableItemRemove:f,currentTabStopId:m}=u;return kt.useEffect(()=>{if(r)return p(),()=>f()},[r,p,f]),Mt.jsx(mz.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:Mt.jsx(x_.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:dz(e.onMouseDown,e=>{r?u.onItemFocus(c):e.preventDefault()}),onFocus:dz(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:dz(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:_z[r]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){"prev"===t&&s.reverse();const a=s.indexOf(e.currentTarget);s=u.loop?(r=a+1,(n=s).map((e,t)=>n[(r+t)%n.length])):s.slice(a+1)}setTimeout(()=>Cz(s))}var n,r}),children:"function"==typeof i?i({isCurrentTabStop:d,hasTabStop:null!=m}):i})})});Sz.displayName=kz;var _z={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cz(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var Ez=jz,Tz=Sz;var Pz=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=kt.useState(),r=kt.useRef(null),s=kt.useRef(e),a=kt.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return kt.useReducer((e,n)=>t[e][n]??e,e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return kt.useEffect(()=>{const e=Rz(r.current);a.current="mounted"===o?e:"none"},[o]),p_(()=>{const t=r.current,n=s.current;if(n!==e){const r=a.current,i=Rz(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,l]),p_(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,i=a=>{const i=Rz(r.current).includes(CSS.escape(a.animationName));if(a.target===t&&i&&(l("ANIMATION_END"),!s.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(a.current=Rz(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:kt.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),s="function"==typeof n?n({present:r.isPresent}):kt.Children.only(n),a=Uv(r.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;if(s)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof n||r.isPresent?kt.cloneElement(s,{ref:a}):null};function Rz(e){return(null==e?void 0:e.animationName)||"none"}Pz.displayName="Presence";var Iz="Radio",[Dz,Mz]=u_(Iz),[Az,Oz]=Dz(Iz),Lz=kt.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:i,value:o="on",onCheck:l,form:c,...u}=e,[d,h]=kt.useState(null),p=Uv(t,e=>h(e)),f=kt.useRef(!1),m=!d||(c||!!d.closest("form"));return Mt.jsxs(Az,{scope:n,checked:s,disabled:i,children:[Mt.jsx(x_.button,{type:"button",role:"radio","aria-checked":s,"data-state":Uz(s),"data-disabled":i?"":void 0,disabled:i,value:o,...u,ref:p,onClick:dz(e.onClick,e=>{s||null==l||l(),m&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),m&&Mt.jsx(Wz,{control:d,bubbles:!f.current,name:r,value:o,checked:s,required:a,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});Lz.displayName=Iz;var Fz="RadioIndicator",zz=kt.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=Oz(Fz,n);return Mt.jsx(Pz,{present:r||a.checked,children:Mt.jsx(x_.span,{"data-state":Uz(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});zz.displayName=Fz;var Wz=kt.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=kt.useRef(null),o=Uv(i,a),l=LC(n),c=FC(t);return kt.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&s){const t=new Event("click",{bubbles:r});s.call(e,n),e.dispatchEvent(t)}},[l,n,r]),Mt.jsx(x_.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Uz(e){return e?"checked":"unchecked"}Wz.displayName="RadioBubbleInput";var $z=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],qz="RadioGroup",[Bz,Vz]=u_(qz,[yz,Mz]),Hz=yz(),Qz=Mz(),[Kz,Gz]=Bz(qz),Yz=kt.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:i=!1,disabled:o=!1,orientation:l,dir:c,loop:u=!0,onValueChange:d,...h}=e,p=Hz(n),f=N_(c),[m,g]=w_({prop:a,defaultProp:s??null,onChange:d,caller:qz});return Mt.jsx(Kz,{scope:n,name:r,required:i,disabled:o,value:m,onValueChange:g,children:Mt.jsx(Ez,{asChild:!0,...p,orientation:l,dir:f,loop:u,children:Mt.jsx(x_.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":o?"":void 0,dir:f,...h,ref:t})})})});Yz.displayName=qz;var Jz="RadioGroupItem",Xz=kt.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=Gz(Jz,n),i=a.disabled||r,o=Hz(n),l=Qz(n),c=kt.useRef(null),u=Uv(t,c),d=a.value===s.value,h=kt.useRef(!1);return kt.useEffect(()=>{const e=e=>{$z.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),Mt.jsx(Tz,{asChild:!0,...o,focusable:!i,active:d,children:Mt.jsx(Lz,{disabled:i,required:a.required,checked:d,...l,...s,name:a.name,ref:u,onCheck:()=>a.onValueChange(s.value),onKeyDown:dz(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:dz(s.onFocus,()=>{var e;h.current&&(null==(e=c.current)||e.click())})})})});Xz.displayName=Jz;var Zz=kt.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=Qz(n);return Mt.jsx(zz,{...s,...r,ref:t})});Zz.displayName="RadioGroupIndicator";var eW=Yz,tW=Xz,nW=Zz;const rW=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(eW,{className:dx("grid gap-2",e),...t,ref:n}));rW.displayName=eW.displayName;const sW=kt.forwardRef(({className:e,...t},n)=>Mt.jsx(tW,{ref:n,className:dx("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:Mt.jsx(nW,{className:"flex items-center justify-center",children:Mt.jsx(iD,{className:"h-3.5 w-3.5 fill-primary"})})}));sW.displayName=tW.displayName;const aW=({onStartDiscovery:e})=>{const{workshopId:t}=Ym(),n=$p(),[r,s]=St.useState(!1),[a,i]=St.useState("10"),[o,l]=St.useState("10"),{data:c}=ig(t),u=(null==c?void 0:c.length)||0;return Mt.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[Mt.jsxs("div",{className:"text-center space-y-3",children:[Mt.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto",children:Mt.jsx(yv,{className:"w-8 h-8 text-white"})}),Mt.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Ready to Start Discovery Phase"}),Mt.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Begin the collaborative discovery process where participants explore traces and provide insights that will inform the evaluation rubric."})]}),Mt.jsx(hx,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50",children:Mt.jsx(gx,{className:"p-4",children:Mt.jsxs("div",{className:"flex items-center justify-center gap-3",children:[Mt.jsx(Hx,{className:"w-6 h-6 text-blue-600"}),Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("span",{className:"text-2xl font-bold text-blue-900",children:u}),Mt.jsx("span",{className:"text-base font-medium text-blue-700 ml-2",children:"Traces Available"}),0===u&&Mt.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"No traces loaded yet"})]})]})})}),Mt.jsxs(hx,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50",children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(sv,{className:"w-5 h-5 text-blue-600"}),"What Happens When You Start Discovery"]})}),Mt.jsx(gx,{className:"space-y-4",children:Mt.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("h4",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[Mt.jsx(Rv,{className:"w-4 h-4 text-green-600"}),"For SMEs & Participants"]}),Mt.jsxs("ul",{className:"space-y-2 text-sm text-slate-700",children:[Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Access to the trace viewer and analysis interface"]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Can explore traces and submit quality insights"]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Progress tracked automatically as they contribute"]})]})]}),Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("h4",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[Mt.jsx(yv,{className:"w-4 h-4 text-blue-600"}),"For You (Facilitator)"]}),Mt.jsxs("ul",{className:"space-y-2 text-sm text-slate-700",children:[Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Monitor participation and progress in real-time"]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Review all findings and identify patterns"]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Use insights to guide rubric creation"]})]})]})]})})]}),Mt.jsxs(hx,{className:"border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(wv,{className:"w-5 h-5 text-amber-600"}),"Discovery Configuration"]}),Mt.jsxs(mx,{children:["Choose how many of the ",u," available traces to include in the discovery phase"]})]}),Mt.jsxs(gx,{children:[Mt.jsxs(rW,{value:a,onValueChange:i,className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-white/50 transition-colors",children:[Mt.jsx(sW,{value:"10",id:"traces-standard"}),Mt.jsxs(NC,{htmlFor:"traces-standard",className:"flex-1 cursor-pointer",children:[Mt.jsx("div",{className:"font-medium",children:"Standard Discovery (10 traces)"}),Mt.jsx("div",{className:"text-sm text-slate-600",children:"Recommended for most workshops"})]})]}),Mt.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-white/50 transition-colors",children:[Mt.jsx(sW,{value:"custom",id:"traces-custom"}),Mt.jsxs(NC,{htmlFor:"traces-custom",className:"flex-1 cursor-pointer",children:[Mt.jsx("div",{className:"font-medium",children:"Custom"}),Mt.jsx("div",{className:"text-sm text-slate-600",children:"Choose your own number of traces"})]})]})]}),"custom"===a&&Mt.jsxs("div",{className:"mt-4 p-3 bg-white/50 rounded-lg",children:[Mt.jsx(NC,{htmlFor:"custom-trace-count",className:"text-sm font-medium",children:"Number of traces to use"}),Mt.jsx(_C,{id:"custom-trace-count",type:"number",min:"1",max:u,value:o,onChange:e=>l(e.target.value),className:"mt-2",placeholder:"Enter number of traces"}),Mt.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["You have ",u," traces available"]})]}),Mt.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[Mt.jsxs("div",{className:"text-sm",children:[Mt.jsx("strong",{children:"Selected configuration:"})," ","custom"===a?`${o} traces`:`${a} traces (Standard)`]}),parseInt("custom"===a?o:a)<u&&Mt.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Note: You have ",u," traces loaded from MLFlow, only the first ","custom"===a?o:a," will be used."]})]})]})]}),0===u&&Mt.jsx(hx,{className:"border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50",children:Mt.jsx(gx,{className:"p-4",children:Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx(Hx,{className:"h-8 w-8 text-amber-600"}),Mt.jsxs("div",{children:[Mt.jsx("h3",{className:"font-semibold text-amber-900",children:"No traces available"}),Mt.jsx("p",{className:"text-sm text-amber-700",children:"Complete MLflow ingestion in the Intake phase first, then return here to start discovery."})]})]})})}),Mt.jsx("div",{className:"flex justify-center pt-4",children:Mt.jsx(Gv,{onClick:async()=>{try{s(!0);const r="custom"===a?parseInt(o):parseInt(a),i=r?`/workshops/${t}/begin-discovery?trace_limit=${r}`:`/workshops/${t}/begin-discovery`,l=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error("Failed to start discovery phase");await l.json();n.invalidateQueries({queryKey:["workshop",t]}),n.invalidateQueries({queryKey:["traces",t]}),n.invalidateQueries({queryKey:["all-traces",t]}),e&&e()}catch(r){ZS.error("Failed to start discovery phase. Please try again.")}finally{s(!1)}},disabled:r||0===u,size:"lg",className:"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white px-8 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:r?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Starting Discovery..."]}):0===u?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(Hx,{className:"w-5 h-5 mr-2"}),"No Traces Available"]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(fv,{className:"w-5 h-5 mr-2"}),"Start Discovery Phase"]})})}),Mt.jsx("div",{className:"text-center text-sm text-slate-500",children:Mt.jsx("p",{children:"Once started, participants will be able to access the discovery interface immediately."})})]})},iW=({onStartAnnotation:e})=>{const{workshopId:t}=Ym(),n=$p(),[r,s]=St.useState(!1),[a,i]=St.useState("limited"),[o,l]=St.useState("10"),{data:c}=cg(t),{data:u}=ig(t),d=(null==u?void 0:u.length)||0;return Mt.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[Mt.jsxs("div",{className:"text-center space-y-3",children:[Mt.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center mx-auto",children:Mt.jsx(Nv,{className:"w-8 h-8 text-white"})}),Mt.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Ready to Start Annotation Phase"}),Mt.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Begin the systematic annotation process where SMEs will rate traces using the evaluation rubric created from discovery insights."})]}),Mt.jsx(hx,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-indigo-50",children:Mt.jsx(gx,{className:"p-4",children:Mt.jsxs("div",{className:"flex items-center justify-center gap-3",children:[Mt.jsx(Hx,{className:"w-6 h-6 text-purple-600"}),Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("span",{className:"text-2xl font-bold text-purple-900",children:d}),Mt.jsx("span",{className:"text-base font-medium text-purple-700 ml-2",children:"Traces Available"}),0===d&&Mt.jsx("div",{className:"text-sm text-purple-600 mt-1",children:"No traces available"})]})]})})}),c&&Mt.jsxs(hx,{className:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(zx,{className:"w-5 h-5 text-green-600"}),"Evaluation Rubric Ready"]}),Mt.jsx(mx,{children:"The rubric created from discovery insights will guide the annotation process"})]}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-4",children:[Mt.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Mt.jsx($x,{className:"w-5 h-5 text-green-600"}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-semibold text-slate-900",children:"Evaluation Criteria"}),Mt.jsxs("p",{className:"text-sm text-slate-600",children:[PC(c.question).length," question(s)"]})]})]}),Mt.jsx("div",{className:"space-y-2",children:PC(c.question).map((e,t)=>Mt.jsxs("div",{className:"bg-slate-50 rounded-md p-3",children:[Mt.jsxs("div",{className:"flex items-center gap-2 mb-1",children:["likert"===e.judgeType&&Mt.jsx(vv,{className:"w-3 h-3 text-blue-500"}),"binary"===e.judgeType&&Mt.jsx(_x,{className:"w-3 h-3 text-green-500"}),"freeform"===e.judgeType&&Mt.jsx(lv,{className:"w-3 h-3 text-purple-500"}),Mt.jsx("p",{className:"text-sm font-medium text-slate-700",children:e.title}),Mt.jsx(Lv,{variant:"outline",className:"text-xs ml-auto",children:"likert"===e.judgeType?"1-5 Scale":"binary"===e.judgeType?"Pass/Fail":"Free-form"})]}),e.description&&Mt.jsx("p",{className:"text-sm text-slate-600 ml-5",children:e.description})]},e.id))})]})})]}),Mt.jsxs(hx,{className:"border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(wv,{className:"w-5 h-5 text-amber-600"}),"Annotation Configuration"]}),Mt.jsxs(mx,{children:["Choose how many of the ",d," available traces to include in the annotation phase"]})]}),Mt.jsxs(gx,{children:[Mt.jsxs(rW,{value:a,onValueChange:e=>i(e),className:"space-y-4",children:[Mt.jsxs("div",{className:"flex items-start space-x-3",children:[Mt.jsx(sW,{value:"limited",id:"limited",className:"mt-1"}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx(NC,{htmlFor:"limited",className:"text-base font-medium cursor-pointer",children:"Start with a subset of traces"}),Mt.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Recommended for focused annotation sessions. You can add more traces later."}),"limited"===a&&Mt.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[Mt.jsx(NC,{htmlFor:"traceCount",className:"text-sm",children:"Number of traces:"}),Mt.jsx(_C,{id:"traceCount",type:"number",min:"1",max:d,value:o,onChange:e=>l(e.target.value),className:"w-24"}),Mt.jsxs("span",{className:"text-sm text-slate-600",children:["(max: ",d,")"]})]})]})]}),Mt.jsxs("div",{className:"flex items-start space-x-3",children:[Mt.jsx(sW,{value:"all",id:"all",className:"mt-1"}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsxs(NC,{htmlFor:"all",className:"text-base font-medium cursor-pointer",children:["Use all available traces (",d," traces)"]}),Mt.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Include all traces from the start. Best for comprehensive annotation sessions."})]})]})]}),Mt.jsx("div",{className:"mt-4 p-3 bg-purple-100 rounded-lg",children:Mt.jsxs("p",{className:"text-sm text-purple-800",children:[Mt.jsx("strong",{children:"Selected:"})," ","all"===a?`All ${d} traces`:`${Math.min(parseInt(o)||10,d)} traces (randomly sampled)`]})})]})]}),Mt.jsxs(hx,{className:"border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50",children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Nv,{className:"w-5 h-5 text-amber-600"}),"What Happens When You Start Annotation"]})}),Mt.jsx(gx,{className:"space-y-4",children:Mt.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("h4",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[Mt.jsx(Rv,{className:"w-4 h-4 text-blue-600"}),"For SMEs (Subject Matter Experts)"]}),Mt.jsxs("ul",{className:"space-y-2 text-sm text-slate-700",children:[Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Access to annotation interface with rubric criteria"]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Rate traces on 1-5 scale with detailed comments"]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Progress through traces systematically"]})]})]}),Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("h4",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[Mt.jsx($x,{className:"w-4 h-4 text-amber-600"}),"For You (Facilitator)"]}),Mt.jsxs("ul",{className:"space-y-2 text-sm text-slate-700",children:[Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Monitor annotation progress across all SMEs"]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"View real-time completion statistics"]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx(Mx,{className:"w-3 h-3 mt-0.5 text-slate-400"}),"Prepare for IRR analysis once complete"]})]})]})]})})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsx(fx,{className:"text-slate-700",children:"Note for Participants"})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"bg-slate-50 border-2 border-slate-200 rounded-lg p-4",children:[Mt.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Mt.jsx(Rv,{className:"w-5 h-5 text-slate-500"}),Mt.jsx("p",{className:"font-medium text-slate-700",children:"Regular participants will observe this phase"})]}),Mt.jsx("p",{className:"text-sm text-slate-600",children:"During annotation, participants can watch the process but won't actively annotate. This maintains the integrity of the SME evaluation while keeping everyone engaged in the learning process."})]})})]}),Mt.jsx("div",{className:"flex justify-center pt-4",children:Mt.jsx(Gv,{onClick:async()=>{try{s(!0);const r="all"===a?-1:parseInt(o)||10,i=await fetch(`/workshops/${t}/begin-annotation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trace_limit:r})});if(!i.ok){const e=await i.json();throw new Error(e.detail||"Failed to start annotation phase")}const l=await i.json();ZS.success(l.message||"Annotation phase started successfully!"),await new Promise(e=>setTimeout(e,500)),n.removeQueries({queryKey:["workshop",t]}),n.removeQueries({queryKey:["annotations",t]}),n.removeQueries({queryKey:["rubric",t]}),await n.refetchQueries({queryKey:["workshop",t]}),await n.refetchQueries({queryKey:["annotations",t]}),await n.refetchQueries({queryKey:["rubric",t]}),e&&e()}catch(r){ZS.error("Failed to start annotation phase. Please try again.")}finally{s(!1)}},disabled:r||!c,size:"lg",className:"bg-gradient-to-r from-amber-600 to-orange-700 hover:from-amber-700 hover:to-orange-800 text-white px-8 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:r?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Starting Annotation..."]}):Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(fv,{className:"w-5 h-5 mr-2"}),"Start Annotation Phase"]})})}),!c&&Mt.jsx("div",{className:"text-center text-sm text-red-600",children:Mt.jsx("p",{children:"A rubric must be created before starting the annotation phase."})}),Mt.jsx("div",{className:"text-center text-sm text-slate-500",children:Mt.jsx("p",{children:"Once started, SMEs will immediately access the annotation interface with the evaluation rubric."})})]})},oW=()=>Mt.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[Mt.jsxs("div",{className:"text-center space-y-3",children:[Mt.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto",children:Mt.jsx(qx,{className:"w-8 h-8 text-white"})}),Mt.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Discovery Phase Pending"}),Mt.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Waiting for the facilitator to start the discovery phase. You'll be able to participate once it begins."}),Mt.jsxs(Lv,{className:"bg-amber-100 text-amber-800 px-3 py-1",children:[Mt.jsx(qx,{className:"w-3 h-3 mr-1"}),"Waiting for Facilitator"]})]}),Mt.jsxs(hx,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(yv,{className:"w-5 h-5 text-blue-600"}),"What You'll Do in Discovery"]}),Mt.jsx(mx,{children:"Here's what you can expect once the discovery phase begins"})]}),Mt.jsx(gx,{className:"space-y-4",children:Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:Mt.jsx(yv,{className:"w-4 h-4 text-blue-600"})}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-semibold text-slate-900",children:"Explore LLM Traces"}),Mt.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Review conversation traces between users and AI assistants to understand response patterns and quality."})]})]}),Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:Mt.jsx(sv,{className:"w-4 h-4 text-green-600"})}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-semibold text-slate-900",children:"Share Quality Insights"}),Mt.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Identify what makes responses effective or ineffective, contributing valuable observations for rubric creation."})]})]}),Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:Mt.jsx(Rv,{className:"w-4 h-4 text-purple-600"})}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-semibold text-slate-900",children:"Collaborate with Team"}),Mt.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Work alongside SMEs and other participants to build a comprehensive understanding of quality criteria."})]})]})]})})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsx(fx,{className:"text-slate-700",children:"Current Workshop Status"})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border-2 border-slate-200",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-3 h-3 bg-amber-400 rounded-full animate-pulse"}),Mt.jsxs("div",{children:[Mt.jsx("p",{className:"font-medium text-slate-900",children:"Awaiting Phase Start"}),Mt.jsx("p",{className:"text-sm text-slate-600",children:"The facilitator will begin discovery when everyone is ready"})]})]}),Mt.jsx(Lv,{variant:"outline",className:"text-amber-700 border-amber-300",children:"Intake Phase"})]})})]}),Mt.jsxs(hx,{className:"border-slate-200",children:[Mt.jsx(px,{children:Mt.jsx(fx,{className:"text-slate-700",children:"While You Wait"})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full mt-2 flex-shrink-0"}),Mt.jsx("p",{children:"This page will automatically update when the discovery phase begins"})]}),Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full mt-2 flex-shrink-0"}),Mt.jsx("p",{children:"Think about what makes a good AI response - you'll be analyzing real examples soon"})]}),Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full mt-2 flex-shrink-0"}),Mt.jsx("p",{children:"The facilitator is preparing the workshop materials and will start when ready"})]})]})})]}),Mt.jsx("div",{className:"text-center text-sm text-slate-500",children:Mt.jsx("p",{children:"Your participation is important - stay tuned for the discovery phase to begin!"})})]}),lW=()=>Mt.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[Mt.jsxs("div",{className:"text-center space-y-3",children:[Mt.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto",children:Mt.jsx(qx,{className:"w-8 h-8 text-white"})}),Mt.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Annotation Phase Pending"}),Mt.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Waiting for the facilitator to start the annotation phase. SMEs will begin rating traces once it begins."}),Mt.jsxs(Lv,{className:"bg-amber-100 text-amber-800 px-3 py-1",children:[Mt.jsx(qx,{className:"w-3 h-3 mr-1"}),"Waiting for Facilitator"]})]}),Mt.jsxs(hx,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-indigo-50",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Nv,{className:"w-5 h-5 text-purple-600"}),"What Happens During Annotation"]}),Mt.jsx(mx,{children:"Understanding the annotation process and your role as an observer"})]}),Mt.jsx(gx,{className:"space-y-4",children:Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:Mt.jsx(Rv,{className:"w-4 h-4 text-blue-600"})}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-semibold text-slate-900",children:"SMEs Lead the Rating Process"}),Mt.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Subject Matter Experts will systematically rate traces using the evaluation rubric created from discovery insights."})]})]}),Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:Mt.jsx($x,{className:"w-4 h-4 text-green-600"})}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-semibold text-slate-900",children:"Structured Evaluation"}),Mt.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Each trace is rated on a 1-5 scale with detailed comments, creating consistent evaluation data for analysis."})]})]}),Mt.jsxs("div",{className:"flex items-start gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0",children:Mt.jsx(Gx,{className:"w-4 h-4 text-amber-600"})}),Mt.jsxs("div",{children:[Mt.jsx("h4",{className:"font-semibold text-slate-900",children:"You Observe & Learn"}),Mt.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"As a participant, you'll observe the annotation process, gaining insights into systematic LLM evaluation methods."})]})]})]})})]}),Mt.jsxs(hx,{className:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50",children:[Mt.jsx(px,{children:Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx($x,{className:"w-5 h-5 text-green-600"}),"Prerequisites for Annotation"]})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-green-200 rounded-lg",children:[Mt.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Mt.jsxs("div",{children:[Mt.jsx("p",{className:"font-medium text-slate-900",children:"Discovery Phase Completed"}),Mt.jsx("p",{className:"text-sm text-slate-600",children:"All participants have contributed insights"})]})]}),Mt.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-green-200 rounded-lg",children:[Mt.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Mt.jsxs("div",{children:[Mt.jsx("p",{className:"font-medium text-slate-900",children:"Evaluation Rubric Created"}),Mt.jsx("p",{className:"text-sm text-slate-600",children:"Facilitator has built rubric from discovery findings"})]})]})]})})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsx(fx,{className:"text-slate-700",children:"Current Workshop Status"})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border-2 border-slate-200",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-3 h-3 bg-amber-400 rounded-full animate-pulse"}),Mt.jsxs("div",{children:[Mt.jsx("p",{className:"font-medium text-slate-900",children:"Preparing for Annotation"}),Mt.jsx("p",{className:"text-sm text-slate-600",children:"The facilitator will start annotation when ready"})]})]}),Mt.jsx(Lv,{variant:"outline",className:"text-amber-700 border-amber-300",children:"Pre-Annotation"})]})})]}),Mt.jsxs(hx,{className:"border-slate-200",children:[Mt.jsx(px,{children:Mt.jsx(fx,{className:"text-slate-700",children:"Your Role During This Phase"})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full mt-2 flex-shrink-0"}),Mt.jsxs("p",{children:[Mt.jsx("strong",{children:"Observe the Process:"})," Watch how SMEs apply the rubric to evaluate traces systematically"]})]}),Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full mt-2 flex-shrink-0"}),Mt.jsxs("p",{children:[Mt.jsx("strong",{children:"Learn Evaluation Methods:"})," Understand how the rubric translates discovery insights into measurable criteria"]})]}),Mt.jsxs("div",{className:"flex items-start gap-2",children:[Mt.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full mt-2 flex-shrink-0"}),Mt.jsxs("p",{children:[Mt.jsx("strong",{children:"Prepare for Results:"})," The annotations will generate Inter-Rater Reliability (IRR) data for analysis"]})]})]})})]}),Mt.jsx("div",{className:"text-center text-sm text-slate-500",children:Mt.jsx("p",{children:"This page will automatically update when the annotation phase begins. Your observations will be valuable for understanding the evaluation process!"})})]}),cW=({phase:e})=>Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsx(hx,{className:"max-w-2xl w-full",children:Mt.jsx(gx,{className:"pt-8 pb-8",children:Mt.jsxs("div",{className:"text-center space-y-6",children:[Mt.jsx("div",{className:"flex justify-center",children:Mt.jsxs("div",{className:"relative",children:[Mt.jsx(uv,{className:"h-20 w-20 text-blue-500"}),Mt.jsx(Rv,{className:"h-10 w-10 text-gray-600 absolute -bottom-2 -right-2"})]})}),Mt.jsxs("div",{className:"space-y-3",children:[Mt.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Facilitator-Led Activity"}),Mt.jsx("p",{className:"text-lg text-gray-600",children:(()=>{switch(e.toLowerCase()){case"intake":return"The facilitator is configuring and loading MLflow traces for the workshop.";case"rubric":return"The facilitator is creating the evaluation criteria for annotations.";case"results":return"The facilitator will present the inter-rater reliability results and insights.";case"judge_tuning":return"The facilitator is fine-tuning the LLM judge based on workshop annotations.";case"dbsql_export":return"The facilitator is exporting the judge configuration to Databricks SQL.";default:return"The facilitator is managing this phase of the workshop."}})()}),Mt.jsx("p",{className:"text-sm text-gray-500",children:"The facilitator will share their screen with the group for this part of the workshop."})]}),Mt.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-sm text-blue-700",children:[" ",Mt.jsx("strong",{children:"Tip:"})," You can participate by providing feedback and asking questions during the screen share."]})]})})})}),uW=({phase:e,onBack:t})=>{const{currentPhase:n}=gg(),r={discovery:{title:"Discovery Phase Paused",description:"The discovery phase has been temporarily paused by the facilitator.",icon:Mt.jsx(hv,{className:"w-8 h-8 text-blue-600"}),color:"blue",nextPhase:"The facilitator will resume discovery or advance to the rubric creation phase."},annotation:{title:"Annotation Phase Paused",description:"The annotation phase has been temporarily paused by the facilitator.",icon:Mt.jsx(hv,{className:"w-8 h-8 text-purple-600"}),color:"purple",nextPhase:"The facilitator will resume annotation or advance to the results phase."}}[e],s={blue:{bg:"from-blue-50 to-indigo-50",border:"border-blue-200",iconBg:"bg-blue-100",text:"text-blue-900",subtext:"text-blue-700",badge:"bg-blue-100 text-blue-700"},purple:{bg:"from-purple-50 to-indigo-50",border:"border-purple-200",iconBg:"bg-purple-100",text:"text-purple-900",subtext:"text-purple-700",badge:"bg-purple-100 text-purple-700"}}[r.color];return Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:Mt.jsxs("div",{className:"max-w-2xl mx-auto",children:[Mt.jsxs(hx,{className:`${s.border} bg-gradient-to-br ${s.bg}`,children:[Mt.jsxs(px,{className:"text-center pb-4",children:[Mt.jsx("div",{className:`w-16 h-16 ${s.iconBg} rounded-full flex items-center justify-center mx-auto mb-4`,children:r.icon}),Mt.jsx(fx,{className:`text-2xl ${s.text}`,children:r.title}),Mt.jsx(mx,{className:`text-base ${s.subtext} mt-2`,children:r.description})]}),Mt.jsxs(gx,{className:"space-y-6",children:[Mt.jsxs("div",{className:"bg-white/70 rounded-lg p-4 space-y-3",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx(zx,{className:"w-5 h-5 text-green-600"}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx("p",{className:"font-medium text-slate-800",children:"Your Contributions Saved"}),Mt.jsxs("p",{className:"text-sm text-slate-600",children:["All your ","discovery"===e?"findings":"annotations"," have been saved successfully."]})]})]}),Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx(qx,{className:"w-5 h-5 text-amber-600"}),Mt.jsxs("div",{className:"flex-1",children:[Mt.jsx("p",{className:"font-medium text-slate-800",children:"Waiting for Facilitator"}),Mt.jsx("p",{className:"text-sm text-slate-600",children:r.nextPhase})]})]})]}),Mt.jsxs("div",{className:"bg-white/50 rounded-lg p-4",children:[Mt.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:"What You Can Do Now"}),Mt.jsxs("ul",{className:"space-y-2 text-sm text-slate-700",children:[Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx("span",{className:"text-slate-400 mt-0.5",children:""}),Mt.jsx("span",{children:"Take a break and wait for the facilitator to resume"})]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx("span",{className:"text-slate-400 mt-0.5",children:""}),Mt.jsx("span",{children:"Stay on this page to be notified when the phase resumes"})]}),Mt.jsxs("li",{className:"flex items-start gap-2",children:[Mt.jsx("span",{className:"text-slate-400 mt-0.5",children:""}),Mt.jsx("span",{children:"The page will automatically update when the phase status changes"})]})]})]}),t&&Mt.jsx("div",{className:"flex justify-center pt-2",children:Mt.jsxs(Gv,{variant:"outline",onClick:t,className:"flex items-center gap-2",children:[Mt.jsx(Nx,{className:"w-4 h-4"}),"Return to Dashboard"]})})]})]}),Mt.jsxs("div",{className:"mt-6 text-center text-sm text-slate-500",children:[Mt.jsx("p",{children:"This page will refresh automatically when the phase status changes."}),Mt.jsx("p",{className:"mt-1",children:"No action is required from you at this time."})]})]})})},dW=({onNavigate:e})=>{var t;const{workshopId:n}=Ym(),{data:r}=ig(n),{data:s}=ug(n),{data:a}=Kp({queryKey:["workshop-users",n],queryFn:()=>Um.listWorkshopUsersUsersWorkshopsWorkshopIdUsersGet(n),enabled:!!n}),i=(null==r?void 0:r.length)||0,o=(null==s?void 0:s.length)||0,l=(null==(t=null==a?void 0:a.users)?void 0:t.length)||0;return Mt.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[Mt.jsxs("div",{className:"text-center space-y-3",children:[Mt.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto",children:Mt.jsx(wv,{className:"w-8 h-8 text-white"})}),Mt.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Workshop Management Dashboard"}),Mt.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Overview and management tools for your workshop"})]}),Mt.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[Mt.jsx(hx,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50",children:Mt.jsx(gx,{className:"p-6",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{children:[Mt.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Traces"}),Mt.jsx("p",{className:"text-2xl font-bold text-blue-900",children:i})]}),Mt.jsx(Yx,{className:"h-8 w-8 text-blue-600"})]})})}),Mt.jsx(hx,{className:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50",children:Mt.jsx(gx,{className:"p-6",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{children:[Mt.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total Annotations"}),Mt.jsx("p",{className:"text-2xl font-bold text-green-900",children:o})]}),Mt.jsx(Nv,{className:"h-8 w-8 text-green-600"})]})})}),Mt.jsx(hx,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-indigo-50",children:Mt.jsx(gx,{className:"p-6",children:Mt.jsxs("div",{className:"flex items-center justify-between",children:[Mt.jsxs("div",{children:[Mt.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Workshop Users"}),Mt.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l})]}),Mt.jsx(Rv,{className:"h-8 w-8 text-purple-600"})]})})})]}),Mt.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Rv,{className:"w-5 h-5 text-blue-600"}),"User Management"]}),Mt.jsx(mx,{children:"Add and manage workshop participants"})]}),Mt.jsx(gx,{children:Mt.jsxs(Gv,{onClick:()=>null==e?void 0:e("user-management"),className:"w-full",children:[Mt.jsx(mv,{className:"w-4 h-4 mr-2"}),"Manage Users"]})})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Tx,{className:"w-5 h-5 text-amber-600"}),"Phase Monitoring"]}),Mt.jsx(mx,{children:"Monitor current phase progress"})]}),Mt.jsxs(gx,{className:"space-y-3",children:[Mt.jsxs(Gv,{variant:"outline",onClick:()=>null==e?void 0:e("discovery"),className:"w-full justify-start",children:[Mt.jsx(Gx,{className:"w-4 h-4 mr-2"}),"Discovery Phase"]}),Mt.jsxs(Gv,{variant:"outline",onClick:()=>null==e?void 0:e("annotation"),className:"w-full justify-start",children:[Mt.jsx(Gx,{className:"w-4 h-4 mr-2"}),"Annotation Phase"]})]})]})]}),Mt.jsxs(hx,{children:[Mt.jsxs(px,{children:[Mt.jsx(fx,{children:"Quick Actions"}),Mt.jsx(mx,{children:"Common workshop management tasks"})]}),Mt.jsxs(gx,{className:"grid md:grid-cols-3 gap-4",children:[Mt.jsxs(Gv,{variant:"outline",onClick:()=>null==e?void 0:e("intake"),children:[Mt.jsx(Yx,{className:"w-4 h-4 mr-2"}),"Intake Phase"]}),Mt.jsxs(Gv,{variant:"outline",onClick:()=>null==e?void 0:e("rubric"),children:[Mt.jsx(Nv,{className:"w-4 h-4 mr-2"}),"Rubric Creation"]}),Mt.jsxs(Gv,{variant:"outline",onClick:()=>null==e?void 0:e("results"),children:[Mt.jsx(Tx,{className:"w-4 h-4 mr-2"}),"Results Review"]})]})]})]})};function hW(){var e,t;const{workshopId:n,setWorkshopId:r}=Ym(),{currentPhase:s,completedPhases:a,setCurrentPhase:i}=gg(),{user:o,setUser:l}=Bm(),{isFacilitator:c}=Hm();$p();const{data:u,error:d}=rg(n||""),{data:h}=cg(n||""),[p,f]=St.useState(!1),[m,g]=St.useState("loading"),x=(e,t,n)=>{if(!e)return"loading";if("facilitator"===e)switch(t){case"intake":return"intake";case"user-management":return"user-management";case"discovery":return n.discovery_started?"discovery-monitor":"discovery-start";case"rubric":return"rubric-create";case"annotation":return n.annotation_started?"annotation-monitor":"annotation-start";case"results":return"results-view";case"judge_tuning":return"judge-tuning";case"unity_volume":return"unity-volume";default:return"dashboard-general"}if(["intake","rubric","results","judge_tuning","unity_volume"].includes(t))return"facilitator-screen-share";const r=e=>{const t=n.completedPhases.includes(e),r="annotation"===e?n.annotation_started:"discovery"!==e||n.discovery_started;return n.currentPhase===e&&!t&&r};switch(t){case"discovery":return r("discovery")?"discovery-participate":"discovery"===n.currentPhase||["rubric","annotation","results","judge_tuning","unity_volume"].includes(n.currentPhase)?"discovery-complete":"discovery-pending";case"annotation":return r("annotation")?"annotation-participate":"annotation"===n.currentPhase||["results","judge_tuning","unity_volume"].includes(n.currentPhase)?"annotation-review":"annotation-pending";default:return"phase-waiting"}},[v,y]=St.useState(!1),b=St.useRef(!1),w=sg();St.useEffect(()=>{var e,t,s,a,i;if(d&&!v&&!b.current){const l="status"in d&&404===d.status||"response"in d&&404===(null==(e=d.response)?void 0:e.status)||d instanceof Error&&(null==(t=d.message)?void 0:t.includes("404")),c="status"in d&&500===d.status||"response"in d&&500===(null==(s=d.response)?void 0:s.status)||d instanceof Error&&(null==(a=d.message)?void 0:a.includes("500"))||d instanceof Error&&(null==(i=d.message)?void 0:i.includes("Internal Server Error"));(l||c)&&n&&(b.current=!0,localStorage.removeItem("workshop_id"),localStorage.removeItem("workshop_user"),Object.keys(localStorage).forEach(e=>{(e.startsWith("workshop_")||e.includes("trace")||e.includes("annotation"))&&localStorage.removeItem(e)}),"facilitator"===(null==o?void 0:o.role)?(y(!0),w.mutateAsync({name:"LLM Judge Calibration Workshop",description:"A collaborative workshop to calibrate LLM judges through structured evaluation and consensus building.",facilitator_id:o.id}).then(e=>{r(e.id),window.history.replaceState({},"",`?workshop=${e.id}`),y(!1),setTimeout(()=>{b.current=!1},1e3)}).catch(e=>{r(null),y(!1),b.current=!1})):(r(null),window.history.replaceState({},"","/")))}},[d,n,null==o?void 0:o.role,v]);const j=St.useRef(null),N=St.useRef(null),k=St.useRef(null);if(St.useEffect(()=>{if(o&&u&&o.role){const e=null!==N.current&&N.current!==o.id,t=null!==k.current&&k.current!==o.role,n=null!==j.current&&j.current!==s,r="loading"===m;if(N.current=o.id,k.current=o.role,!("facilitator"!==o.role||r||n||e||t))return void(j.current=s);let a;j.current=s,a=x(o.role,"intake"===s?"intake":"discovery"===s?"discovery":"rubric"===s?"rubric":"annotation"===s?"annotation":"results"===s?"results":"judge_tuning"===s?"judge_tuning":"unity_volume"===s?"unity_volume":"discovery",{currentPhase:s,completedPhases:u.completed_phases||[],discovery_started:u.discovery_started||!1,annotation_started:u.annotation_started||!1}),g(a)}},[o,u,s,m]),!o)return Mt.jsx(sz,{});const S=n&&n.startsWith("temp-");if(!n||S)return c?Mt.jsx(az,{}):Mt.jsx(sz,{});if(d){if("status"in d&&404===d.status||"response"in d&&404===(null==(e=d.response)?void 0:e.status)||d instanceof Error&&(null==(t=d.message)?void 0:t.includes("404")))return c&&v?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs(hx,{className:"max-w-md",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(wv,{className:"h-5 w-5 text-blue-600 animate-spin"}),"Auto-Recovery in Progress"]}),Mt.jsx(mx,{children:"Creating a new workshop for you..."})]}),Mt.jsxs(gx,{children:[Mt.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The previous workshop ID was invalid. We're automatically creating a new workshop for you."}),Mt.jsxs("div",{className:"text-xs text-gray-500 font-mono bg-gray-100 p-2 rounded mb-4",children:["Previous ID: ",n]}),Mt.jsx("div",{className:"flex items-center justify-center",children:Mt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})]})}):c&&!v?Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs(hx,{className:"max-w-md",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Fx,{className:"h-5 w-5 text-red-600"}),"Workshop Not Found"]}),Mt.jsx(mx,{children:"Clearing invalid workshop data..."})]}),Mt.jsxs(gx,{children:[Mt.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The workshop ID doesn't exist. Redirecting to workshop creation..."}),Mt.jsxs("div",{className:"text-xs text-gray-500 font-mono bg-gray-100 p-2 rounded mb-4",children:["Invalid Workshop ID: ",n]}),Mt.jsx("div",{className:"flex items-center justify-center",children:Mt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})]})]})}):Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:Mt.jsxs(hx,{className:"max-w-md",children:[Mt.jsxs(px,{children:[Mt.jsxs(fx,{className:"flex items-center gap-2",children:[Mt.jsx(Fx,{className:"h-5 w-5 text-red-600"}),"Workshop Not Found"]}),Mt.jsx(mx,{children:"The workshop ID in the URL does not exist"})]}),Mt.jsxs(gx,{children:[Mt.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The workshop you're trying to access doesn't exist or has been deleted. Please contact your workshop facilitator for a valid workshop link."}),Mt.jsxs("div",{className:"text-xs text-gray-500 font-mono bg-gray-100 p-2 rounded",children:["Workshop ID: ",n]})]})]})})}const _=e=>{const t=((e,t)=>x(e,t,{currentPhase:s,completedPhases:(null==u?void 0:u.completed_phases)||[],discovery_started:(null==u?void 0:u.discovery_started)||!1,annotation_started:(null==u?void 0:u.annotation_started)||!1}))(null==o?void 0:o.role,e);g(t)};return Mt.jsxs("div",{className:"h-screen flex overflow-hidden bg-background",children:[Mt.jsx(OF,{onNavigate:_,showUserSwitching:true}),Mt.jsxs("div",{className:"flex-1 flex flex-col min-w-0 h-screen overflow-hidden",children:[Mt.jsx(Fv,{showDescription:!0,showPhase:!0,showParticipantCount:!1,variant:"default"}),Mt.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:"loading"!==m&&(null==o?void 0:o.role)?(()=>{switch(m){case"intake":return Mt.jsx(uA,{});case"intake-waiting":return Mt.jsx(uz,{});case"facilitator-screen-share":return Mt.jsx(cW,{phase:s});case"discovery-start":return Mt.jsx(aW,{onStartDiscovery:()=>{f(!0),g("discovery-monitor")}});case"discovery-pending":return Mt.jsx(oW,{});case"discovery-monitor":return Mt.jsx(nz,{onNavigate:_,focusPhase:"discovery"});case"discovery-participate":case"trace-viewer":return Mt.jsx(SC,{});case"discovery-complete":return Mt.jsx(uW,{phase:"discovery",onBack:"facilitator"===(null==o?void 0:o.role)?()=>_("discovery"):void 0});case"annotation-start":return Mt.jsx(iW,{onStartAnnotation:()=>{f(!0),g("annotation-monitor")}});case"annotation-pending":return Mt.jsx(lW,{});case"rubric-create":return Mt.jsx(DC,{});case"rubric-waiting":return Mt.jsx(iz,{});case"rubric-view":return Mt.jsx(oz,{});case"annotation-monitor":return Mt.jsx(nz,{onNavigate:_,focusPhase:"annotation"});case"annotation-participate":return Mt.jsx(AC,{});case"annotation-waiting":return Mt.jsx(lz,{});case"annotation-complete":case"results-view":return Mt.jsx(ZC,{});case"annotation-review":return Mt.jsx(uW,{phase:"annotation",onBack:"facilitator"===(null==o?void 0:o.role)?()=>_("annotation"):void 0});case"results-waiting":case"phase-complete":case"phase-waiting":case"phase-not-started":return Mt.jsx(cz,{});case"judge-tuning":return Mt.jsx(wD,{});case"dbsql-export":return Mt.jsx(jD,{});case"unity-volume":return Mt.jsx(ND,{});case"findings-review":return Mt.jsx(kD,{onBack:()=>g("discovery-monitor")});case"assign-annotations":return Mt.jsx(ez,{});case"user-management":return Mt.jsx(rz,{});case"dashboard-general":return Mt.jsx(dW,{onNavigate:_});case"loading":return Mt.jsx("div",{className:"flex items-center justify-center h-full",children:Mt.jsx("div",{className:"text-gray-500",children:"Loading..."})});default:return Mt.jsx("div",{className:"flex items-center justify-center h-full",children:Mt.jsx("div",{className:"text-gray-500",children:"Please select a user to continue"})})}})():Mt.jsx("div",{className:"h-full flex items-center justify-center",children:Mt.jsxs("div",{className:"text-center text-slate-500",children:[Mt.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Mt.jsx(wv,{className:"h-8 w-8 text-slate-400"})}),Mt.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Loading..."}),Mt.jsx("p",{className:"text-sm",children:"Setting up your workspace"})]})})})]})]})}const pW=[{id:"trace-1",input:'{"question": "How many unique contacts were delivered an email that contains \'nurture\' in FY26, grouped by month"}',output:'{"result": [{"calendar_year_month": "2025-02", "unique_contacts_delivered_nurture_email": "28224"}, {"calendar_year_month": "2025-03", "unique_contacts_delivered_nurture_email": "21312"}, {"calendar_year_month": "2025-04", "unique_contacts_delivered_nurture_email": "60221"}, {"calendar_year_month": "2025-05", "unique_contacts_delivered_nurture_email": "41836"}, {"calendar_year_month": "2025-06", "unique_contacts_delivered_nurture_email": "49578"}, {"calendar_year_month": "2025-07", "unique_contacts_delivered_nurture_email": "104545"}, {"calendar_year_month": "2025-08", "unique_contacts_delivered_nurture_email": "92252"}, {"calendar_year_month": "2025-09", "unique_contacts_delivered_nurture_email": "8870"}], "query_text": "SELECT \\n calendar_year_month, \\n COUNT(DISTINCT audience_id) AS unique_contacts_delivered_nurture_email\\nFROM \\n main.marketing_lakehouse_silver.gs_engagements\\nWHERE \\n fiscal_year = 2026\\n AND engagement_type = \'Email Deliver\'\\n AND is_nurture_email_engagement = TRUE\\nGROUP BY \\n calendar_year_month\\nORDER BY \\n calendar_year_month ASC"}',mlflow_trace_id:"mlflow-12345"},{id:"trace-2",input:'{"question": "What is the audience persona of Chief Digital Officer as job title?"}',output:'{"result": [{"audience_persona": "Business Execs"}, {"audience_persona": "Data Engineer"}, {"audience_persona": "CDO"}, {"audience_persona": "CMO"}, {"audience_persona": "CTO"}, {"audience_persona": "Data Architect"}, {"audience_persona": "Unprioritized"}, {"audience_persona": "CIO"}], "query_text": "SELECT DISTINCT `gs_contacts`.`audience_persona`\\nFROM `main`.`marketing_lakehouse_silver`.`gs_contacts`\\nWHERE `gs_contacts`.`job_title_english` ILIKE \'%Chief Digital Officer%\'\\n  AND `gs_contacts`.`audience_persona` IS NOT NULL"}',mlflow_trace_id:"mlflow-67890"},{id:"trace-3",input:'{"question": "What are the top 20 salesforce campaigns for the audience_persona Data Analysts by U2 generation in FY26 H1?"}',output:'{"result": [{"engagement_sfdc_campaign_name": "FY240626-Ondemandtraining-GLOB-GenerativeAIFundamentals", "total_u2_units": "1.0775893023237586"}, {"engagement_sfdc_campaign_name": "FY261101-EV-Data+AISummit-2025", "total_u2_units": "0.7277024984359741"}, {"engagement_sfdc_campaign_name": "FY260513-IF-Energy-ExecRT-Sydney", "total_u2_units": "0.5238495022058487"}], "query_text": "WITH filtered_attribution AS (\\n  SELECT a.engagement_id, a.audience_id, a.u2_unit\\n  FROM main.marketing_lakehouse_silver.gs_attribution a\\n  WHERE a.fiscal_year = 2026\\n    AND a.fiscal_month_relative BETWEEN 0 AND 5\\n    AND a.u2_unit > 0\\n),\\njoined_data AS (\\n  SELECT fa.engagement_id, fa.audience_id, fa.u2_unit, e.engagement_sfdc_campaign_name, c.audience_persona\\n  FROM filtered_attribution fa\\n  JOIN main.marketing_lakehouse_silver.gs_engagements e ON fa.engagement_id = e.engagement_id\\n  JOIN main.marketing_lakehouse_silver.gs_contacts c ON fa.audience_id = c.audience_id\\n  WHERE c.audience_persona = \'Data Analyst\'\\n    AND e.engagement_sfdc_campaign_name IS NOT NULL\\n)\\nSELECT \\n  engagement_sfdc_campaign_name,\\n  SUM(u2_unit) AS total_u2_units\\nFROM joined_data\\nGROUP BY engagement_sfdc_campaign_name\\nORDER BY total_u2_units DESC\\nLIMIT 20"}',mlflow_trace_id:"mlflow-11111"}];function fW(){return Mt.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:Mt.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[Mt.jsxs("div",{className:"text-center",children:[Mt.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Trace Data Viewer Demo"}),Mt.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"This demo shows how trace data with JSON results can be displayed as formatted tables, with SQL queries properly formatted and downloadable. Perfect for workshop participants to analyze trace outputs."})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsx(fx,{className:"text-xl",children:"Features"})}),Mt.jsx(gx,{children:Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[Mt.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[Mt.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Data Tables"}),Mt.jsx("p",{className:"text-sm text-blue-700",children:"Convert JSON results into readable tables with proper headers"})]}),Mt.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[Mt.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:" Export Options"}),Mt.jsx("p",{className:"text-sm text-green-700",children:"Download data as CSV and SQL queries as .sql files"})]}),Mt.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[Mt.jsx("h3",{className:"font-semibold text-purple-900 mb-2",children:" Copy & Paste"}),Mt.jsx("p",{className:"text-sm text-purple-700",children:"Easy copying of data, queries, and JSON for further analysis"})]})]})})]}),Mt.jsxs("div",{className:"space-y-6",children:[Mt.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sample Trace Data"}),pW.map((e,t)=>Mt.jsxs("div",{className:"space-y-4",children:[Mt.jsxs("div",{className:"flex items-center gap-3",children:[Mt.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-semibold",children:t+1}),Mt.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Trace ",e.id]}),e.mlflow_trace_id&&Mt.jsxs("span",{className:"text-sm text-gray-500",children:["MLflow: ",e.mlflow_trace_id]})]}),Mt.jsx(vC,{trace:e,showContext:!0,className:"shadow-sm"})]},e.id))]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsx(fx,{className:"text-xl",children:"How to Use"})}),Mt.jsx(gx,{className:"space-y-4",children:Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Mt.jsxs("div",{children:[Mt.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"For Workshop Participants"}),Mt.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[Mt.jsx("li",{children:" View trace results in organized tables"}),Mt.jsx("li",{children:" Copy data for further analysis"}),Mt.jsx("li",{children:" Download results as CSV files"}),Mt.jsx("li",{children:" Examine SQL queries for learning"})]})]}),Mt.jsxs("div",{children:[Mt.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"For Facilitators"}),Mt.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[Mt.jsx("li",{children:" Review trace outputs easily"}),Mt.jsx("li",{children:" Export data for external analysis"}),Mt.jsx("li",{children:" Share SQL queries with participants"}),Mt.jsx("li",{children:" Monitor trace quality and structure"})]})]})]})})]}),Mt.jsxs(hx,{children:[Mt.jsx(px,{children:Mt.jsx(fx,{className:"text-xl",children:"Integration"})}),Mt.jsxs(gx,{children:[Mt.jsx("p",{className:"text-gray-600 mb-4",children:"This component can be integrated into your existing workshop pages to display trace data in a user-friendly format. It automatically detects JSON structure and creates appropriate tables and SQL formatting."}),Mt.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:Mt.jsx("code",{className:"text-sm text-gray-800",children:"import { TraceDataViewer } from '@/components/TraceDataViewer';\n\n<TraceDataViewer \n  trace={traceData} \n  showContext={true}\n  className=\"your-custom-classes\"\n/>"})})]})]})]})})}const mW=new Mp;function gW(){return Mt.jsx(qp,{client:mW,children:Mt.jsx(Vm,{children:Mt.jsx(Gm,{children:Mt.jsxs(mg,{children:[Mt.jsx(wm,{children:Mt.jsxs(Zf,{children:[Mt.jsx(Jf,{path:"/",element:Mt.jsx(hW,{})}),Mt.jsx(Jf,{path:"/trace-viewer-demo",element:Mt.jsx(fW,{})})]})}),Mt.jsx(o_,{position:"top-right",expand:!0,richColors:!0,closeButton:!0})]})})})})}const xW=new Mp({defaultOptions:{queries:{staleTime:0,cacheTime:3e5,refetchOnWindowFocus:!0,refetchOnMount:!0,retry:1}}});At.createRoot(document.getElementById("root")).render(Mt.jsx(St.StrictMode,{children:Mt.jsx(qp,{client:xW,children:Mt.jsx(gW,{})})}));
